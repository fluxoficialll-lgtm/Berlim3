import{u as e,r as a,c as n,j as s}from"./index-DHTLMDH8.js";import{r}from"./reelsService-JonFHPfl.js";import"./MarketEngine-BDpNjeDI.js";import"./postService-D2IH4U_j.js";const i=()=>{const i=e(),[t,o]=a.useState(""),[l,c]=a.useState("relevant"),[d,p]=a.useState([]),[x,f]=a.useState(!1),[h,u]=a.useState(void 0);return a.useEffect(()=>{const e=n.getCurrentUserEmail();e&&u(e)},[]),a.useEffect(()=>{f(!0);const e=setTimeout(()=>{const e=r.searchReels(t,l,h);p(e),f(!1)},400);return()=>clearTimeout(e)},[t,l,h]),s.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white font-['Inter'] flex flex-col overflow-x-hidden",children:[s.jsx("style",{children:"\n        /* Header Search */\n        header {\n            display: flex; flex-direction: column; gap: 10px; padding: 16px 20px;\n            background: #0c0f14; position: fixed; width: 100%; z-index: 20;\n            border-bottom: 1px solid rgba(255, 255, 255, 0.1); top: 0;\n        }\n        .top-row {\n            display: flex; align-items: center; gap: 15px; width: 100%;\n        }\n        header button.back-btn {\n            background: none; border: none; color: #00c2ff; font-size: 20px; cursor: pointer;\n        }\n        .search-input-wrapper {\n            flex-grow: 1; position: relative;\n        }\n        .search-input-wrapper i {\n            position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #aaa;\n        }\n        .search-input-wrapper input {\n            width: 100%; padding: 10px 12px 10px 40px; background: #1a1e26;\n            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px;\n            color: #fff; font-size: 14px; outline: none; transition: 0.3s;\n        }\n        .search-input-wrapper input:focus {\n            border-color: #00c2ff; box-shadow: 0 0 10px rgba(0, 194, 255, 0.2);\n        }\n\n        /* Filters Bar */\n        .filters-row {\n            display: flex; gap: 8px; overflow-x: auto; width: 100%; padding-bottom: 5px;\n            scrollbar-width: none; -webkit-overflow-scrolling: touch;\n        }\n        .filters-row::-webkit-scrollbar { display: none; }\n        \n        .filter-chip {\n            padding: 6px 14px; border-radius: 20px; font-size: 12px; font-weight: 600;\n            background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);\n            color: #aaa; white-space: nowrap; cursor: pointer; transition: 0.3s;\n            display: flex; align-items: center; gap: 5px;\n        }\n        .filter-chip:hover { background: rgba(255, 255, 255, 0.1); color: #fff; }\n        .filter-chip.active {\n            background: #00c2ff; color: #000; border-color: #00c2ff; box-shadow: 0 0 10px rgba(0, 194, 255, 0.3);\n        }\n\n        /* Grid Layout */\n        main {\n            padding-top: 120px; padding-bottom: 20px; width: 100%;\n        }\n        .reels-grid {\n            display: grid;\n            grid-template-columns: repeat(2, 1fr); /* 2 Colunas tipo TikTok */\n            gap: 8px;\n            padding: 0 8px;\n        }\n        \n        .reel-card {\n            position: relative;\n            width: 100%;\n            aspect-ratio: 9/16; /* Formato Vertical */\n            background: #1a1e26;\n            border-radius: 8px;\n            overflow: hidden;\n            cursor: pointer;\n            border: 1px solid rgba(255, 255, 255, 0.05);\n        }\n        \n        .reel-card video {\n            width: 100%; height: 100%; object-fit: cover;\n        }\n        \n        .card-overlay {\n            position: absolute; bottom: 0; left: 0; width: 100%;\n            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);\n            padding: 10px;\n            display: flex; flex-direction: column; justify-content: flex-end;\n        }\n        \n        .overlay-stats {\n            display: flex; align-items: center; gap: 10px; font-size: 11px; font-weight: 600; color: #ddd;\n        }\n        .reel-desc-snippet {\n            font-size: 12px; color: #fff; margin-bottom: 4px; font-weight: 500;\n            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\n        }\n        .play-icon-center {\n            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);\n            font-size: 30px; color: rgba(255, 255, 255, 0.8); opacity: 0.7;\n        }\n        \n        .watched-badge {\n            position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.6);\n            padding: 2px 6px; border-radius: 4px; font-size: 10px; color: #aaa;\n            display: flex; align-items: center; gap: 3px;\n        }\n      "}),s.jsxs("header",{children:[s.jsxs("div",{className:"top-row",children:[s.jsx("button",{className:"back-btn",onClick:()=>i("/reels"),children:s.jsx("i",{className:"fa-solid fa-arrow-left"})}),s.jsxs("div",{className:"search-input-wrapper",children:[s.jsx("i",{className:"fa-solid "+(x?"fa-circle-notch fa-spin":"fa-magnifying-glass")}),s.jsx("input",{type:"text",placeholder:"Buscar vídeos...",value:t,onChange:e=>o(e.target.value),autoFocus:!0})]})]}),s.jsxs("div",{className:"filters-row",children:[s.jsxs("button",{className:"filter-chip "+("relevant"===l?"active":""),onClick:()=>c("relevant"),children:[s.jsx("i",{className:"fa-solid fa-fire"})," Relevantes"]}),s.jsxs("button",{className:"filter-chip "+("recent"===l?"active":""),onClick:()=>c("recent"),children:[s.jsx("i",{className:"fa-regular fa-clock"})," Recentes"]}),s.jsxs("button",{className:"filter-chip "+("watched"===l?"active":""),onClick:()=>c("watched"),children:[s.jsx("i",{className:"fa-regular fa-eye"})," Assistidos"]}),s.jsxs("button",{className:"filter-chip "+("unwatched"===l?"active":""),onClick:()=>c("unwatched"),children:[s.jsx("i",{className:"fa-regular fa-eye-slash"})," Não Assistidos"]}),s.jsxs("button",{className:"filter-chip "+("liked"===l?"active":""),onClick:()=>c("liked"),children:[s.jsx("i",{className:"fa-solid fa-heart"})," Curtidos"]})]})]}),s.jsx("main",{children:x&&0===d.length?s.jsx("div",{className:"flex justify-center items-center h-40",children:s.jsx("div",{className:"text-[#00c2ff]",children:"Buscando..."})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"reels-grid",children:d.map(e=>{var a;const n=h&&(null==(a=e.viewedBy)?void 0:a.includes(h));return s.jsxs("div",{className:"reel-card",onClick:()=>i(`/reels/${e.id}`),children:[s.jsx("video",{src:e.video,muted:!0,playsInline:!0,loop:!0,onMouseOver:e=>e.currentTarget.play(),onMouseOut:e=>e.currentTarget.pause()}),n&&s.jsxs("div",{className:"watched-badge",children:[s.jsx("i",{className:"fa-solid fa-check"})," Visto"]}),s.jsx("div",{className:"play-icon-center",children:s.jsx("i",{className:"fa-regular fa-circle-play"})}),s.jsxs("div",{className:"card-overlay",children:[s.jsx("div",{className:"reel-desc-snippet",children:e.title||e.text}),s.jsxs("div",{className:"overlay-stats",children:[s.jsxs("span",{children:[s.jsx("i",{className:"fa-regular fa-eye"})," ",e.views]}),s.jsxs("span",{children:[s.jsx("i",{className:"fa-solid fa-heart",style:{color:e.liked?"#ff4d4d":"inherit"}})," ",e.likes]})]})]})]},e.id)})}),0===d.length&&!x&&s.jsxs("div",{className:"text-center text-gray-500 mt-10 p-5",children:[s.jsx("i",{className:"fa-solid fa-video-slash text-4xl mb-3 opacity-50"}),s.jsx("p",{children:t?"Nenhum vídeo encontrado para sua busca.":"Nenhum vídeo encontrado nesta categoria."})]})]})})]})};export{i as ReelsSearch};

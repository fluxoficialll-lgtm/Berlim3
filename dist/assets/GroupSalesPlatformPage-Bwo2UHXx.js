import{j as e,u as a,f as t,e as s,r as l}from"./index-DHTLMDH8.js";import{u as r}from"./useGroupSettings-D3bIAl4s.js";import{O as i,C as n}from"./ChannelOptionsModal-BD3LkABJ.js";const o=({enabled:a,onToggle:t})=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 shadow-xl relative overflow-hidden animate-fade-in",children:[a&&e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00c2ff] to-transparent opacity-50"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center transition-colors "+(a?"bg-[#00c2ff1a] text-[#00c2ff]":"bg-white/5 text-gray-600"),children:e.jsx("i",{className:"fa-solid fa-cubes-stacked"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-white mb-1",children:"Status do Hub"}),e.jsx("p",{className:"text-[10px] uppercase font-black tracking-widest "+(a?"text-[#00ff82]":"text-gray-500"),children:a?"Estrutura Ativa":"Modo Desativado"})]})]}),e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:t}),e.jsx("span",{className:"slider-switch"})]})]})]}),c=({sections:a,onSectionsChange:t,onOptions:s})=>{const l=(e,s)=>{t(((e,a,t)=>{const s=[...e],l="up"===t?a-1:a+1;return l<0||l>=s.length||([s[a],s[l]]=[s[l],s[a]]),s})(a,e,s))};return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsx("header",{className:"flex items-center justify-between px-1",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tighter",children:"Estrutura da Vitrine"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Categorias com pastas de conteúdo e canais de chat."})]})}),e.jsxs("div",{className:"space-y-6",children:[a.map((r,i)=>{var n,o;return e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-[32px] p-6 animate-slide-up relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsxs("div",{className:"flex flex-col gap-1 mr-1",children:[e.jsx("button",{onClick:()=>l(i,"up"),disabled:0===i,className:"w-8 h-8 rounded-lg bg-white/5 text-[#00c2ff] disabled:opacity-10",children:e.jsx("i",{className:"fa-solid fa-chevron-up text-[10px]"})}),e.jsx("button",{onClick:()=>l(i,"down"),disabled:i===a.length-1,className:"w-8 h-8 rounded-lg bg-white/5 text-[#00c2ff] disabled:opacity-10",children:e.jsx("i",{className:"fa-solid fa-chevron-down text-[10px]"})})]}),e.jsx("input",{type:"text",className:"flex-1 bg-white/5 border border-white/10 rounded-xl p-3 text-white font-black text-sm uppercase tracking-widest outline-none focus:border-[#00c2ff]",placeholder:"Nome da Categoria",value:r.title,onChange:e=>{return s=r.id,l=e.target.value,void t(a.map(e=>e.id===s?{...e,title:l}:e));var s,l}}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>s(r,"section"),className:"text-gray-400 hover:text-[#00c2ff] p-2",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})}),e.jsx("button",{onClick:()=>{return e=r.id,void(confirm("Deseja apagar toda esta categoria, suas pastas e canais?")&&t(a.filter(a=>a.id!==e)));var e},className:"w-11 h-11 rounded-xl bg-red-500/10 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-colors",title:"Excluir Categoria",children:e.jsx("i",{className:"fa-solid fa-trash-can text-sm"})})]})]}),e.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-white/5 ml-4",children:[null==(n=r.folders)?void 0:n.map(l=>e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-3 rounded-2xl border border-white/5 group hover:border-white/20 transition-all",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#00c2ff]/10 flex items-center justify-center text-[#00c2ff] text-[10px]",children:e.jsx("i",{className:"fa-solid fa-folder"})}),e.jsx("input",{type:"text",className:"flex-1 bg-transparent border-none text-white font-bold text-sm outline-none",placeholder:"Nome da Pasta",value:l.name,onChange:e=>{return s=r.id,i=l.id,n=e.target.value,void t(a.map(e=>e.id===s?{...e,folders:(e.folders||[]).map(e=>e.id===i?{...e,name:n}:e)}:e));var s,i,n}}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>s(l,"folder"),className:"text-gray-500 hover:text-[#00c2ff] p-2",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical text-xs"})}),e.jsx("button",{onClick:()=>{return e=r.id,s=l.id,void t(a.map(a=>a.id===e?{...a,folders:(a.folders||[]).filter(e=>e.id!==s)}:a));var e,s},className:"text-red-400/40 hover:text-red-500 p-2 transition-colors",title:"Excluir Pasta",children:e.jsx("i",{className:"fa-solid fa-trash-can text-xs"})})]})]},l.id)),null==(o=r.channels)?void 0:o.map(l=>e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-3 rounded-2xl border border-[#00ff821a] group hover:border-[#00ff8233] transition-all",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#00ff82]/10 flex items-center justify-center text-[#00ff82] text-[10px]",children:e.jsx("i",{className:"fa-solid fa-hashtag"})}),e.jsx("input",{type:"text",className:"flex-1 bg-transparent border-none text-white font-bold text-sm outline-none",placeholder:"Nome do Canal",value:l.name,onChange:e=>{return s=r.id,i=l.id,n=e.target.value,void t(a.map(e=>{var a;return e.id===s?{...e,channels:null==(a=e.channels)?void 0:a.map(e=>e.id===i?{...e,name:n}:e)}:e}));var s,i,n}}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>s(l,"channel"),className:"text-gray-500 hover:text-[#00ff82] p-2",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical text-xs"})}),e.jsx("button",{onClick:()=>{return e=r.id,s=l.id,void t(a.map(a=>{var t;return a.id===e?{...a,channels:null==(t=a.channels)?void 0:t.filter(e=>e.id!==s)}:a}));var e,s},className:"text-red-400/40 hover:text-red-500 p-2 transition-colors",title:"Excluir Canal",children:e.jsx("i",{className:"fa-solid fa-trash-can text-xs"})})]})]},l.id)),(!r.folders||0===r.folders.length)&&(!r.channels||0===r.channels.length)&&e.jsx("div",{className:"py-4 text-center opacity-20",children:e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Seção Vazia - Clique nos 3 pontos para adicionar"})})]})]},r.id)}),e.jsxs("button",{onClick:()=>{const e={id:`sec_${Date.now()}`,title:"Nova Categoria",folders:[],channels:[]};t([...a,e])},className:"w-full py-8 border-2 border-dashed border-white/5 rounded-[40px] flex flex-col items-center justify-center gap-3 text-gray-600 hover:text-[#00c2ff] hover:border-[#00c2ff33] transition-all group mt-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center group-hover:bg-[#00c2ff1a]",children:e.jsx("i",{className:"fa-solid fa-plus text-xl transition-transform group-hover:scale-110"})}),e.jsx("span",{className:"text-[11px] font-black uppercase tracking-[4px]",children:"Adicionar Nova Categoria"})]})]})]})},d=()=>e.jsx("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-2xl",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-yellow-500 mt-1"}),e.jsxs("p",{className:"text-[11px] text-gray-400 leading-relaxed",children:["Ao ativar o ",e.jsx("strong",{children:"Modo Hub"}),", este grupo abandona o formato de chat linear e passa a exibir uma interface organizada em categorias, pastas de conteúdo e canais de interação específicos."]})]})}),x=({isOpen:a,onClose:t,title:s,type:l,target:r,onUpdateFolder:n,onAddFolderInside:o,onAddChannelInside:c})=>{if(!a)return null;const d="section"===l,x=r;return e.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-6 backdrop-blur-md bg-black/80 animate-fade-in",onClick:t,children:e.jsxs("div",{className:"bg-[#1a1e26] border border-white/10 rounded-[40px] w-full max-w-sm overflow-hidden shadow-2xl animate-pop-in flex flex-col max-h-[85vh]",onClick:e=>e.stopPropagation(),children:[e.jsxs("header",{className:"p-6 border-b border-white/5 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-[#00c2ff] uppercase tracking-[3px]",children:d?"Gerenciar Categoria":"Configurações da Pasta"}),e.jsx("h3",{className:"text-base font-bold text-white truncate max-w-[200px]",children:s})]}),e.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-white hover:bg-white/10 transition-colors active:scale-90",children:e.jsx("i",{className:"fa-solid fa-xmark"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8 no-scrollbar pb-10",children:[d&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px] ml-1 mb-2",children:"Adicionar Conteúdo"}),e.jsxs("button",{onClick:()=>{null==o||o(),t()},className:"w-full py-5 bg-[#00c2ff1a] border border-[#00c2ff33] text-[#00c2ff] font-black rounded-[24px] uppercase text-[11px] tracking-[2px] hover:bg-[#00c2ff2a] transition-all flex items-center justify-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-folder-plus text-lg"}),"Criar Pastas"]}),e.jsxs("button",{onClick:()=>{null==c||c(),t()},className:"w-full py-5 bg-white/5 border border-white/10 text-white font-black rounded-[24px] uppercase text-[11px] tracking-[2px] hover:bg-white/10 transition-all flex items-center justify-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-hashtag text-lg"}),"Criar Canais"]})]}),!d&&n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px] ml-1 mb-2",children:"Permissões de Acesso"}),e.jsx(i,{label:"Permitir Download",sublabel:"Membros podem baixar arquivos",icon:"fa-cloud-arrow-down",checked:!!x.allowDownload,onChange:()=>n({allowDownload:!x.allowDownload})}),e.jsx(i,{label:"Upload de Membros",sublabel:"Membros podem enviar arquivos",icon:"fa-upload",checked:!!x.allowMemberUpload,onChange:()=>n({allowMemberUpload:!x.allowMemberUpload})})]}),e.jsx("div",{className:"h-px bg-white/5 mx-2"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px] ml-1",children:"Descrição Curta"}),e.jsx("textarea",{value:x.description||"",onChange:e=>n({description:e.target.value}),placeholder:"Ex: Biblioteca de arquivos de apoio...",className:"w-full bg-white/5 border border-white/5 rounded-2xl p-4 text-xs text-white outline-none focus:border-[#00c2ff] resize-none min-h-[80px]"})]})]})]}),e.jsx("div",{className:"p-4 bg-[#0c0f14] border-t border-white/5 shrink-0",children:e.jsx("button",{onClick:t,className:"w-full py-4 bg-white/5 text-gray-400 font-black rounded-2xl uppercase text-[10px] tracking-[2px] hover:text-white transition-all active:scale-95",children:"Concluído"})})]})})},f=()=>{const i=a(),{id:f}=t(),{group:p,loading:m,handleSave:h,form:u}=r(),{showPrompt:b}=s(),[g,j]=l.useState({isOpen:!1,target:null,type:"folder"});if(m||!p)return e.jsx("div",{className:"min-h-screen bg-[#0c0f14] flex items-center justify-center text-white",children:e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-2xl text-[#00c2ff]"})});return e.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-white font-['Inter'] flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex items-center p-4 bg-[#0c0f14] border-b border-white/10 h-[65px] sticky top-0 z-50",children:[e.jsx("button",{onClick:()=>i(`/group-settings/${f}`),className:"mr-4 text-white text-xl",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})}),e.jsx("h1",{className:"font-bold",children:"Configuração do Modo Hub"})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-5 max-w-[600px] mx-auto w-full pb-32 no-scrollbar",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(o,{enabled:u.isSalesPlatformEnabled,onToggle:async()=>{u.setIsSalesPlatformEnabled(!u.isSalesPlatformEnabled)}}),u.isSalesPlatformEnabled&&e.jsx(c,{sections:u.salesPlatformSections,onSectionsChange:u.setSalesPlatformSections,onOptions:(e,a)=>{j({isOpen:!0,target:e,type:a})}}),e.jsx("div",{className:"mt-2",children:e.jsx(d,{})})]}),e.jsx("button",{className:"btn-save-fixed",onClick:h,children:"Salvar Estrutura do Hub"})]}),g.isOpen&&"channel"===g.type&&e.jsx(n,{isOpen:g.isOpen,onClose:()=>j({...g,isOpen:!1}),title:g.target.name,type:"channel",target:g.target,onUpdateChannel:e=>{if("channel"!==g.type||!g.target)return;const a=g.target.id,t=u.salesPlatformSections.map(t=>{var s;return{...t,channels:null==(s=t.channels)?void 0:s.map(t=>t.id===a?{...t,...e}:t)}});u.setSalesPlatformSections(t),j(a=>({...a,target:{...a.target,...e}}))}}),g.isOpen&&("folder"===g.type||"section"===g.type)&&e.jsx(x,{isOpen:g.isOpen,onClose:()=>j({...g,isOpen:!1}),title:g.target.name||g.target.title,type:g.type,target:g.target,onUpdateFolder:e=>{if("folder"!==g.type||!g.target)return;const a=g.target.id,t=u.salesPlatformSections.map(t=>({...t,folders:t.folders.map(t=>t.id===a?{...t,...e}:t)}));u.setSalesPlatformSections(t),j(a=>({...a,target:{...a.target,...e}}))},onAddFolderInside:async()=>{if("section"!==g.type||!g.target)return;const e=g.target.id,a=await b("Nome da Pasta","Ex: Material Complementar");if(!a)return;const t={id:`fold_${Date.now()}`,name:a,itemsCount:0,allowDownload:!0,allowMemberUpload:!1},s=u.salesPlatformSections.map(a=>a.id===e?{...a,folders:[...a.folders,t]}:a);u.setSalesPlatformSections(s)},onAddChannelInside:async()=>{if("section"!==g.type||!g.target)return;const e=g.target.id,a=await b("Nome do Canal de Chat","Ex: Suporte VIP");if(!a)return;const t={id:`ch_plt_${Date.now()}`,name:a,onlyAdminsPost:!1,type:"text"},s=u.salesPlatformSections.map(a=>a.id===e?{...a,channels:[...a.channels||[],t]}:a);u.setSalesPlatformSections(s)}}),e.jsx("div",{className:"text-center opacity-10 text-[8px] uppercase font-black tracking-[3px] mb-8",children:"Flux Hub Engine v4.3"})]})};export{f as GroupSalesPlatformPage};

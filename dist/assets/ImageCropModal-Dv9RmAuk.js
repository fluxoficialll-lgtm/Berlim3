import{r as e,j as n}from"./index-DHTLMDH8.js";const t=({isOpen:t,imageSrc:s,onClose:a,onSave:o})=>{const[r,i]=e.useState(1),[c,l]=e.useState({x:0,y:0}),[x,d]=e.useState(!1),[u,m]=e.useState({x:0,y:0}),p=e.useRef(null),f=e.useRef(null);if(e.useEffect(()=>{t&&(i(1),l({x:0,y:0}))},[t,s]),!t)return null;const h=e=>{d(!0);const n="touches"in e?e.touches[0].clientX:e.clientX,t="touches"in e?e.touches[0].clientY:e.clientY;m({x:n-c.x,y:t-c.y})},g=e=>{if(!x)return;const n="touches"in e?e.touches[0].clientX:e.clientX,t="touches"in e?e.touches[0].clientY:e.clientY;l({x:n-u.x,y:t-u.y})},b=()=>d(!1);return n.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col animate-fade-in touch-none",children:[n.jsx("style",{children:"\n                .crop-mask {\n                    position: absolute;\n                    inset: 0;\n                    pointer-events: none;\n                    background: radial-gradient(circle 140px at center, transparent 100%, rgba(0,0,0,0.7) 100%);\n                    border: 2px solid rgba(0, 194, 255, 0.3);\n                    border-radius: 50%;\n                    width: 280px;\n                    height: 280px;\n                    margin: auto;\n                    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.8);\n                }\n                .image-container {\n                    flex: 1;\n                    position: relative;\n                    overflow: hidden;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    background: #050505;\n                }\n                .draggable-img {\n                    max-width: none;\n                    cursor: move;\n                    user-select: none;\n                    touch-action: none;\n                }\n                .crop-footer {\n                    background: #0c0f14;\n                    padding: 30px 20px;\n                    border-top: 1px solid rgba(255,255,255,0.1);\n                }\n                .zoom-slider {\n                    width: 100%;\n                    height: 6px;\n                    -webkit-appearance: none;\n                    background: #1e2531;\n                    border-radius: 3px;\n                    outline: none;\n                    margin-bottom: 25px;\n                }\n                .zoom-slider::-webkit-slider-thumb {\n                    -webkit-appearance: none;\n                    width: 24px;\n                    height: 24px;\n                    background: #00c2ff;\n                    border-radius: 50%;\n                    cursor: pointer;\n                }\n            "}),n.jsxs("header",{className:"flex justify-between items-center p-5 bg-[#0c0f14] border-b border-white/10",children:[n.jsx("button",{onClick:a,className:"text-white text-sm font-bold uppercase tracking-widest opacity-70",children:"Cancelar"}),n.jsx("h2",{className:"text-white font-bold",children:"Ajustar Foto"}),n.jsx("button",{onClick:()=>{if(!f.current)return;const e=document.createElement("canvas"),n=400;e.width=n,e.height=n;const t=e.getContext("2d");if(t){const s=f.current,i=s.width*r,l=s.height*r,x=n/280;t.fillStyle="#000",t.fillRect(0,0,n,n);const d=c.x*x+200-i*x/2,u=c.y*x+200-l*x/2;t.drawImage(s,d,u,i*x,l*x),o(e.toDataURL("image/jpeg",.9)),a()}},className:"text-[#00c2ff] text-sm font-bold uppercase tracking-widest",children:"Concluir"})]}),n.jsxs("div",{className:"image-container",ref:p,onMouseDown:h,onMouseMove:g,onMouseUp:b,onMouseLeave:b,onTouchStart:h,onTouchMove:g,onTouchEnd:b,children:[n.jsx("img",{ref:f,src:s,className:"draggable-img",draggable:!1,style:{transform:`translate(${c.x}px, ${c.y}px) scale(${r})`,transition:x?"none":"transform 0.1s ease-out"},alt:"To crop"}),n.jsx("div",{className:"crop-mask"}),n.jsx("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2 text-white/40 text-[10px] uppercase font-bold tracking-widest pointer-events-none",children:"Arraste para enquadrar"})]}),n.jsxs("div",{className:"crop-footer",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("i",{className:"fa-solid fa-minus text-gray-500 text-xs"}),n.jsx("input",{type:"range",min:"1",max:"3",step:"0.01",value:r,onChange:e=>i(parseFloat(e.target.value)),className:"zoom-slider"}),n.jsx("i",{className:"fa-solid fa-plus text-gray-500 text-xs"})]}),n.jsxs("div",{className:"flex justify-center gap-8",children:[n.jsxs("button",{onClick:()=>l({x:0,y:0}),className:"text-gray-400 text-xs flex flex-col items-center gap-1",children:[n.jsx("i",{className:"fa-solid fa-arrows-to-dot"})," Centralizar"]}),n.jsxs("button",{onClick:()=>i(1),className:"text-gray-400 text-xs flex flex-col items-center gap-1",children:[n.jsx("i",{className:"fa-solid fa-maximize"})," Resetar Zoom"]})]})]})]})};export{t as I};

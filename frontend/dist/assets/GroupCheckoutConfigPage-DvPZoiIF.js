import{u as w,e as E,r as n,c as M,g as y,j as e,f as A}from"./index-BC19Iu_T.js";import{PREVIEW_COUNTRIES as D}from"./GlobalSimulatorModal-BqMUeeF_.js";const C={syncpay:{BR:[{id:"pix",label:"Pix",icon:"fa-pix",color:"#00ff82",badge:"Instantâneo"},{id:"boleto",label:"Boleto",icon:"fa-barcode",color:"#aaa"}]},stripe:{BR:[{id:"pix",label:"Pix",icon:"fa-pix",color:"#00ff82"},{id:"card",label:"Cartão de Crédito",icon:"fa-credit-card",color:"#00c2ff"},{id:"debit_card",label:"Cartão de Débito",icon:"fa-credit-card",color:"#5dade2"},{id:"boleto",label:"Boleto",icon:"fa-barcode",color:"#aaa"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],US:[{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"ach",label:"ACH Direct Debit",icon:"fa-building-columns",color:"#85929e"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-google-pay",color:"#fff"}],EU:[{id:"sofort",label:"Sofort / Klarna",icon:"fa-money-bill-transfer",color:"#f39c12"},{id:"sepa",label:"SEPA Direct Debit",icon:"fa-university",color:"#2ecc71"},{id:"klarna",label:"Klarna BNPL",icon:"fa-shopping-bag",color:"#ffb3c6"},{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],GB:[{id:"card",label:"Debit / Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"bacs",label:"BACS Direct Debit",icon:"fa-building-columns",color:"#5dade2"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],IN:[{id:"upi",label:"UPI Pay",icon:"fa-mobile-screen-button",color:"#ff9933"},{id:"card",label:"International Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-google-pay",color:"#fff"}],JP:[{id:"konbini",label:"Konbini",icon:"fa-shop",color:"#27ae60"},{id:"card",label:"Credit Card (JCB)",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],MX:[{id:"oxxo",label:"OXXO Cash",icon:"fa-barcode",color:"#e74c3c"},{id:"card",label:"Crédito Parcelado",icon:"fa-credit-card",color:"#00c2ff"},{id:"debit_card",label:"Débito",icon:"fa-credit-card",color:"#5dade2"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],CA:[{id:"interac",label:"Interac e-Transfer",icon:"fa-exchange-alt",color:"#e74c3c"},{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"pad",label:"Pre-auth Debit (PAD)",icon:"fa-university",color:"#5dade2"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],AU:[{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"becs",label:"BECS Direct Debit",icon:"fa-university",color:"#85929e"},{id:"afterpay",label:"Afterpay",icon:"fa-clock-rotate-left",color:"#b2fce4"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-google-pay",color:"#fff"}],SG:[{id:"paynow",label:"PayNow",icon:"fa-qrcode",color:"#635bff"},{id:"grabpay",label:"GrabPay",icon:"fa-wallet",color:"#00b14f"},{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-google-pay",color:"#fff"}],DEFAULT:[{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}]}},I=()=>{const o=new Set;return Object.values(C).forEach(i=>{Object.values(i).forEach(t=>{t.forEach(c=>o.add(c.id))})}),Array.from(o)},L=o=>{const i=w(),{showAlert:t,showOptions:c}=E(),[s,b]=n.useState(null),[x,g]=n.useState(!0),[d,f]=n.useState("stripe"),[u,k]=n.useState("BR"),[p,h]=n.useState([]),m=M.getCurrentUser();n.useEffect(()=>{if(o){const a=y.getGroupById(o);if(a){b(a);const l=a.checkoutConfig;if(l&&l.enabledMethods&&l.enabledMethods.length>0)f(l.providerId),k(l.targetCountry),h(l.enabledMethods);else{const r=a.selectedProviderId||"stripe";f(r),k("BR"),h(I())}}g(!1)}},[o]);const v=n.useMemo(()=>{const a=C[d]||C.stripe;return a[u]||a.DEFAULT||[]},[d,u]),j=n.useMemo(()=>v.filter(a=>p.includes(a.id)),[v,p]),N=async()=>{const a=[],l=m?.paymentConfigs||{};if((m?.paymentConfig?.isConnected||l.syncpay?.isConnected)&&a.push({label:"SyncPay (Pix)",value:"syncpay",icon:"fa-solid fa-bolt"}),l.stripe?.isConnected&&a.push({label:"Stripe (Global)",value:"stripe",icon:"fa-brands fa-stripe"}),l.paypal?.isConnected&&a.push({label:"PayPal",value:"paypal",icon:"fa-brands fa-paypal"}),a.length===0){t("Erro","Conecte um provedor no painel financeiro antes.");return}const r=await c("Selecionar Provedor",a);r&&f(r)},P=async()=>{const a=D.map(r=>({label:`${r.flag} ${r.name}`,value:r.code,icon:"fa-solid fa-earth-americas"})),l=await c("País de Venda",a);l&&k(l)},S=n.useCallback(a=>{h(l=>l.includes(a)?l.filter(r=>r!==a):[...l,a])},[]);return{group:s,loading:x,provider:d,country:u,availableMethods:v,enabledMethods:p,previewEnabledMethods:j,handleSelectProvider:N,handleSelectCountry:P,toggleMethod:S,handleSave:async()=>{if(!s)return;if(p.length===0){t("Aviso","Habilite ao menos um método para salvar.");return}const a={providerId:d,targetCountry:u,enabledMethods:p};await y.updateGroup({...s,checkoutConfig:a}),await t("Sucesso","Configurações de checkout sincronizadas."),i(-1)},activateAllInRegion:()=>{const a=v.map(l=>l.id);h(l=>Array.from(new Set([...l,...a])))}}},B=({onBack:o})=>e.jsxs("header",{className:"flex items-center p-4 bg-[#0c0f14] border-b border-white/10 h-[65px] sticky top-0 z-50",children:[e.jsx("button",{onClick:o,className:"mr-4 text-[#00c2ff] text-xl p-2 hover:bg-white/5 rounded-full transition-all active:scale-90",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})}),e.jsx("h1",{className:"font-bold text-white",children:"Checkout Personalizado"})]}),R=({provider:o,country:i,onSelectProvider:t,onSelectCountry:c})=>e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 cursor-pointer hover:border-[#00c2ff33] transition-all",onClick:t,children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest block mb-2",children:"Provedor"}),e.jsxs("div",{className:"flex items-center gap-2 text-white font-bold text-sm",children:[e.jsx("i",{className:"fa-solid fa-wallet text-[#00c2ff]"}),o.toUpperCase()]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 cursor-pointer hover:border-[#00ff8233] transition-all",onClick:c,children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest block mb-2",children:"País Alvo"}),e.jsxs("div",{className:"flex items-center gap-2 text-white font-bold text-sm",children:[e.jsx("i",{className:"fa-solid fa-earth-americas text-[#00ff82]"}),i]})]})]}),W=({id:o,label:i,icon:t,color:c,badge:s,isActive:b,onToggle:x})=>{const g=()=>{x(o)},d=f=>{x(o)};return e.jsxs("div",{className:`flex items-center justify-between p-4 bg-black/20 rounded-2xl border transition-all cursor-pointer ${b?"border-[#00c2ff] bg-[#00c2ff08]":"border-white/5"}`,onClick:g,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-black/40",style:{color:c},children:e.jsx("i",{className:`fa-solid ${t} text-lg`})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-gray-200",children:i}),s&&e.jsx("span",{className:"text-[8px] font-black uppercase text-[#00ff82] tracking-tighter",children:s})]})]}),e.jsxs("label",{className:"switch",onClick:f=>f.stopPropagation(),children:[e.jsx("input",{type:"checkbox",checked:b,onChange:d}),e.jsx("span",{className:"slider-switch"})]})]})},U=({enabledMethods:o})=>e.jsxs("div",{className:"mt-10 animate-fade-in",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("span",{className:"text-[10px] font-black text-[#FFD700] uppercase tracking-[4px]",children:"Previsão do Checkout"})}),e.jsxs("div",{className:"bg-[#0c0f14] border-2 border-[#1a1e26] rounded-[40px] p-6 w-full max-w-[320px] mx-auto shadow-[0_20px_50px_rgba(0,0,0,0.6)]",children:[e.jsx("div",{className:"text-[10px] text-gray-600 font-bold uppercase mb-5 text-center tracking-widest",children:"Interface do Cliente"}),e.jsx("div",{className:"space-y-2.5 min-h-[120px] flex flex-col justify-center",children:o.length>0?o.map(i=>e.jsxs("div",{className:"w-full p-4 rounded-xl flex items-center gap-3 bg-white/5 border border-white/5 animate-slide-up",children:[e.jsx("i",{className:`fa-solid ${i.icon} text-sm`,style:{color:i.color}}),e.jsxs("span",{className:"text-[12px] font-bold text-white",children:["Pagar com ",i.label]})]},i.id)):e.jsxs("div",{className:"py-10 text-center opacity-20 flex flex-col items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-ghost text-3xl"}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"Nenhum método ativo"})]})}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-white/5 flex items-center justify-center gap-2 opacity-30",children:[e.jsx("i",{className:"fa-solid fa-shield-halved text-[9px]"}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[2px]",children:"Flux Secure Engine"})]})]})]}),T=()=>{const o=w(),{id:i}=A(),{group:t,loading:c,provider:s,country:b,availableMethods:x,enabledMethods:g,previewEnabledMethods:d,handleSelectProvider:f,handleSelectCountry:u,toggleMethod:k,handleSave:p,activateAllInRegion:h}=L(i);return c||!t?null:e.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-white font-['Inter'] flex flex-col",children:[e.jsx(B,{onBack:()=>o(-1)}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-5 pb-32 max-w-[600px] mx-auto w-full no-scrollbar",children:[e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 p-5 rounded-3xl mb-8 animate-fade-in",children:e.jsx("p",{className:"text-xs text-blue-300 leading-relaxed italic text-center",children:'"Personalize o checkout conforme a região do seu tráfego. Métodos locais como ACH nos EUA ou UPI na Índia convertem até 40% mais."'})}),e.jsx(R,{provider:s,country:b,onSelectProvider:f,onSelectCountry:u}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px] ml-1",children:"Métodos da Região"}),e.jsx("button",{onClick:h,className:"text-[9px] font-black text-[#00c2ff] uppercase tracking-widest hover:underline",children:"Ativar Todos"})]}),e.jsx("div",{className:"space-y-2.5",children:x.map(m=>e.jsx(W,{...m,isActive:g.includes(m.id),onToggle:k},`${m.id}-${b}`))})]}),e.jsx(U,{enabledMethods:d}),e.jsx("button",{className:"btn-save-fixed",onClick:p,children:"Salvar Configurações"})]})]})};export{T as GroupCheckoutConfigPage};

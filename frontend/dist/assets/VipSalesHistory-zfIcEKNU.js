import{u as e,f as t,r as a,j as n,c as i,g as r,v as s}from"./index-Bkpya5GW.js";const o=()=>{const o=e(),{id:d}=t(),[l,c]=a.useState([]),[p,x]=a.useState(0),[g,m]=a.useState(!0),[f,u]=a.useState("");a.useEffect(()=>{(async()=>{const e=i.getCurrentUser();if(!e||!d)return void m(!1);const t=r.getGroupById(d);t&&u(t.name);try{const t=(await s.getTransactions(e.email)).filter(e=>{const t=["paid","completed","approved","settled"].includes((e.status||"").toLowerCase());return e.groupId===d&&t});t.sort((e,t)=>{const a=new Date(e.created_at||e.createdAt||e.date_created||0).getTime();return new Date(t.created_at||t.createdAt||t.date_created||0).getTime()-a}),c(t);const a=t.reduce((e,t)=>e+(parseFloat(t.amount)||0),0);x(a)}catch(a){}finally{m(!1)}})()},[d]);const h=e=>{if(!e)return"-";try{return new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return e}},b=e=>{const t=(e||"").toLowerCase();return["paid","completed","approved","settled"].includes(t)?"Aprovado":["pending","processing","created"].includes(t)?"Pendente":["expired","cancelled","failed"].includes(t)?"Expirado":t||"Desconhecido"},j=e=>{const t=(e||"").toLowerCase();return["paid","completed","approved","settled"].includes(t)?"approved":["pending","processing","created"].includes(t)?"pending":"failed"},y=e=>e.payer&&e.payer.name?e.payer.name:e.payer_email?e.payer_email.split("@")[0]:"Cliente Desconhecido";return n.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white font-['Inter'] flex flex-col overflow-x-hidden",children:[n.jsx("style",{children:"\n        * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter',sans-serif; }\n        \n        header {\n            display:flex; align-items:center; justify-content:space-between; padding:16px;\n            background: #0c0f14; position:fixed; width:100%; z-index:10;\n            border-bottom:1px solid rgba(255,255,255,0.1); top: 0; height: 65px;\n        }\n        header button {\n            background:none; border:none; color:#fff; font-size:24px; cursor:pointer;\n            transition:0.3s; padding-right: 15px;\n        }\n        header h1 { font-size:20px; font-weight:600; }\n        \n        main {\n            padding-top: 90px; padding-bottom: 40px;\n            width: 100%; max-width: 600px; margin: 0 auto; padding-left: 20px; padding-right: 20px;\n        }\n\n        .sales-summary {\n            background: rgba(255,215,0,0.1); border: 1px solid rgba(255,215,0,0.3);\n            border-radius: 12px; padding: 20px; margin-bottom: 25px; text-align: center;\n        }\n        .total-label { font-size: 14px; color: #FFD700; text-transform: uppercase; letter-spacing: 1px; }\n        .total-amount { font-size: 32px; font-weight: 800; color: #fff; margin-top: 5px; }\n\n        .sale-item {\n            background: rgba(255,255,255,0.05); border-radius: 10px; padding: 15px;\n            margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;\n            border: 1px solid rgba(255,255,255,0.05);\n        }\n        .sale-info h3 { font-size: 15px; font-weight: 600; margin-bottom: 4px; color: #fff; }\n        .sale-info p { font-size: 11px; color: #aaa; }\n        \n        .sale-value { text-align: right; display: flex; flex-direction: column; align-items: flex-end; }\n        .amount { font-size: 16px; font-weight: 700; color: #00ff82; }\n        \n        .status { font-size: 11px; padding: 2px 8px; border-radius: 4px; background: rgba(255,255,255,0.1); display: inline-block; margin-top: 4px; font-weight: 600; text-transform: uppercase; }\n        .status.pending { color: #ffaa00; background: rgba(255,170,0,0.15); }\n        .status.approved { color: #00ff82; background: rgba(0,255,130,0.15); }\n        .status.failed { color: #ff4d4d; background: rgba(255,77,77,0.15); }\n\n        .loading-container { text-align: center; color: #777; margin-top: 50px; }\n        .empty-state { text-align: center; color: #777; padding: 30px; font-size: 14px; }\n      "}),n.jsxs("header",{children:[n.jsx("button",{onClick:()=>o(-1),"aria-label":"Voltar",children:n.jsx("i",{className:"fa-solid fa-arrow-left"})}),n.jsx("h1",{children:"Histórico de Vendas"})]}),n.jsxs("main",{children:[n.jsxs("div",{className:"sales-summary",children:[n.jsx("div",{className:"total-label",children:"Total Faturado"}),n.jsx("div",{className:"total-amount",children:g?"...":`R$ ${p.toLocaleString("pt-BR",{minimumFractionDigits:2})}`}),n.jsxs("p",{style:{fontSize:"12px",color:"#aaa",marginTop:"5px"},children:["Grupo: ",f||"Carregando..."]})]}),n.jsx("h3",{style:{marginBottom:"15px",color:"#aaa",fontSize:"13px",textTransform:"uppercase",fontWeight:"700"},children:"Últimas Transações"}),g?n.jsxs("div",{className:"loading-container",children:[n.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-2xl mb-2"}),n.jsx("p",{children:"Buscando dados..."})]}):l.length>0?l.map((e,t)=>n.jsxs("div",{className:"sale-item",children:[n.jsxs("div",{className:"sale-info",children:[n.jsx("h3",{children:y(e)}),n.jsx("p",{children:h(e.created_at||e.createdAt||e.date_created)})]}),n.jsxs("div",{className:"sale-value",children:[n.jsxs("div",{className:"amount",children:["R$ ",parseFloat(e.amount||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),n.jsx("div",{className:`status ${j(e.status)}`,children:b(e.status)})]})]},e.id||t)):n.jsxs("div",{className:"empty-state",children:[n.jsx("i",{className:"fa-solid fa-receipt text-4xl mb-3 opacity-30"}),n.jsx("p",{children:"Nenhuma venda registrada para este grupo ainda."})]})]})]})};export{o as VipSalesHistory};

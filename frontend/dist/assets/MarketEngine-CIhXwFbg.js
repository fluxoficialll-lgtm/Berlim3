import{i as t}from"./index-CipjSFYz.js";const e=class{static rank(e,s){const i=Date.now(),r=t.relationships.getAll(),o=s.user?r.filter(t=>{var e;return t.followerId===(null==(e=s.user)?void 0:e.id)&&"accepted"===t.status}).map(t=>t.followingId):[];return e.map(t=>{let e=1e3;o.includes(t.authorId)&&(e+=this.WEIGHTS.FOLLOW_BONUS);const s=Math.max(0,(i-t.timestamp)/36e5);e+=this.WEIGHTS.RECENCY_BASE/Math.pow(s+1,this.WEIGHTS.DECAY_FACTOR);return e+=(2*t.likes+5*t.comments)*this.WEIGHTS.ENGAGEMENT_MULTIPLIER,{item:t,score:e}}).sort((t,e)=>e.score-t.score).map(t=>t.item)}};e.WEIGHTS={FOLLOW_BONUS:5e3,RECENCY_BASE:2e3,ENGAGEMENT_MULTIPLIER:150,DECAY_FACTOR:1.8};let s=e;const i=class{static async getSemanticAffinity(t,e){return 5}static async rank(t,e){return(await Promise.all(t.map(async s=>{var i,r;let o=5e3;if(o+=s.views*this.WEIGHTS.VIRAL_VELOCITY,(null==(r=null==(i=e.user)?void 0:i.profile)?void 0:r.bio)&&t.indexOf(s)<10){o+=await this.getSemanticAffinity(s.text,e.user.profile.bio)*this.WEIGHTS.AI_AFFINITY}return o+=(s.views>0?s.likes/s.views:0)*this.WEIGHTS.WATCH_TIME_BOOST,{item:s,score:o}}))).sort((t,e)=>e.score-t.score).map(t=>t.item)}};i.WEIGHTS={VIRAL_VELOCITY:300,WATCH_TIME_BOOST:1e3,AI_AFFINITY:2500};let r=i;const o=class{static rank(e,s){return e.map(e=>{var i,r,o;let a=2e3;(null==(o=null==(r=null==(i=s.user)?void 0:i.profile)?void 0:r.phone)?void 0:o.startsWith("55"))&&e.location.includes("Brasil")&&(a+=this.WEIGHTS.GEO_PROXIMITY);const l=t.users.get(e.sellerId);return(null==l?void 0:l.trustScore)&&(a+=2*l.trustScore),a+=Number(e.soldCount||0)*this.WEIGHTS.SALES_VOLUME,e.isAd&&(a+=15e3),{item:e,score:a}}).sort((t,e)=>e.score-t.score).map(t=>t.item)}};o.WEIGHTS={GEO_PROXIMITY:8e3,TRUST_SCORE:2e3,SALES_VOLUME:500};let a=o;export{s as F,a as M,r as R};

import{j as e,r as t,u as n,f as l,g as a,c as s}from"./index-CipjSFYz.js";import{p as i}from"./postService-0_arHZ6V.js";import{U as r}from"./UploadProgressCard-WxD4Y27q.js";const o=({onBack:t,folderName:n})=>e.jsxs("header",{className:"flex items-center justify-between p-4 px-6 bg-[#0c0f14] border-b border-white/10 h-[65px] sticky top-0 z-50",children:[e.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full text-[#00c2ff] hover:bg-[#00c2ff1a] transition-all active:scale-90 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})}),e.jsx("div",{className:"flex-1 text-center px-4",children:e.jsx("h1",{className:"text-sm font-bold text-white uppercase tracking-[2px] truncate",children:n||"Conteúdo"})}),e.jsx("div",{className:"w-10"})]}),c=({item:t,globalAllowDownload:n,onPreview:l})=>{var a;const s=n&&t.allowDownload;return e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4 flex items-center gap-4 group active:scale-[0.98] transition-all hover:bg-white/[0.08] hover:border-white/10",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-black/40 border border-white/5 flex items-center justify-center text-[#00c2ff] text-lg overflow-hidden flex-shrink-0",children:"image"===t.type?e.jsx("img",{src:t.url,className:"w-full h-full object-cover",alt:t.title}):e.jsx("i",{className:`fa-solid ${i=t,"video"===i.type?"fa-video":"image"===i.type?"fa-image":"pdf"===i.fileType?"fa-file-pdf":"zip"===i.fileType?"fa-file-zipper":"doc"===i.fileType?"fa-file-word":"fa-file-lines"} opacity-60`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-sm text-gray-200 truncate",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-600 uppercase tracking-widest bg-white/5 px-1.5 py-0.5 rounded",children:(null==(a=t.fileType)?void 0:a.toUpperCase())||t.type.toUpperCase()}),e.jsx("span",{className:"text-[9px] font-bold text-[#00c2ff] uppercase tracking-widest opacity-60",children:t.size||"Tamanho N/A"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l(t),className:"w-9 h-9 rounded-full bg-white/5 flex items-center justify-center text-[#00c2ff] hover:bg-[#00c2ff1a] transition-colors",children:e.jsx("i",{className:"fa-solid "+("video"===t.type?"fa-play-circle text-lg":"fa-eye")})}),s&&e.jsx("button",{onClick:e=>{e.stopPropagation(),s&&(t.url&&"#"!==t.url?window.open(t.url,"_blank"):alert("Este é um arquivo de demonstração."))},className:"w-9 h-9 rounded-full bg-[#00ff82]/5 flex items-center justify-center text-[#00ff82] hover:bg-[#00ff82]/10 transition-colors",title:"Baixar",children:e.jsx("i",{className:"fa-solid fa-cloud-arrow-down"})})]})]});var i},d=()=>e.jsxs("div",{className:"text-center py-20 opacity-20",children:[e.jsx("i",{className:"fa-solid fa-box-open text-5xl mb-4"}),e.jsx("p",{className:"font-bold uppercase tracking-widest text-sm",children:"Pasta Vazia"})]}),p=({items:n,initialIndex:l,onClose:a})=>{const[s,i]=t.useState(null),[r,o]=t.useState(!0),[c,d]=t.useState(null),[p,x]=t.useState(null);if(t.useEffect(()=>{null!==l&&(i(l),o(!0))},[l]),null===s||null===l||0===n.length)return null;const f=n[s],u=e=>{null==e||e.stopPropagation(),s<n.length-1&&i(s+1)},m=e=>{null==e||e.stopPropagation(),s>0&&i(s-1)};return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center animate-fade-in transition-all duration-500 "+(r?"":"cursor-none"),onTouchStart:e=>{x(null),d(e.targetTouches[0].clientX)},onTouchMove:e=>{x(e.targetTouches[0].clientX)},onTouchEnd:()=>{if(!c||!p)return;const e=c-p;e>50&&u(),e<-50&&m()},onClick:()=>{o(!r)},children:[e.jsx("style",{children:"\n                .hud-btn {\n                    backdrop-filter: blur(25px);\n                    -webkit-backdrop-filter: blur(25px);\n                    background: rgba(255, 255, 255, 0.08);\n                    border: 1px solid rgba(255, 255, 255, 0.12);\n                    color: white;\n                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n                }\n                .hud-hidden {\n                    opacity: 0;\n                    pointer-events: none;\n                    transform: translateY(-15px);\n                }\n                .hud-hidden-bottom {\n                    opacity: 0;\n                    pointer-events: none;\n                    transform: translateY(15px);\n                }\n                .count-pill {\n                    padding: 8px 16px;\n                    border-radius: 14px;\n                    font-size: 11px;\n                    font-weight: 800;\n                    letter-spacing: 1px;\n                    color: rgba(255,255,255,0.9);\n                    display: flex;\n                    align-items: center;\n                    gap: 8px;\n                }\n                .close-pill {\n                    width: 54px;\n                    height: 54px;\n                    border-radius: 50%;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    font-size: 20px;\n                }\n                .close-pill:active { transform: scale(0.9); background: rgba(255,255,255,0.2); }\n                \n                .nav-arrow-slim {\n                    font-size: 32px;\n                    color: rgba(255, 255, 255, 0.2);\n                    padding: 30px;\n                    cursor: pointer;\n                    transition: 0.3s;\n                }\n                .nav-arrow-slim:hover { color: white; }\n                .nav-arrow-slim.disabled { opacity: 0; pointer-events: none; }\n            "}),e.jsxs("div",{className:"absolute top-0 left-0 w-full p-6 flex items-start justify-between z-50 pointer-events-none transition-all duration-500 "+(r?"":"hud-hidden"),children:[e.jsx("div",{className:"flex flex-col gap-1 pointer-events-auto",children:e.jsxs("div",{className:"hud-btn bg-black/40 px-4 py-2 rounded-xl border border-white/5 inline-flex items-center gap-2 max-w-[200px]",children:[e.jsx("i",{className:"fa-solid fa-file-lines text-[10px] text-gray-500"}),e.jsx("span",{className:"text-[11px] font-bold truncate",children:f.title})]})}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 pointer-events-auto",children:e.jsxs("div",{className:"hud-btn count-pill",children:[e.jsx("span",{className:"opacity-40",children:s+1}),e.jsx("div",{className:"w-px h-3 bg-white/10"}),e.jsx("span",{children:n.length})]})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),a()},className:"hud-btn close-pill pointer-events-auto shadow-2xl",children:e.jsx("i",{className:"fa-solid fa-xmark"})})]}),e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden select-none",children:[e.jsx("button",{onClick:m,className:`absolute left-0 z-20 hidden md:block nav-arrow-slim ${0===s?"disabled":""} ${r?"":"opacity-0"}`,children:e.jsx("i",{className:"fa-solid fa-angle-left"})}),"image"===f.type?e.jsx("img",{src:f.url,className:"max-w-full max-h-full object-contain animate-fade-in pointer-events-none select-none",alt:f.title}):"video"===f.type?e.jsx("video",{src:f.url,controls:r,autoPlay:!0,className:"max-w-full max-h-full animate-fade-in",onClick:e=>e.stopPropagation()},f.url):e.jsxs("div",{className:"flex flex-col items-center justify-center p-10 text-center animate-fade-in bg-[#161a21] border border-white/10 rounded-[40px] max-w-[340px] shadow-2xl",onClick:e=>e.stopPropagation(),children:[e.jsx("div",{className:"w-20 h-20 rounded-3xl bg-[#00c2ff]/10 flex items-center justify-center text-[#00c2ff] text-3xl mb-6 border border-[#00c2ff]/20",children:e.jsx("i",{className:"fa-solid "+("pdf"===f.fileType?"fa-file-pdf":"zip"===f.fileType?"fa-file-zipper":"fa-file-lines")})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 truncate max-w-full px-4",children:f.title}),e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("span",{className:"text-[9px] font-black bg-white/5 px-2 py-1 rounded text-gray-400 uppercase tracking-widest border border-white/5",children:null==(h=f.fileType)?void 0:h.toUpperCase()}),e.jsx("span",{className:"text-[9px] font-black text-[#00c2ff] uppercase tracking-widest",children:f.size||"N/A"})]}),e.jsx("button",{onClick:()=>window.open(f.url,"_blank"),className:"w-full py-4 bg-white text-black font-black rounded-2xl active:scale-95 transition-all flex items-center justify-center gap-3",children:"ABRIR ARQUIVO"})]}),e.jsx("button",{onClick:u,className:`absolute right-0 z-20 hidden md:block nav-arrow-slim ${s===n.length-1?"disabled":""} ${r?"":"opacity-0"}`,children:e.jsx("i",{className:"fa-solid fa-angle-right"})})]}),"file"!==f.type&&e.jsx("footer",{className:"absolute bottom-0 left-0 w-full p-8 flex items-center justify-center z-50 transition-all duration-500 "+(r?"":"hud-hidden-bottom"),children:e.jsxs("div",{className:"hud-btn flex items-center gap-2 p-1 rounded-2xl",children:[e.jsxs("button",{className:"px-6 py-3 rounded-xl hover:bg-white/5 transition-colors flex items-center gap-2",onClick:e=>{e.stopPropagation(),window.open(f.url,"_blank")},children:[e.jsx("i",{className:"fa-solid fa-cloud-arrow-down text-sm"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:"Download"})]}),e.jsx("div",{className:"w-px h-6 bg-white/10"}),e.jsxs("button",{className:"px-6 py-3 rounded-xl hover:bg-white/5 transition-colors flex items-center gap-2",onClick:e=>{e.stopPropagation(),navigator.clipboard.writeText(f.url),alert("Link copiado.")},children:[e.jsx("i",{className:"fa-solid fa-link text-sm"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:"Copiar Link"})]})]})})]});var h},x=({onClick:t,isLoading:n})=>e.jsxs("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 w-full max-w-[340px] px-4 animate-slide-up",children:[e.jsx("style",{children:"\n                .btn-premium-upload {\n                    width: 100%;\n                    height: 58px;\n                    background: rgba(12, 15, 20, 0.85);\n                    backdrop-filter: blur(20px);\n                    -webkit-backdrop-filter: blur(20px);\n                    border: 1px solid rgba(0, 194, 255, 0.3);\n                    border-radius: 20px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 12px;\n                    color: #fff;\n                    cursor: pointer;\n                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n                    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6), 0 0 15px rgba(0, 194, 255, 0.1);\n                    position: relative;\n                    overflow: hidden;\n                }\n                \n                .btn-premium-upload:hover {\n                    border-color: #00c2ff;\n                    background: rgba(12, 15, 20, 0.95);\n                    transform: translateY(-2px);\n                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7), 0 0 20px rgba(0, 194, 255, 0.2);\n                }\n\n                .btn-premium-upload:active {\n                    transform: translateY(0) scale(0.98);\n                }\n\n                .btn-premium-upload:disabled {\n                    opacity: 0.6;\n                    cursor: not-allowed;\n                    border-color: rgba(255,255,255,0.1);\n                }\n\n                .btn-label-sophisticated {\n                    font-size: 11px;\n                    font-weight: 900;\n                    text-transform: uppercase;\n                    letter-spacing: 3px;\n                    color: rgba(255, 255, 255, 0.9);\n                }\n\n                .icon-circle-bg {\n                    width: 28px;\n                    height: 28px;\n                    background: rgba(0, 194, 255, 0.1);\n                    border-radius: 50%;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    color: #00c2ff;\n                }\n\n                .glow-line {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 1px;\n                    background: linear-gradient(90deg, transparent, rgba(0, 194, 255, 0.4), transparent);\n                }\n            "}),e.jsxs("button",{className:"btn-premium-upload",onClick:t,disabled:n,children:[e.jsx("div",{className:"glow-line"}),n?e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-xl text-[#00c2ff]"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"icon-circle-bg",children:e.jsx("i",{className:"fa-solid fa-plus text-xs"})}),e.jsx("span",{className:"btn-label-sophisticated",children:"Adicionar Arquivo"})]})]})]}),f=()=>{const f=n(),{groupId:u,folderId:m}=l(),[h,b]=t.useState(null),[g,w]=t.useState(null),[j,v]=t.useState(!0),[N,y]=t.useState(!1),[k,C]=t.useState(0),[z,P]=t.useState(0),[S,T]=t.useState(0),[A,B]=t.useState(null),[I,M]=t.useState(!1),_=t.useRef(null);t.useEffect(()=>{var e,t;if(u&&m){const n=a.getGroupById(u);if(n){b(n);const l=s.getCurrentUserId(),a=n.creatorId===l,i=(null==(e=n.adminIds)?void 0:e.includes(l||""))||!1;M(a||i);let r=null;null==(t=n.salesPlatformSections)||t.forEach(e=>{const t=e.folders.find(e=>e.id===m);t&&(r=t)}),!r||r.items&&0!==r.items.length||(r.items=[]),w(r)}v(!1)}},[u,m]);const D=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]};if(j)return e.jsx("div",{className:"min-h-screen bg-[#0a0c10] flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-[#00c2ff]"})});const U=(null==g?void 0:g.allowDownload)??(null==h?void 0:h.salesPlatformAllowDownload)??!0,$=(null==g?void 0:g.allowMemberUpload)??(null==h?void 0:h.salesPlatformAllowMemberUpload)??!1,E=I||$;return e.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white font-['Inter'] flex flex-col",children:[e.jsx(o,{onBack:()=>f(-1),folderName:null==g?void 0:g.name}),e.jsx("main",{className:"flex-1 p-5 overflow-y-auto no-scrollbar pb-32",children:e.jsx("div",{className:"grid gap-3 max-w-[600px] mx-auto w-full",children:(null==g?void 0:g.items)&&g.items.length>0?g.items.map((t,n)=>e.jsx(c,{item:t,globalAllowDownload:U,onPreview:()=>B(n)},t.id)):e.jsx(d,{})})}),E&&e.jsxs(e.Fragment,{children:[e.jsx(r,{progress:k,current:z,total:S,isVisible:N}),e.jsx(x,{onClick:()=>{var e;return null==(e=_.current)?void 0:e.click()},isLoading:N}),e.jsx("input",{type:"file",ref:_,onChange:async e=>{var t,n;const l=e.target.files;if(!l||0===l.length||!h||!g)return;const s=Array.from(l);y(!0),T(s.length),P(0),C(0);const r=[];for(let a=0;a<s.length;a++){const e=s[a];P(a+1),C(Math.round(a/s.length*100));try{const n=await i.uploadMedia(e,"infoproducts"),l=D(e.size),o=(null==(t=e.name.split(".").pop())?void 0:t.toLowerCase())||"file";let c="file";e.type.startsWith("image/")?c="image":e.type.startsWith("video/")&&(c="video");const d={id:`item_${Date.now()}_${a}`,title:e.name.split(".")[0],type:c,fileType:o,url:n,allowDownload:!0,size:l};r.push(d),C(Math.round((a+1)/s.length*100))}catch(o){}}if(r.length>0){const e={...h};null==(n=e.salesPlatformSections)||n.forEach(e=>{const t=e.folders.find(e=>e.id===m);t&&(t.items=[...t.items||[],...r],t.itemsCount=t.items.length,w({...t}))}),await a.updateGroup(e),b(e)}_.current&&(_.current.value=""),setTimeout(()=>{y(!1),C(0)},1e3)},multiple:!0,className:"hidden"})]}),e.jsx(p,{items:(null==g?void 0:g.items)||[],initialIndex:A,onClose:()=>B(null)}),e.jsx("div",{className:"text-center opacity-10 text-[8px] uppercase font-black tracking-[3px] mb-8",children:"Flux Content Delivery v1.1"})]})};export{f as SalesFolderContentPage};

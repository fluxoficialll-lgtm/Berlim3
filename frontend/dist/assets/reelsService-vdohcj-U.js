import"./MarketEngine-CIhXwFbg.js";import{k as e,A as t}from"./index-CipjSFYz.js";import{P as s,p as a}from"./postService-0_arHZ6V.js";const r=`${t}/api/posts`,i=async(t,s,a=!1)=>{try{const r=await fetch(t);if(!r.ok)return[];let i=((await r.json()).data||[]).filter(e=>"video"===e.type);if(a||(i=i.filter(e=>!e.isAdultContent)),s){const t=e.getBlockedIdentifiers(s);t.size>0&&(i=i.filter(e=>{const s=String(e.username||"").replace("@","").toLowerCase();return!t.has(s)}))}return i.sort((e,t)=>(t.timestamp||0)-(e.timestamp||0))}catch(r){return[]}},o={getReels:async(e,t=!1)=>i(`${r}?type=video&limit=50`,e,t),getReelsByAuthor:async(e,t,s=!1)=>i(`${r}/user/${e}?type=video`,t,s),searchReels:async(e,t,s=!1)=>{const a=e.toLowerCase().trim();return a?i(`${r}/search?q=${encodeURIComponent(a)}&type=video`,t,s):[]},uploadVideo:async e=>URL.createObjectURL(e),addReel:async e=>{await a.addPost(e)},toggleLike:async e=>await s.toggleLike(e,!1),incrementView:e=>{s.trackView(e)}};export{o as r};

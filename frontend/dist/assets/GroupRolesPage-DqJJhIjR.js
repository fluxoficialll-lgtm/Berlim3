import{j as e,u as s,f as a,e as n,r as i}from"./index-CipjSFYz.js";import{u as r}from"./useGroupSettings-CtoaHUac.js";const o=({role:s,isActive:a,onClick:n,onDelete:i})=>e.jsxs("div",{onClick:n,className:"flex items-center justify-between p-4 rounded-2xl border cursor-pointer transition-all "+(a?"bg-[#00c2ff1a] border-[#00c2ff]":"bg-white/5 border-white/5 hover:bg-white/10"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{className:"font-bold text-sm",children:s.name})]}),e.jsx("button",{onClick:i,className:"text-gray-700 hover:text-red-500",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]}),l=({label:s,active:a,onToggle:n,danger:i=!1})=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm font-bold "+(a&&i?"text-red-400":"text-gray-300"),children:s}),e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:n}),e.jsx("span",{className:"slider-switch"})]})]}),t=({role:s,onUpdate:a,colors:n})=>{const i=e=>{const n={...s.permissions,[e]:!s.permissions[e]};a({permissions:n})},r=({title:s,icon:a})=>e.jsxs("div",{className:"flex items-center gap-2 mt-8 mb-4 border-b border-white/5 pb-2",children:[e.jsx("i",{className:`fa-solid ${a} text-[#00c2ff] text-[10px]`}),e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:s})]});return e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-[32px] p-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-[2px] text-[#00c2ff]",children:"Propriedades do Cargo"}),e.jsxs("div",{className:"px-3 py-1 rounded-full bg-[#00c2ff1a] border border-[#00c2ff33] text-[#00c2ff] text-[10px] font-black uppercase",children:["Prioridade ",s.priority]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Nome do Cargo"}),e.jsx("input",{type:"text",className:"input-field",value:s.name,onChange:e=>a({name:e.target.value}),placeholder:"Ex: Moderador Pleno"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest block mb-4",children:"Cor do Cargo"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:n.map(n=>e.jsx("button",{onClick:()=>a({color:n}),className:"w-8 h-8 rounded-full border-2 transition-all "+(s.color===n?"border-white scale-110 shadow-[0_0_10px_rgba(255,255,255,0.3)]":"border-transparent"),style:{backgroundColor:n}},n))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{title:"Administração Geral",icon:"fa-shield-halved"}),e.jsx(l,{label:"Administrador Total (Perigoso)",active:s.permissions.isAdmin,onToggle:()=>i("isAdmin"),danger:!0}),e.jsx(l,{label:"Editar Info. do Grupo",active:s.permissions.canEditGroupInfo,onToggle:()=>i("canEditGroupInfo")}),e.jsx(l,{label:"Gerenciar Cargos",active:s.permissions.canManageRoles,onToggle:()=>i("canManageRoles")}),e.jsx(l,{label:"Ver Logs de Auditoria",active:s.permissions.canViewAuditLogs,onToggle:()=>i("canViewAuditLogs")}),e.jsx(l,{label:"Ver Faturamento (VIP)",active:s.permissions.canViewRevenue,onToggle:()=>i("canViewRevenue")}),e.jsx(r,{title:"Moderação de Chat",icon:"fa-comments"}),e.jsx(l,{label:"Enviar Mensagens",active:s.permissions.canSendMessages,onToggle:()=>i("canSendMessages")}),e.jsx(l,{label:"Apagar Mensagens (Outros)",active:s.permissions.canDeleteMessages,onToggle:()=>i("canDeleteMessages")}),e.jsx(l,{label:"Fixar Mensagens",active:s.permissions.canPinMessages,onToggle:()=>i("canPinMessages")}),e.jsx(l,{label:"Ignorar Modo Lento",active:s.permissions.canBypassSlowMode,onToggle:()=>i("canBypassSlowMode")}),e.jsx(r,{title:"Controle de Membros",icon:"fa-users"}),e.jsx(l,{label:"Expulsar Membros",active:s.permissions.canKickMembers,onToggle:()=>i("canKickMembers")}),e.jsx(l,{label:"Banir Permanentemente",active:s.permissions.canBanMembers,onToggle:()=>i("canBanMembers")}),e.jsx(l,{label:"Aprovar Solicitações",active:s.permissions.canApproveMembers,onToggle:()=>i("canApproveMembers")}),e.jsx(l,{label:"Criar Links de Convite",active:s.permissions.canInviteMembers,onToggle:()=>i("canInviteMembers")}),e.jsx(r,{title:"Catálogo e Escala",icon:"fa-shop"}),e.jsx(l,{label:"Gerenciar Pastas",active:s.permissions.canManageFolders,onToggle:()=>i("canManageFolders")}),e.jsx(l,{label:"Gerenciar Arquivos",active:s.permissions.canManageFiles,onToggle:()=>i("canManageFiles")}),e.jsx(l,{label:"Postagens Agendadas",active:s.permissions.canPostScheduled,onToggle:()=>i("canPostScheduled")}),e.jsx(l,{label:"Gerenciar Anúncios",active:s.permissions.canManageAds,onToggle:()=>i("canManageAds")})]})]}),e.jsx("div",{className:"mt-10 pt-6 border-t border-white/5 opacity-30 text-center",children:e.jsx("p",{className:"text-[8px] font-black uppercase tracking-[3px]",children:"Segurança Flux v4.4"})})]})},c=()=>{const l=s(),{id:c}=a(),{group:d,loading:x,handleSave:m,form:p}=r(),{showConfirm:g}=n(),[f,b]=i.useState(null);if(x||!d)return null;return e.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-white font-['Inter'] flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex items-center p-4 bg-[#0c0f14] border-b border-white/10 h-[65px] sticky top-0 z-50",children:[e.jsx("button",{onClick:()=>l(`/group-settings/${c}`),className:"mr-4 text-white text-xl",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})}),e.jsx("h1",{className:"font-bold",children:"Gestão de Cargos"})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-5 max-w-[900px] mx-auto w-full pb-32 no-scrollbar",children:[e.jsxs("div",{className:"grid md:grid-cols-[1fr_1.5fr] gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Cargos Existentes"}),e.jsxs("button",{onClick:()=>{const e={id:`role_${Date.now()}`,name:"Novo Cargo",color:"#00c2ff",priority:p.roles.length+1,permissions:{isAdmin:!1,canEditGroupInfo:!1,canManageRoles:!1,canViewAuditLogs:!1,canViewRevenue:!1,canSendMessages:!0,canDeleteMessages:!1,canPinMessages:!1,canBypassSlowMode:!1,canKickMembers:!1,canBanMembers:!1,canApproveMembers:!1,canInviteMembers:!1,canManageFolders:!1,canManageFiles:!1,canPostScheduled:!1,canManageAds:!1}};p.setRoles([...p.roles,e]),b(e)},className:"text-[#00c2ff] text-[10px] font-black uppercase",children:[e.jsx("i",{className:"fa-solid fa-plus-circle"})," Criar"]})]}),e.jsxs("div",{className:"space-y-2",children:[p.roles.map(s=>e.jsx(o,{role:s,isActive:(null==f?void 0:f.id)===s.id,onClick:()=>b(s),onDelete:e=>{e.stopPropagation(),(async e=>{await g("Excluir Cargo","Tem certeza que deseja apagar este cargo? Membros associados perderão as permissões.")&&(p.setRoles(p.roles.filter(s=>s.id!==e)),(null==f?void 0:f.id)===e&&b(null))})(s.id)}},s.id)),0===p.roles.length&&e.jsx("div",{className:"text-center py-10 opacity-30 italic text-xs",children:"Nenhum cargo criado."})]})]}),f?e.jsx(t,{role:f,onUpdate:e=>{if(!f)return;const s={...f,...e};b(s),p.setRoles(p.roles.map(e=>e.id===s.id?s:e))},colors:["#00c2ff","#00ff82","#ffaa00","#ff4d4d","#ee2a7b","#6228d7","#ffffff","#aaaaaa","#FFD700","#4285F4"]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-20 text-center",children:[e.jsx("i",{className:"fa-solid fa-id-card-clip text-6xl mb-4"}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:"Selecione um cargo para editar"})]})]}),e.jsx("button",{className:"btn-save-fixed",onClick:m,children:"Salvar Alterações de Cargos"})]})]})};export{c as GroupRolesPage};

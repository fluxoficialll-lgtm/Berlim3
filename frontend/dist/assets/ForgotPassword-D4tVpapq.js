import{j as e,L as t,u as a,r as s,c as r}from"./index-CipjSFYz.js";import{C as l}from"./CodeVerificationCard-G1Kjtygx.js";const i=({email:a,setEmail:s,onSubmit:r,loading:l,btnText:i,btnColorClass:o})=>e.jsxs("div",{className:"w-full max-w-[400px] bg-white/5 backdrop-blur-2xl rounded-[32px] p-10 border border-white/10 shadow-2xl flex flex-col items-center animate-fade-in mx-auto",children:[e.jsxs("div",{className:"mb-8 w-[70px] h-[70px] bg-white/5 rounded-2xl flex items-center justify-center relative border border-white/10 shadow-[0_0_30px_rgba(0,194,255,0.2)]",children:[e.jsx("div",{className:"absolute w-[45px] h-[25px] rounded-[50%] border-[3.5px] border-[#00c2ff] rotate-[25deg]"}),e.jsx("div",{className:"absolute w-[45px] h-[25px] rounded-[50%] border-[3.5px] border-[#00c2ff] -rotate-[25deg]"})]}),e.jsx("h1",{className:"text-2xl font-bold text-center mb-2 text-white",children:"Recuperar Senha"}),e.jsx("p",{className:"text-gray-400 text-sm text-center mb-8 leading-relaxed",children:"Insira seu e-mail para receber o código de validação."}),e.jsxs("form",{onSubmit:r,className:"w-full space-y-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fa-solid fa-at absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm"}),e.jsx("input",{type:"email",placeholder:"E-mail cadastrado",required:!0,value:a,onChange:e=>s(e.target.value),className:"w-full p-3.5 pl-11 bg-black/20 border border-white/10 rounded-xl text-white outline-none focus:border-[#00c2ff] transition-all placeholder-gray-600"})]}),e.jsx("button",{type:"submit",disabled:!a||l,className:"w-full py-4 bg-[#00c2ff] text-black font-black rounded-xl hover:bg-[#00aaff] transition-all shadow-lg shadow-[#00c2ff]/20 disabled:opacity-50 active:scale-[0.98] uppercase tracking-widest text-sm",children:l?e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}):i})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-white/5 w-full text-center",children:e.jsxs(t,{to:"/",className:"text-gray-400 hover:text-white transition-colors text-xs font-bold flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-arrow-left text-[10px]"})," VOLTAR AO LOGIN"]})})]}),o=()=>{const t=a(),[o,n]=s.useState(""),[c,d]=s.useState(["","","","","",""]),[f,x]=s.useState("email"),[u,m]=s.useState(0),[b,p]=s.useState(!1),[h,w]=s.useState(""),[g,j]=s.useState("Enviar E-mail"),[v,y]=s.useState("bg-[#00c2ff]"),N=s.useRef([]);s.useEffect(()=>{let e;return u>0&&(e=setInterval(()=>m(e=>e-1),1e3)),()=>clearInterval(e)},[u]);const S=async e=>{e.preventDefault(),p(!0),w("");try{await r.sendVerificationCode(o,"reset"),x("code"),m(30)}catch(t){j(t.message||"Erro"),y("bg-red-500"),setTimeout(()=>{j("Enviar E-mail"),y("bg-[#00c2ff]")},2e3)}finally{p(!1)}};return e.jsxs("div",{className:"h-screen w-full bg-[#0c0f14] text-white font-['Inter'] flex items-center justify-center p-5",children:[e.jsx("header",{className:"fixed top-0 left-0 w-full p-5 z-10",children:e.jsx("button",{onClick:()=>t("/"),className:"bg-white/10 p-2 rounded-full border border-[#00c2ff] text-[#00c2ff]",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})})}),"email"===f?e.jsx(i,{email:o,setEmail:n,loading:b,btnText:g,btnColorClass:v,onSubmit:S}):e.jsx(l,{email:o,code:c,setCode:d,onInput:(e,t)=>{var a;const s=[...c];s[e]=t.slice(-1),d(s),t&&e<5&&(null==(a=N.current[e+1])||a.focus())},onKeyDown:(e,t)=>{var a;"Backspace"===t.key&&!c[e]&&e>0&&(null==(a=N.current[e-1])||a.focus())},onPaste:e=>{e.preventDefault();const t=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),a=[...c];t.split("").forEach((e,t)=>a[t]=e),d(a)},onSubmit:async e=>{e.preventDefault(),p(!0);try{await r.verifyCode(o,c.join(""),!0),localStorage.setItem("reset_email",o),t("/reset-password")}catch(a){w(a.message)}finally{p(!1)}},onResend:S,timer:u,canResend:0===u,loading:b,error:h,inputsRef:N,title:"Redefinir Senha"})]})};export{o as ForgotPassword};

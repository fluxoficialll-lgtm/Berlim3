import{j as e,u as h,f as j,e as v,r as N}from"./index-BC19Iu_T.js";import{u as M}from"./useGroupSettings-CvPAF9AB.js";const w=({role:s,isActive:o,onClick:l,onDelete:a})=>e.jsxs("div",{onClick:l,className:`flex items-center justify-between p-4 rounded-2xl border cursor-pointer transition-all ${o?"bg-[#00c2ff1a] border-[#00c2ff]":"bg-white/5 border-white/5 hover:bg-white/10"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{className:"font-bold text-sm",children:s.name})]}),e.jsx("button",{onClick:a,className:"text-gray-700 hover:text-red-500",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]}),i=({label:s,active:o,onToggle:l,danger:a=!1})=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:`text-sm font-bold ${o&&a?"text-red-400":"text-gray-300"}`,children:s}),e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:l}),e.jsx("span",{className:"slider-switch"})]})]}),y=({role:s,onUpdate:o,colors:l})=>{const a=n=>{const x={...s.permissions,[n]:!s.permissions[n]};o({permissions:x})},c=({title:n,icon:x})=>e.jsxs("div",{className:"flex items-center gap-2 mt-8 mb-4 border-b border-white/5 pb-2",children:[e.jsx("i",{className:`fa-solid ${x} text-[#00c2ff] text-[10px]`}),e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:n})]});return e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-[32px] p-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-[2px] text-[#00c2ff]",children:"Propriedades do Cargo"}),e.jsxs("div",{className:"px-3 py-1 rounded-full bg-[#00c2ff1a] border border-[#00c2ff33] text-[#00c2ff] text-[10px] font-black uppercase",children:["Prioridade ",s.priority]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Nome do Cargo"}),e.jsx("input",{type:"text",className:"input-field",value:s.name,onChange:n=>o({name:n.target.value}),placeholder:"Ex: Moderador Pleno"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest block mb-4",children:"Cor do Cargo"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:l.map(n=>e.jsx("button",{onClick:()=>o({color:n}),className:`w-8 h-8 rounded-full border-2 transition-all ${s.color===n?"border-white scale-110 shadow-[0_0_10px_rgba(255,255,255,0.3)]":"border-transparent"}`,style:{backgroundColor:n}},n))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{title:"Administração Geral",icon:"fa-shield-halved"}),e.jsx(i,{label:"Administrador Total (Perigoso)",active:s.permissions.isAdmin,onToggle:()=>a("isAdmin"),danger:!0}),e.jsx(i,{label:"Editar Info. do Grupo",active:s.permissions.canEditGroupInfo,onToggle:()=>a("canEditGroupInfo")}),e.jsx(i,{label:"Gerenciar Cargos",active:s.permissions.canManageRoles,onToggle:()=>a("canManageRoles")}),e.jsx(i,{label:"Ver Logs de Auditoria",active:s.permissions.canViewAuditLogs,onToggle:()=>a("canViewAuditLogs")}),e.jsx(i,{label:"Ver Faturamento (VIP)",active:s.permissions.canViewRevenue,onToggle:()=>a("canViewRevenue")}),e.jsx(c,{title:"Moderação de Chat",icon:"fa-comments"}),e.jsx(i,{label:"Enviar Mensagens",active:s.permissions.canSendMessages,onToggle:()=>a("canSendMessages")}),e.jsx(i,{label:"Apagar Mensagens (Outros)",active:s.permissions.canDeleteMessages,onToggle:()=>a("canDeleteMessages")}),e.jsx(i,{label:"Fixar Mensagens",active:s.permissions.canPinMessages,onToggle:()=>a("canPinMessages")}),e.jsx(i,{label:"Ignorar Modo Lento",active:s.permissions.canBypassSlowMode,onToggle:()=>a("canBypassSlowMode")}),e.jsx(c,{title:"Controle de Membros",icon:"fa-users"}),e.jsx(i,{label:"Expulsar Membros",active:s.permissions.canKickMembers,onToggle:()=>a("canKickMembers")}),e.jsx(i,{label:"Banir Permanentemente",active:s.permissions.canBanMembers,onToggle:()=>a("canBanMembers")}),e.jsx(i,{label:"Aprovar Solicitações",active:s.permissions.canApproveMembers,onToggle:()=>a("canApproveMembers")}),e.jsx(i,{label:"Criar Links de Convite",active:s.permissions.canInviteMembers,onToggle:()=>a("canInviteMembers")}),e.jsx(c,{title:"Catálogo e Escala",icon:"fa-shop"}),e.jsx(i,{label:"Gerenciar Pastas",active:s.permissions.canManageFolders,onToggle:()=>a("canManageFolders")}),e.jsx(i,{label:"Gerenciar Arquivos",active:s.permissions.canManageFiles,onToggle:()=>a("canManageFiles")}),e.jsx(i,{label:"Postagens Agendadas",active:s.permissions.canPostScheduled,onToggle:()=>a("canPostScheduled")}),e.jsx(i,{label:"Gerenciar Anúncios",active:s.permissions.canManageAds,onToggle:()=>a("canManageAds")})]})]}),e.jsx("div",{className:"mt-10 pt-6 border-t border-white/5 opacity-30 text-center",children:e.jsx("p",{className:"text-[8px] font-black uppercase tracking-[3px]",children:"Segurança Flux v4.4"})})]})},A=()=>{const s=h(),{id:o}=j(),{group:l,loading:a,handleSave:c,form:n}=M(),{showConfirm:x}=v(),[d,m]=N.useState(null),g=["#00c2ff","#00ff82","#ffaa00","#ff4d4d","#ee2a7b","#6228d7","#ffffff","#aaaaaa","#FFD700","#4285F4"];if(a||!l)return null;const f=()=>{const t={id:`role_${Date.now()}`,name:"Novo Cargo",color:"#00c2ff",priority:n.roles.length+1,permissions:{isAdmin:!1,canEditGroupInfo:!1,canManageRoles:!1,canViewAuditLogs:!1,canViewRevenue:!1,canSendMessages:!0,canDeleteMessages:!1,canPinMessages:!1,canBypassSlowMode:!1,canKickMembers:!1,canBanMembers:!1,canApproveMembers:!1,canInviteMembers:!1,canManageFolders:!1,canManageFiles:!1,canPostScheduled:!1,canManageAds:!1}};n.setRoles([...n.roles,t]),m(t)},b=async t=>{await x("Excluir Cargo","Tem certeza que deseja apagar este cargo? Membros associados perderão as permissões.")&&(n.setRoles(n.roles.filter(r=>r.id!==t)),d?.id===t&&m(null))},u=t=>{if(!d)return;const r={...d,...t};m(r),n.setRoles(n.roles.map(p=>p.id===r.id?r:p))};return e.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-white font-['Inter'] flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex items-center p-4 bg-[#0c0f14] border-b border-white/10 h-[65px] sticky top-0 z-50",children:[e.jsx("button",{onClick:()=>s(`/group-settings/${o}`),className:"mr-4 text-white text-xl",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})}),e.jsx("h1",{className:"font-bold",children:"Gestão de Cargos"})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-5 max-w-[900px] mx-auto w-full pb-32 no-scrollbar",children:[e.jsxs("div",{className:"grid md:grid-cols-[1fr_1.5fr] gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Cargos Existentes"}),e.jsxs("button",{onClick:f,className:"text-[#00c2ff] text-[10px] font-black uppercase",children:[e.jsx("i",{className:"fa-solid fa-plus-circle"})," Criar"]})]}),e.jsxs("div",{className:"space-y-2",children:[n.roles.map(t=>e.jsx(w,{role:t,isActive:d?.id===t.id,onClick:()=>m(t),onDelete:r=>{r.stopPropagation(),b(t.id)}},t.id)),n.roles.length===0&&e.jsx("div",{className:"text-center py-10 opacity-30 italic text-xs",children:"Nenhum cargo criado."})]})]}),d?e.jsx(y,{role:d,onUpdate:u,colors:g}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-20 text-center",children:[e.jsx("i",{className:"fa-solid fa-id-card-clip text-6xl mb-4"}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:"Selecione um cargo para editar"})]})]}),e.jsx("button",{className:"btn-save-fixed",onClick:c,children:"Salvar Alterações de Cargos"})]})]})};export{A as GroupRolesPage};

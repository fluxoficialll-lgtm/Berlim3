import{u as n,f as e,r as i,g as a,j as t}from"./index-CipjSFYz.js";const r=()=>{const r=n(),{id:o}=e(),[s,l]=i.useState(void 0),[d,c]=i.useState(""),[p,x]=i.useState(""),[f,u]=i.useState(""),[g,m]=i.useState([]);i.useEffect(()=>{o&&h()},[o]);const h=()=>{if(!o)return;const n=a.getGroupById(o);n?(l(n),m(n.links||[])):l({id:o,name:"Grupo Exemplo",description:"...",isVip:!1})};return t.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white font-['Inter'] flex flex-col overflow-x-hidden",children:[t.jsx("style",{children:"\n            * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter', sans-serif; }\n            header {\n                display:flex; align-items:center; padding:16px;\n                background: #0c0f14; position:fixed; width:100%; top:0; z-index:10;\n                border-bottom:1px solid rgba(255,255,255,0.1); height: 65px;\n            }\n            header .back-btn {\n                background:none; border:none; color:#fff; font-size:24px; cursor:pointer; padding-right: 15px;\n            }\n            header h1 { font-size:20px; font-weight:600; }\n            \n            main { \n                padding-top: 85px; padding-bottom: 40px; \n                width: 100%; max-width: 600px; margin: 0 auto; \n                padding-left: 20px; padding-right: 20px; \n            }\n\n            .create-card {\n                background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px;\n                border: 1px solid rgba(255,255,255,0.1); margin-bottom: 30px;\n            }\n            \n            .form-row { display: flex; flex-direction: column; gap: 15px; }\n            \n            .input-group { display: flex; flex-direction: column; }\n            .input-group label { font-size: 13px; color: #aaa; margin-bottom: 5px; font-weight: 600; }\n            .input-group input {\n                background: #111; border: 1px solid #333; border-radius: 8px;\n                color: #fff; padding: 12px; outline: none; font-size: 14px; width: 100%;\n            }\n            .input-group input:focus { border-color: #00c2ff; }\n            \n            .create-btn {\n                background: #00c2ff; color: #000; border: none; border-radius: 8px;\n                padding: 12px; font-weight: 700; cursor: pointer; font-size: 16px; margin-top: 10px;\n                transition: 0.3s;\n            }\n            .create-btn:hover { background: #0099cc; }\n\n            .links-list { display: flex; flex-direction: column; gap: 15px; }\n            .link-item {\n                background: rgba(255,255,255,0.02); border-radius: 12px; padding: 15px;\n                border: 1px solid rgba(255,255,255,0.05); position: relative;\n            }\n            .link-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }\n            .link-name-container { display: flex; flex-direction: column; }\n            .link-name { font-weight: 700; color: #fff; font-size: 16px; }\n            .link-details { font-size: 12px; color: #888; margin-top: 2px; }\n            .link-stats { font-size: 12px; color: #00ff82; background: rgba(0, 255, 130, 0.1); padding: 2px 8px; border-radius: 4px; white-space: nowrap; }\n            \n            .link-url-box {\n                background: #000; padding: 10px; border-radius: 6px; font-family: monospace;\n                color: #aaa; font-size: 13px; display: flex; justify-content: space-between; align-items: center;\n                border: 1px dashed #333; margin-bottom: 12px;\n                overflow: hidden;\n            }\n            .link-url-box span {\n                white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;\n            }\n            .actions { display: flex; gap: 10px; }\n            .action-btn {\n                flex: 1; padding: 8px; border-radius: 6px; border: none; font-size: 13px; font-weight: 600; cursor: pointer;\n                display: flex; align-items: center; justify-content: center; gap: 5px;\n            }\n            .copy-btn { background: rgba(0,194,255,0.1); color: #00c2ff; }\n            .delete-btn { background: rgba(255,77,77,0.1); color: #ff4d4d; }\n\n            .empty-state { text-align: center; color: #777; font-size: 14px; padding: 20px; }\n        "}),t.jsxs("header",{children:[t.jsx("button",{onClick:()=>{window.history.state&&window.history.state.idx>0?r(-1):r(`/group-chat/${o}`)},className:"back-btn",children:t.jsx("i",{className:"fa-solid fa-arrow-left"})}),t.jsx("h1",{children:"Gerenciar Links"})]}),t.jsxs("main",{children:[t.jsx("h2",{style:{fontSize:"14px",color:"#00c2ff",textTransform:"uppercase",marginBottom:"10px",fontWeight:"700"},children:"Criar Novo Link"}),t.jsx("div",{className:"create-card",children:t.jsxs("form",{onSubmit:n=>{if(n.preventDefault(),!d.trim()||!o)return;const e=p?parseInt(p):void 0,i=a.addGroupLink(o,d,e,f);if(i)m(n=>[i,...n]),c(""),x(""),u("");else{const n={id:Date.now().toString(),name:d,code:Math.random().toString(36).substring(2,8).toUpperCase(),joins:0,createdAt:Date.now(),maxUses:e,expiresAt:f};m(e=>[n,...e]),c(""),x(""),u("")}},className:"form-row",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("label",{children:"Nome do Link (Identificador)"}),t.jsx("input",{type:"text",placeholder:"Ex: Instagram Bio, Campanha Youtube",value:d,onChange:n=>c(n.target.value),maxLength:30,required:!0})]}),t.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.jsxs("div",{className:"input-group",style:{flex:1},children:[t.jsx("label",{children:"Limite de Usos"}),t.jsx("input",{type:"number",placeholder:"Ex: 100 (Vazio = ∞)",value:p,onChange:n=>x(n.target.value),min:"1"})]}),t.jsxs("div",{className:"input-group",style:{flex:1},children:[t.jsx("label",{children:"Expiração (Opcional)"}),t.jsx("input",{type:"datetime-local",value:f,onChange:n=>u(n.target.value),style:{colorScheme:"dark"}})]})]}),t.jsxs("button",{type:"submit",className:"create-btn",children:[t.jsx("i",{className:"fa-solid fa-plus"})," Gerar Link"]})]})}),t.jsx("h2",{style:{fontSize:"14px",color:"#00c2ff",textTransform:"uppercase",marginBottom:"10px",fontWeight:"700"},children:"Links Ativos"}),t.jsx("div",{className:"links-list",children:g.length>0?g.map(n=>{const e=n.maxUses?` / ${n.maxUses}`:"",i=n.expiresAt?`Expira: ${r=n.expiresAt,r?new Date(r).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"Nunca expira"}`:null;var r;const s=`${window.location.origin}/#/groups?join=${n.code}`;return t.jsxs("div",{className:"link-item",children:[t.jsxs("div",{className:"link-header",children:[t.jsxs("div",{className:"link-name-container",children:[t.jsx("span",{className:"link-name",children:n.name}),i&&t.jsxs("span",{className:"link-details",children:[t.jsx("i",{className:"fa-regular fa-clock"})," ",i]})]}),t.jsxs("span",{className:"link-stats",children:[t.jsx("i",{className:"fa-solid fa-users"})," ",n.joins,e]})]}),t.jsx("div",{className:"link-url-box",children:t.jsx("span",{children:s})}),t.jsxs("div",{className:"actions",children:[t.jsxs("button",{className:"action-btn copy-btn",onClick:()=>(n=>{const e=`${window.location.origin}/#/groups?join=${n}`;navigator.clipboard.writeText(e),alert("Link copiado para a área de transferência!")})(n.code),children:[t.jsx("i",{className:"fa-regular fa-copy"})," Copiar"]}),t.jsxs("button",{className:"action-btn delete-btn",onClick:()=>{return e=n.id,void(window.confirm("Deseja excluir este link? O código deixará de funcionar.")&&(o&&a.removeGroupLink(o,e),m(n=>n.filter(n=>n.id!==e))));var e},children:[t.jsx("i",{className:"fa-solid fa-trash"})," Excluir"]})]})]},n.id)}):t.jsx("div",{className:"empty-state",children:"Nenhum link criado para este grupo."})})]})]})};export{r as ManageGroupLinks};

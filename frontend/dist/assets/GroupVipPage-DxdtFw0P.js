import{j as e,r,u as R,f as E}from"./index-BC19Iu_T.js";import{u as B}from"./useGroupSettings-CvPAF9AB.js";import{P as z}from"./PixelSettingsModal-DKkwl8oi.js";import{P as L}from"./ProviderSelectorModal-CFCoHoGU.js";import{p as G}from"./postService-XFLx8Vj8.js";import{U as $}from"./UploadProgressCard-CTKpf9n9.js";const _=({config:l,onOpen:d})=>{const n=[{id:"meta",name:"Meta (Facebook)",icon:"fa-brands fa-facebook",active:!!l.metaId,color:"#1877F2"},{id:"tiktok",name:"TikTok Ads",icon:"fa-brands fa-tiktok",active:!!l.tiktokId,color:"#00f2ea"},{id:"google",name:"Google Ads",icon:"fa-brands fa-google",active:!!l.googleId,color:"#4285F4"},{id:"x",name:"X / Twitter",icon:"fa-brands fa-x-twitter",active:!!l.xId,color:"#fff"}].filter(a=>a.active);return e.jsxs("div",{className:"bg-black/20 border border-white/5 rounded-[32px] p-6 mb-6 overflow-hidden animate-fade-in",children:[e.jsx("style",{children:`
                .add-pixel-trigger {
                    width: 100%;
                    padding: 18px;
                    background: rgba(0, 194, 255, 0.05);
                    border: 1px dashed rgba(0, 194, 255, 0.3);
                    border-radius: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    cursor: pointer;
                    transition: 0.3s;
                    margin-bottom: 20px;
                }
                .add-pixel-trigger:hover {
                    background: rgba(0, 194, 255, 0.1);
                    border-color: #00c2ff;
                }
                .active-pixel-item {
                    display: flex;
                    align-items: center;
                    gap: 15px;
                    padding: 14px 18px;
                    background: rgba(255, 255, 255, 0.03);
                    border: 1px solid rgba(255, 255, 255, 0.05);
                    border-radius: 16px;
                    margin-bottom: 8px;
                    cursor: pointer;
                    transition: 0.2s;
                }
                .active-pixel-item:hover {
                    background: rgba(255, 255, 255, 0.06);
                    border-color: rgba(255, 215, 0, 0.2);
                }
                .pixel-status-tag {
                    font-size: 8px;
                    font-weight: 900;
                    color: #00ff82;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                    background: rgba(0, 255, 130, 0.1);
                    padding: 2px 6px;
                    border-radius: 4px;
                    margin-left: auto;
                }
            `}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[#FFD7001a] flex items-center justify-center text-[#FFD700] text-xl border border-[#FFD70033]",children:e.jsx("i",{className:"fa-solid fa-rocket"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:"Hub de Marketing"}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest",children:"Multi-Pixel Tracking"})]})]}),e.jsxs("div",{className:"add-pixel-trigger",onClick:()=>d(),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#00c2ff1a] flex items-center justify-center text-[#00c2ff]",children:e.jsx("i",{className:"fa-solid fa-plus"})}),e.jsx("span",{className:"text-xs font-black text-white uppercase tracking-wider",children:"Adicionar Pixel"})]}),e.jsx("i",{className:"fa-solid fa-chevron-right text-gray-700 text-[10px]"})]}),n.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h5",{className:"text-[9px] font-black text-gray-600 uppercase tracking-[2px] ml-1 mb-3",children:["Pixels Ativos (",n.length,")"]}),n.map(a=>e.jsxs("div",{className:"active-pixel-item animate-slide-up",onClick:()=>d(a.id),children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-black/40",style:{color:a.color},children:e.jsx("i",{className:a.icon})}),e.jsx("span",{className:"text-xs font-bold text-gray-300",children:a.name}),e.jsx("div",{className:"pixel-status-tag",children:"Ativo"})]},a.id))]}):e.jsx("p",{className:"text-[10px] text-gray-600 text-center italic mt-2",children:"Nenhum pixel configurado ainda."}),e.jsx("p",{className:"text-[8px] text-gray-700 text-center mt-6 uppercase font-black tracking-widest leading-relaxed",children:"O Flux enviará eventos de conversão (Lead, InitiateCheckout e Purchase) para todas as plataformas ativas simultaneamente."})]})},H=({vipPrice:l,setVipPrice:d,vipCurrency:f,setVipCurrency:n,selectedProviderId:a,onOpenProviderSelector:v,pixelConfig:t,onOpenDoorEditor:j,onOpenPixelEditor:m,onManualRelease:N})=>{const[u,h]=r.useState(""),b=()=>a?{syncpay:"SyncPay (Pix)",stripe:"Stripe (Global)",paypal:"PayPal"}[a]||a.toUpperCase():"Nenhum";return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"bg-white/[0.03] border border-white/5 rounded-[24px] p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#00ff821a] flex items-center justify-center text-[#00ff82]",children:e.jsx("i",{className:"fa-solid fa-tag text-xs"})}),e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px]",children:"Estratégia de Preço"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"input-group mb-0",children:[e.jsx("label",{children:"Valor do Acesso"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30 font-black text-xs",children:f==="BRL"?"R$":"$"}),e.jsx("input",{type:"text",className:"input-field pl-12 font-black text-[#00ff82] border-white/5",value:l,onChange:o=>{const y=o.target.value.replace(/\D/g,""),c=parseFloat(y)/100;d(c.toLocaleString("pt-BR",{minimumFractionDigits:2}))}})]})]}),e.jsxs("div",{className:"input-group mb-0",children:[e.jsx("label",{children:"Moeda de Recebimento"}),e.jsxs("select",{className:"input-field font-black uppercase text-xs border-white/5",value:f,onChange:o=>n(o.target.value),children:[e.jsx("option",{value:"BRL",children:"BRL"}),e.jsx("option",{value:"USD",children:"USD"})]})]})]})]}),e.jsxs("div",{className:"bg-white/[0.03] border border-white/5 rounded-[24px] p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#00c2ff1a] flex items-center justify-center text-[#00c2ff]",children:e.jsx("i",{className:"fa-solid fa-wallet text-xs"})}),e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px]",children:"Motor de Pagamento"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-[#00ff821a] px-2 py-0.5 rounded-md border border-[#00ff8222]",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-[#00ff82] animate-pulse"}),e.jsx("span",{className:"text-[8px] font-black text-[#00ff82] uppercase",children:"Ativo"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/40 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[11px] font-bold text-white",children:b()}),e.jsx("span",{className:"text-[9px] text-gray-600 uppercase font-medium",children:"Checkout Verificado"})]}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-[9px] font-black text-[#00c2ff] uppercase tracking-widest hover:bg-[#00c2ff1a] transition-all",children:"Trocar Provedor"})]})]}),e.jsxs("div",{className:"bg-white/[0.03] border border-white/5 rounded-[24px] p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#FFD7001a] flex items-center justify-center text-[#FFD700]",children:e.jsx("i",{className:"fa-solid fa-wand-magic-sparkles text-xs"})}),e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px]",children:"Interface da Porta VIP"})]}),e.jsxs("button",{className:"w-full py-4 bg-white/5 border border-dashed border-[#FFD700]/30 text-[#FFD700] rounded-2xl font-black uppercase text-[10px] tracking-[2px] transition-all hover:bg-[#FFD700]/10 flex items-center justify-center gap-3",onClick:j,children:[e.jsx("i",{className:"fa-solid fa-palette"})," Editar Design do Funil"]})]}),e.jsx(_,{config:t,onOpen:m}),e.jsxs("div",{className:"bg-black/20 rounded-[28px] border border-white/5 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-gray-500",children:e.jsx("i",{className:"fa-solid fa-user-plus text-xs"})}),e.jsx("h4",{className:"text-[10px] font-black text-white/30 uppercase tracking-[2px]",children:"Concessão Administrativa"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"input-field flex-1 border-white/5",placeholder:"@usuario...",value:u,onChange:o=>h(o.target.value)}),e.jsx("button",{onClick:async()=>{await N(u)&&h("")},className:"bg-white text-black px-6 rounded-xl font-black uppercase text-[10px] hover:bg-[#FFD700] transition-all active:scale-95",children:"Liberar"})]}),e.jsx("p",{className:"text-[9px] text-gray-700 mt-3 px-1 italic",children:"Utilize para liberar acessos de cortesia ou parcerias manuais."})]})]})},Y=()=>{const l=R(),{id:d}=E(),{group:f,loading:n,handleSave:a,handleManualRelease:v,form:t}=B(),[j,m]=r.useState(!1),[N,u]=r.useState(!1),[h,b]=r.useState(!1),[o,y]=r.useState(void 0),[c,C]=r.useState(!1),[S,g]=r.useState(0),[D,F]=r.useState(0),[V,U]=r.useState(0);if(n||!f)return null;const O=s=>{y(s),u(!0)},T=async s=>{const i=s.target.files;if(!i||i.length===0)return;const M=Array.from(i),k=10-t.vipMediaItems.length,x=M.slice(0,k);if(x.length===0){alert("Limite de 10 mídias atingido.");return}C(!0),U(x.length),F(0),g(0);const w=[];for(let p=0;p<x.length;p++){const I=x[p];F(p+1),g(Math.round(p/x.length*100));try{const P=await G.uploadMedia(I,"vips_doors"),A=I.type.startsWith("video")?"video":"image";w.push({url:P,type:A}),g(Math.round((p+1)/x.length*100))}catch(P){console.error("Erro no upload de mídia VIP:",P)}}w.length>0&&t.setVipMediaItems([...t.vipMediaItems,...w]),setTimeout(()=>{C(!1),g(0)},1e3)};return e.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-white font-['Inter'] flex flex-col overflow-hidden",children:[e.jsx("style",{children:`
                .vip-editor-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 100; display: flex; flex-direction: column; }
                .input-field { background: #15191f; border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; padding: 12px; color: #fff; width: 100%; outline: none; }
                
                .media-item-container { position: relative; width: 96px; height: 120px; border-radius: 16px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); background: #000; }
                .media-controls-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.6); display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 8px; opacity: 0; transition: 0.2s; }
                .media-item-container:hover .media-controls-overlay { opacity: 1; }
                
                .reorder-btn { width: 28px; height: 28px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: #fff; display: flex; items-center; justify-content: center; cursor: pointer; font-size: 10px; transition: 0.2s; }
                .reorder-btn:hover { background: #00c2ff; color: #000; border-color: #00c2ff; }
                .reorder-btn:disabled { opacity: 0.2; cursor: not-allowed; }
                
                .delete-media-btn { width: 28px; height: 28px; border-radius: 8px; background: rgba(255, 77, 77, 0.2); border: 1px solid rgba(255, 77, 77, 0.4); color: #ff4d4d; display: flex; items-center; justify-content: center; cursor: pointer; font-size: 10px; }
                .delete-media-btn:hover { background: #ff4d4d; color: #fff; }
            `}),e.jsxs("header",{className:"flex items-center p-4 bg-[#0c0f14] border-b border-white/10 h-[65px] sticky top-0 z-50",children:[e.jsx("button",{onClick:()=>l(`/group-settings/${d}`),className:"mr-4 text-white text-xl",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})}),e.jsx("h1",{className:"font-bold text-[#FFD700]",children:"Funil de Vendas VIP"})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-5 max-w-[600px] mx-auto w-full pb-32 no-scrollbar",children:[e.jsx("div",{className:"animate-fade-in",children:e.jsx(H,{vipPrice:t.vipPrice,setVipPrice:t.setVipPrice,vipCurrency:t.vipCurrency,setVipCurrency:t.setVipCurrency,selectedProviderId:t.selectedProviderId,onOpenProviderSelector:()=>b(!0),pixelConfig:t.pixelConfig,onOpenDoorEditor:()=>m(!0),onOpenPixelEditor:O,onManualRelease:v})}),e.jsx("button",{className:"btn-save-fixed",style:{background:"#FFD700",color:"#000"},onClick:a,disabled:c,children:c?e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}):"Salvar Estrutura de Vendas"}),e.jsx($,{progress:S,current:D,total:V,isVisible:c})]}),j&&e.jsxs("div",{className:"vip-editor-modal animate-fade-in",children:[e.jsxs("header",{className:"flex items-center p-4 border-b border-white/10",children:[e.jsx("button",{onClick:()=>m(!1),className:"mr-4 text-white text-xl",children:e.jsx("i",{className:"fa-solid fa-xmark"})}),e.jsx("h1",{className:"font-bold",children:"Design da Porta VIP"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8 no-scrollbar",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-xs font-black text-gray-500 uppercase tracking-widest",children:"Copy de Venda"}),e.jsx("textarea",{className:"input-field min-h-[150px]",value:t.vipDoorText,onChange:s=>t.setVipDoorText(s.target.value),placeholder:"Benefícios do acesso..."}),e.jsx("input",{type:"text",className:"input-field",value:t.vipButtonText,onChange:s=>t.setVipButtonText(s.target.value),placeholder:"Texto do botão..."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"text-xs font-black text-gray-500 uppercase tracking-widest",children:["Galeria de Mídia (",t.vipMediaItems.length,"/10)"]}),t.vipMediaItems.length>1&&e.jsx("span",{className:"text-[9px] text-[#00c2ff] font-black uppercase",children:"Passe o mouse para reordenar"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.vipMediaItems.map((s,i)=>e.jsxs("div",{className:"media-item-container",children:[s.type==="image"?e.jsx("img",{src:s.url,className:"w-full h-full object-cover",alt:"VIP"}):e.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-video text-xs text-[#FFD700]"})}),e.jsxs("div",{className:"media-controls-overlay",children:[e.jsxs("div",{className:"flex gap-1 w-full justify-center",children:[e.jsx("button",{type:"button",onClick:()=>t.moveVipMediaItem(i,"left"),disabled:i===0,className:"reorder-btn",title:"Mover para trás",children:e.jsx("i",{className:"fa-solid fa-chevron-left"})}),e.jsx("button",{type:"button",onClick:()=>t.moveVipMediaItem(i,"right"),disabled:i===t.vipMediaItems.length-1,className:"reorder-btn",title:"Mover para frente",children:e.jsx("i",{className:"fa-solid fa-chevron-right"})})]}),e.jsx("button",{type:"button",onClick:()=>t.setVipMediaItems(t.vipMediaItems.filter((M,k)=>k!==i)),className:"delete-media-btn",title:"Remover",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]}),e.jsxs("div",{className:"absolute top-1 left-1 bg-black/60 text-[8px] font-black text-white px-1.5 py-0.5 rounded-md border border-white/10",children:["#",i+1]})]},i)),t.vipMediaItems.length<10&&e.jsx("button",{onClick:()=>document.getElementById("mediaSubVip")?.click(),className:"w-[96px] h-[120px] rounded-2xl border-2 border-dashed border-white/10 flex flex-col items-center justify-center text-white/20 hover:text-[#00c2ff] hover:border-[#00c2ff]/30 transition-all",disabled:c,children:c?e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-xl"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-plus text-xl mb-1"}),e.jsx("span",{className:"text-[8px] font-black uppercase",children:"Adicionar"})]})})]}),e.jsx("input",{type:"file",id:"mediaSubVip",hidden:!0,accept:"image/*,video/*",multiple:!0,onChange:T})]})]}),e.jsx("div",{className:"p-6 bg-[#0c0f14] border-t border-white/5",children:e.jsx("button",{className:"w-full py-4 bg-[#FFD700] text-black font-black rounded-2xl uppercase shadow-lg shadow-[#FFD700]/10",onClick:()=>m(!1),children:"Concluir Design"})})]}),e.jsx(z,{isOpen:N,onClose:()=>u(!1),initialData:t.pixelConfig,initialPlatform:o,onSave:t.updatePlatformPixel}),e.jsx(L,{isOpen:h,onClose:()=>b(!1),selectedProviderId:t.selectedProviderId,onSelect:s=>t.setSelectedProviderId(s)})]})};export{Y as GroupVipPage};

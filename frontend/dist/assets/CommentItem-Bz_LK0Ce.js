import{r as e,j as s}from"./index-CipjSFYz.js";import{p as t}from"./postService-0_arHZ6V.js";const r=({comment:a,onReplyClick:l,onLike:n,onDelete:i,onUserClick:c,currentUserId:o,depth:x=0})=>{const p=a.userId===o,[d,m]=e.useState(!1),[h,f]=e.useState(!1),[u,g]=e.useState(3),b=a.text.length>120&&!d?a.text.slice(0,120)+"...":a.text,j=0===x?"w-8 h-8":"w-6 h-6",N=0===x&&a.replies&&a.replies.length>0,k=a.replies&&u<a.replies.length,v=()=>{h?(f(!1),g(3)):f(!0)};return s.jsxs("div",{className:"flex flex-col animate-fade-in "+(0===x?"mb-6":"mb-3"),children:[s.jsxs("div",{className:"flex gap-3 items-start relative z-10",children:[s.jsx("div",{className:"flex-shrink-0 cursor-pointer",onClick:()=>c(a.username),children:a.avatar?s.jsx("img",{src:a.avatar,className:`${j} rounded-full object-cover border border-white/10`,alt:a.username}):s.jsx("div",{className:`${j} rounded-full bg-white/5 flex items-center justify-center text-[#00c2ff] border border-white/10`,children:s.jsx("i",{className:"fa-solid fa-user text-[10px]"})})}),s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsxs("div",{className:"flex flex-col bg-white/[0.03] p-3 rounded-2xl border border-white/5",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[s.jsxs("span",{className:"font-bold text-white text-[12px] cursor-pointer hover:text-[#00c2ff] truncate",onClick:()=>c(a.username),children:["@",a.username.replace(/^@/,"")]}),a.replyToUsername&&s.jsxs("span",{className:"text-[10px] text-gray-500 font-medium flex items-center gap-1 shrink-0",children:[s.jsx("i",{className:"fa-solid fa-share text-[8px] opacity-40"}),s.jsxs("span",{className:"text-[#00c2ff]/60",children:["@",a.replyToUsername.replace(/^@/,"")]})]})]}),p&&s.jsx("button",{onClick:()=>i(a.id),className:"text-gray-600 hover:text-red-500 transition-colors p-1",children:s.jsx("i",{className:"fa-solid fa-trash-can text-[10px]"})})]}),s.jsxs("p",{className:"text-[13px] text-gray-200 leading-snug whitespace-pre-wrap break-words font-light",children:[b,a.text.length>120&&s.jsx("button",{onClick:()=>m(!d),className:"text-[#00c2ff] text-xs font-bold ml-1 hover:underline bg-transparent border-none cursor-pointer",children:d?"Ver menos":"Ver mais"})]})]}),s.jsxs("div",{className:"flex items-center gap-5 mt-2 ml-2",children:[s.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-tighter",children:t.formatRelativeTime(a.timestamp)}),s.jsx("button",{className:"text-[10px] font-black text-gray-500 hover:text-[#00c2ff] uppercase tracking-widest cursor-pointer bg-transparent border-none p-0 transition-colors",onClick:()=>l(a.id,a.username),children:"Responder"}),s.jsxs("button",{className:"text-[10px] font-bold flex items-center gap-1.5 ml-auto transition-colors "+(a.likedByMe?"text-red-500":"text-gray-500 hover:text-white"),onClick:()=>n(a.id),children:[s.jsx("i",{className:(a.likedByMe?"fa-solid":"fa-regular")+" fa-heart"}),a.likes&&a.likes>0&&s.jsx("span",{children:a.likes})]})]})]})]}),N&&s.jsxs("div",{className:"relative pl-11 mt-2",children:[s.jsx("div",{className:"absolute left-[15px] top-0 bottom-4 w-[1px] bg-white/5 rounded-full"}),h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex flex-col",children:a.replies.slice(0,u).map(e=>s.jsx(r,{comment:e,onReplyClick:l,onLike:n,onDelete:i,onUserClick:c,currentUserId:o,depth:1},e.id))}),s.jsxs("div",{className:"flex items-center justify-between pr-2 mt-1",children:[k?s.jsxs("button",{onClick:()=>{g(e=>e+3)},className:"text-[10px] font-black text-[#00c2ff] hover:text-white uppercase tracking-widest transition-colors py-2 flex items-center gap-2 bg-transparent border-none cursor-pointer",children:[s.jsx("i",{className:"fa-solid fa-plus-circle text-[12px]"}),"Ver mais respostas (",a.replies.length-u,")"]}):s.jsx("div",{}),s.jsx("button",{onClick:v,className:"text-[9px] font-black text-gray-700 hover:text-gray-400 uppercase tracking-[2px] transition-colors py-2 bg-transparent border-none cursor-pointer",children:"Ocultar conversa"})]})]}):s.jsxs("button",{onClick:v,className:"flex items-center gap-3 mt-2 group bg-transparent border-none p-0 cursor-pointer ml-[-4px]",children:[s.jsx("div",{className:"w-6 h-[1px] bg-white/10 group-hover:bg-[#00c2ff]/30"}),s.jsxs("span",{className:"text-[10px] font-black text-gray-500 group-hover:text-gray-300 uppercase tracking-widest",children:["Ver ",a.replies.length," ",1===a.replies.length?"resposta":"respostas"]})]})]})]})};export{r as C};

import{j as e,u as a,r as t,c as s,d as r}from"./index-Bkpya5GW.js";const l=({children:a,title:t,subtitle:s})=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-100 to-blue-50 p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t}),s&&e.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:s})]}),a]})}),n=({label:a,error:t,className:s,...r})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),e.jsx("input",{className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none ${t?"border-red-500":"border-gray-300"} ${r.disabled?"bg-gray-100 text-gray-500 cursor-not-allowed":""} ${s||""}`,...r}),t&&e.jsx("span",{className:"text-xs text-red-500 mt-1 block",children:t})]}),o=({children:a,variant:t="primary",isLoading:s,className:r,disabled:l,...n})=>{const o=l||s?"opacity-50 cursor-not-allowed":{primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-500/30",secondary:"bg-gray-800 text-white hover:bg-gray-900",google:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50",outline:"border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-50"}[t];return e.jsx("button",{className:`w-full py-2.5 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center ${o} ${r||""}`,disabled:l||s,...n,children:s?e.jsxs("svg",{className:"animate-spin h-5 w-5 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):a})},i=()=>{const i=a(),[d,c]=t.useState(""),[m,g]=t.useState(""),[x,h]=t.useState(""),[u,b]=t.useState(!1),p=localStorage.getItem("reset_email");t.useEffect(()=>{p||i("/forgot-password")},[p,i]);const f=d.length>=6&&d===m;return e.jsx(l,{title:"Redefinir Senha",subtitle:"Crie uma nova senha",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a=d?d.length<6?r.PASSWORD_TOO_SHORT:m?d!==m?r.PASSWORDS_DONT_MATCH:null:"Confirme sua senha":"Nova senha obrigatória";if(a)h(a);else{b(!0),h("");try{p&&(await s.resetPassword(p,d),localStorage.removeItem("reset_email"),alert("Senha alterada com sucesso!"),i("/"))}catch(t){h(t.message)}finally{b(!1)}}},className:"space-y-6",children:[e.jsx(n,{label:"Nova Senha",type:"password",value:d,onChange:e=>c(e.target.value),placeholder:"Mínimo 6 caracteres"}),e.jsx(n,{label:"Confirmar Senha",type:"password",value:m,onChange:e=>g(e.target.value),placeholder:"Repita a nova senha"}),x&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm font-medium text-center",children:x}),e.jsx(o,{type:"submit",disabled:!f,isLoading:u,children:"Salvar nova senha"})]})})};export{i as ResetPassword};

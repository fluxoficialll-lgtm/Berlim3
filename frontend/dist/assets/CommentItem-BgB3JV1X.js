import{r as n,j as e}from"./index-BC19Iu_T.js";import{p as k}from"./postService-XFLx8Vj8.js";const y=({comment:s,onReplyClick:x,onLike:o,onDelete:c,onUserClick:r,currentUserId:p,depth:a=0})=>{const b=s.userId===p,[l,j]=n.useState(!1),[d,f]=n.useState(!1),[i,h]=n.useState(3),v=s.text.length>120&&!l?s.text.slice(0,120)+"...":s.text,u=a===0?"w-8 h-8":"w-6 h-6",N=a===0&&s.replies&&s.replies.length>0,w=s.replies&&i<s.replies.length,g=()=>{d?(f(!1),h(3)):f(!0)},m=()=>{h(t=>t+3)};return e.jsxs("div",{className:`flex flex-col animate-fade-in ${a===0?"mb-6":"mb-3"}`,children:[e.jsxs("div",{className:"flex gap-3 items-start relative z-10",children:[e.jsx("div",{className:"flex-shrink-0 cursor-pointer",onClick:()=>r(s.username),children:s.avatar?e.jsx("img",{src:s.avatar,className:`${u} rounded-full object-cover border border-white/10`,alt:s.username}):e.jsx("div",{className:`${u} rounded-full bg-white/5 flex items-center justify-center text-[#00c2ff] border border-white/10`,children:e.jsx("i",{className:"fa-solid fa-user text-[10px]"})})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex flex-col bg-white/[0.03] p-3 rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsxs("span",{className:"font-bold text-white text-[12px] cursor-pointer hover:text-[#00c2ff] truncate",onClick:()=>r(s.username),children:["@",s.username.replace(/^@/,"")]}),s.replyToUsername&&e.jsxs("span",{className:"text-[10px] text-gray-500 font-medium flex items-center gap-1 shrink-0",children:[e.jsx("i",{className:"fa-solid fa-share text-[8px] opacity-40"}),e.jsxs("span",{className:"text-[#00c2ff]/60",children:["@",s.replyToUsername.replace(/^@/,"")]})]})]}),b&&e.jsx("button",{onClick:()=>c(s.id),className:"text-gray-600 hover:text-red-500 transition-colors p-1",children:e.jsx("i",{className:"fa-solid fa-trash-can text-[10px]"})})]}),e.jsxs("p",{className:"text-[13px] text-gray-200 leading-snug whitespace-pre-wrap break-words font-light",children:[v,s.text.length>120&&e.jsx("button",{onClick:()=>j(!l),className:"text-[#00c2ff] text-xs font-bold ml-1 hover:underline bg-transparent border-none cursor-pointer",children:l?"Ver menos":"Ver mais"})]})]}),e.jsxs("div",{className:"flex items-center gap-5 mt-2 ml-2",children:[e.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-tighter",children:k.formatRelativeTime(s.timestamp)}),e.jsx("button",{className:"text-[10px] font-black text-gray-500 hover:text-[#00c2ff] uppercase tracking-widest cursor-pointer bg-transparent border-none p-0 transition-colors",onClick:()=>x(s.id,s.username),children:"Responder"}),e.jsxs("button",{className:`text-[10px] font-bold flex items-center gap-1.5 ml-auto transition-colors ${s.likedByMe?"text-red-500":"text-gray-500 hover:text-white"}`,onClick:()=>o(s.id),children:[e.jsx("i",{className:`${s.likedByMe?"fa-solid":"fa-regular"} fa-heart`}),s.likes&&s.likes>0&&e.jsx("span",{children:s.likes})]})]})]})]}),N&&e.jsxs("div",{className:"relative pl-11 mt-2",children:[e.jsx("div",{className:"absolute left-[15px] top-0 bottom-4 w-[1px] bg-white/5 rounded-full"}),d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col",children:s.replies.slice(0,i).map(t=>e.jsx(y,{comment:t,onReplyClick:x,onLike:o,onDelete:c,onUserClick:r,currentUserId:p,depth:1},t.id))}),e.jsxs("div",{className:"flex items-center justify-between pr-2 mt-1",children:[w?e.jsxs("button",{onClick:m,className:"text-[10px] font-black text-[#00c2ff] hover:text-white uppercase tracking-widest transition-colors py-2 flex items-center gap-2 bg-transparent border-none cursor-pointer",children:[e.jsx("i",{className:"fa-solid fa-plus-circle text-[12px]"}),"Ver mais respostas (",s.replies.length-i,")"]}):e.jsx("div",{}),e.jsx("button",{onClick:g,className:"text-[9px] font-black text-gray-700 hover:text-gray-400 uppercase tracking-[2px] transition-colors py-2 bg-transparent border-none cursor-pointer",children:"Ocultar conversa"})]})]}):e.jsxs("button",{onClick:g,className:"flex items-center gap-3 mt-2 group bg-transparent border-none p-0 cursor-pointer ml-[-4px]",children:[e.jsx("div",{className:"w-6 h-[1px] bg-white/10 group-hover:bg-[#00c2ff]/30"}),e.jsxs("span",{className:"text-[10px] font-black text-gray-500 group-hover:text-gray-300 uppercase tracking-widest",children:["Ver ",s.replies.length," ",s.replies.length===1?"resposta":"respostas"]})]})]})]})};export{y as C};

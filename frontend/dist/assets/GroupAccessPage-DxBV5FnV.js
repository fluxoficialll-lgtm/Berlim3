import{r as p,j as e,g as N,u as v,f as k}from"./index-BC19Iu_T.js";import{u as w}from"./useGroupSettings-CvPAF9AB.js";const y=({groupId:i,isAdmin:a,approveMembers:r,setApproveMembers:o,pendingRequests:l,handlePendingAction:c,links:t,setLinks:u})=>{const[b,d]=p.useState(!1),[x,f]=p.useState(""),[m,h]=p.useState(""),j=()=>{if(!x.trim())return;const s=m?parseInt(m):void 0,n=N.addGroupLink(i,x,s);n&&(u([n,...t]),f(""),h(""),d(!1))},g=s=>{const n=`${window.location.origin}/#/groups?join=${s}`;navigator.clipboard.writeText(n),alert("Link copiado!")};return e.jsxs("div",{className:"flex flex-col gap-4",children:[a&&e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 mb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h4",{className:"font-bold text-sm text-white",children:"Aprovar Membros"}),e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black tracking-wider",children:"Moderação de entrada ativa"})]}),e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>o(!r)}),e.jsx("span",{className:"slider"})]})]}),l.length>0&&e.jsxs("div",{className:"bg-[#ffaa00]/10 border border-[#ffaa00]/20 rounded-xl p-4 mb-2",children:[e.jsxs("div",{className:"text-[10px] font-black text-[#ffaa00] uppercase mb-3 tracking-widest",children:["Solicitações Pendentes (",l.length,")"]}),e.jsx("div",{className:"flex flex-col gap-2",children:l.slice(0,3).map(s=>e.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-3 rounded-lg border border-white/5",children:[e.jsx("span",{className:"text-xs font-bold truncate pr-4",children:s.profile?.nickname||s.profile?.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(s.id,"accept"),className:"w-8 h-8 rounded-lg bg-[#00ff82]/10 text-[#00ff82] flex items-center justify-center text-xs",children:e.jsx("i",{className:"fa-solid fa-check"})}),e.jsx("button",{onClick:()=>c(s.id,"deny"),className:"w-8 h-8 rounded-lg bg-red-500/10 text-red-500 flex items-center justify-center text-xs",children:e.jsx("i",{className:"fa-solid fa-xmark"})})]})]},s.id))})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Links de Convite"}),a&&e.jsxs("button",{onClick:()=>d(!0),className:"text-[#00c2ff] text-[10px] font-black uppercase tracking-wider",children:[e.jsx("i",{className:"fa-solid fa-plus-circle mr-1"})," Gerar Novo"]})]}),e.jsxs("div",{className:"space-y-2",children:[t.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-black/20 p-4 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs font-bold text-white truncate",children:s.name}),e.jsxs("div",{className:"text-[10px] font-mono text-gray-500 mt-0.5 uppercase tracking-tighter",children:["REF: ",s.code]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"text-[10px] font-black text-[#00ff82]",children:[s.joins," ",e.jsx("i",{className:"fa-solid fa-user-plus ml-0.5"})]}),e.jsx("button",{onClick:()=>g(s.code),className:"text-[#00c2ff] hover:text-white transition-colors p-2",children:e.jsx("i",{className:"fa-regular fa-copy"})})]})]},s.id)),t.length===0&&e.jsx("div",{className:"text-center py-4 text-xs text-gray-600 italic",children:"Nenhum link ativo."})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60] p-6 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-[#1a1e26] p-8 rounded-3xl w-full max-w-sm border border-white/10 shadow-2xl animate-pop-in",children:[e.jsx("h3",{className:"text-lg font-black mb-6 uppercase tracking-wider text-center",children:"Criar Link"}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Nome do Canal (Origem)"}),e.jsx("input",{type:"text",className:"input-field",placeholder:"Ex: Bio Instagram",value:x,onChange:s=>f(s.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Limite de Usos (Opcional)"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"Ilimitado",value:m,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{className:"flex-1 py-4 bg-white/5 text-gray-400 font-bold rounded-2xl uppercase text-xs",onClick:()=>d(!1),children:"Cancelar"}),e.jsx("button",{className:"flex-1 py-4 bg-[#00c2ff] text-black font-black rounded-2xl uppercase text-xs shadow-lg shadow-[#00c2ff]/20",onClick:j,children:"Confirmar"})]})]})})]})},M=()=>{const i=v(),{id:a}=k(),{group:r,loading:o,isAdmin:l,handlePendingAction:c,form:t}=w();return o||!r?null:e.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-white font-['Inter'] flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex items-center p-4 bg-[#0c0f14] border-b border-white/10 h-[65px] sticky top-0 z-50",children:[e.jsx("button",{onClick:()=>i(`/group-settings/${a}`),className:"mr-4 text-white text-xl",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})}),e.jsx("h1",{className:"font-bold",children:"Acesso e Convites"})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-5 max-w-[600px] mx-auto w-full",children:[e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:e.jsx(y,{groupId:a,isAdmin:l,approveMembers:t.approveMembers,setApproveMembers:t.setApproveMembers,pendingRequests:t.pendingRequests,handlePendingAction:c,links:t.links,setLinks:t.setLinks})}),e.jsx("button",{className:"btn-save-fixed",onClick:()=>i(`/group-settings/${a}`),children:"Voltar ao Menu"})]})]})};export{M as GroupAccessPage};

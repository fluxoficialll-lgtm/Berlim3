import{j as e,L,u as T,r as s,c as v}from"./index-BC19Iu_T.js";import{C as V}from"./CodeVerificationCard-BOnm4mtt.js";const _=({email:o,setEmail:l,onSubmit:f,loading:r,btnText:n,btnColorClass:m})=>e.jsxs("div",{className:"w-full max-w-[400px] bg-white/5 backdrop-blur-2xl rounded-[32px] p-10 border border-white/10 shadow-2xl flex flex-col items-center animate-fade-in mx-auto",children:[e.jsxs("div",{className:"mb-8 w-[70px] h-[70px] bg-white/5 rounded-2xl flex items-center justify-center relative border border-white/10 shadow-[0_0_30px_rgba(0,194,255,0.2)]",children:[e.jsx("div",{className:"absolute w-[45px] h-[25px] rounded-[50%] border-[3.5px] border-[#00c2ff] rotate-[25deg]"}),e.jsx("div",{className:"absolute w-[45px] h-[25px] rounded-[50%] border-[3.5px] border-[#00c2ff] -rotate-[25deg]"})]}),e.jsx("h1",{className:"text-2xl font-bold text-center mb-2 text-white",children:"Recuperar Senha"}),e.jsx("p",{className:"text-gray-400 text-sm text-center mb-8 leading-relaxed",children:"Insira seu e-mail para receber o código de validação."}),e.jsxs("form",{onSubmit:f,className:"w-full space-y-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fa-solid fa-at absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm"}),e.jsx("input",{type:"email",placeholder:"E-mail cadastrado",required:!0,value:o,onChange:x=>l(x.target.value),className:"w-full p-3.5 pl-11 bg-black/20 border border-white/10 rounded-xl text-white outline-none focus:border-[#00c2ff] transition-all placeholder-gray-600"})]}),e.jsx("button",{type:"submit",disabled:!o||r,className:"w-full py-4 bg-[#00c2ff] text-black font-black rounded-xl hover:bg-[#00aaff] transition-all shadow-lg shadow-[#00c2ff]/20 disabled:opacity-50 active:scale-[0.98] uppercase tracking-widest text-sm",children:r?e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}):n})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-white/5 w-full text-center",children:e.jsxs(L,{to:"/",className:"text-gray-400 hover:text-white transition-colors text-xs font-bold flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-arrow-left text-[10px]"})," VOLTAR AO LOGIN"]})})]}),P=()=>{const o=T(),[l,f]=s.useState(""),[r,n]=s.useState(["","","","","",""]),[m,x]=s.useState("email"),[i,p]=s.useState(0),[b,d]=s.useState(!1),[y,h]=s.useState(""),[N,w]=s.useState("Enviar E-mail"),[C,g]=s.useState("bg-[#00c2ff]"),u=s.useRef([]);s.useEffect(()=>{let t;return i>0&&(t=setInterval(()=>p(a=>a-1),1e3)),()=>clearInterval(t)},[i]);const j=async t=>{t.preventDefault(),d(!0),h("");try{await v.sendVerificationCode(l,"reset"),x("code"),p(30)}catch(a){w(a.message||"Erro"),g("bg-red-500"),setTimeout(()=>{w("Enviar E-mail"),g("bg-[#00c2ff]")},2e3)}finally{d(!1)}},S=async t=>{t.preventDefault(),d(!0);try{await v.verifyCode(l,r.join(""),!0),localStorage.setItem("reset_email",l),o("/reset-password")}catch(a){h(a.message)}finally{d(!1)}},E=(t,a)=>{const c=[...r];c[t]=a.slice(-1),n(c),a&&t<5&&u.current[t+1]?.focus()},k=(t,a)=>{a.key==="Backspace"&&!r[t]&&t>0&&u.current[t-1]?.focus()},R=t=>{t.preventDefault();const a=t.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),c=[...r];a.split("").forEach((D,I)=>c[I]=D),n(c)};return e.jsxs("div",{className:"h-screen w-full bg-[#0c0f14] text-white font-['Inter'] flex items-center justify-center p-5",children:[e.jsx("header",{className:"fixed top-0 left-0 w-full p-5 z-10",children:e.jsx("button",{onClick:()=>o("/"),className:"bg-white/10 p-2 rounded-full border border-[#00c2ff] text-[#00c2ff]",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})})}),m==="email"?e.jsx(_,{email:l,setEmail:f,loading:b,btnText:N,btnColorClass:C,onSubmit:j}):e.jsx(V,{email:l,code:r,setCode:n,onInput:E,onKeyDown:k,onPaste:R,onSubmit:S,onResend:j,timer:i,canResend:i===0,loading:b,error:y,inputsRef:u,title:"Redefinir Senha"})]})};export{P as ForgotPassword};

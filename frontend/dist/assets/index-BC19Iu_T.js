const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VerifyEmail-BQp6mH_M.js","assets/CodeVerificationCard-BOnm4mtt.js","assets/ForgotPassword-Df-YXgOl.js","assets/Feed-jvoR9924.js","assets/postService-XFLx8Vj8.js","assets/recommendationService-D1Cq_qcN.js","assets/FeedItem-DGLoJJDB.js","assets/UserBadge-CHMRiDZl.js","assets/UserAvatar-BWaKHm2D.js","assets/Footer-CqKWM_In.js","assets/MainHeader-C_NQXNMS.js","assets/PostDetails-BY5olW9B.js","assets/apiClient-cuuPgksg.js","assets/CommentItem-BgB3JV1X.js","assets/CreatePost-DOQPxxE-.js","assets/contentSafetyService-BoymUvRp.js","assets/idGenerator-C8OoQYlS.js","assets/CreatePoll-HyDbaVdH.js","assets/Reels-_uciQtRE.js","assets/reelsService-v3uh_RdW.js","assets/CommentSheet-Bk6VXXoJ.js","assets/CreateReel-BKELwJbg.js","assets/ReelsSearch-CsuyqrBy.js","assets/FeedSearch-lrFLhffR.js","assets/Groups-48rbjcdc.js","assets/GroupChat-BOOQFcAc.js","assets/MessageItem-X0sf7ji-.js","assets/CreateVipGroup-B-k5D7HV.js","assets/PixelSettingsModal-DKkwl8oi.js","assets/CurrencySelectorModal-XBEkBh7D.js","assets/ProviderSelectorModal-CFCoHoGU.js","assets/ImageCropModal-DKSoCquK.js","assets/UploadProgressCard-CTKpf9n9.js","assets/CreatePublicGroup-CeXb5SKy.js","assets/CreatePrivateGroup-BIHNtHjK.js","assets/EditGroup-1GxT8un-.js","assets/VipGroupSales-pzwn4GeT.js","assets/VipSalesTracker-FD1TTkOP.js","assets/useVipPricing-SNzFdJyy.js","assets/currencyService-BC2Bcej_.js","assets/MarketingPrompts-BDZDZdWa.js","assets/GroupSettings-EiumkGWN.js","assets/useGroupSettings-CvPAF9AB.js","assets/SettingItem-DxC-aysh.js","assets/SuccessBridge-DFT6KgaJ.js","assets/PurchaseIntention-CwMn_lv1.js","assets/GroupInfoPage-DqJU4nDH.js","assets/GroupAccessPage-DxBV5FnV.js","assets/GroupModerationPage-DiNRq9Tm.js","assets/GroupMembersPage-DketAI7d.js","assets/GroupVipPage-DxdtFw0P.js","assets/GroupStatisticsPage-BdHXjUn5.js","assets/GroupChannelsPage-CqTvQC8H.js","assets/ChannelOptionsModal-YmnZmo41.js","assets/GroupSalesPlatformPage-DrpHhpU0.js","assets/GroupSalesPlatformView-BqVZDLH1.js","assets/OwnerControls-9CBqD19P.js","assets/SalesFolderContentPage-DGn4_abc.js","assets/GroupRolesPage-B09BEH03.js","assets/GroupChannelsList-BSya_NNy.js","assets/GroupCheckoutConfigPage-DvPZoiIF.js","assets/GlobalSimulatorModal-BqMUeeF_.js","assets/GroupRevenue-Cx_svrRt.js","assets/Marketplace-Bz7XTYg5.js","assets/marketplaceService-ov_b-P0x.js","assets/ProductCard-CO49MvpN.js","assets/ProductDetails_v2-BgLC8m-a.js","assets/ProductDetails_v2-O2IZodv_.css","assets/CreateMarketplaceItem-CcvM6XfH.js","assets/MyStore-DrAyVmk6.js","assets/AdPlacementSelector-DG4NgdDv.js","assets/AdPreview-0jQ92R6c.js","assets/CampaignPerformance-s9HTjCia.js","assets/AdCampaignTypeSelector-CIi2zDlQ.js","assets/AdSelectionHeader-CfXewp9m.js","assets/AdContentSelector-B3o_gEwQ.js","assets/Profile-CgDq9kmE.js","assets/ProfileProductsGrid-BcnAIYzq.js","assets/UserProfile-CEuNYUBZ.js","assets/CompleteProfile-Dtua9Hi5.js","assets/EditProfile-BPXXXH1A.js","assets/Messages-DLtkgk53.js","assets/Chat-BaGDi18z.js","assets/Notifications-DOtBib_D.js","assets/Settings-Dw1iJFQx.js","assets/LanguageSettings-CxVe64_s.js","assets/FinancialPanel-Csamner1.js","assets/ProviderConfig-CUm3QMFq.js","assets/paypalService-Dk5je5dH.js"])))=>i.map(i=>d[i]);
function a0(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in t)){const l=Object.getOwnPropertyDescriptor(o,s);l&&Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Bm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ja={exports:{}},Hr={},eu={exports:{}},ye={};var _p;function u0(){if(_p)return ye;_p=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function E(x){return x===null||typeof x!="object"?null:(x=_&&x[_]||x["@@iterator"],typeof x=="function"?x:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,k={};function A(x,O,fe){this.props=x,this.context=O,this.refs=k,this.updater=fe||w}A.prototype.isReactComponent={},A.prototype.setState=function(x,O){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,O,"setState")},A.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function U(){}U.prototype=A.prototype;function $(x,O,fe){this.props=x,this.context=O,this.refs=k,this.updater=fe||w}var b=$.prototype=new U;b.constructor=$,P(b,A.prototype),b.isPureReactComponent=!0;var H=Array.isArray,F=Object.prototype.hasOwnProperty,ae={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function le(x,O,fe){var he,ge={},ve=null,Ae=null;if(O!=null)for(he in O.ref!==void 0&&(Ae=O.ref),O.key!==void 0&&(ve=""+O.key),O)F.call(O,he)&&!Y.hasOwnProperty(he)&&(ge[he]=O[he]);var Re=arguments.length-2;if(Re===1)ge.children=fe;else if(1<Re){for(var De=Array(Re),_t=0;_t<Re;_t++)De[_t]=arguments[_t+2];ge.children=De}if(x&&x.defaultProps)for(he in Re=x.defaultProps,Re)ge[he]===void 0&&(ge[he]=Re[he]);return{$$typeof:t,type:x,key:ve,ref:Ae,props:ge,_owner:ae.current}}function ee(x,O){return{$$typeof:t,type:x.type,key:O,ref:x.ref,props:x.props,_owner:x._owner}}function de(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function _e(x){var O={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(fe){return O[fe]})}var Se=/\/+/g;function Ie(x,O){return typeof x=="object"&&x!==null&&x.key!=null?_e(""+x.key):O.toString(36)}function Pe(x,O,fe,he,ge){var ve=typeof x;(ve==="undefined"||ve==="boolean")&&(x=null);var Ae=!1;if(x===null)Ae=!0;else switch(ve){case"string":case"number":Ae=!0;break;case"object":switch(x.$$typeof){case t:case e:Ae=!0}}if(Ae)return Ae=x,ge=ge(Ae),x=he===""?"."+Ie(Ae,0):he,H(ge)?(fe="",x!=null&&(fe=x.replace(Se,"$&/")+"/"),Pe(ge,O,fe,"",function(_t){return _t})):ge!=null&&(de(ge)&&(ge=ee(ge,fe+(!ge.key||Ae&&Ae.key===ge.key?"":(""+ge.key).replace(Se,"$&/")+"/")+x)),O.push(ge)),1;if(Ae=0,he=he===""?".":he+":",H(x))for(var Re=0;Re<x.length;Re++){ve=x[Re];var De=he+Ie(ve,Re);Ae+=Pe(ve,O,fe,De,ge)}else if(De=E(x),typeof De=="function")for(x=De.call(x),Re=0;!(ve=x.next()).done;)ve=ve.value,De=he+Ie(ve,Re++),Ae+=Pe(ve,O,fe,De,ge);else if(ve==="object")throw O=String(x),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return Ae}function Ge(x,O,fe){if(x==null)return x;var he=[],ge=0;return Pe(x,he,"","",function(ve){return O.call(fe,ve,ge++)}),he}function ze(x){if(x._status===-1){var O=x._result;O=O(),O.then(function(fe){(x._status===0||x._status===-1)&&(x._status=1,x._result=fe)},function(fe){(x._status===0||x._status===-1)&&(x._status=2,x._result=fe)}),x._status===-1&&(x._status=0,x._result=O)}if(x._status===1)return x._result.default;throw x._result}var ke={current:null},z={transition:null},se={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:z,ReactCurrentOwner:ae};function J(){throw Error("act(...) is not supported in production builds of React.")}return ye.Children={map:Ge,forEach:function(x,O,fe){Ge(x,function(){O.apply(this,arguments)},fe)},count:function(x){var O=0;return Ge(x,function(){O++}),O},toArray:function(x){return Ge(x,function(O){return O})||[]},only:function(x){if(!de(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},ye.Component=A,ye.Fragment=n,ye.Profiler=s,ye.PureComponent=$,ye.StrictMode=o,ye.Suspense=m,ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,ye.act=J,ye.cloneElement=function(x,O,fe){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var he=P({},x.props),ge=x.key,ve=x.ref,Ae=x._owner;if(O!=null){if(O.ref!==void 0&&(ve=O.ref,Ae=ae.current),O.key!==void 0&&(ge=""+O.key),x.type&&x.type.defaultProps)var Re=x.type.defaultProps;for(De in O)F.call(O,De)&&!Y.hasOwnProperty(De)&&(he[De]=O[De]===void 0&&Re!==void 0?Re[De]:O[De])}var De=arguments.length-2;if(De===1)he.children=fe;else if(1<De){Re=Array(De);for(var _t=0;_t<De;_t++)Re[_t]=arguments[_t+2];he.children=Re}return{$$typeof:t,type:x.type,key:ge,ref:ve,props:he,_owner:Ae}},ye.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:l,_context:x},x.Consumer=x},ye.createElement=le,ye.createFactory=function(x){var O=le.bind(null,x);return O.type=x,O},ye.createRef=function(){return{current:null}},ye.forwardRef=function(x){return{$$typeof:p,render:x}},ye.isValidElement=de,ye.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:ze}},ye.memo=function(x,O){return{$$typeof:h,type:x,compare:O===void 0?null:O}},ye.startTransition=function(x){var O=z.transition;z.transition={};try{x()}finally{z.transition=O}},ye.unstable_act=J,ye.useCallback=function(x,O){return ke.current.useCallback(x,O)},ye.useContext=function(x){return ke.current.useContext(x)},ye.useDebugValue=function(){},ye.useDeferredValue=function(x){return ke.current.useDeferredValue(x)},ye.useEffect=function(x,O){return ke.current.useEffect(x,O)},ye.useId=function(){return ke.current.useId()},ye.useImperativeHandle=function(x,O,fe){return ke.current.useImperativeHandle(x,O,fe)},ye.useInsertionEffect=function(x,O){return ke.current.useInsertionEffect(x,O)},ye.useLayoutEffect=function(x,O){return ke.current.useLayoutEffect(x,O)},ye.useMemo=function(x,O){return ke.current.useMemo(x,O)},ye.useReducer=function(x,O,fe){return ke.current.useReducer(x,O,fe)},ye.useRef=function(x){return ke.current.useRef(x)},ye.useState=function(x){return ke.current.useState(x)},ye.useSyncExternalStore=function(x,O,fe){return ke.current.useSyncExternalStore(x,O,fe)},ye.useTransition=function(){return ke.current.useTransition()},ye.version="18.3.1",ye}var Ep;function tc(){return Ep||(Ep=1,eu.exports=u0()),eu.exports}var Sp;function c0(){if(Sp)return Hr;Sp=1;var t=tc(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(p,m,h){var y,_={},E=null,w=null;h!==void 0&&(E=""+h),m.key!==void 0&&(E=""+m.key),m.ref!==void 0&&(w=m.ref);for(y in m)o.call(m,y)&&!l.hasOwnProperty(y)&&(_[y]=m[y]);if(p&&p.defaultProps)for(y in m=p.defaultProps,m)_[y]===void 0&&(_[y]=m[y]);return{$$typeof:e,type:p,key:E,ref:w,props:_,_owner:s.current}}return Hr.Fragment=n,Hr.jsx=c,Hr.jsxs=c,Hr}var Cp;function d0(){return Cp||(Cp=1,ja.exports=c0()),ja.exports}var C=d0(),M=tc();const Bs=Bm(M),f0=a0({__proto__:null,default:Bs},[M]);var gs={},tu={exports:{}},vt={},nu={exports:{}},ou={};var wp;function p0(){return wp||(wp=1,(function(t){function e(z,se){var J=z.length;z.push(se);e:for(;0<J;){var x=J-1>>>1,O=z[x];if(0<s(O,se))z[x]=se,z[J]=O,J=x;else break e}}function n(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var se=z[0],J=z.pop();if(J!==se){z[0]=J;e:for(var x=0,O=z.length,fe=O>>>1;x<fe;){var he=2*(x+1)-1,ge=z[he],ve=he+1,Ae=z[ve];if(0>s(ge,J))ve<O&&0>s(Ae,ge)?(z[x]=Ae,z[ve]=J,x=ve):(z[x]=ge,z[he]=J,x=he);else if(ve<O&&0>s(Ae,J))z[x]=Ae,z[ve]=J,x=ve;else break e}}return se}function s(z,se){var J=z.sortIndex-se.sortIndex;return J!==0?J:z.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,p=c.now();t.unstable_now=function(){return c.now()-p}}var m=[],h=[],y=1,_=null,E=3,w=!1,P=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var se=n(h);se!==null;){if(se.callback===null)o(h);else if(se.startTime<=z)o(h),se.sortIndex=se.expirationTime,e(m,se);else break;se=n(h)}}function H(z){if(k=!1,b(z),!P)if(n(m)!==null)P=!0,ze(F);else{var se=n(h);se!==null&&ke(H,se.startTime-z)}}function F(z,se){P=!1,k&&(k=!1,U(le),le=-1),w=!0;var J=E;try{for(b(se),_=n(m);_!==null&&(!(_.expirationTime>se)||z&&!_e());){var x=_.callback;if(typeof x=="function"){_.callback=null,E=_.priorityLevel;var O=x(_.expirationTime<=se);se=t.unstable_now(),typeof O=="function"?_.callback=O:_===n(m)&&o(m),b(se)}else o(m);_=n(m)}if(_!==null)var fe=!0;else{var he=n(h);he!==null&&ke(H,he.startTime-se),fe=!1}return fe}finally{_=null,E=J,w=!1}}var ae=!1,Y=null,le=-1,ee=5,de=-1;function _e(){return!(t.unstable_now()-de<ee)}function Se(){if(Y!==null){var z=t.unstable_now();de=z;var se=!0;try{se=Y(!0,z)}finally{se?Ie():(ae=!1,Y=null)}}else ae=!1}var Ie;if(typeof $=="function")Ie=function(){$(Se)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Ge=Pe.port2;Pe.port1.onmessage=Se,Ie=function(){Ge.postMessage(null)}}else Ie=function(){A(Se,0)};function ze(z){Y=z,ae||(ae=!0,Ie())}function ke(z,se){le=A(function(){z(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){P||w||(P=!0,ze(F))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(z){switch(E){case 1:case 2:case 3:var se=3;break;default:se=E}var J=E;E=se;try{return z()}finally{E=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,se){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=E;E=z;try{return se()}finally{E=J}},t.unstable_scheduleCallback=function(z,se,J){var x=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?x+J:x):J=x,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=J+O,z={id:y++,callback:se,priorityLevel:z,startTime:J,expirationTime:O,sortIndex:-1},J>x?(z.sortIndex=J,e(h,z),n(m)===null&&z===n(h)&&(k?(U(le),le=-1):k=!0,ke(H,J-x))):(z.sortIndex=O,e(m,z),P||w||(P=!0,ze(F))),z},t.unstable_shouldYield=_e,t.unstable_wrapCallback=function(z){var se=E;return function(){var J=E;E=se;try{return z.apply(this,arguments)}finally{E=J}}}})(ou)),ou}var Tp;function h0(){return Tp||(Tp=1,nu.exports=p0()),nu.exports}var Ip;function m0(){if(Ip)return vt;Ip=1;var t=tc(),e=h0();function n(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(s[r]=i,r=0;r<i.length;r++)o.add(i[r])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},_={};function E(r){return m.call(_,r)?!0:m.call(y,r)?!1:h.test(r)?_[r]=!0:(y[r]=!0,!1)}function w(r,i,a,f){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return f?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function P(r,i,a,f){if(i===null||typeof i>"u"||w(r,i,a,f))return!0;if(f)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function k(r,i,a,f,g,v,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=v,this.removeEmptyString=S}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){A[r]=new k(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];A[i]=new k(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){A[r]=new k(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){A[r]=new k(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){A[r]=new k(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){A[r]=new k(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){A[r]=new k(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){A[r]=new k(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){A[r]=new k(r,5,!1,r.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function $(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(U,$);A[i]=new k(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(U,$);A[i]=new k(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(U,$);A[i]=new k(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){A[r]=new k(r,1,!1,r.toLowerCase(),null,!1,!1)}),A.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){A[r]=new k(r,1,!1,r.toLowerCase(),null,!0,!0)});function b(r,i,a,f){var g=A.hasOwnProperty(i)?A[i]:null;(g!==null?g.type!==0:f||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,a,g,f)&&(a=null),f||g===null?E(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):g.mustUseProperty?r[g.propertyName]=a===null?g.type===3?!1:"":a:(i=g.attributeName,f=g.attributeNamespace,a===null?r.removeAttribute(i):(g=g.type,a=g===3||g===4&&a===!0?"":""+a,f?r.setAttributeNS(f,i,a):r.setAttribute(i,a))))}var H=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),ae=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),_e=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Ge=Symbol.for("react.memo"),ze=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),z=Symbol.iterator;function se(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var J=Object.assign,x;function O(r){if(x===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);x=i&&i[1]||""}return`
`+x+r}var fe=!1;function he(r,i){if(!r||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(D){var f=D}Reflect.construct(r,[],i)}else{try{i.call()}catch(D){f=D}r.call(i.prototype)}else{try{throw Error()}catch(D){f=D}r()}}catch(D){if(D&&f&&typeof D.stack=="string"){for(var g=D.stack.split(`
`),v=f.stack.split(`
`),S=g.length-1,T=v.length-1;1<=S&&0<=T&&g[S]!==v[T];)T--;for(;1<=S&&0<=T;S--,T--)if(g[S]!==v[T]){if(S!==1||T!==1)do if(S--,T--,0>T||g[S]!==v[T]){var I=`
`+g[S].replace(" at new "," at ");return r.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",r.displayName)),I}while(1<=S&&0<=T);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?O(r):""}function ge(r){switch(r.tag){case 5:return O(r.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return r=he(r.type,!1),r;case 11:return r=he(r.type.render,!1),r;case 1:return r=he(r.type,!0),r;default:return""}}function ve(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Y:return"Fragment";case ae:return"Portal";case ee:return"Profiler";case le:return"StrictMode";case Ie:return"Suspense";case Pe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case _e:return(r.displayName||"Context")+".Consumer";case de:return(r._context.displayName||"Context")+".Provider";case Se:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ge:return i=r.displayName||null,i!==null?i:ve(r.type)||"Memo";case ze:i=r._payload,r=r._init;try{return ve(r(i))}catch{}}return null}function Ae(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(i);case 8:return i===le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Re(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function De(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _t(r){var i=De(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),f=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var g=a.get,v=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function si(r){r._valueTracker||(r._valueTracker=_t(r))}function Tc(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),f="";return r&&(f=De(r)?r.checked?"true":"false":r.value),r=f,r!==a?(i.setValue(r),!0):!1}function li(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function sl(r,i){var a=i.checked;return J({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Ic(r,i){var a=i.defaultValue==null?"":i.defaultValue,f=i.checked!=null?i.checked:i.defaultChecked;a=Re(i.value!=null?i.value:a),r._wrapperState={initialChecked:f,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ac(r,i){i=i.checked,i!=null&&b(r,"checked",i,!1)}function ll(r,i){Ac(r,i);var a=Re(i.value),f=i.type;if(a!=null)f==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?al(r,i.type,a):i.hasOwnProperty("defaultValue")&&al(r,i.type,Re(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function Pc(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var f=i.type;if(!(f!=="submit"&&f!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function al(r,i,a){(i!=="number"||li(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var or=Array.isArray;function ho(r,i,a,f){if(r=r.options,i){i={};for(var g=0;g<a.length;g++)i["$"+a[g]]=!0;for(a=0;a<r.length;a++)g=i.hasOwnProperty("$"+r[a].value),r[a].selected!==g&&(r[a].selected=g),g&&f&&(r[a].defaultSelected=!0)}else{for(a=""+Re(a),i=null,g=0;g<r.length;g++){if(r[g].value===a){r[g].selected=!0,f&&(r[g].defaultSelected=!0);return}i!==null||r[g].disabled||(i=r[g])}i!==null&&(i.selected=!0)}}function ul(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Rc(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(n(92));if(or(a)){if(1<a.length)throw Error(n(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:Re(a)}}function xc(r,i){var a=Re(i.value),f=Re(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),f!=null&&(r.defaultValue=""+f)}function kc(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Nc(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cl(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Nc(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ai,Mc=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,f,g){MSApp.execUnsafeLocalFunction(function(){return r(i,a,f,g)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(ai=ai||document.createElement("div"),ai.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ai.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function rr(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fy=["Webkit","ms","Moz","O"];Object.keys(ir).forEach(function(r){fy.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),ir[i]=ir[r]})});function Lc(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||ir.hasOwnProperty(r)&&ir[r]?(""+i).trim():i+"px"}function Dc(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var f=a.indexOf("--")===0,g=Lc(a,i[a],f);a==="float"&&(a="cssFloat"),f?r.setProperty(a,g):r[a]=g}}var py=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(r,i){if(i){if(py[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function fl(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pl=null;function hl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ml=null,mo=null,go=null;function Uc(r){if(r=Pr(r)){if(typeof ml!="function")throw Error(n(280));var i=r.stateNode;i&&(i=Ni(i),ml(r.stateNode,r.type,i))}}function Fc(r){mo?go?go.push(r):go=[r]:mo=r}function Oc(){if(mo){var r=mo,i=go;if(go=mo=null,Uc(r),i)for(r=0;r<i.length;r++)Uc(i[r])}}function bc(r,i){return r(i)}function Vc(){}var gl=!1;function Bc(r,i,a){if(gl)return r(i,a);gl=!0;try{return bc(r,i,a)}finally{gl=!1,(mo!==null||go!==null)&&(Vc(),Oc())}}function sr(r,i){var a=r.stateNode;if(a===null)return null;var f=Ni(a);if(f===null)return null;a=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(n(231,i,typeof a));return a}var yl=!1;if(p)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){yl=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{yl=!1}function hy(r,i,a,f,g,v,S,T,I){var D=Array.prototype.slice.call(arguments,3);try{i.apply(a,D)}catch(B){this.onError(B)}}var ar=!1,ui=null,ci=!1,vl=null,my={onError:function(r){ar=!0,ui=r}};function gy(r,i,a,f,g,v,S,T,I){ar=!1,ui=null,hy.apply(my,arguments)}function yy(r,i,a,f,g,v,S,T,I){if(gy.apply(this,arguments),ar){if(ar){var D=ui;ar=!1,ui=null}else throw Error(n(198));ci||(ci=!0,vl=D)}}function qn(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function Gc(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Hc(r){if(qn(r)!==r)throw Error(n(188))}function vy(r){var i=r.alternate;if(!i){if(i=qn(r),i===null)throw Error(n(188));return i!==r?null:r}for(var a=r,f=i;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){a=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return Hc(g),r;if(v===f)return Hc(g),i;v=v.sibling}throw Error(n(188))}if(a.return!==f.return)a=g,f=v;else{for(var S=!1,T=g.child;T;){if(T===a){S=!0,a=g,f=v;break}if(T===f){S=!0,f=g,a=v;break}T=T.sibling}if(!S){for(T=v.child;T;){if(T===a){S=!0,a=v,f=g;break}if(T===f){S=!0,f=v,a=g;break}T=T.sibling}if(!S)throw Error(n(189))}}if(a.alternate!==f)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?r:i}function $c(r){return r=vy(r),r!==null?qc(r):null}function qc(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=qc(r);if(i!==null)return i;r=r.sibling}return null}var zc=e.unstable_scheduleCallback,Jc=e.unstable_cancelCallback,_y=e.unstable_shouldYield,Ey=e.unstable_requestPaint,He=e.unstable_now,Sy=e.unstable_getCurrentPriorityLevel,_l=e.unstable_ImmediatePriority,Wc=e.unstable_UserBlockingPriority,di=e.unstable_NormalPriority,Cy=e.unstable_LowPriority,Kc=e.unstable_IdlePriority,fi=null,Wt=null;function wy(r){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(fi,r,void 0,(r.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:Ay,Ty=Math.log,Iy=Math.LN2;function Ay(r){return r>>>=0,r===0?32:31-(Ty(r)/Iy|0)|0}var pi=64,hi=4194304;function ur(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function mi(r,i){var a=r.pendingLanes;if(a===0)return 0;var f=0,g=r.suspendedLanes,v=r.pingedLanes,S=a&268435455;if(S!==0){var T=S&~g;T!==0?f=ur(T):(v&=S,v!==0&&(f=ur(v)))}else S=a&~g,S!==0?f=ur(S):v!==0&&(f=ur(v));if(f===0)return 0;if(i!==0&&i!==f&&(i&g)===0&&(g=f&-f,v=i&-i,g>=v||g===16&&(v&4194240)!==0))return i;if((f&4)!==0&&(f|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=f;0<i;)a=31-Dt(i),g=1<<a,f|=r[a],i&=~g;return f}function Py(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ry(r,i){for(var a=r.suspendedLanes,f=r.pingedLanes,g=r.expirationTimes,v=r.pendingLanes;0<v;){var S=31-Dt(v),T=1<<S,I=g[S];I===-1?((T&a)===0||(T&f)!==0)&&(g[S]=Py(T,i)):I<=i&&(r.expiredLanes|=T),v&=~T}}function El(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Yc(){var r=pi;return pi<<=1,(pi&4194240)===0&&(pi=64),r}function Sl(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function cr(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Dt(i),r[i]=a}function xy(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<a;){var g=31-Dt(a),v=1<<g;i[g]=0,f[g]=-1,r[g]=-1,a&=~v}}function Cl(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var f=31-Dt(a),g=1<<f;g&i|r[f]&i&&(r[f]|=i),a&=~g}}var xe=0;function Qc(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Xc,wl,Zc,jc,ed,Tl=!1,gi=[],gn=null,yn=null,vn=null,dr=new Map,fr=new Map,_n=[],ky="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function td(r,i){switch(r){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":dr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":fr.delete(i.pointerId)}}function pr(r,i,a,f,g,v){return r===null||r.nativeEvent!==v?(r={blockedOn:i,domEventName:a,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},i!==null&&(i=Pr(i),i!==null&&wl(i)),r):(r.eventSystemFlags|=f,i=r.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),r)}function Ny(r,i,a,f,g){switch(i){case"focusin":return gn=pr(gn,r,i,a,f,g),!0;case"dragenter":return yn=pr(yn,r,i,a,f,g),!0;case"mouseover":return vn=pr(vn,r,i,a,f,g),!0;case"pointerover":var v=g.pointerId;return dr.set(v,pr(dr.get(v)||null,r,i,a,f,g)),!0;case"gotpointercapture":return v=g.pointerId,fr.set(v,pr(fr.get(v)||null,r,i,a,f,g)),!0}return!1}function nd(r){var i=zn(r.target);if(i!==null){var a=qn(i);if(a!==null){if(i=a.tag,i===13){if(i=Gc(a),i!==null){r.blockedOn=i,ed(r.priority,function(){Zc(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function yi(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Al(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var f=new a.constructor(a.type,a);pl=f,a.target.dispatchEvent(f),pl=null}else return i=Pr(a),i!==null&&wl(i),r.blockedOn=a,!1;i.shift()}return!0}function od(r,i,a){yi(r)&&a.delete(i)}function My(){Tl=!1,gn!==null&&yi(gn)&&(gn=null),yn!==null&&yi(yn)&&(yn=null),vn!==null&&yi(vn)&&(vn=null),dr.forEach(od),fr.forEach(od)}function hr(r,i){r.blockedOn===i&&(r.blockedOn=null,Tl||(Tl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,My)))}function mr(r){function i(g){return hr(g,r)}if(0<gi.length){hr(gi[0],r);for(var a=1;a<gi.length;a++){var f=gi[a];f.blockedOn===r&&(f.blockedOn=null)}}for(gn!==null&&hr(gn,r),yn!==null&&hr(yn,r),vn!==null&&hr(vn,r),dr.forEach(i),fr.forEach(i),a=0;a<_n.length;a++)f=_n[a],f.blockedOn===r&&(f.blockedOn=null);for(;0<_n.length&&(a=_n[0],a.blockedOn===null);)nd(a),a.blockedOn===null&&_n.shift()}var yo=H.ReactCurrentBatchConfig,vi=!0;function Ly(r,i,a,f){var g=xe,v=yo.transition;yo.transition=null;try{xe=1,Il(r,i,a,f)}finally{xe=g,yo.transition=v}}function Dy(r,i,a,f){var g=xe,v=yo.transition;yo.transition=null;try{xe=4,Il(r,i,a,f)}finally{xe=g,yo.transition=v}}function Il(r,i,a,f){if(vi){var g=Al(r,i,a,f);if(g===null)$l(r,i,f,_i,a),td(r,f);else if(Ny(g,r,i,a,f))f.stopPropagation();else if(td(r,f),i&4&&-1<ky.indexOf(r)){for(;g!==null;){var v=Pr(g);if(v!==null&&Xc(v),v=Al(r,i,a,f),v===null&&$l(r,i,f,_i,a),v===g)break;g=v}g!==null&&f.stopPropagation()}else $l(r,i,f,null,a)}}var _i=null;function Al(r,i,a,f){if(_i=null,r=hl(f),r=zn(r),r!==null)if(i=qn(r),i===null)r=null;else if(a=i.tag,a===13){if(r=Gc(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return _i=r,null}function rd(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sy()){case _l:return 1;case Wc:return 4;case di:case Cy:return 16;case Kc:return 536870912;default:return 16}default:return 16}}var En=null,Pl=null,Ei=null;function id(){if(Ei)return Ei;var r,i=Pl,a=i.length,f,g="value"in En?En.value:En.textContent,v=g.length;for(r=0;r<a&&i[r]===g[r];r++);var S=a-r;for(f=1;f<=S&&i[a-f]===g[v-f];f++);return Ei=g.slice(r,1<f?1-f:void 0)}function Si(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Ci(){return!0}function sd(){return!1}function Et(r){function i(a,f,g,v,S){this._reactName=a,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(a=r[T],this[T]=a?a(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ci:sd,this.isPropagationStopped=sd,this}return J(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),i}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=Et(vo),gr=J({},vo,{view:0,detail:0}),Uy=Et(gr),xl,kl,yr,wi=J({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ml,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==yr&&(yr&&r.type==="mousemove"?(xl=r.screenX-yr.screenX,kl=r.screenY-yr.screenY):kl=xl=0,yr=r),xl)},movementY:function(r){return"movementY"in r?r.movementY:kl}}),ld=Et(wi),Fy=J({},wi,{dataTransfer:0}),Oy=Et(Fy),by=J({},gr,{relatedTarget:0}),Nl=Et(by),Vy=J({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),By=Et(Vy),Gy=J({},vo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Hy=Et(Gy),$y=J({},vo,{data:0}),ad=Et($y),qy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wy(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Jy[r])?!!i[r]:!1}function Ml(){return Wy}var Ky=J({},gr,{key:function(r){if(r.key){var i=qy[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Si(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?zy[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ml,charCode:function(r){return r.type==="keypress"?Si(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Si(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Yy=Et(Ky),Qy=J({},wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ud=Et(Qy),Xy=J({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ml}),Zy=Et(Xy),jy=J({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ev=Et(jy),tv=J({},wi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),nv=Et(tv),ov=[9,13,27,32],Ll=p&&"CompositionEvent"in window,vr=null;p&&"documentMode"in document&&(vr=document.documentMode);var rv=p&&"TextEvent"in window&&!vr,cd=p&&(!Ll||vr&&8<vr&&11>=vr),dd=" ",fd=!1;function pd(r,i){switch(r){case"keyup":return ov.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var _o=!1;function iv(r,i){switch(r){case"compositionend":return hd(i);case"keypress":return i.which!==32?null:(fd=!0,dd);case"textInput":return r=i.data,r===dd&&fd?null:r;default:return null}}function sv(r,i){if(_o)return r==="compositionend"||!Ll&&pd(r,i)?(r=id(),Ei=Pl=En=null,_o=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return cd&&i.locale!=="ko"?null:i.data;default:return null}}var lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function md(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!lv[r.type]:i==="textarea"}function gd(r,i,a,f){Fc(f),i=Ri(i,"onChange"),0<i.length&&(a=new Rl("onChange","change",null,a,f),r.push({event:a,listeners:i}))}var _r=null,Er=null;function av(r){Dd(r,0)}function Ti(r){var i=To(r);if(Tc(i))return r}function uv(r,i){if(r==="change")return i}var yd=!1;if(p){var Dl;if(p){var Ul="oninput"in document;if(!Ul){var vd=document.createElement("div");vd.setAttribute("oninput","return;"),Ul=typeof vd.oninput=="function"}Dl=Ul}else Dl=!1;yd=Dl&&(!document.documentMode||9<document.documentMode)}function _d(){_r&&(_r.detachEvent("onpropertychange",Ed),Er=_r=null)}function Ed(r){if(r.propertyName==="value"&&Ti(Er)){var i=[];gd(i,Er,r,hl(r)),Bc(av,i)}}function cv(r,i,a){r==="focusin"?(_d(),_r=i,Er=a,_r.attachEvent("onpropertychange",Ed)):r==="focusout"&&_d()}function dv(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ti(Er)}function fv(r,i){if(r==="click")return Ti(i)}function pv(r,i){if(r==="input"||r==="change")return Ti(i)}function hv(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ut=typeof Object.is=="function"?Object.is:hv;function Sr(r,i){if(Ut(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),f=Object.keys(i);if(a.length!==f.length)return!1;for(f=0;f<a.length;f++){var g=a[f];if(!m.call(i,g)||!Ut(r[g],i[g]))return!1}return!0}function Sd(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Cd(r,i){var a=Sd(r);r=0;for(var f;a;){if(a.nodeType===3){if(f=r+a.textContent.length,r<=i&&f>=i)return{node:a,offset:i-r};r=f}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sd(a)}}function wd(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?wd(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Td(){for(var r=window,i=li();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=li(r.document)}return i}function Fl(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function mv(r){var i=Td(),a=r.focusedElem,f=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&wd(a.ownerDocument.documentElement,a)){if(f!==null&&Fl(a)){if(i=f.start,r=f.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var g=a.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!r.extend&&v>f&&(g=f,f=v,v=g),g=Cd(a,v);var S=Cd(a,f);g&&S&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==S.node||r.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),r.removeAllRanges(),v>f?(r.addRange(i),r.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var gv=p&&"documentMode"in document&&11>=document.documentMode,Eo=null,Ol=null,Cr=null,bl=!1;function Id(r,i,a){var f=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bl||Eo==null||Eo!==li(f)||(f=Eo,"selectionStart"in f&&Fl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Cr&&Sr(Cr,f)||(Cr=f,f=Ri(Ol,"onSelect"),0<f.length&&(i=new Rl("onSelect","select",null,i,a),r.push({event:i,listeners:f}),i.target=Eo)))}function Ii(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var So={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionend:Ii("Transition","TransitionEnd")},Vl={},Ad={};p&&(Ad=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function Ai(r){if(Vl[r])return Vl[r];if(!So[r])return r;var i=So[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ad)return Vl[r]=i[a];return r}var Pd=Ai("animationend"),Rd=Ai("animationiteration"),xd=Ai("animationstart"),kd=Ai("transitionend"),Nd=new Map,Md="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(r,i){Nd.set(r,i),l(i,[r])}for(var Bl=0;Bl<Md.length;Bl++){var Gl=Md[Bl],yv=Gl.toLowerCase(),vv=Gl[0].toUpperCase()+Gl.slice(1);Sn(yv,"on"+vv)}Sn(Pd,"onAnimationEnd"),Sn(Rd,"onAnimationIteration"),Sn(xd,"onAnimationStart"),Sn("dblclick","onDoubleClick"),Sn("focusin","onFocus"),Sn("focusout","onBlur"),Sn(kd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_v=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function Ld(r,i,a){var f=r.type||"unknown-event";r.currentTarget=a,yy(f,i,void 0,r),r.currentTarget=null}function Dd(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var f=r[a],g=f.event;f=f.listeners;e:{var v=void 0;if(i)for(var S=f.length-1;0<=S;S--){var T=f[S],I=T.instance,D=T.currentTarget;if(T=T.listener,I!==v&&g.isPropagationStopped())break e;Ld(g,T,D),v=I}else for(S=0;S<f.length;S++){if(T=f[S],I=T.instance,D=T.currentTarget,T=T.listener,I!==v&&g.isPropagationStopped())break e;Ld(g,T,D),v=I}}}if(ci)throw r=vl,ci=!1,vl=null,r}function Me(r,i){var a=i[Yl];a===void 0&&(a=i[Yl]=new Set);var f=r+"__bubble";a.has(f)||(Ud(i,r,2,!1),a.add(f))}function Hl(r,i,a){var f=0;i&&(f|=4),Ud(a,r,f,i)}var Pi="_reactListening"+Math.random().toString(36).slice(2);function Tr(r){if(!r[Pi]){r[Pi]=!0,o.forEach(function(a){a!=="selectionchange"&&(_v.has(a)||Hl(a,!1,r),Hl(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Pi]||(i[Pi]=!0,Hl("selectionchange",!1,i))}}function Ud(r,i,a,f){switch(rd(i)){case 1:var g=Ly;break;case 4:g=Dy;break;default:g=Il}a=g.bind(null,i,a,r),g=void 0,!yl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),f?g!==void 0?r.addEventListener(i,a,{capture:!0,passive:g}):r.addEventListener(i,a,!0):g!==void 0?r.addEventListener(i,a,{passive:g}):r.addEventListener(i,a,!1)}function $l(r,i,a,f,g){var v=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var T=f.stateNode.containerInfo;if(T===g||T.nodeType===8&&T.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var I=S.tag;if((I===3||I===4)&&(I=S.stateNode.containerInfo,I===g||I.nodeType===8&&I.parentNode===g))return;S=S.return}for(;T!==null;){if(S=zn(T),S===null)return;if(I=S.tag,I===5||I===6){f=v=S;continue e}T=T.parentNode}}f=f.return}Bc(function(){var D=v,B=hl(a),G=[];e:{var V=Nd.get(r);if(V!==void 0){var Z=Rl,oe=r;switch(r){case"keypress":if(Si(a)===0)break e;case"keydown":case"keyup":Z=Yy;break;case"focusin":oe="focus",Z=Nl;break;case"focusout":oe="blur",Z=Nl;break;case"beforeblur":case"afterblur":Z=Nl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Zy;break;case Pd:case Rd:case xd:Z=By;break;case kd:Z=ev;break;case"scroll":Z=Uy;break;case"wheel":Z=nv;break;case"copy":case"cut":case"paste":Z=Hy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ud}var re=(i&4)!==0,$e=!re&&r==="scroll",N=re?V!==null?V+"Capture":null:V;re=[];for(var R=D,L;R!==null;){L=R;var q=L.stateNode;if(L.tag===5&&q!==null&&(L=q,N!==null&&(q=sr(R,N),q!=null&&re.push(Ir(R,q,L)))),$e)break;R=R.return}0<re.length&&(V=new Z(V,oe,null,a,B),G.push({event:V,listeners:re}))}}if((i&7)===0){e:{if(V=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",V&&a!==pl&&(oe=a.relatedTarget||a.fromElement)&&(zn(oe)||oe[on]))break e;if((Z||V)&&(V=B.window===B?B:(V=B.ownerDocument)?V.defaultView||V.parentWindow:window,Z?(oe=a.relatedTarget||a.toElement,Z=D,oe=oe?zn(oe):null,oe!==null&&($e=qn(oe),oe!==$e||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(Z=null,oe=D),Z!==oe)){if(re=ld,q="onMouseLeave",N="onMouseEnter",R="mouse",(r==="pointerout"||r==="pointerover")&&(re=ud,q="onPointerLeave",N="onPointerEnter",R="pointer"),$e=Z==null?V:To(Z),L=oe==null?V:To(oe),V=new re(q,R+"leave",Z,a,B),V.target=$e,V.relatedTarget=L,q=null,zn(B)===D&&(re=new re(N,R+"enter",oe,a,B),re.target=L,re.relatedTarget=$e,q=re),$e=q,Z&&oe)t:{for(re=Z,N=oe,R=0,L=re;L;L=Co(L))R++;for(L=0,q=N;q;q=Co(q))L++;for(;0<R-L;)re=Co(re),R--;for(;0<L-R;)N=Co(N),L--;for(;R--;){if(re===N||N!==null&&re===N.alternate)break t;re=Co(re),N=Co(N)}re=null}else re=null;Z!==null&&Fd(G,V,Z,re,!1),oe!==null&&$e!==null&&Fd(G,$e,oe,re,!0)}}e:{if(V=D?To(D):window,Z=V.nodeName&&V.nodeName.toLowerCase(),Z==="select"||Z==="input"&&V.type==="file")var ie=uv;else if(md(V))if(yd)ie=pv;else{ie=dv;var ue=cv}else(Z=V.nodeName)&&Z.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(ie=fv);if(ie&&(ie=ie(r,D))){gd(G,ie,a,B);break e}ue&&ue(r,V,D),r==="focusout"&&(ue=V._wrapperState)&&ue.controlled&&V.type==="number"&&al(V,"number",V.value)}switch(ue=D?To(D):window,r){case"focusin":(md(ue)||ue.contentEditable==="true")&&(Eo=ue,Ol=D,Cr=null);break;case"focusout":Cr=Ol=Eo=null;break;case"mousedown":bl=!0;break;case"contextmenu":case"mouseup":case"dragend":bl=!1,Id(G,a,B);break;case"selectionchange":if(gv)break;case"keydown":case"keyup":Id(G,a,B)}var ce;if(Ll)e:{switch(r){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else _o?pd(r,a)&&(pe="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(pe="onCompositionStart");pe&&(cd&&a.locale!=="ko"&&(_o||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&_o&&(ce=id()):(En=B,Pl="value"in En?En.value:En.textContent,_o=!0)),ue=Ri(D,pe),0<ue.length&&(pe=new ad(pe,r,null,a,B),G.push({event:pe,listeners:ue}),ce?pe.data=ce:(ce=hd(a),ce!==null&&(pe.data=ce)))),(ce=rv?iv(r,a):sv(r,a))&&(D=Ri(D,"onBeforeInput"),0<D.length&&(B=new ad("onBeforeInput","beforeinput",null,a,B),G.push({event:B,listeners:D}),B.data=ce))}Dd(G,i)})}function Ir(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Ri(r,i){for(var a=i+"Capture",f=[];r!==null;){var g=r,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=sr(r,a),v!=null&&f.unshift(Ir(r,v,g)),v=sr(r,i),v!=null&&f.push(Ir(r,v,g))),r=r.return}return f}function Co(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Fd(r,i,a,f,g){for(var v=i._reactName,S=[];a!==null&&a!==f;){var T=a,I=T.alternate,D=T.stateNode;if(I!==null&&I===f)break;T.tag===5&&D!==null&&(T=D,g?(I=sr(a,v),I!=null&&S.unshift(Ir(a,I,T))):g||(I=sr(a,v),I!=null&&S.push(Ir(a,I,T)))),a=a.return}S.length!==0&&r.push({event:i,listeners:S})}var Ev=/\r\n?/g,Sv=/\u0000|\uFFFD/g;function Od(r){return(typeof r=="string"?r:""+r).replace(Ev,`
`).replace(Sv,"")}function xi(r,i,a){if(i=Od(i),Od(r)!==i&&a)throw Error(n(425))}function ki(){}var ql=null,zl=null;function Jl(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Wl=typeof setTimeout=="function"?setTimeout:void 0,Cv=typeof clearTimeout=="function"?clearTimeout:void 0,bd=typeof Promise=="function"?Promise:void 0,wv=typeof queueMicrotask=="function"?queueMicrotask:typeof bd<"u"?function(r){return bd.resolve(null).then(r).catch(Tv)}:Wl;function Tv(r){setTimeout(function(){throw r})}function Kl(r,i){var a=i,f=0;do{var g=a.nextSibling;if(r.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(f===0){r.removeChild(g),mr(i);return}f--}else a!=="$"&&a!=="$?"&&a!=="$!"||f++;a=g}while(a);mr(i)}function Cn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Vd(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Kt="__reactFiber$"+wo,Ar="__reactProps$"+wo,on="__reactContainer$"+wo,Yl="__reactEvents$"+wo,Iv="__reactListeners$"+wo,Av="__reactHandles$"+wo;function zn(r){var i=r[Kt];if(i)return i;for(var a=r.parentNode;a;){if(i=a[on]||a[Kt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=Vd(r);r!==null;){if(a=r[Kt])return a;r=Vd(r)}return i}r=a,a=r.parentNode}return null}function Pr(r){return r=r[Kt]||r[on],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function To(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Ni(r){return r[Ar]||null}var Ql=[],Io=-1;function wn(r){return{current:r}}function Le(r){0>Io||(r.current=Ql[Io],Ql[Io]=null,Io--)}function Ne(r,i){Io++,Ql[Io]=r.current,r.current=i}var Tn={},ot=wn(Tn),pt=wn(!1),Jn=Tn;function Ao(r,i){var a=r.type.contextTypes;if(!a)return Tn;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===i)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in a)g[v]=i[v];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=g),g}function ht(r){return r=r.childContextTypes,r!=null}function Mi(){Le(pt),Le(ot)}function Bd(r,i,a){if(ot.current!==Tn)throw Error(n(168));Ne(ot,i),Ne(pt,a)}function Gd(r,i,a){var f=r.stateNode;if(i=i.childContextTypes,typeof f.getChildContext!="function")return a;f=f.getChildContext();for(var g in f)if(!(g in i))throw Error(n(108,Ae(r)||"Unknown",g));return J({},a,f)}function Li(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Tn,Jn=ot.current,Ne(ot,r),Ne(pt,pt.current),!0}function Hd(r,i,a){var f=r.stateNode;if(!f)throw Error(n(169));a?(r=Gd(r,i,Jn),f.__reactInternalMemoizedMergedChildContext=r,Le(pt),Le(ot),Ne(ot,r)):Le(pt),Ne(pt,a)}var rn=null,Di=!1,Xl=!1;function $d(r){rn===null?rn=[r]:rn.push(r)}function Pv(r){Di=!0,$d(r)}function In(){if(!Xl&&rn!==null){Xl=!0;var r=0,i=xe;try{var a=rn;for(xe=1;r<a.length;r++){var f=a[r];do f=f(!0);while(f!==null)}rn=null,Di=!1}catch(g){throw rn!==null&&(rn=rn.slice(r+1)),zc(_l,In),g}finally{xe=i,Xl=!1}}return null}var Po=[],Ro=0,Ui=null,Fi=0,Tt=[],It=0,Wn=null,sn=1,ln="";function Kn(r,i){Po[Ro++]=Fi,Po[Ro++]=Ui,Ui=r,Fi=i}function qd(r,i,a){Tt[It++]=sn,Tt[It++]=ln,Tt[It++]=Wn,Wn=r;var f=sn;r=ln;var g=32-Dt(f)-1;f&=~(1<<g),a+=1;var v=32-Dt(i)+g;if(30<v){var S=g-g%5;v=(f&(1<<S)-1).toString(32),f>>=S,g-=S,sn=1<<32-Dt(i)+g|a<<g|f,ln=v+r}else sn=1<<v|a<<g|f,ln=r}function Zl(r){r.return!==null&&(Kn(r,1),qd(r,1,0))}function jl(r){for(;r===Ui;)Ui=Po[--Ro],Po[Ro]=null,Fi=Po[--Ro],Po[Ro]=null;for(;r===Wn;)Wn=Tt[--It],Tt[It]=null,ln=Tt[--It],Tt[It]=null,sn=Tt[--It],Tt[It]=null}var St=null,Ct=null,Ue=!1,Ft=null;function zd(r,i){var a=xt(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function Jd(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,St=r,Ct=Cn(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,St=r,Ct=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Wn!==null?{id:sn,overflow:ln}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=xt(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,St=r,Ct=null,!0):!1;default:return!1}}function ea(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ta(r){if(Ue){var i=Ct;if(i){var a=i;if(!Jd(r,i)){if(ea(r))throw Error(n(418));i=Cn(a.nextSibling);var f=St;i&&Jd(r,i)?zd(f,a):(r.flags=r.flags&-4097|2,Ue=!1,St=r)}}else{if(ea(r))throw Error(n(418));r.flags=r.flags&-4097|2,Ue=!1,St=r}}}function Wd(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;St=r}function Oi(r){if(r!==St)return!1;if(!Ue)return Wd(r),Ue=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Jl(r.type,r.memoizedProps)),i&&(i=Ct)){if(ea(r))throw Kd(),Error(n(418));for(;i;)zd(r,i),i=Cn(i.nextSibling)}if(Wd(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){Ct=Cn(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}Ct=null}}else Ct=St?Cn(r.stateNode.nextSibling):null;return!0}function Kd(){for(var r=Ct;r;)r=Cn(r.nextSibling)}function xo(){Ct=St=null,Ue=!1}function na(r){Ft===null?Ft=[r]:Ft.push(r)}var Rv=H.ReactCurrentBatchConfig;function Rr(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(n(309));var f=a.stateNode}if(!f)throw Error(n(147,r));var g=f,v=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(S){var T=g.refs;S===null?delete T[v]:T[v]=S},i._stringRef=v,i)}if(typeof r!="string")throw Error(n(284));if(!a._owner)throw Error(n(290,r))}return r}function bi(r,i){throw r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Yd(r){var i=r._init;return i(r._payload)}function Qd(r){function i(N,R){if(r){var L=N.deletions;L===null?(N.deletions=[R],N.flags|=16):L.push(R)}}function a(N,R){if(!r)return null;for(;R!==null;)i(N,R),R=R.sibling;return null}function f(N,R){for(N=new Map;R!==null;)R.key!==null?N.set(R.key,R):N.set(R.index,R),R=R.sibling;return N}function g(N,R){return N=Ln(N,R),N.index=0,N.sibling=null,N}function v(N,R,L){return N.index=L,r?(L=N.alternate,L!==null?(L=L.index,L<R?(N.flags|=2,R):L):(N.flags|=2,R)):(N.flags|=1048576,R)}function S(N){return r&&N.alternate===null&&(N.flags|=2),N}function T(N,R,L,q){return R===null||R.tag!==6?(R=Wa(L,N.mode,q),R.return=N,R):(R=g(R,L),R.return=N,R)}function I(N,R,L,q){var ie=L.type;return ie===Y?B(N,R,L.props.children,q,L.key):R!==null&&(R.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ze&&Yd(ie)===R.type)?(q=g(R,L.props),q.ref=Rr(N,R,L),q.return=N,q):(q=as(L.type,L.key,L.props,null,N.mode,q),q.ref=Rr(N,R,L),q.return=N,q)}function D(N,R,L,q){return R===null||R.tag!==4||R.stateNode.containerInfo!==L.containerInfo||R.stateNode.implementation!==L.implementation?(R=Ka(L,N.mode,q),R.return=N,R):(R=g(R,L.children||[]),R.return=N,R)}function B(N,R,L,q,ie){return R===null||R.tag!==7?(R=no(L,N.mode,q,ie),R.return=N,R):(R=g(R,L),R.return=N,R)}function G(N,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Wa(""+R,N.mode,L),R.return=N,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case F:return L=as(R.type,R.key,R.props,null,N.mode,L),L.ref=Rr(N,null,R),L.return=N,L;case ae:return R=Ka(R,N.mode,L),R.return=N,R;case ze:var q=R._init;return G(N,q(R._payload),L)}if(or(R)||se(R))return R=no(R,N.mode,L,null),R.return=N,R;bi(N,R)}return null}function V(N,R,L,q){var ie=R!==null?R.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return ie!==null?null:T(N,R,""+L,q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case F:return L.key===ie?I(N,R,L,q):null;case ae:return L.key===ie?D(N,R,L,q):null;case ze:return ie=L._init,V(N,R,ie(L._payload),q)}if(or(L)||se(L))return ie!==null?null:B(N,R,L,q,null);bi(N,L)}return null}function Z(N,R,L,q,ie){if(typeof q=="string"&&q!==""||typeof q=="number")return N=N.get(L)||null,T(R,N,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case F:return N=N.get(q.key===null?L:q.key)||null,I(R,N,q,ie);case ae:return N=N.get(q.key===null?L:q.key)||null,D(R,N,q,ie);case ze:var ue=q._init;return Z(N,R,L,ue(q._payload),ie)}if(or(q)||se(q))return N=N.get(L)||null,B(R,N,q,ie,null);bi(R,q)}return null}function oe(N,R,L,q){for(var ie=null,ue=null,ce=R,pe=R=0,Ze=null;ce!==null&&pe<L.length;pe++){ce.index>pe?(Ze=ce,ce=null):Ze=ce.sibling;var we=V(N,ce,L[pe],q);if(we===null){ce===null&&(ce=Ze);break}r&&ce&&we.alternate===null&&i(N,ce),R=v(we,R,pe),ue===null?ie=we:ue.sibling=we,ue=we,ce=Ze}if(pe===L.length)return a(N,ce),Ue&&Kn(N,pe),ie;if(ce===null){for(;pe<L.length;pe++)ce=G(N,L[pe],q),ce!==null&&(R=v(ce,R,pe),ue===null?ie=ce:ue.sibling=ce,ue=ce);return Ue&&Kn(N,pe),ie}for(ce=f(N,ce);pe<L.length;pe++)Ze=Z(ce,N,pe,L[pe],q),Ze!==null&&(r&&Ze.alternate!==null&&ce.delete(Ze.key===null?pe:Ze.key),R=v(Ze,R,pe),ue===null?ie=Ze:ue.sibling=Ze,ue=Ze);return r&&ce.forEach(function(Dn){return i(N,Dn)}),Ue&&Kn(N,pe),ie}function re(N,R,L,q){var ie=se(L);if(typeof ie!="function")throw Error(n(150));if(L=ie.call(L),L==null)throw Error(n(151));for(var ue=ie=null,ce=R,pe=R=0,Ze=null,we=L.next();ce!==null&&!we.done;pe++,we=L.next()){ce.index>pe?(Ze=ce,ce=null):Ze=ce.sibling;var Dn=V(N,ce,we.value,q);if(Dn===null){ce===null&&(ce=Ze);break}r&&ce&&Dn.alternate===null&&i(N,ce),R=v(Dn,R,pe),ue===null?ie=Dn:ue.sibling=Dn,ue=Dn,ce=Ze}if(we.done)return a(N,ce),Ue&&Kn(N,pe),ie;if(ce===null){for(;!we.done;pe++,we=L.next())we=G(N,we.value,q),we!==null&&(R=v(we,R,pe),ue===null?ie=we:ue.sibling=we,ue=we);return Ue&&Kn(N,pe),ie}for(ce=f(N,ce);!we.done;pe++,we=L.next())we=Z(ce,N,pe,we.value,q),we!==null&&(r&&we.alternate!==null&&ce.delete(we.key===null?pe:we.key),R=v(we,R,pe),ue===null?ie=we:ue.sibling=we,ue=we);return r&&ce.forEach(function(l0){return i(N,l0)}),Ue&&Kn(N,pe),ie}function $e(N,R,L,q){if(typeof L=="object"&&L!==null&&L.type===Y&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case F:e:{for(var ie=L.key,ue=R;ue!==null;){if(ue.key===ie){if(ie=L.type,ie===Y){if(ue.tag===7){a(N,ue.sibling),R=g(ue,L.props.children),R.return=N,N=R;break e}}else if(ue.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ze&&Yd(ie)===ue.type){a(N,ue.sibling),R=g(ue,L.props),R.ref=Rr(N,ue,L),R.return=N,N=R;break e}a(N,ue);break}else i(N,ue);ue=ue.sibling}L.type===Y?(R=no(L.props.children,N.mode,q,L.key),R.return=N,N=R):(q=as(L.type,L.key,L.props,null,N.mode,q),q.ref=Rr(N,R,L),q.return=N,N=q)}return S(N);case ae:e:{for(ue=L.key;R!==null;){if(R.key===ue)if(R.tag===4&&R.stateNode.containerInfo===L.containerInfo&&R.stateNode.implementation===L.implementation){a(N,R.sibling),R=g(R,L.children||[]),R.return=N,N=R;break e}else{a(N,R);break}else i(N,R);R=R.sibling}R=Ka(L,N.mode,q),R.return=N,N=R}return S(N);case ze:return ue=L._init,$e(N,R,ue(L._payload),q)}if(or(L))return oe(N,R,L,q);if(se(L))return re(N,R,L,q);bi(N,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,R!==null&&R.tag===6?(a(N,R.sibling),R=g(R,L),R.return=N,N=R):(a(N,R),R=Wa(L,N.mode,q),R.return=N,N=R),S(N)):a(N,R)}return $e}var ko=Qd(!0),Xd=Qd(!1),Vi=wn(null),Bi=null,No=null,oa=null;function ra(){oa=No=Bi=null}function ia(r){var i=Vi.current;Le(Vi),r._currentValue=i}function sa(r,i,a){for(;r!==null;){var f=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),r===a)break;r=r.return}}function Mo(r,i){Bi=r,oa=No=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(mt=!0),r.firstContext=null)}function At(r){var i=r._currentValue;if(oa!==r)if(r={context:r,memoizedValue:i,next:null},No===null){if(Bi===null)throw Error(n(308));No=r,Bi.dependencies={lanes:0,firstContext:r}}else No=No.next=r;return i}var Yn=null;function la(r){Yn===null?Yn=[r]:Yn.push(r)}function Zd(r,i,a,f){var g=i.interleaved;return g===null?(a.next=a,la(i)):(a.next=g.next,g.next=a),i.interleaved=a,an(r,f)}function an(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var An=!1;function aa(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jd(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function un(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Pn(r,i,a){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(Ce&2)!==0){var g=f.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),f.pending=i,an(r,a)}return g=f.interleaved,g===null?(i.next=i,la(f)):(i.next=g.next,g.next=i),f.interleaved=i,an(r,a)}function Gi(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var f=i.lanes;f&=r.pendingLanes,a|=f,i.lanes=a,Cl(r,a)}}function ef(r,i){var a=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,a===f)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};v===null?g=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?g=v=i:v=v.next=i}else g=v=i;a={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function Hi(r,i,a,f){var g=r.updateQueue;An=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var I=T,D=I.next;I.next=null,S===null?v=D:S.next=D,S=I;var B=r.alternate;B!==null&&(B=B.updateQueue,T=B.lastBaseUpdate,T!==S&&(T===null?B.firstBaseUpdate=D:T.next=D,B.lastBaseUpdate=I))}if(v!==null){var G=g.baseState;S=0,B=D=I=null,T=v;do{var V=T.lane,Z=T.eventTime;if((f&V)===V){B!==null&&(B=B.next={eventTime:Z,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var oe=r,re=T;switch(V=i,Z=a,re.tag){case 1:if(oe=re.payload,typeof oe=="function"){G=oe.call(Z,G,V);break e}G=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=re.payload,V=typeof oe=="function"?oe.call(Z,G,V):oe,V==null)break e;G=J({},G,V);break e;case 2:An=!0}}T.callback!==null&&T.lane!==0&&(r.flags|=64,V=g.effects,V===null?g.effects=[T]:V.push(T))}else Z={eventTime:Z,lane:V,tag:T.tag,payload:T.payload,callback:T.callback,next:null},B===null?(D=B=Z,I=G):B=B.next=Z,S|=V;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;V=T,T=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);if(B===null&&(I=G),g.baseState=I,g.firstBaseUpdate=D,g.lastBaseUpdate=B,i=g.shared.interleaved,i!==null){g=i;do S|=g.lane,g=g.next;while(g!==i)}else v===null&&(g.shared.lanes=0);Zn|=S,r.lanes=S,r.memoizedState=G}}function tf(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var f=r[i],g=f.callback;if(g!==null){if(f.callback=null,f=a,typeof g!="function")throw Error(n(191,g));g.call(f)}}}var xr={},Yt=wn(xr),kr=wn(xr),Nr=wn(xr);function Qn(r){if(r===xr)throw Error(n(174));return r}function ua(r,i){switch(Ne(Nr,i),Ne(kr,r),Ne(Yt,xr),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:cl(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=cl(i,r)}Le(Yt),Ne(Yt,i)}function Lo(){Le(Yt),Le(kr),Le(Nr)}function nf(r){Qn(Nr.current);var i=Qn(Yt.current),a=cl(i,r.type);i!==a&&(Ne(kr,r),Ne(Yt,a))}function ca(r){kr.current===r&&(Le(Yt),Le(kr))}var Fe=wn(0);function $i(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var da=[];function fa(){for(var r=0;r<da.length;r++)da[r]._workInProgressVersionPrimary=null;da.length=0}var qi=H.ReactCurrentDispatcher,pa=H.ReactCurrentBatchConfig,Xn=0,Oe=null,Ke=null,Qe=null,zi=!1,Mr=!1,Lr=0,xv=0;function rt(){throw Error(n(321))}function ha(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!Ut(r[a],i[a]))return!1;return!0}function ma(r,i,a,f,g,v){if(Xn=v,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,qi.current=r===null||r.memoizedState===null?Lv:Dv,r=a(f,g),Mr){v=0;do{if(Mr=!1,Lr=0,25<=v)throw Error(n(301));v+=1,Qe=Ke=null,i.updateQueue=null,qi.current=Uv,r=a(f,g)}while(Mr)}if(qi.current=Ki,i=Ke!==null&&Ke.next!==null,Xn=0,Qe=Ke=Oe=null,zi=!1,i)throw Error(n(300));return r}function ga(){var r=Lr!==0;return Lr=0,r}function Qt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Oe.memoizedState=Qe=r:Qe=Qe.next=r,Qe}function Pt(){if(Ke===null){var r=Oe.alternate;r=r!==null?r.memoizedState:null}else r=Ke.next;var i=Qe===null?Oe.memoizedState:Qe.next;if(i!==null)Qe=i,Ke=r;else{if(r===null)throw Error(n(310));Ke=r,r={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Qe===null?Oe.memoizedState=Qe=r:Qe=Qe.next=r}return Qe}function Dr(r,i){return typeof i=="function"?i(r):i}function ya(r){var i=Pt(),a=i.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=r;var f=Ke,g=f.baseQueue,v=a.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}f.baseQueue=g=v,a.pending=null}if(g!==null){v=g.next,f=f.baseState;var T=S=null,I=null,D=v;do{var B=D.lane;if((Xn&B)===B)I!==null&&(I=I.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),f=D.hasEagerState?D.eagerState:r(f,D.action);else{var G={lane:B,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};I===null?(T=I=G,S=f):I=I.next=G,Oe.lanes|=B,Zn|=B}D=D.next}while(D!==null&&D!==v);I===null?S=f:I.next=T,Ut(f,i.memoizedState)||(mt=!0),i.memoizedState=f,i.baseState=S,i.baseQueue=I,a.lastRenderedState=f}if(r=a.interleaved,r!==null){g=r;do v=g.lane,Oe.lanes|=v,Zn|=v,g=g.next;while(g!==r)}else g===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function va(r){var i=Pt(),a=i.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=r;var f=a.dispatch,g=a.pending,v=i.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do v=r(v,S.action),S=S.next;while(S!==g);Ut(v,i.memoizedState)||(mt=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),a.lastRenderedState=v}return[v,f]}function of(){}function rf(r,i){var a=Oe,f=Pt(),g=i(),v=!Ut(f.memoizedState,g);if(v&&(f.memoizedState=g,mt=!0),f=f.queue,_a(af.bind(null,a,f,r),[r]),f.getSnapshot!==i||v||Qe!==null&&Qe.memoizedState.tag&1){if(a.flags|=2048,Ur(9,lf.bind(null,a,f,g,i),void 0,null),Xe===null)throw Error(n(349));(Xn&30)!==0||sf(a,i,g)}return g}function sf(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i={lastEffect:null,stores:null},Oe.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function lf(r,i,a,f){i.value=a,i.getSnapshot=f,uf(i)&&cf(r)}function af(r,i,a){return a(function(){uf(i)&&cf(r)})}function uf(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!Ut(r,a)}catch{return!0}}function cf(r){var i=an(r,1);i!==null&&Bt(i,r,1,-1)}function df(r){var i=Qt();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:r},i.queue=r,r=r.dispatch=Mv.bind(null,Oe,r),[i.memoizedState,r]}function Ur(r,i,a,f){return r={tag:r,create:i,destroy:a,deps:f,next:null},i=Oe.updateQueue,i===null?(i={lastEffect:null,stores:null},Oe.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(f=a.next,a.next=r,r.next=f,i.lastEffect=r)),r}function ff(){return Pt().memoizedState}function Ji(r,i,a,f){var g=Qt();Oe.flags|=r,g.memoizedState=Ur(1|i,a,void 0,f===void 0?null:f)}function Wi(r,i,a,f){var g=Pt();f=f===void 0?null:f;var v=void 0;if(Ke!==null){var S=Ke.memoizedState;if(v=S.destroy,f!==null&&ha(f,S.deps)){g.memoizedState=Ur(i,a,v,f);return}}Oe.flags|=r,g.memoizedState=Ur(1|i,a,v,f)}function pf(r,i){return Ji(8390656,8,r,i)}function _a(r,i){return Wi(2048,8,r,i)}function hf(r,i){return Wi(4,2,r,i)}function mf(r,i){return Wi(4,4,r,i)}function gf(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function yf(r,i,a){return a=a!=null?a.concat([r]):null,Wi(4,4,gf.bind(null,i,r),a)}function Ea(){}function vf(r,i){var a=Pt();i=i===void 0?null:i;var f=a.memoizedState;return f!==null&&i!==null&&ha(i,f[1])?f[0]:(a.memoizedState=[r,i],r)}function _f(r,i){var a=Pt();i=i===void 0?null:i;var f=a.memoizedState;return f!==null&&i!==null&&ha(i,f[1])?f[0]:(r=r(),a.memoizedState=[r,i],r)}function Ef(r,i,a){return(Xn&21)===0?(r.baseState&&(r.baseState=!1,mt=!0),r.memoizedState=a):(Ut(a,i)||(a=Yc(),Oe.lanes|=a,Zn|=a,r.baseState=!0),i)}function kv(r,i){var a=xe;xe=a!==0&&4>a?a:4,r(!0);var f=pa.transition;pa.transition={};try{r(!1),i()}finally{xe=a,pa.transition=f}}function Sf(){return Pt().memoizedState}function Nv(r,i,a){var f=Nn(r);if(a={lane:f,action:a,hasEagerState:!1,eagerState:null,next:null},Cf(r))wf(i,a);else if(a=Zd(r,i,a,f),a!==null){var g=ct();Bt(a,r,f,g),Tf(a,i,f)}}function Mv(r,i,a){var f=Nn(r),g={lane:f,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cf(r))wf(i,g);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var S=i.lastRenderedState,T=v(S,a);if(g.hasEagerState=!0,g.eagerState=T,Ut(T,S)){var I=i.interleaved;I===null?(g.next=g,la(i)):(g.next=I.next,I.next=g),i.interleaved=g;return}}catch{}a=Zd(r,i,g,f),a!==null&&(g=ct(),Bt(a,r,f,g),Tf(a,i,f))}}function Cf(r){var i=r.alternate;return r===Oe||i!==null&&i===Oe}function wf(r,i){Mr=zi=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Tf(r,i,a){if((a&4194240)!==0){var f=i.lanes;f&=r.pendingLanes,a|=f,i.lanes=a,Cl(r,a)}}var Ki={readContext:At,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Lv={readContext:At,useCallback:function(r,i){return Qt().memoizedState=[r,i===void 0?null:i],r},useContext:At,useEffect:pf,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,Ji(4194308,4,gf.bind(null,i,r),a)},useLayoutEffect:function(r,i){return Ji(4194308,4,r,i)},useInsertionEffect:function(r,i){return Ji(4,2,r,i)},useMemo:function(r,i){var a=Qt();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var f=Qt();return i=a!==void 0?a(i):i,f.memoizedState=f.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},f.queue=r,r=r.dispatch=Nv.bind(null,Oe,r),[f.memoizedState,r]},useRef:function(r){var i=Qt();return r={current:r},i.memoizedState=r},useState:df,useDebugValue:Ea,useDeferredValue:function(r){return Qt().memoizedState=r},useTransition:function(){var r=df(!1),i=r[0];return r=kv.bind(null,r[1]),Qt().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var f=Oe,g=Qt();if(Ue){if(a===void 0)throw Error(n(407));a=a()}else{if(a=i(),Xe===null)throw Error(n(349));(Xn&30)!==0||sf(f,i,a)}g.memoizedState=a;var v={value:a,getSnapshot:i};return g.queue=v,pf(af.bind(null,f,v,r),[r]),f.flags|=2048,Ur(9,lf.bind(null,f,v,a,i),void 0,null),a},useId:function(){var r=Qt(),i=Xe.identifierPrefix;if(Ue){var a=ln,f=sn;a=(f&~(1<<32-Dt(f)-1)).toString(32)+a,i=":"+i+"R"+a,a=Lr++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=xv++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},Dv={readContext:At,useCallback:vf,useContext:At,useEffect:_a,useImperativeHandle:yf,useInsertionEffect:hf,useLayoutEffect:mf,useMemo:_f,useReducer:ya,useRef:ff,useState:function(){return ya(Dr)},useDebugValue:Ea,useDeferredValue:function(r){var i=Pt();return Ef(i,Ke.memoizedState,r)},useTransition:function(){var r=ya(Dr)[0],i=Pt().memoizedState;return[r,i]},useMutableSource:of,useSyncExternalStore:rf,useId:Sf,unstable_isNewReconciler:!1},Uv={readContext:At,useCallback:vf,useContext:At,useEffect:_a,useImperativeHandle:yf,useInsertionEffect:hf,useLayoutEffect:mf,useMemo:_f,useReducer:va,useRef:ff,useState:function(){return va(Dr)},useDebugValue:Ea,useDeferredValue:function(r){var i=Pt();return Ke===null?i.memoizedState=r:Ef(i,Ke.memoizedState,r)},useTransition:function(){var r=va(Dr)[0],i=Pt().memoizedState;return[r,i]},useMutableSource:of,useSyncExternalStore:rf,useId:Sf,unstable_isNewReconciler:!1};function Ot(r,i){if(r&&r.defaultProps){i=J({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function Sa(r,i,a,f){i=r.memoizedState,a=a(f,i),a=a==null?i:J({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Yi={isMounted:function(r){return(r=r._reactInternals)?qn(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var f=ct(),g=Nn(r),v=un(f,g);v.payload=i,a!=null&&(v.callback=a),i=Pn(r,v,g),i!==null&&(Bt(i,r,g,f),Gi(i,r,g))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var f=ct(),g=Nn(r),v=un(f,g);v.tag=1,v.payload=i,a!=null&&(v.callback=a),i=Pn(r,v,g),i!==null&&(Bt(i,r,g,f),Gi(i,r,g))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=ct(),f=Nn(r),g=un(a,f);g.tag=2,i!=null&&(g.callback=i),i=Pn(r,g,f),i!==null&&(Bt(i,r,f,a),Gi(i,r,f))}};function If(r,i,a,f,g,v,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,v,S):i.prototype&&i.prototype.isPureReactComponent?!Sr(a,f)||!Sr(g,v):!0}function Af(r,i,a){var f=!1,g=Tn,v=i.contextType;return typeof v=="object"&&v!==null?v=At(v):(g=ht(i)?Jn:ot.current,f=i.contextTypes,v=(f=f!=null)?Ao(r,g):Tn),i=new i(a,v),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Yi,r.stateNode=i,i._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=v),i}function Pf(r,i,a,f){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,f),i.state!==r&&Yi.enqueueReplaceState(i,i.state,null)}function Ca(r,i,a,f){var g=r.stateNode;g.props=a,g.state=r.memoizedState,g.refs={},aa(r);var v=i.contextType;typeof v=="object"&&v!==null?g.context=At(v):(v=ht(i)?Jn:ot.current,g.context=Ao(r,v)),g.state=r.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Sa(r,i,v,a),g.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&Yi.enqueueReplaceState(g,g.state,null),Hi(r,a,g,f),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function Do(r,i){try{var a="",f=i;do a+=ge(f),f=f.return;while(f);var g=a}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:i,stack:g,digest:null}}function wa(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function Ta(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Fv=typeof WeakMap=="function"?WeakMap:Map;function Rf(r,i,a){a=un(-1,a),a.tag=3,a.payload={element:null};var f=i.value;return a.callback=function(){ns||(ns=!0,Va=f),Ta(r,i)},a}function xf(r,i,a){a=un(-1,a),a.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var g=i.value;a.payload=function(){return f(g)},a.callback=function(){Ta(r,i)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(a.callback=function(){Ta(r,i),typeof f!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),a}function kf(r,i,a){var f=r.pingCache;if(f===null){f=r.pingCache=new Fv;var g=new Set;f.set(i,g)}else g=f.get(i),g===void 0&&(g=new Set,f.set(i,g));g.has(a)||(g.add(a),r=Qv.bind(null,r,i,a),i.then(r,r))}function Nf(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Mf(r,i,a,f,g){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=un(-1,1),i.tag=2,Pn(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=g,r)}var Ov=H.ReactCurrentOwner,mt=!1;function ut(r,i,a,f){i.child=r===null?Xd(i,null,a,f):ko(i,r.child,a,f)}function Lf(r,i,a,f,g){a=a.render;var v=i.ref;return Mo(i,g),f=ma(r,i,a,f,v,g),a=ga(),r!==null&&!mt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~g,cn(r,i,g)):(Ue&&a&&Zl(i),i.flags|=1,ut(r,i,f,g),i.child)}function Df(r,i,a,f,g){if(r===null){var v=a.type;return typeof v=="function"&&!Ja(v)&&v.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=v,Uf(r,i,v,f,g)):(r=as(a.type,null,f,i,i.mode,g),r.ref=i.ref,r.return=i,i.child=r)}if(v=r.child,(r.lanes&g)===0){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:Sr,a(S,f)&&r.ref===i.ref)return cn(r,i,g)}return i.flags|=1,r=Ln(v,f),r.ref=i.ref,r.return=i,i.child=r}function Uf(r,i,a,f,g){if(r!==null){var v=r.memoizedProps;if(Sr(v,f)&&r.ref===i.ref)if(mt=!1,i.pendingProps=f=v,(r.lanes&g)!==0)(r.flags&131072)!==0&&(mt=!0);else return i.lanes=r.lanes,cn(r,i,g)}return Ia(r,i,a,f,g)}function Ff(r,i,a){var f=i.pendingProps,g=f.children,v=r!==null?r.memoizedState:null;if(f.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Fo,wt),wt|=a;else{if((a&1073741824)===0)return r=v!==null?v.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Ne(Fo,wt),wt|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:a,Ne(Fo,wt),wt|=f}else v!==null?(f=v.baseLanes|a,i.memoizedState=null):f=a,Ne(Fo,wt),wt|=f;return ut(r,i,g,a),i.child}function Of(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Ia(r,i,a,f,g){var v=ht(a)?Jn:ot.current;return v=Ao(i,v),Mo(i,g),a=ma(r,i,a,f,v,g),f=ga(),r!==null&&!mt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~g,cn(r,i,g)):(Ue&&f&&Zl(i),i.flags|=1,ut(r,i,a,g),i.child)}function bf(r,i,a,f,g){if(ht(a)){var v=!0;Li(i)}else v=!1;if(Mo(i,g),i.stateNode===null)Xi(r,i),Af(i,a,f),Ca(i,a,f,g),f=!0;else if(r===null){var S=i.stateNode,T=i.memoizedProps;S.props=T;var I=S.context,D=a.contextType;typeof D=="object"&&D!==null?D=At(D):(D=ht(a)?Jn:ot.current,D=Ao(i,D));var B=a.getDerivedStateFromProps,G=typeof B=="function"||typeof S.getSnapshotBeforeUpdate=="function";G||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==f||I!==D)&&Pf(i,S,f,D),An=!1;var V=i.memoizedState;S.state=V,Hi(i,f,S,g),I=i.memoizedState,T!==f||V!==I||pt.current||An?(typeof B=="function"&&(Sa(i,a,B,f),I=i.memoizedState),(T=An||If(i,a,T,f,V,I,D))?(G||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=I),S.props=f,S.state=I,S.context=D,f=T):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{S=i.stateNode,jd(r,i),T=i.memoizedProps,D=i.type===i.elementType?T:Ot(i.type,T),S.props=D,G=i.pendingProps,V=S.context,I=a.contextType,typeof I=="object"&&I!==null?I=At(I):(I=ht(a)?Jn:ot.current,I=Ao(i,I));var Z=a.getDerivedStateFromProps;(B=typeof Z=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==G||V!==I)&&Pf(i,S,f,I),An=!1,V=i.memoizedState,S.state=V,Hi(i,f,S,g);var oe=i.memoizedState;T!==G||V!==oe||pt.current||An?(typeof Z=="function"&&(Sa(i,a,Z,f),oe=i.memoizedState),(D=An||If(i,a,D,f,V,oe,I)||!1)?(B||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,oe,I),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,oe,I)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===r.memoizedProps&&V===r.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&V===r.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=oe),S.props=f,S.state=oe,S.context=I,f=D):(typeof S.componentDidUpdate!="function"||T===r.memoizedProps&&V===r.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&V===r.memoizedState||(i.flags|=1024),f=!1)}return Aa(r,i,a,f,v,g)}function Aa(r,i,a,f,g,v){Of(r,i);var S=(i.flags&128)!==0;if(!f&&!S)return g&&Hd(i,a,!1),cn(r,i,v);f=i.stateNode,Ov.current=i;var T=S&&typeof a.getDerivedStateFromError!="function"?null:f.render();return i.flags|=1,r!==null&&S?(i.child=ko(i,r.child,null,v),i.child=ko(i,null,T,v)):ut(r,i,T,v),i.memoizedState=f.state,g&&Hd(i,a,!0),i.child}function Vf(r){var i=r.stateNode;i.pendingContext?Bd(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Bd(r,i.context,!1),ua(r,i.containerInfo)}function Bf(r,i,a,f,g){return xo(),na(g),i.flags|=256,ut(r,i,a,f),i.child}var Pa={dehydrated:null,treeContext:null,retryLane:0};function Ra(r){return{baseLanes:r,cachePool:null,transitions:null}}function Gf(r,i,a){var f=i.pendingProps,g=Fe.current,v=!1,S=(i.flags&128)!==0,T;if((T=S)||(T=r!==null&&r.memoizedState===null?!1:(g&2)!==0),T?(v=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),Ne(Fe,g&1),r===null)return ta(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=f.children,r=f.fallback,v?(f=i.mode,v=i.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=us(S,f,0,null),r=no(r,f,a,null),v.return=i,r.return=i,v.sibling=r,i.child=v,i.child.memoizedState=Ra(a),i.memoizedState=Pa,r):xa(i,S));if(g=r.memoizedState,g!==null&&(T=g.dehydrated,T!==null))return bv(r,i,S,f,T,g,a);if(v){v=f.fallback,S=i.mode,g=r.child,T=g.sibling;var I={mode:"hidden",children:f.children};return(S&1)===0&&i.child!==g?(f=i.child,f.childLanes=0,f.pendingProps=I,i.deletions=null):(f=Ln(g,I),f.subtreeFlags=g.subtreeFlags&14680064),T!==null?v=Ln(T,v):(v=no(v,S,a,null),v.flags|=2),v.return=i,f.return=i,f.sibling=v,i.child=f,f=v,v=i.child,S=r.child.memoizedState,S=S===null?Ra(a):{baseLanes:S.baseLanes|a,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=r.childLanes&~a,i.memoizedState=Pa,f}return v=r.child,r=v.sibling,f=Ln(v,{mode:"visible",children:f.children}),(i.mode&1)===0&&(f.lanes=a),f.return=i,f.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=f,i.memoizedState=null,f}function xa(r,i){return i=us({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Qi(r,i,a,f){return f!==null&&na(f),ko(i,r.child,null,a),r=xa(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function bv(r,i,a,f,g,v,S){if(a)return i.flags&256?(i.flags&=-257,f=wa(Error(n(422))),Qi(r,i,S,f)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(v=f.fallback,g=i.mode,f=us({mode:"visible",children:f.children},g,0,null),v=no(v,g,S,null),v.flags|=2,f.return=i,v.return=i,f.sibling=v,i.child=f,(i.mode&1)!==0&&ko(i,r.child,null,S),i.child.memoizedState=Ra(S),i.memoizedState=Pa,v);if((i.mode&1)===0)return Qi(r,i,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var T=f.dgst;return f=T,v=Error(n(419)),f=wa(v,f,void 0),Qi(r,i,S,f)}if(T=(S&r.childLanes)!==0,mt||T){if(f=Xe,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,an(r,g),Bt(f,r,g,-1))}return za(),f=wa(Error(n(421))),Qi(r,i,S,f)}return g.data==="$?"?(i.flags|=128,i.child=r.child,i=Xv.bind(null,r),g._reactRetry=i,null):(r=v.treeContext,Ct=Cn(g.nextSibling),St=i,Ue=!0,Ft=null,r!==null&&(Tt[It++]=sn,Tt[It++]=ln,Tt[It++]=Wn,sn=r.id,ln=r.overflow,Wn=i),i=xa(i,f.children),i.flags|=4096,i)}function Hf(r,i,a){r.lanes|=i;var f=r.alternate;f!==null&&(f.lanes|=i),sa(r.return,i,a)}function ka(r,i,a,f,g){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:a,tailMode:g}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=a,v.tailMode=g)}function $f(r,i,a){var f=i.pendingProps,g=f.revealOrder,v=f.tail;if(ut(r,i,f.children,a),f=Fe.current,(f&2)!==0)f=f&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Hf(r,a,i);else if(r.tag===19)Hf(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(Ne(Fe,f),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(a=i.child,g=null;a!==null;)r=a.alternate,r!==null&&$i(r)===null&&(g=a),a=a.sibling;a=g,a===null?(g=i.child,i.child=null):(g=a.sibling,a.sibling=null),ka(i,!1,g,a,v);break;case"backwards":for(a=null,g=i.child,i.child=null;g!==null;){if(r=g.alternate,r!==null&&$i(r)===null){i.child=g;break}r=g.sibling,g.sibling=a,a=g,g=r}ka(i,!0,a,null,v);break;case"together":ka(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Xi(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function cn(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Zn|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,a=Ln(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=Ln(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function Vv(r,i,a){switch(i.tag){case 3:Vf(i),xo();break;case 5:nf(i);break;case 1:ht(i.type)&&Li(i);break;case 4:ua(i,i.stateNode.containerInfo);break;case 10:var f=i.type._context,g=i.memoizedProps.value;Ne(Vi,f._currentValue),f._currentValue=g;break;case 13:if(f=i.memoizedState,f!==null)return f.dehydrated!==null?(Ne(Fe,Fe.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Gf(r,i,a):(Ne(Fe,Fe.current&1),r=cn(r,i,a),r!==null?r.sibling:null);Ne(Fe,Fe.current&1);break;case 19:if(f=(a&i.childLanes)!==0,(r.flags&128)!==0){if(f)return $f(r,i,a);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ne(Fe,Fe.current),f)break;return null;case 22:case 23:return i.lanes=0,Ff(r,i,a)}return cn(r,i,a)}var qf,Na,zf,Jf;qf=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Na=function(){},zf=function(r,i,a,f){var g=r.memoizedProps;if(g!==f){r=i.stateNode,Qn(Yt.current);var v=null;switch(a){case"input":g=sl(r,g),f=sl(r,f),v=[];break;case"select":g=J({},g,{value:void 0}),f=J({},f,{value:void 0}),v=[];break;case"textarea":g=ul(r,g),f=ul(r,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=ki)}dl(a,f);var S;a=null;for(D in g)if(!f.hasOwnProperty(D)&&g.hasOwnProperty(D)&&g[D]!=null)if(D==="style"){var T=g[D];for(S in T)T.hasOwnProperty(S)&&(a||(a={}),a[S]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(s.hasOwnProperty(D)?v||(v=[]):(v=v||[]).push(D,null));for(D in f){var I=f[D];if(T=g?.[D],f.hasOwnProperty(D)&&I!==T&&(I!=null||T!=null))if(D==="style")if(T){for(S in T)!T.hasOwnProperty(S)||I&&I.hasOwnProperty(S)||(a||(a={}),a[S]="");for(S in I)I.hasOwnProperty(S)&&T[S]!==I[S]&&(a||(a={}),a[S]=I[S])}else a||(v||(v=[]),v.push(D,a)),a=I;else D==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,T=T?T.__html:void 0,I!=null&&T!==I&&(v=v||[]).push(D,I)):D==="children"?typeof I!="string"&&typeof I!="number"||(v=v||[]).push(D,""+I):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(s.hasOwnProperty(D)?(I!=null&&D==="onScroll"&&Me("scroll",r),v||T===I||(v=[])):(v=v||[]).push(D,I))}a&&(v=v||[]).push("style",a);var D=v;(i.updateQueue=D)&&(i.flags|=4)}},Jf=function(r,i,a,f){a!==f&&(i.flags|=4)};function Fr(r,i){if(!Ue)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function it(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,f=0;if(i)for(var g=r.child;g!==null;)a|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)a|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=f,r.childLanes=a,i}function Bv(r,i,a){var f=i.pendingProps;switch(jl(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(i),null;case 1:return ht(i.type)&&Mi(),it(i),null;case 3:return f=i.stateNode,Lo(),Le(pt),Le(ot),fa(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Oi(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ft!==null&&(Ha(Ft),Ft=null))),Na(r,i),it(i),null;case 5:ca(i);var g=Qn(Nr.current);if(a=i.type,r!==null&&i.stateNode!=null)zf(r,i,a,f,g),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!f){if(i.stateNode===null)throw Error(n(166));return it(i),null}if(r=Qn(Yt.current),Oi(i)){f=i.stateNode,a=i.type;var v=i.memoizedProps;switch(f[Kt]=i,f[Ar]=v,r=(i.mode&1)!==0,a){case"dialog":Me("cancel",f),Me("close",f);break;case"iframe":case"object":case"embed":Me("load",f);break;case"video":case"audio":for(g=0;g<wr.length;g++)Me(wr[g],f);break;case"source":Me("error",f);break;case"img":case"image":case"link":Me("error",f),Me("load",f);break;case"details":Me("toggle",f);break;case"input":Ic(f,v),Me("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},Me("invalid",f);break;case"textarea":Rc(f,v),Me("invalid",f)}dl(a,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var T=v[S];S==="children"?typeof T=="string"?f.textContent!==T&&(v.suppressHydrationWarning!==!0&&xi(f.textContent,T,r),g=["children",T]):typeof T=="number"&&f.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&xi(f.textContent,T,r),g=["children",""+T]):s.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&Me("scroll",f)}switch(a){case"input":si(f),Pc(f,v,!0);break;case"textarea":si(f),kc(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=ki)}f=g,i.updateQueue=f,f!==null&&(i.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Nc(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=S.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=S.createElement(a,{is:f.is}):(r=S.createElement(a),a==="select"&&(S=r,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):r=S.createElementNS(r,a),r[Kt]=i,r[Ar]=f,qf(r,i,!1,!1),i.stateNode=r;e:{switch(S=fl(a,f),a){case"dialog":Me("cancel",r),Me("close",r),g=f;break;case"iframe":case"object":case"embed":Me("load",r),g=f;break;case"video":case"audio":for(g=0;g<wr.length;g++)Me(wr[g],r);g=f;break;case"source":Me("error",r),g=f;break;case"img":case"image":case"link":Me("error",r),Me("load",r),g=f;break;case"details":Me("toggle",r),g=f;break;case"input":Ic(r,f),g=sl(r,f),Me("invalid",r);break;case"option":g=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},g=J({},f,{value:void 0}),Me("invalid",r);break;case"textarea":Rc(r,f),g=ul(r,f),Me("invalid",r);break;default:g=f}dl(a,g),T=g;for(v in T)if(T.hasOwnProperty(v)){var I=T[v];v==="style"?Dc(r,I):v==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&Mc(r,I)):v==="children"?typeof I=="string"?(a!=="textarea"||I!=="")&&rr(r,I):typeof I=="number"&&rr(r,""+I):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?I!=null&&v==="onScroll"&&Me("scroll",r):I!=null&&b(r,v,I,S))}switch(a){case"input":si(r),Pc(r,f,!1);break;case"textarea":si(r),kc(r);break;case"option":f.value!=null&&r.setAttribute("value",""+Re(f.value));break;case"select":r.multiple=!!f.multiple,v=f.value,v!=null?ho(r,!!f.multiple,v,!1):f.defaultValue!=null&&ho(r,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=ki)}switch(a){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return it(i),null;case 6:if(r&&i.stateNode!=null)Jf(r,i,r.memoizedProps,f);else{if(typeof f!="string"&&i.stateNode===null)throw Error(n(166));if(a=Qn(Nr.current),Qn(Yt.current),Oi(i)){if(f=i.stateNode,a=i.memoizedProps,f[Kt]=i,(v=f.nodeValue!==a)&&(r=St,r!==null))switch(r.tag){case 3:xi(f.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&xi(f.nodeValue,a,(r.mode&1)!==0)}v&&(i.flags|=4)}else f=(a.nodeType===9?a:a.ownerDocument).createTextNode(f),f[Kt]=i,i.stateNode=f}return it(i),null;case 13:if(Le(Fe),f=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ue&&Ct!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Kd(),xo(),i.flags|=98560,v=!1;else if(v=Oi(i),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(n(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Kt]=i}else xo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),v=!1}else Ft!==null&&(Ha(Ft),Ft=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Fe.current&1)!==0?Ye===0&&(Ye=3):za())),i.updateQueue!==null&&(i.flags|=4),it(i),null);case 4:return Lo(),Na(r,i),r===null&&Tr(i.stateNode.containerInfo),it(i),null;case 10:return ia(i.type._context),it(i),null;case 17:return ht(i.type)&&Mi(),it(i),null;case 19:if(Le(Fe),v=i.memoizedState,v===null)return it(i),null;if(f=(i.flags&128)!==0,S=v.rendering,S===null)if(f)Fr(v,!1);else{if(Ye!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(S=$i(r),S!==null){for(i.flags|=128,Fr(v,!1),f=S.updateQueue,f!==null&&(i.updateQueue=f,i.flags|=4),i.subtreeFlags=0,f=a,a=i.child;a!==null;)v=a,r=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,r=S.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ne(Fe,Fe.current&1|2),i.child}r=r.sibling}v.tail!==null&&He()>Oo&&(i.flags|=128,f=!0,Fr(v,!1),i.lanes=4194304)}else{if(!f)if(r=$i(S),r!==null){if(i.flags|=128,f=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Fr(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Ue)return it(i),null}else 2*He()-v.renderingStartTime>Oo&&a!==1073741824&&(i.flags|=128,f=!0,Fr(v,!1),i.lanes=4194304);v.isBackwards?(S.sibling=i.child,i.child=S):(a=v.last,a!==null?a.sibling=S:i.child=S,v.last=S)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=He(),i.sibling=null,a=Fe.current,Ne(Fe,f?a&1|2:a&1),i):(it(i),null);case 22:case 23:return qa(),f=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(i.flags|=8192),f&&(i.mode&1)!==0?(wt&1073741824)!==0&&(it(i),i.subtreeFlags&6&&(i.flags|=8192)):it(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function Gv(r,i){switch(jl(i),i.tag){case 1:return ht(i.type)&&Mi(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Lo(),Le(pt),Le(ot),fa(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return ca(i),null;case 13:if(Le(Fe),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));xo()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Le(Fe),null;case 4:return Lo(),null;case 10:return ia(i.type._context),null;case 22:case 23:return qa(),null;case 24:return null;default:return null}}var Zi=!1,st=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Uo(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(f){be(r,i,f)}else a.current=null}function Ma(r,i,a){try{a()}catch(f){be(r,i,f)}}var Wf=!1;function $v(r,i){if(ql=vi,r=Td(),Fl(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var f=a.getSelection&&a.getSelection();if(f&&f.rangeCount!==0){a=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,T=-1,I=-1,D=0,B=0,G=r,V=null;t:for(;;){for(var Z;G!==a||g!==0&&G.nodeType!==3||(T=S+g),G!==v||f!==0&&G.nodeType!==3||(I=S+f),G.nodeType===3&&(S+=G.nodeValue.length),(Z=G.firstChild)!==null;)V=G,G=Z;for(;;){if(G===r)break t;if(V===a&&++D===g&&(T=S),V===v&&++B===f&&(I=S),(Z=G.nextSibling)!==null)break;G=V,V=G.parentNode}G=Z}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(zl={focusedElem:r,selectionRange:a},vi=!1,ne=i;ne!==null;)if(i=ne,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,ne=r;else for(;ne!==null;){i=ne;try{var oe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var re=oe.memoizedProps,$e=oe.memoizedState,N=i.stateNode,R=N.getSnapshotBeforeUpdate(i.elementType===i.type?re:Ot(i.type,re),$e);N.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var L=i.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(q){be(i,i.return,q)}if(r=i.sibling,r!==null){r.return=i.return,ne=r;break}ne=i.return}return oe=Wf,Wf=!1,oe}function Or(r,i,a){var f=i.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&r)===r){var v=g.destroy;g.destroy=void 0,v!==void 0&&Ma(i,a,v)}g=g.next}while(g!==f)}}function ji(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var f=a.create;a.destroy=f()}a=a.next}while(a!==i)}}function La(r){var i=r.ref;if(i!==null){var a=r.stateNode;r.tag,r=a,typeof i=="function"?i(r):i.current=r}}function Kf(r){var i=r.alternate;i!==null&&(r.alternate=null,Kf(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Kt],delete i[Ar],delete i[Yl],delete i[Iv],delete i[Av])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Yf(r){return r.tag===5||r.tag===3||r.tag===4}function Qf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Yf(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Da(r,i,a){var f=r.tag;if(f===5||f===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ki));else if(f!==4&&(r=r.child,r!==null))for(Da(r,i,a),r=r.sibling;r!==null;)Da(r,i,a),r=r.sibling}function Ua(r,i,a){var f=r.tag;if(f===5||f===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(Ua(r,i,a),r=r.sibling;r!==null;)Ua(r,i,a),r=r.sibling}var tt=null,bt=!1;function Rn(r,i,a){for(a=a.child;a!==null;)Xf(r,i,a),a=a.sibling}function Xf(r,i,a){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(fi,a)}catch{}switch(a.tag){case 5:st||Uo(a,i);case 6:var f=tt,g=bt;tt=null,Rn(r,i,a),tt=f,bt=g,tt!==null&&(bt?(r=tt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):tt.removeChild(a.stateNode));break;case 18:tt!==null&&(bt?(r=tt,a=a.stateNode,r.nodeType===8?Kl(r.parentNode,a):r.nodeType===1&&Kl(r,a),mr(r)):Kl(tt,a.stateNode));break;case 4:f=tt,g=bt,tt=a.stateNode.containerInfo,bt=!0,Rn(r,i,a),tt=f,bt=g;break;case 0:case 11:case 14:case 15:if(!st&&(f=a.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Ma(a,i,S),g=g.next}while(g!==f)}Rn(r,i,a);break;case 1:if(!st&&(Uo(a,i),f=a.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=a.memoizedProps,f.state=a.memoizedState,f.componentWillUnmount()}catch(T){be(a,i,T)}Rn(r,i,a);break;case 21:Rn(r,i,a);break;case 22:a.mode&1?(st=(f=st)||a.memoizedState!==null,Rn(r,i,a),st=f):Rn(r,i,a);break;default:Rn(r,i,a)}}function Zf(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Hv),i.forEach(function(f){var g=Zv.bind(null,r,f);a.has(f)||(a.add(f),f.then(g,g))})}}function Vt(r,i){var a=i.deletions;if(a!==null)for(var f=0;f<a.length;f++){var g=a[f];try{var v=r,S=i,T=S;e:for(;T!==null;){switch(T.tag){case 5:tt=T.stateNode,bt=!1;break e;case 3:tt=T.stateNode.containerInfo,bt=!0;break e;case 4:tt=T.stateNode.containerInfo,bt=!0;break e}T=T.return}if(tt===null)throw Error(n(160));Xf(v,S,g),tt=null,bt=!1;var I=g.alternate;I!==null&&(I.return=null),g.return=null}catch(D){be(g,i,D)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)jf(i,r),i=i.sibling}function jf(r,i){var a=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Vt(i,r),Xt(r),f&4){try{Or(3,r,r.return),ji(3,r)}catch(re){be(r,r.return,re)}try{Or(5,r,r.return)}catch(re){be(r,r.return,re)}}break;case 1:Vt(i,r),Xt(r),f&512&&a!==null&&Uo(a,a.return);break;case 5:if(Vt(i,r),Xt(r),f&512&&a!==null&&Uo(a,a.return),r.flags&32){var g=r.stateNode;try{rr(g,"")}catch(re){be(r,r.return,re)}}if(f&4&&(g=r.stateNode,g!=null)){var v=r.memoizedProps,S=a!==null?a.memoizedProps:v,T=r.type,I=r.updateQueue;if(r.updateQueue=null,I!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&Ac(g,v),fl(T,S);var D=fl(T,v);for(S=0;S<I.length;S+=2){var B=I[S],G=I[S+1];B==="style"?Dc(g,G):B==="dangerouslySetInnerHTML"?Mc(g,G):B==="children"?rr(g,G):b(g,B,G,D)}switch(T){case"input":ll(g,v);break;case"textarea":xc(g,v);break;case"select":var V=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var Z=v.value;Z!=null?ho(g,!!v.multiple,Z,!1):V!==!!v.multiple&&(v.defaultValue!=null?ho(g,!!v.multiple,v.defaultValue,!0):ho(g,!!v.multiple,v.multiple?[]:"",!1))}g[Ar]=v}catch(re){be(r,r.return,re)}}break;case 6:if(Vt(i,r),Xt(r),f&4){if(r.stateNode===null)throw Error(n(162));g=r.stateNode,v=r.memoizedProps;try{g.nodeValue=v}catch(re){be(r,r.return,re)}}break;case 3:if(Vt(i,r),Xt(r),f&4&&a!==null&&a.memoizedState.isDehydrated)try{mr(i.containerInfo)}catch(re){be(r,r.return,re)}break;case 4:Vt(i,r),Xt(r);break;case 13:Vt(i,r),Xt(r),g=r.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(ba=He())),f&4&&Zf(r);break;case 22:if(B=a!==null&&a.memoizedState!==null,r.mode&1?(st=(D=st)||B,Vt(i,r),st=D):Vt(i,r),Xt(r),f&8192){if(D=r.memoizedState!==null,(r.stateNode.isHidden=D)&&!B&&(r.mode&1)!==0)for(ne=r,B=r.child;B!==null;){for(G=ne=B;ne!==null;){switch(V=ne,Z=V.child,V.tag){case 0:case 11:case 14:case 15:Or(4,V,V.return);break;case 1:Uo(V,V.return);var oe=V.stateNode;if(typeof oe.componentWillUnmount=="function"){f=V,a=V.return;try{i=f,oe.props=i.memoizedProps,oe.state=i.memoizedState,oe.componentWillUnmount()}catch(re){be(f,a,re)}}break;case 5:Uo(V,V.return);break;case 22:if(V.memoizedState!==null){np(G);continue}}Z!==null?(Z.return=V,ne=Z):np(G)}B=B.sibling}e:for(B=null,G=r;;){if(G.tag===5){if(B===null){B=G;try{g=G.stateNode,D?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=G.stateNode,I=G.memoizedProps.style,S=I!=null&&I.hasOwnProperty("display")?I.display:null,T.style.display=Lc("display",S))}catch(re){be(r,r.return,re)}}}else if(G.tag===6){if(B===null)try{G.stateNode.nodeValue=D?"":G.memoizedProps}catch(re){be(r,r.return,re)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===r)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===r)break e;for(;G.sibling===null;){if(G.return===null||G.return===r)break e;B===G&&(B=null),G=G.return}B===G&&(B=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:Vt(i,r),Xt(r),f&4&&Zf(r);break;case 21:break;default:Vt(i,r),Xt(r)}}function Xt(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(Yf(a)){var f=a;break e}a=a.return}throw Error(n(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(rr(g,""),f.flags&=-33);var v=Qf(r);Ua(r,v,g);break;case 3:case 4:var S=f.stateNode.containerInfo,T=Qf(r);Da(r,T,S);break;default:throw Error(n(161))}}catch(I){be(r,r.return,I)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function qv(r,i,a){ne=r,ep(r)}function ep(r,i,a){for(var f=(r.mode&1)!==0;ne!==null;){var g=ne,v=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||Zi;if(!S){var T=g.alternate,I=T!==null&&T.memoizedState!==null||st;T=Zi;var D=st;if(Zi=S,(st=I)&&!D)for(ne=g;ne!==null;)S=ne,I=S.child,S.tag===22&&S.memoizedState!==null?op(g):I!==null?(I.return=S,ne=I):op(g);for(;v!==null;)ne=v,ep(v),v=v.sibling;ne=g,Zi=T,st=D}tp(r)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,ne=v):tp(r)}}function tp(r){for(;ne!==null;){var i=ne;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:st||ji(5,i);break;case 1:var f=i.stateNode;if(i.flags&4&&!st)if(a===null)f.componentDidMount();else{var g=i.elementType===i.type?a.memoizedProps:Ot(i.type,a.memoizedProps);f.componentDidUpdate(g,a.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&tf(i,v,f);break;case 3:var S=i.updateQueue;if(S!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}tf(i,S,a)}break;case 5:var T=i.stateNode;if(a===null&&i.flags&4){a=T;var I=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&a.focus();break;case"img":I.src&&(a.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var D=i.alternate;if(D!==null){var B=D.memoizedState;if(B!==null){var G=B.dehydrated;G!==null&&mr(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}st||i.flags&512&&La(i)}catch(V){be(i,i.return,V)}}if(i===r){ne=null;break}if(a=i.sibling,a!==null){a.return=i.return,ne=a;break}ne=i.return}}function np(r){for(;ne!==null;){var i=ne;if(i===r){ne=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ne=a;break}ne=i.return}}function op(r){for(;ne!==null;){var i=ne;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ji(4,i)}catch(I){be(i,a,I)}break;case 1:var f=i.stateNode;if(typeof f.componentDidMount=="function"){var g=i.return;try{f.componentDidMount()}catch(I){be(i,g,I)}}var v=i.return;try{La(i)}catch(I){be(i,v,I)}break;case 5:var S=i.return;try{La(i)}catch(I){be(i,S,I)}}}catch(I){be(i,i.return,I)}if(i===r){ne=null;break}var T=i.sibling;if(T!==null){T.return=i.return,ne=T;break}ne=i.return}}var zv=Math.ceil,es=H.ReactCurrentDispatcher,Fa=H.ReactCurrentOwner,Rt=H.ReactCurrentBatchConfig,Ce=0,Xe=null,Je=null,nt=0,wt=0,Fo=wn(0),Ye=0,br=null,Zn=0,ts=0,Oa=0,Vr=null,gt=null,ba=0,Oo=1/0,dn=null,ns=!1,Va=null,xn=null,os=!1,kn=null,rs=0,Br=0,Ba=null,is=-1,ss=0;function ct(){return(Ce&6)!==0?He():is!==-1?is:is=He()}function Nn(r){return(r.mode&1)===0?1:(Ce&2)!==0&&nt!==0?nt&-nt:Rv.transition!==null?(ss===0&&(ss=Yc()),ss):(r=xe,r!==0||(r=window.event,r=r===void 0?16:rd(r.type)),r)}function Bt(r,i,a,f){if(50<Br)throw Br=0,Ba=null,Error(n(185));cr(r,a,f),((Ce&2)===0||r!==Xe)&&(r===Xe&&((Ce&2)===0&&(ts|=a),Ye===4&&Mn(r,nt)),yt(r,f),a===1&&Ce===0&&(i.mode&1)===0&&(Oo=He()+500,Di&&In()))}function yt(r,i){var a=r.callbackNode;Ry(r,i);var f=mi(r,r===Xe?nt:0);if(f===0)a!==null&&Jc(a),r.callbackNode=null,r.callbackPriority=0;else if(i=f&-f,r.callbackPriority!==i){if(a!=null&&Jc(a),i===1)r.tag===0?Pv(ip.bind(null,r)):$d(ip.bind(null,r)),wv(function(){(Ce&6)===0&&In()}),a=null;else{switch(Qc(f)){case 1:a=_l;break;case 4:a=Wc;break;case 16:a=di;break;case 536870912:a=Kc;break;default:a=di}a=pp(a,rp.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function rp(r,i){if(is=-1,ss=0,(Ce&6)!==0)throw Error(n(327));var a=r.callbackNode;if(bo()&&r.callbackNode!==a)return null;var f=mi(r,r===Xe?nt:0);if(f===0)return null;if((f&30)!==0||(f&r.expiredLanes)!==0||i)i=ls(r,f);else{i=f;var g=Ce;Ce|=2;var v=lp();(Xe!==r||nt!==i)&&(dn=null,Oo=He()+500,eo(r,i));do try{Kv();break}catch(T){sp(r,T)}while(!0);ra(),es.current=v,Ce=g,Je!==null?i=0:(Xe=null,nt=0,i=Ye)}if(i!==0){if(i===2&&(g=El(r),g!==0&&(f=g,i=Ga(r,g))),i===1)throw a=br,eo(r,0),Mn(r,f),yt(r,He()),a;if(i===6)Mn(r,f);else{if(g=r.current.alternate,(f&30)===0&&!Jv(g)&&(i=ls(r,f),i===2&&(v=El(r),v!==0&&(f=v,i=Ga(r,v))),i===1))throw a=br,eo(r,0),Mn(r,f),yt(r,He()),a;switch(r.finishedWork=g,r.finishedLanes=f,i){case 0:case 1:throw Error(n(345));case 2:to(r,gt,dn);break;case 3:if(Mn(r,f),(f&130023424)===f&&(i=ba+500-He(),10<i)){if(mi(r,0)!==0)break;if(g=r.suspendedLanes,(g&f)!==f){ct(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=Wl(to.bind(null,r,gt,dn),i);break}to(r,gt,dn);break;case 4:if(Mn(r,f),(f&4194240)===f)break;for(i=r.eventTimes,g=-1;0<f;){var S=31-Dt(f);v=1<<S,S=i[S],S>g&&(g=S),f&=~v}if(f=g,f=He()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*zv(f/1960))-f,10<f){r.timeoutHandle=Wl(to.bind(null,r,gt,dn),f);break}to(r,gt,dn);break;case 5:to(r,gt,dn);break;default:throw Error(n(329))}}}return yt(r,He()),r.callbackNode===a?rp.bind(null,r):null}function Ga(r,i){var a=Vr;return r.current.memoizedState.isDehydrated&&(eo(r,i).flags|=256),r=ls(r,i),r!==2&&(i=gt,gt=a,i!==null&&Ha(i)),r}function Ha(r){gt===null?gt=r:gt.push.apply(gt,r)}function Jv(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var f=0;f<a.length;f++){var g=a[f],v=g.getSnapshot;g=g.value;try{if(!Ut(v(),g))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Mn(r,i){for(i&=~Oa,i&=~ts,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-Dt(i),f=1<<a;r[a]=-1,i&=~f}}function ip(r){if((Ce&6)!==0)throw Error(n(327));bo();var i=mi(r,0);if((i&1)===0)return yt(r,He()),null;var a=ls(r,i);if(r.tag!==0&&a===2){var f=El(r);f!==0&&(i=f,a=Ga(r,f))}if(a===1)throw a=br,eo(r,0),Mn(r,i),yt(r,He()),a;if(a===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,to(r,gt,dn),yt(r,He()),null}function $a(r,i){var a=Ce;Ce|=1;try{return r(i)}finally{Ce=a,Ce===0&&(Oo=He()+500,Di&&In())}}function jn(r){kn!==null&&kn.tag===0&&(Ce&6)===0&&bo();var i=Ce;Ce|=1;var a=Rt.transition,f=xe;try{if(Rt.transition=null,xe=1,r)return r()}finally{xe=f,Rt.transition=a,Ce=i,(Ce&6)===0&&In()}}function qa(){wt=Fo.current,Le(Fo)}function eo(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Cv(a)),Je!==null)for(a=Je.return;a!==null;){var f=a;switch(jl(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Mi();break;case 3:Lo(),Le(pt),Le(ot),fa();break;case 5:ca(f);break;case 4:Lo();break;case 13:Le(Fe);break;case 19:Le(Fe);break;case 10:ia(f.type._context);break;case 22:case 23:qa()}a=a.return}if(Xe=r,Je=r=Ln(r.current,null),nt=wt=i,Ye=0,br=null,Oa=ts=Zn=0,gt=Vr=null,Yn!==null){for(i=0;i<Yn.length;i++)if(a=Yn[i],f=a.interleaved,f!==null){a.interleaved=null;var g=f.next,v=a.pending;if(v!==null){var S=v.next;v.next=g,f.next=S}a.pending=f}Yn=null}return r}function sp(r,i){do{var a=Je;try{if(ra(),qi.current=Ki,zi){for(var f=Oe.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}zi=!1}if(Xn=0,Qe=Ke=Oe=null,Mr=!1,Lr=0,Fa.current=null,a===null||a.return===null){Ye=1,br=i,Je=null;break}e:{var v=r,S=a.return,T=a,I=i;if(i=nt,T.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var D=I,B=T,G=B.tag;if((B.mode&1)===0&&(G===0||G===11||G===15)){var V=B.alternate;V?(B.updateQueue=V.updateQueue,B.memoizedState=V.memoizedState,B.lanes=V.lanes):(B.updateQueue=null,B.memoizedState=null)}var Z=Nf(S);if(Z!==null){Z.flags&=-257,Mf(Z,S,T,v,i),Z.mode&1&&kf(v,D,i),i=Z,I=D;var oe=i.updateQueue;if(oe===null){var re=new Set;re.add(I),i.updateQueue=re}else oe.add(I);break e}else{if((i&1)===0){kf(v,D,i),za();break e}I=Error(n(426))}}else if(Ue&&T.mode&1){var $e=Nf(S);if($e!==null){($e.flags&65536)===0&&($e.flags|=256),Mf($e,S,T,v,i),na(Do(I,T));break e}}v=I=Do(I,T),Ye!==4&&(Ye=2),Vr===null?Vr=[v]:Vr.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var N=Rf(v,I,i);ef(v,N);break e;case 1:T=I;var R=v.type,L=v.stateNode;if((v.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(xn===null||!xn.has(L)))){v.flags|=65536,i&=-i,v.lanes|=i;var q=xf(v,T,i);ef(v,q);break e}}v=v.return}while(v!==null)}up(a)}catch(ie){i=ie,Je===a&&a!==null&&(Je=a=a.return);continue}break}while(!0)}function lp(){var r=es.current;return es.current=Ki,r===null?Ki:r}function za(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Xe===null||(Zn&268435455)===0&&(ts&268435455)===0||Mn(Xe,nt)}function ls(r,i){var a=Ce;Ce|=2;var f=lp();(Xe!==r||nt!==i)&&(dn=null,eo(r,i));do try{Wv();break}catch(g){sp(r,g)}while(!0);if(ra(),Ce=a,es.current=f,Je!==null)throw Error(n(261));return Xe=null,nt=0,Ye}function Wv(){for(;Je!==null;)ap(Je)}function Kv(){for(;Je!==null&&!_y();)ap(Je)}function ap(r){var i=fp(r.alternate,r,wt);r.memoizedProps=r.pendingProps,i===null?up(r):Je=i,Fa.current=null}function up(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=Bv(a,i,wt),a!==null){Je=a;return}}else{if(a=Gv(a,i),a!==null){a.flags&=32767,Je=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ye=6,Je=null;return}}if(i=i.sibling,i!==null){Je=i;return}Je=i=r}while(i!==null);Ye===0&&(Ye=5)}function to(r,i,a){var f=xe,g=Rt.transition;try{Rt.transition=null,xe=1,Yv(r,i,a,f)}finally{Rt.transition=g,xe=f}return null}function Yv(r,i,a,f){do bo();while(kn!==null);if((Ce&6)!==0)throw Error(n(327));a=r.finishedWork;var g=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var v=a.lanes|a.childLanes;if(xy(r,v),r===Xe&&(Je=Xe=null,nt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||os||(os=!0,pp(di,function(){return bo(),null})),v=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||v){v=Rt.transition,Rt.transition=null;var S=xe;xe=1;var T=Ce;Ce|=4,Fa.current=null,$v(r,a),jf(a,r),mv(zl),vi=!!ql,zl=ql=null,r.current=a,qv(a),Ey(),Ce=T,xe=S,Rt.transition=v}else r.current=a;if(os&&(os=!1,kn=r,rs=g),v=r.pendingLanes,v===0&&(xn=null),wy(a.stateNode),yt(r,He()),i!==null)for(f=r.onRecoverableError,a=0;a<i.length;a++)g=i[a],f(g.value,{componentStack:g.stack,digest:g.digest});if(ns)throw ns=!1,r=Va,Va=null,r;return(rs&1)!==0&&r.tag!==0&&bo(),v=r.pendingLanes,(v&1)!==0?r===Ba?Br++:(Br=0,Ba=r):Br=0,In(),null}function bo(){if(kn!==null){var r=Qc(rs),i=Rt.transition,a=xe;try{if(Rt.transition=null,xe=16>r?16:r,kn===null)var f=!1;else{if(r=kn,kn=null,rs=0,(Ce&6)!==0)throw Error(n(331));var g=Ce;for(Ce|=4,ne=r.current;ne!==null;){var v=ne,S=v.child;if((ne.flags&16)!==0){var T=v.deletions;if(T!==null){for(var I=0;I<T.length;I++){var D=T[I];for(ne=D;ne!==null;){var B=ne;switch(B.tag){case 0:case 11:case 15:Or(8,B,v)}var G=B.child;if(G!==null)G.return=B,ne=G;else for(;ne!==null;){B=ne;var V=B.sibling,Z=B.return;if(Kf(B),B===D){ne=null;break}if(V!==null){V.return=Z,ne=V;break}ne=Z}}}var oe=v.alternate;if(oe!==null){var re=oe.child;if(re!==null){oe.child=null;do{var $e=re.sibling;re.sibling=null,re=$e}while(re!==null)}}ne=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,ne=S;else e:for(;ne!==null;){if(v=ne,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Or(9,v,v.return)}var N=v.sibling;if(N!==null){N.return=v.return,ne=N;break e}ne=v.return}}var R=r.current;for(ne=R;ne!==null;){S=ne;var L=S.child;if((S.subtreeFlags&2064)!==0&&L!==null)L.return=S,ne=L;else e:for(S=R;ne!==null;){if(T=ne,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:ji(9,T)}}catch(ie){be(T,T.return,ie)}if(T===S){ne=null;break e}var q=T.sibling;if(q!==null){q.return=T.return,ne=q;break e}ne=T.return}}if(Ce=g,In(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(fi,r)}catch{}f=!0}return f}finally{xe=a,Rt.transition=i}}return!1}function cp(r,i,a){i=Do(a,i),i=Rf(r,i,1),r=Pn(r,i,1),i=ct(),r!==null&&(cr(r,1,i),yt(r,i))}function be(r,i,a){if(r.tag===3)cp(r,r,a);else for(;i!==null;){if(i.tag===3){cp(i,r,a);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(xn===null||!xn.has(f))){r=Do(a,r),r=xf(i,r,1),i=Pn(i,r,1),r=ct(),i!==null&&(cr(i,1,r),yt(i,r));break}}i=i.return}}function Qv(r,i,a){var f=r.pingCache;f!==null&&f.delete(i),i=ct(),r.pingedLanes|=r.suspendedLanes&a,Xe===r&&(nt&a)===a&&(Ye===4||Ye===3&&(nt&130023424)===nt&&500>He()-ba?eo(r,0):Oa|=a),yt(r,i)}function dp(r,i){i===0&&((r.mode&1)===0?i=1:(i=hi,hi<<=1,(hi&130023424)===0&&(hi=4194304)));var a=ct();r=an(r,i),r!==null&&(cr(r,i,a),yt(r,a))}function Xv(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),dp(r,a)}function Zv(r,i){var a=0;switch(r.tag){case 13:var f=r.stateNode,g=r.memoizedState;g!==null&&(a=g.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(i),dp(r,a)}var fp;fp=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||pt.current)mt=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return mt=!1,Vv(r,i,a);mt=(r.flags&131072)!==0}else mt=!1,Ue&&(i.flags&1048576)!==0&&qd(i,Fi,i.index);switch(i.lanes=0,i.tag){case 2:var f=i.type;Xi(r,i),r=i.pendingProps;var g=Ao(i,ot.current);Mo(i,a),g=ma(null,i,f,r,g,a);var v=ga();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,ht(f)?(v=!0,Li(i)):v=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,aa(i),g.updater=Yi,i.stateNode=g,g._reactInternals=i,Ca(i,f,r,a),i=Aa(null,i,f,!0,v,a)):(i.tag=0,Ue&&v&&Zl(i),ut(null,i,g,a),i=i.child),i;case 16:f=i.elementType;e:{switch(Xi(r,i),r=i.pendingProps,g=f._init,f=g(f._payload),i.type=f,g=i.tag=e0(f),r=Ot(f,r),g){case 0:i=Ia(null,i,f,r,a);break e;case 1:i=bf(null,i,f,r,a);break e;case 11:i=Lf(null,i,f,r,a);break e;case 14:i=Df(null,i,f,Ot(f.type,r),a);break e}throw Error(n(306,f,""))}return i;case 0:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:Ot(f,g),Ia(r,i,f,g,a);case 1:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:Ot(f,g),bf(r,i,f,g,a);case 3:e:{if(Vf(i),r===null)throw Error(n(387));f=i.pendingProps,v=i.memoizedState,g=v.element,jd(r,i),Hi(i,f,null,a);var S=i.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){g=Do(Error(n(423)),i),i=Bf(r,i,f,a,g);break e}else if(f!==g){g=Do(Error(n(424)),i),i=Bf(r,i,f,a,g);break e}else for(Ct=Cn(i.stateNode.containerInfo.firstChild),St=i,Ue=!0,Ft=null,a=Xd(i,null,f,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(xo(),f===g){i=cn(r,i,a);break e}ut(r,i,f,a)}i=i.child}return i;case 5:return nf(i),r===null&&ta(i),f=i.type,g=i.pendingProps,v=r!==null?r.memoizedProps:null,S=g.children,Jl(f,g)?S=null:v!==null&&Jl(f,v)&&(i.flags|=32),Of(r,i),ut(r,i,S,a),i.child;case 6:return r===null&&ta(i),null;case 13:return Gf(r,i,a);case 4:return ua(i,i.stateNode.containerInfo),f=i.pendingProps,r===null?i.child=ko(i,null,f,a):ut(r,i,f,a),i.child;case 11:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:Ot(f,g),Lf(r,i,f,g,a);case 7:return ut(r,i,i.pendingProps,a),i.child;case 8:return ut(r,i,i.pendingProps.children,a),i.child;case 12:return ut(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(f=i.type._context,g=i.pendingProps,v=i.memoizedProps,S=g.value,Ne(Vi,f._currentValue),f._currentValue=S,v!==null)if(Ut(v.value,S)){if(v.children===g.children&&!pt.current){i=cn(r,i,a);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var T=v.dependencies;if(T!==null){S=v.child;for(var I=T.firstContext;I!==null;){if(I.context===f){if(v.tag===1){I=un(-1,a&-a),I.tag=2;var D=v.updateQueue;if(D!==null){D=D.shared;var B=D.pending;B===null?I.next=I:(I.next=B.next,B.next=I),D.pending=I}}v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),sa(v.return,a,i),T.lanes|=a;break}I=I.next}}else if(v.tag===10)S=v.type===i.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(n(341));S.lanes|=a,T=S.alternate,T!==null&&(T.lanes|=a),sa(S,a,i),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===i){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}ut(r,i,g.children,a),i=i.child}return i;case 9:return g=i.type,f=i.pendingProps.children,Mo(i,a),g=At(g),f=f(g),i.flags|=1,ut(r,i,f,a),i.child;case 14:return f=i.type,g=Ot(f,i.pendingProps),g=Ot(f.type,g),Df(r,i,f,g,a);case 15:return Uf(r,i,i.type,i.pendingProps,a);case 17:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:Ot(f,g),Xi(r,i),i.tag=1,ht(f)?(r=!0,Li(i)):r=!1,Mo(i,a),Af(i,f,g),Ca(i,f,g,a),Aa(null,i,f,!0,r,a);case 19:return $f(r,i,a);case 22:return Ff(r,i,a)}throw Error(n(156,i.tag))};function pp(r,i){return zc(r,i)}function jv(r,i,a,f){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(r,i,a,f){return new jv(r,i,a,f)}function Ja(r){return r=r.prototype,!(!r||!r.isReactComponent)}function e0(r){if(typeof r=="function")return Ja(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Se)return 11;if(r===Ge)return 14}return 2}function Ln(r,i){var a=r.alternate;return a===null?(a=xt(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function as(r,i,a,f,g,v){var S=2;if(f=r,typeof r=="function")Ja(r)&&(S=1);else if(typeof r=="string")S=5;else e:switch(r){case Y:return no(a.children,g,v,i);case le:S=8,g|=8;break;case ee:return r=xt(12,a,i,g|2),r.elementType=ee,r.lanes=v,r;case Ie:return r=xt(13,a,i,g),r.elementType=Ie,r.lanes=v,r;case Pe:return r=xt(19,a,i,g),r.elementType=Pe,r.lanes=v,r;case ke:return us(a,g,v,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case de:S=10;break e;case _e:S=9;break e;case Se:S=11;break e;case Ge:S=14;break e;case ze:S=16,f=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return i=xt(S,a,i,g),i.elementType=r,i.type=f,i.lanes=v,i}function no(r,i,a,f){return r=xt(7,r,f,i),r.lanes=a,r}function us(r,i,a,f){return r=xt(22,r,f,i),r.elementType=ke,r.lanes=a,r.stateNode={isHidden:!1},r}function Wa(r,i,a){return r=xt(6,r,null,i),r.lanes=a,r}function Ka(r,i,a){return i=xt(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function t0(r,i,a,f,g){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Ya(r,i,a,f,g,v,S,T,I){return r=new t0(r,i,a,T,I),i===1?(i=1,v===!0&&(i|=8)):i=0,v=xt(3,null,null,i),r.current=v,v.stateNode=r,v.memoizedState={element:f,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},aa(v),r}function n0(r,i,a){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:f==null?null:""+f,children:r,containerInfo:i,implementation:a}}function hp(r){if(!r)return Tn;r=r._reactInternals;e:{if(qn(r)!==r||r.tag!==1)throw Error(n(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(ht(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(r.tag===1){var a=r.type;if(ht(a))return Gd(r,a,i)}return i}function mp(r,i,a,f,g,v,S,T,I){return r=Ya(a,f,!0,r,g,v,S,T,I),r.context=hp(null),a=r.current,f=ct(),g=Nn(a),v=un(f,g),v.callback=i??null,Pn(a,v,g),r.current.lanes=g,cr(r,g,f),yt(r,f),r}function cs(r,i,a,f){var g=i.current,v=ct(),S=Nn(g);return a=hp(a),i.context===null?i.context=a:i.pendingContext=a,i=un(v,S),i.payload={element:r},f=f===void 0?null:f,f!==null&&(i.callback=f),r=Pn(g,i,S),r!==null&&(Bt(r,g,S,v),Gi(r,g,S)),S}function ds(r){return r=r.current,r.child?(r.child.tag===5,r.child.stateNode):null}function gp(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function Qa(r,i){gp(r,i),(r=r.alternate)&&gp(r,i)}function o0(){return null}var yp=typeof reportError=="function"?reportError:function(r){console.error(r)};function Xa(r){this._internalRoot=r}fs.prototype.render=Xa.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));cs(r,i,null,null)},fs.prototype.unmount=Xa.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;jn(function(){cs(null,r,null,null)}),i[on]=null}};function fs(r){this._internalRoot=r}fs.prototype.unstable_scheduleHydration=function(r){if(r){var i=jc();r={blockedOn:null,target:r,priority:i};for(var a=0;a<_n.length&&i!==0&&i<_n[a].priority;a++);_n.splice(a,0,r),a===0&&nd(r)}};function Za(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ps(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function vp(){}function r0(r,i,a,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var D=ds(S);v.call(D)}}var S=mp(i,f,r,0,null,!1,!1,"",vp);return r._reactRootContainer=S,r[on]=S.current,Tr(r.nodeType===8?r.parentNode:r),jn(),S}for(;g=r.lastChild;)r.removeChild(g);if(typeof f=="function"){var T=f;f=function(){var D=ds(I);T.call(D)}}var I=Ya(r,0,!1,null,null,!1,!1,"",vp);return r._reactRootContainer=I,r[on]=I.current,Tr(r.nodeType===8?r.parentNode:r),jn(function(){cs(i,I,a,f)}),I}function hs(r,i,a,f,g){var v=a._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var T=g;g=function(){var I=ds(S);T.call(I)}}cs(i,S,r,g)}else S=r0(a,i,r,g,f);return ds(S)}Xc=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=ur(i.pendingLanes);a!==0&&(Cl(i,a|1),yt(i,He()),(Ce&6)===0&&(Oo=He()+500,In()))}break;case 13:jn(function(){var f=an(r,1);if(f!==null){var g=ct();Bt(f,r,1,g)}}),Qa(r,1)}},wl=function(r){if(r.tag===13){var i=an(r,134217728);if(i!==null){var a=ct();Bt(i,r,134217728,a)}Qa(r,134217728)}},Zc=function(r){if(r.tag===13){var i=Nn(r),a=an(r,i);if(a!==null){var f=ct();Bt(a,r,i,f)}Qa(r,i)}},jc=function(){return xe},ed=function(r,i){var a=xe;try{return xe=r,i()}finally{xe=a}},ml=function(r,i,a){switch(i){case"input":if(ll(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var f=a[i];if(f!==r&&f.form===r.form){var g=Ni(f);if(!g)throw Error(n(90));Tc(f),ll(f,g)}}}break;case"textarea":xc(r,a);break;case"select":i=a.value,i!=null&&ho(r,!!a.multiple,i,!1)}},bc=$a,Vc=jn;var i0={usingClientEntryPoint:!1,Events:[Pr,To,Ni,Fc,Oc,$a]},Gr={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s0={bundleType:Gr.bundleType,version:Gr.version,rendererPackageName:Gr.rendererPackageName,rendererConfig:Gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=$c(r),r===null?null:r.stateNode},findFiberByHostInstance:Gr.findFiberByHostInstance||o0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ms.isDisabled&&ms.supportsFiber)try{fi=ms.inject(s0),Wt=ms}catch{}}return vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i0,vt.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Za(i))throw Error(n(200));return n0(r,i,null,a)},vt.createRoot=function(r,i){if(!Za(r))throw Error(n(299));var a=!1,f="",g=yp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=Ya(r,1,!1,null,null,a,!1,f,g),r[on]=i.current,Tr(r.nodeType===8?r.parentNode:r),new Xa(i)},vt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=$c(i),r=r===null?null:r.stateNode,r},vt.flushSync=function(r){return jn(r)},vt.hydrate=function(r,i,a){if(!ps(i))throw Error(n(200));return hs(null,r,i,!0,a)},vt.hydrateRoot=function(r,i,a){if(!Za(r))throw Error(n(405));var f=a!=null&&a.hydratedSources||null,g=!1,v="",S=yp;if(a!=null&&(a.unstable_strictMode===!0&&(g=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),i=mp(i,null,r,1,a??null,g,!1,v,S),r[on]=i.current,Tr(r),f)for(r=0;r<f.length;r++)a=f[r],g=a._getVersion,g=g(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,g]:i.mutableSourceEagerHydrationData.push(a,g);return new fs(i)},vt.render=function(r,i,a){if(!ps(i))throw Error(n(200));return hs(null,r,i,!1,a)},vt.unmountComponentAtNode=function(r){if(!ps(r))throw Error(n(40));return r._reactRootContainer?(jn(function(){hs(null,null,r,!1,function(){r._reactRootContainer=null,r[on]=null})}),!0):!1},vt.unstable_batchedUpdates=$a,vt.unstable_renderSubtreeIntoContainer=function(r,i,a,f){if(!ps(a))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return hs(r,i,a,!1,f)},vt.version="18.3.1-next-f1338f8080-20240426",vt}var Ap;function Gm(){if(Ap)return tu.exports;Ap=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tu.exports=m0(),tu.exports}var Pp;function g0(){if(Pp)return gs;Pp=1;var t=Gm();return gs.createRoot=t.createRoot,gs.hydrateRoot=t.hydrateRoot,gs}var y0=g0(),v0=Gm();const Nk=Bm(v0);function ni(){return ni=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ni.apply(this,arguments)}var On;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(On||(On={}));const Rp="popstate";function _0(t){t===void 0&&(t={});function e(s,l){let{pathname:c="/",search:p="",hash:m=""}=co(s.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Cu("",{pathname:c,search:p,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){let c=s.document.querySelector("base"),p="";if(c&&c.getAttribute("href")){let m=s.location.href,h=m.indexOf("#");p=h===-1?m:m.slice(0,h)}return p+"#"+(typeof l=="string"?l:Gs(l))}function o(s,l){Qs(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return S0(e,n,o,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E0(){return Math.random().toString(36).substr(2,8)}function xp(t,e){return{usr:t.state,key:t.key,idx:e}}function Cu(t,e,n,o){return n===void 0&&(n=null),ni({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?co(e):e,{state:n,key:e&&e.key||o||E0()})}function Gs(t){let{pathname:e="/",search:n="",hash:o=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let o=t.indexOf("?");o>=0&&(e.search=t.substr(o),t=t.substr(0,o)),t&&(e.pathname=t)}return e}function S0(t,e,n,o){o===void 0&&(o={});let{window:s=document.defaultView,v5Compat:l=!1}=o,c=s.history,p=On.Pop,m=null,h=y();h==null&&(h=0,c.replaceState(ni({},c.state,{idx:h}),""));function y(){return(c.state||{idx:null}).idx}function _(){p=On.Pop;let A=y(),U=A==null?null:A-h;h=A,m&&m({action:p,location:k.location,delta:U})}function E(A,U){p=On.Push;let $=Cu(k.location,A,U);n&&n($,A),h=y()+1;let b=xp($,h),H=k.createHref($);try{c.pushState(b,"",H)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(H)}l&&m&&m({action:p,location:k.location,delta:1})}function w(A,U){p=On.Replace;let $=Cu(k.location,A,U);n&&n($,A),h=y();let b=xp($,h),H=k.createHref($);c.replaceState(b,"",H),l&&m&&m({action:p,location:k.location,delta:0})}function P(A){let U=s.location.origin!=="null"?s.location.origin:s.location.href,$=typeof A=="string"?A:Gs(A);return $=$.replace(/ $/,"%20"),qe(U,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,U)}let k={get action(){return p},get location(){return t(s,c)},listen(A){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(Rp,_),m=A,()=>{s.removeEventListener(Rp,_),m=null}},createHref(A){return e(s,A)},createURL:P,encodeLocation(A){let U=P(A);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:E,replace:w,go(A){return c.go(A)}};return k}var kp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(kp||(kp={}));function C0(t,e,n){return n===void 0&&(n="/"),w0(t,e,n)}function w0(t,e,n,o){let s=typeof e=="string"?co(e):e,l=nc(s.pathname||"/",n);if(l==null)return null;let c=Hm(t);T0(c);let p=null;for(let m=0;p==null&&m<c.length;++m){let h=F0(l);p=L0(c[m],h)}return p}function Hm(t,e,n,o){e===void 0&&(e=[]),n===void 0&&(n=[]),o===void 0&&(o="");let s=(l,c,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(qe(m.relativePath.startsWith(o),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(o.length));let h=Vn([o,m.relativePath]),y=n.concat(m);l.children&&l.children.length>0&&(qe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Hm(l.children,e,y,h)),!(l.path==null&&!l.index)&&e.push({path:h,score:N0(h,l.index),routesMeta:y})};return t.forEach((l,c)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))s(l,c);else for(let m of $m(l.path))s(l,c,m)}),e}function $m(t){let e=t.split("/");if(e.length===0)return[];let[n,...o]=e,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(o.length===0)return s?[l,""]:[l];let c=$m(o.join("/")),p=[];return p.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&p.push(...c),p.map(m=>t.startsWith("/")&&m===""?"/":m)}function T0(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:M0(e.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const I0=/^:[\w-]+$/,A0=3,P0=2,R0=1,x0=10,k0=-2,Np=t=>t==="*";function N0(t,e){let n=t.split("/"),o=n.length;return n.some(Np)&&(o+=k0),e&&(o+=P0),n.filter(s=>!Np(s)).reduce((s,l)=>s+(I0.test(l)?A0:l===""?R0:x0),o)}function M0(t,e){return t.length===e.length&&t.slice(0,-1).every((o,s)=>o===e[s])?t[t.length-1]-e[e.length-1]:0}function L0(t,e,n){let{routesMeta:o}=t,s={},l="/",c=[];for(let p=0;p<o.length;++p){let m=o[p],h=p===o.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=D0({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},y),E=m.route;if(!_)return null;Object.assign(s,_.params),c.push({params:s,pathname:Vn([l,_.pathname]),pathnameBase:G0(Vn([l,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(l=Vn([l,_.pathnameBase]))}return c}function D0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,o]=U0(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),p=s.slice(1);return{params:o.reduce((h,y,_)=>{let{paramName:E,isOptional:w}=y;if(E==="*"){let k=p[_]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const P=p[_];return w&&!P?h[E]=void 0:h[E]=(P||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function U0(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,p,m)=>(o.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),o]}function F0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qs(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function nc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,o=t.charAt(n);return o&&o!=="/"?null:t.slice(n)||"/"}const O0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b0=t=>O0.test(t);function V0(t,e){e===void 0&&(e="/");let{pathname:n,search:o="",hash:s=""}=typeof t=="string"?co(t):t,l;if(n)if(b0(n))l=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Qs(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?l=Mp(n.substring(1),"/"):l=Mp(n,e)}else l=e;return{pathname:l,search:H0(o),hash:$0(s)}}function Mp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ru(t,e,n,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function B0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function oc(t,e){let n=B0(t);return e?n.map((o,s)=>s===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function rc(t,e,n,o){o===void 0&&(o=!1);let s;typeof t=="string"?s=co(t):(s=ni({},t),qe(!s.pathname||!s.pathname.includes("?"),ru("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),ru("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),ru("#","search","hash",s)));let l=t===""||s.pathname==="",c=l?"/":s.pathname,p;if(c==null)p=n;else{let _=e.length-1;if(!o&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),_-=1;s.pathname=E.join("/")}p=_>=0?e[_]:"/"}let m=V0(s,p),h=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(h||y)&&(m.pathname+="/"),m}const Vn=t=>t.join("/").replace(/\/\/+/g,"/"),G0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),H0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function q0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qm=["post","put","patch","delete"];new Set(qm);const z0=["get",...qm];new Set(z0);function oi(){return oi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},oi.apply(this,arguments)}const ic=M.createContext(null),J0=M.createContext(null),Hn=M.createContext(null),Xs=M.createContext(null),pn=M.createContext({outlet:null,matches:[],isDataRoute:!1}),zm=M.createContext(null);function W0(t,e){let{relative:n}=e===void 0?{}:e;Zo()||qe(!1);let{basename:o,navigator:s}=M.useContext(Hn),{hash:l,pathname:c,search:p}=Wm(t,{relative:n}),m=c;return o!=="/"&&(m=c==="/"?o:Vn([o,c])),s.createHref({pathname:m,search:p,hash:l})}function Zo(){return M.useContext(Xs)!=null}function fo(){return Zo()||qe(!1),M.useContext(Xs).location}function Jm(t){M.useContext(Hn).static||M.useLayoutEffect(t)}function sc(){let{isDataRoute:t}=M.useContext(pn);return t?s_():K0()}function K0(){Zo()||qe(!1);let t=M.useContext(ic),{basename:e,future:n,navigator:o}=M.useContext(Hn),{matches:s}=M.useContext(pn),{pathname:l}=fo(),c=JSON.stringify(oc(s,n.v7_relativeSplatPath)),p=M.useRef(!1);return Jm(()=>{p.current=!0}),M.useCallback(function(h,y){if(y===void 0&&(y={}),!p.current)return;if(typeof h=="number"){o.go(h);return}let _=rc(h,JSON.parse(c),l,y.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Vn([e,_.pathname])),(y.replace?o.replace:o.push)(_,y.state,y)},[e,o,c,l,t])}function Mk(){let{matches:t}=M.useContext(pn),e=t[t.length-1];return e?e.params:{}}function Wm(t,e){let{relative:n}=e===void 0?{}:e,{future:o}=M.useContext(Hn),{matches:s}=M.useContext(pn),{pathname:l}=fo(),c=JSON.stringify(oc(s,o.v7_relativeSplatPath));return M.useMemo(()=>rc(t,JSON.parse(c),l,n==="path"),[t,c,l,n])}function Y0(t,e){return Q0(t,e)}function Q0(t,e,n,o){Zo()||qe(!1);let{navigator:s}=M.useContext(Hn),{matches:l}=M.useContext(pn),c=l[l.length-1],p=c?c.params:{};c&&c.pathname;let m=c?c.pathnameBase:"/";c&&c.route;let h=fo(),y;if(e){var _;let A=typeof e=="string"?co(e):e;m==="/"||(_=A.pathname)!=null&&_.startsWith(m)||qe(!1),y=A}else y=h;let E=y.pathname||"/",w=E;if(m!=="/"){let A=m.replace(/^\//,"").split("/");w="/"+E.replace(/^\//,"").split("/").slice(A.length).join("/")}let P=C0(t,{pathname:w}),k=t_(P&&P.map(A=>Object.assign({},A,{params:Object.assign({},p,A.params),pathname:Vn([m,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?m:Vn([m,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),l,n,o);return e&&k?M.createElement(Xs.Provider,{value:{location:oi({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:On.Pop}},k):k}function X0(){let t=i_(),e=q0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const Z0=M.createElement(X0,null);class j0 extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(pn.Provider,{value:this.props.routeContext},M.createElement(zm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e_(t){let{routeContext:e,match:n,children:o}=t,s=M.useContext(ic);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(pn.Provider,{value:e},o)}function t_(t,e,n,o){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),o===void 0&&(o=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=o)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,p=(s=n)==null?void 0:s.errors;if(p!=null){let y=c.findIndex(_=>_.route.id&&p?.[_.route.id]!==void 0);y>=0||qe(!1),c=c.slice(0,Math.min(c.length,y+1))}let m=!1,h=-1;if(n&&o&&o.v7_partialHydration)for(let y=0;y<c.length;y++){let _=c[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(h=y),_.route.id){let{loaderData:E,errors:w}=n,P=_.route.loader&&E[_.route.id]===void 0&&(!w||w[_.route.id]===void 0);if(_.route.lazy||P){m=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((y,_,E)=>{let w,P=!1,k=null,A=null;n&&(w=p&&_.route.id?p[_.route.id]:void 0,k=_.route.errorElement||Z0,m&&(h<0&&E===0?(l_("route-fallback"),P=!0,A=null):h===E&&(P=!0,A=_.route.hydrateFallbackElement||null)));let U=e.concat(c.slice(0,E+1)),$=()=>{let b;return w?b=k:P?b=A:_.route.Component?b=M.createElement(_.route.Component,null):_.route.element?b=_.route.element:b=y,M.createElement(e_,{match:_,routeContext:{outlet:y,matches:U,isDataRoute:n!=null},children:b})};return n&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?M.createElement(j0,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:$(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):$()},null)}var Km=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Km||{}),Ym=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Ym||{});function n_(t){let e=M.useContext(ic);return e||qe(!1),e}function o_(t){let e=M.useContext(J0);return e||qe(!1),e}function r_(t){let e=M.useContext(pn);return e||qe(!1),e}function Qm(t){let e=r_(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function i_(){var t;let e=M.useContext(zm),n=o_(),o=Qm();return e!==void 0?e:(t=n.errors)==null?void 0:t[o]}function s_(){let{router:t}=n_(Km.UseNavigateStable),e=Qm(Ym.UseNavigateStable),n=M.useRef(!1);return Jm(()=>{n.current=!0}),M.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,oi({fromRouteId:e},l)))},[t,e])}const Lp={};function l_(t,e,n){Lp[t]||(Lp[t]=!0)}function a_(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function wu(t){let{to:e,replace:n,state:o,relative:s}=t;Zo()||qe(!1);let{future:l,static:c}=M.useContext(Hn),{matches:p}=M.useContext(pn),{pathname:m}=fo(),h=sc(),y=rc(e,oc(p,l.v7_relativeSplatPath),m,s==="path"),_=JSON.stringify(y);return M.useEffect(()=>h(JSON.parse(_),{replace:n,state:o,relative:s}),[h,_,s,n,o]),null}function K(t){qe(!1)}function u_(t){let{basename:e="/",children:n=null,location:o,navigationType:s=On.Pop,navigator:l,static:c=!1,future:p}=t;Zo()&&qe(!1);let m=e.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:m,navigator:l,static:c,future:oi({v7_relativeSplatPath:!1},p)}),[m,p,l,c]);typeof o=="string"&&(o=co(o));let{pathname:y="/",search:_="",hash:E="",state:w=null,key:P="default"}=o,k=M.useMemo(()=>{let A=nc(y,m);return A==null?null:{location:{pathname:A,search:_,hash:E,state:w,key:P},navigationType:s}},[m,y,_,E,w,P,s]);return k==null?null:M.createElement(Hn.Provider,{value:h},M.createElement(Xs.Provider,{children:n,value:k}))}function c_(t){let{children:e,location:n}=t;return Y0(Tu(e),n)}new Promise(()=>{});function Tu(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(o,s)=>{if(!M.isValidElement(o))return;let l=[...e,s];if(o.type===M.Fragment){n.push.apply(n,Tu(o.props.children,l));return}o.type!==K&&qe(!1),!o.props.index||!o.props.children||qe(!1);let c={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(c.children=Tu(o.props.children,l)),n.push(c)}),n}function Iu(){return Iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Iu.apply(this,arguments)}function d_(t,e){if(t==null)return{};var n={},o=Object.keys(t),s,l;for(l=0;l<o.length;l++)s=o[l],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function f_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function p_(t,e){return t.button===0&&(!e||e==="_self")&&!f_(t)}const h_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m_="6";try{window.__reactRouterVersion=m_}catch{}const g_="startTransition",Dp=f0[g_];function y_(t){let{basename:e,children:n,future:o,window:s}=t,l=M.useRef();l.current==null&&(l.current=_0({window:s,v5Compat:!0}));let c=l.current,[p,m]=M.useState({action:c.action,location:c.location}),{v7_startTransition:h}=o||{},y=M.useCallback(_=>{h&&Dp?Dp(()=>m(_)):m(_)},[m,h]);return M.useLayoutEffect(()=>c.listen(y),[c,y]),M.useEffect(()=>a_(o),[o]),M.createElement(u_,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:c,future:o})}const v_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",__=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lk=M.forwardRef(function(e,n){let{onClick:o,relative:s,reloadDocument:l,replace:c,state:p,target:m,to:h,preventScrollReset:y,viewTransition:_}=e,E=d_(e,h_),{basename:w}=M.useContext(Hn),P,k=!1;if(typeof h=="string"&&__.test(h)&&(P=h,v_))try{let b=new URL(window.location.href),H=h.startsWith("//")?new URL(b.protocol+h):new URL(h),F=nc(H.pathname,w);H.origin===b.origin&&F!=null?h=F+H.search+H.hash:k=!0}catch{}let A=W0(h,{relative:s}),U=E_(h,{replace:c,state:p,target:m,preventScrollReset:y,relative:s,viewTransition:_});function $(b){o&&o(b),b.defaultPrevented||U(b)}return M.createElement("a",Iu({},E,{href:P||A,onClick:k||l?o:$,ref:n,target:m}))});var Up;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Up||(Up={}));var Fp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Fp||(Fp={}));function E_(t,e){let{target:n,replace:o,state:s,preventScrollReset:l,relative:c,viewTransition:p}=e===void 0?{}:e,m=sc(),h=fo(),y=Wm(t,{relative:c});return M.useCallback(_=>{if(p_(_,n)){_.preventDefault();let E=o!==void 0?o:Gs(h)===Gs(y);m(t,{replace:E,state:s,preventScrollReset:l,relative:c,viewTransition:p})}},[h,m,y,o,s,n,t,l,c,p])}const Xm=M.createContext(void 0),Dk=()=>{const t=M.useContext(Xm);if(!t)throw new Error("useModal must be used within a ModalProvider");return t},S_=({children:t})=>{const[e,n]=M.useState(null),[o,s]=M.useState(""),l=M.useRef(()=>{}),c=()=>{n(null),s("")},p=M.useCallback((_,E)=>new Promise(w=>{l.current=w,n({type:"alert",title:_,message:E,confirmText:"OK",onConfirm:()=>{c(),w()},onCancel:()=>{c(),w()}})}),[]),m=M.useCallback((_,E,w="Confirmar",P="Cancelar")=>new Promise(k=>{l.current=k,n({type:"confirm",title:_,message:E,confirmText:w,cancelText:P,onConfirm:()=>{c(),k(!0)},onCancel:()=>{c(),k(!1)}})}),[]),h=M.useCallback((_,E,w="")=>new Promise(P=>{l.current=P,s(""),n({type:"prompt",title:_,message:E,placeholder:w,confirmText:"Enviar",cancelText:"Cancelar",onConfirm:k=>{c(),P(k)},onCancel:()=>{c(),P(null)}})}),[]),y=M.useCallback((_,E)=>new Promise(w=>{l.current=w,n({type:"options",title:_,options:E,cancelText:"Cancelar",onConfirm:P=>{c(),w(P)},onCancel:()=>{c(),w(null)}})}),[]);return C.jsxs(Xm.Provider,{value:{showAlert:p,showConfirm:m,showPrompt:h,showOptions:y},children:[t,e&&C.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in font-['Inter']",children:C.jsxs("div",{className:"w-full max-w-sm bg-[#1a1e26] border border-white/10 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)] overflow-hidden animate-pop-in transform transition-all",children:[C.jsxs("div",{className:"p-6 text-center",children:[e.type==="alert"&&C.jsx("div",{className:"mb-4 mx-auto w-12 h-12 rounded-full bg-[#00c2ff]/10 flex items-center justify-center text-[#00c2ff] text-2xl",children:C.jsx("i",{className:"fa-solid fa-circle-info"})}),e.type==="confirm"&&C.jsx("div",{className:"mb-4 mx-auto w-12 h-12 rounded-full bg-[#ffaa00]/10 flex items-center justify-center text-[#ffaa00] text-2xl",children:C.jsx("i",{className:"fa-solid fa-triangle-exclamation"})}),e.type==="prompt"&&C.jsx("div",{className:"mb-4 mx-auto w-12 h-12 rounded-full bg-[#00c2ff]/10 flex items-center justify-center text-[#00c2ff] text-2xl",children:C.jsx("i",{className:"fa-solid fa-pen"})}),C.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),e.message&&C.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:e.message}),e.type==="prompt"&&C.jsx("input",{type:"text",autoFocus:!0,className:"mt-4 w-full bg-[#0c0f14] border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#00c2ff] transition-colors",placeholder:e.placeholder,value:o,onChange:_=>s(_.target.value),onKeyDown:_=>_.key==="Enter"&&e.onConfirm(o)}),e.type==="options"&&e.options&&C.jsx("div",{className:"mt-4 flex flex-col gap-2",children:e.options.map((_,E)=>C.jsxs("button",{onClick:()=>e.onConfirm(_.value),className:`w-full p-3 rounded-xl flex items-center gap-3 transition-colors ${_.isDestructive?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-white/5 text-white hover:bg-white/10"}`,children:[_.icon&&C.jsx("i",{className:`${_.icon} w-5 text-center`}),C.jsx("span",{className:"font-medium",children:_.label})]},E))})]}),e.type!=="options"&&C.jsxs("div",{className:"flex border-t border-white/10",children:[e.type!=="alert"&&C.jsx("button",{onClick:e.onCancel,className:"flex-1 p-4 text-gray-400 font-medium hover:bg-white/5 transition-colors text-sm",children:e.cancelText||"Cancelar"}),C.jsx("div",{className:"w-[1px] bg-white/10"}),C.jsx("button",{onClick:()=>e.type==="prompt"?e.onConfirm(o):e.onConfirm(),className:"flex-1 p-4 text-[#00c2ff] font-bold hover:bg-[#00c2ff]/10 transition-colors text-sm",children:e.confirmText||"OK"})]}),e.type==="options"&&C.jsx("div",{className:"p-2",children:C.jsx("button",{onClick:e.onCancel,className:"w-full p-3 rounded-xl text-gray-500 hover:text-white font-medium transition-colors",children:e.cancelText||"Cancelar"})})]})})]})};function C_(t,e){switch(t){case"VIP_GROUP_SALES":return`/vip-group-sales/${e}`;case"GROUP_LANDING":return`/group-landing/${e}`;default:throw new Error("Invalid tracking destination type")}}const ys="flux_attribution_data",uo={captureUrlParams:()=>{const t=new URLSearchParams(window.location.hash.includes("?")?window.location.hash.split("?")[1]:window.location.search),e={};t.forEach((n,o)=>{e[o]=n}),Object.keys(e).length>0&&localStorage.setItem(ys,JSON.stringify({params:e,ts:Date.now()}))},getStoredParams:()=>{const t=localStorage.getItem(ys);return t?JSON.parse(t).params:{}},getAffiliateRefId:()=>{const t=uo.getStoredParams();return t.ref_id||t.ref},getAffiliateRef:()=>uo.getStoredParams().ref,generateTrackingLink:(t,e)=>{const n=new URLSearchParams;return Object.entries(e).forEach(([o,s])=>s&&n.set(o,s)),`${t}${t.includes("?")?"&":"?"}${n.toString()}`},clear:()=>localStorage.removeItem(ys),hardReset:()=>localStorage.removeItem(ys)};function Uk(t){const{destinationType:e,groupId:n,params:o}=t,s=C_(e,n),l=`${window.location.origin}/#${s}`,c=new URLSearchParams({utm_source:o.utm_source||"",utm_medium:o.utm_medium||"",utm_campaign:o.utm_campaign||"generic"});return{baseUrl:l,finalUrl:`${l}?${c.toString()}`}}const Zm=async t=>{if(!t)return"";const e=t.trim().toLowerCase();if(/^[a-f0-9]{64}$/i.test(e))return e;try{const n=new TextEncoder().encode(e),o=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(o)).map(l=>l.toString(16).padStart(2,"0")).join("")}catch(n){return console.error("Hash error:",n),e}},jm=async t=>{const e={...t},n=["email","phone","externalId","firstName","lastName"];for(const o of n)e[o]&&(e[o]=await Zm(e[o]));return e},w_=(t={},e={})=>({em:t.email,ph:t.phone,fn:t.firstName,ln:t.lastName,ct:t.city,st:t.state,zp:t.zip,country:t.country,db:t.dateOfBirth,ge:t.gender,external_id:t.externalId,client_ip_address:t.ip,client_user_agent:t.userAgent,fbp:t.fbp,fbc:t.fbc,value:e.value,currency:e.currency||"BRL",content_name:e.content_name,content_ids:e.content_ids,content_type:e.content_type,num_items:e.num_items}),Op=new Set,bp={init:t=>{typeof window>"u"||!t||Op.has(t)||(window.fbq||(function(e,n,o,s,l,c,p){e.fbq||(l=e.fbq=function(){l.callMethod?l.callMethod.apply(l,arguments):l.queue.push(arguments)},window._fbq||(window._fbq=l),l.push=l,l.loaded=!0,l.version="2.0",l.queue=[],c=n.createElement(o),c.async=!0,c.src=s,p=n.getElementsByTagName(o)[0],p.parentNode.insertBefore(c,p))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),window.fbq("init",t),Op.add(t),console.debug(`[Meta Pixel] Inicializado: ${t}`))},track:async(t,e,n)=>{if(!window.fbq)return;const o=await jm(n||{}),s=w_(o,e);window.fbq("track",t,s,{eventID:e?.event_id})}};const T_=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},o=(l,c)=>{n.platforms.set(l,c)},s=l=>{n.platforms.has(l)&&(n.currentPlatform=n.platforms.get(l))};return n.addPlatform=o,n.setPlatform=s,n},I_=t=>t.CapacitorPlatforms=T_(t),eg=I_(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});eg.addPlatform;eg.setPlatform;var Qo;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Qo||(Qo={}));class iu extends Error{constructor(e,n,o){super(e),this.message=e,this.code=n,this.data=o}}const A_=t=>{var e,n;return t?.androidBridge?"android":!((n=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},P_=t=>{var e,n,o,s,l;const c=t.CapacitorCustomPlatform||null,p=t.Capacitor||{},m=p.Plugins=p.Plugins||{},h=t.CapacitorPlatforms,y=()=>c!==null?c.name:A_(t),_=((e=h?.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||y,E=()=>_()!=="web",w=((n=h?.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||E,P=Y=>{const le=H.get(Y);return!!(le?.platforms.has(_())||U(Y))},k=((o=h?.currentPlatform)===null||o===void 0?void 0:o.isPluginAvailable)||P,A=Y=>{var le;return(le=p.PluginHeaders)===null||le===void 0?void 0:le.find(ee=>ee.name===Y)},U=((s=h?.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||A,$=Y=>t.console.error(Y),b=(Y,le,ee)=>Promise.reject(`${ee} does not have an implementation of "${le}".`),H=new Map,F=(Y,le={})=>{const ee=H.get(Y);if(ee)return console.warn(`Capacitor plugin "${Y}" already registered. Cannot register plugins twice.`),ee.proxy;const de=_(),_e=U(Y);let Se;const Ie=async()=>(!Se&&de in le?Se=typeof le[de]=="function"?Se=await le[de]():Se=le[de]:c!==null&&!Se&&"web"in le&&(Se=typeof le.web=="function"?Se=await le.web():Se=le.web),Se),Pe=(J,x)=>{var O,fe;if(_e){const he=_e?.methods.find(ge=>x===ge.name);if(he)return he.rtype==="promise"?ge=>p.nativePromise(Y,x.toString(),ge):(ge,ve)=>p.nativeCallback(Y,x.toString(),ge,ve);if(J)return(O=J[x])===null||O===void 0?void 0:O.bind(J)}else{if(J)return(fe=J[x])===null||fe===void 0?void 0:fe.bind(J);throw new iu(`"${Y}" plugin is not implemented on ${de}`,Qo.Unimplemented)}},Ge=J=>{let x;const O=(...fe)=>{const he=Ie().then(ge=>{const ve=Pe(ge,J);if(ve){const Ae=ve(...fe);return x=Ae?.remove,Ae}else throw new iu(`"${Y}.${J}()" is not implemented on ${de}`,Qo.Unimplemented)});return J==="addListener"&&(he.remove=async()=>x()),he};return O.toString=()=>`${J.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:J,writable:!1,configurable:!1}),O},ze=Ge("addListener"),ke=Ge("removeListener"),z=(J,x)=>{const O=ze({eventName:J},x),fe=async()=>{const ge=await O;ke({eventName:J,callbackId:ge},x)},he=new Promise(ge=>O.then(()=>ge({remove:fe})));return he.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await fe()},he},se=new Proxy({},{get(J,x){switch(x){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return _e?z:ze;case"removeListener":return ke;default:return Ge(x)}}});return m[Y]=se,H.set(Y,{name:Y,proxy:se,platforms:new Set([...Object.keys(le),..._e?[de]:[]])}),se},ae=((l=h?.currentPlatform)===null||l===void 0?void 0:l.registerPlugin)||F;return p.convertFileSrc||(p.convertFileSrc=Y=>Y),p.getPlatform=_,p.handleError=$,p.isNativePlatform=w,p.isPluginAvailable=k,p.pluginMethodNoop=b,p.registerPlugin=ae,p.Exception=iu,p.DEBUG=!!p.DEBUG,p.isLoggingEnabled=!!p.isLoggingEnabled,p.platform=p.getPlatform(),p.isNative=p.isNativePlatform(),p},R_=t=>t.Capacitor=P_(t),Xo=R_(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),lc=Xo.registerPlugin;Xo.Plugins;class tg{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const l=async()=>this.removeListener(e,n),c=Promise.resolve({remove:l});return Object.defineProperty(c,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await l()}}),c}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const o=this.listeners[e];o&&o.forEach(s=>s(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:o=>{this.notifyListeners(n,o)}}}unimplemented(e="not implemented"){return new Xo.Exception(e,Qo.Unimplemented)}unavailable(e="not available"){return new Xo.Exception(e,Qo.Unavailable)}async removeListener(e,n){const o=this.listeners[e];if(!o)return;const s=o.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Vp=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Bp=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class x_ extends tg{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[s,l]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Bp(s).trim(),l=Bp(l).trim(),n[s]=l}),n}async setCookie(e){try{const n=Vp(e.key),o=Vp(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${o||""}${s}; path=${l}; ${c};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}lc("CapacitorCookies",{web:()=>new x_});const k_=async t=>new Promise((e,n)=>{const o=new FileReader;o.onload=()=>{const s=o.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},o.onerror=s=>n(s),o.readAsDataURL(t)}),N_=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,l,c)=>(s[l]=t[e[c]],s),{})},M_=(t,e=!0)=>t?Object.entries(t).reduce((o,s)=>{const[l,c]=s;let p,m;return Array.isArray(c)?(m="",c.forEach(h=>{p=e?encodeURIComponent(h):h,m+=`${l}=${p}&`}),m.slice(0,-1)):(p=e?encodeURIComponent(c):c,m=`${l}=${p}`),`${o}&${m}`},"").substr(1):null,L_=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=N_(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[c,p]of Object.entries(t.data||{}))l.set(c,p);n.body=l.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const l=new FormData;if(t.data instanceof FormData)t.data.forEach((p,m)=>{l.append(m,p)});else for(const p of Object.keys(t.data))l.append(p,t.data[p]);n.body=l;const c=new Headers(n.headers);c.delete("content-type"),n.headers=c}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class D_ extends tg{async request(e){const n=L_(e,e.webFetchExtra),o=M_(e.params,e.shouldEncodeUrlParams),s=o?`${e.url}?${o}`:e.url,l=await fetch(s,n),c=l.headers.get("content-type")||"";let{responseType:p="text"}=l.ok?e:{};c.includes("application/json")&&(p="json");let m,h;switch(p){case"arraybuffer":case"blob":h=await l.blob(),m=await k_(h);break;case"json":m=await l.json();break;default:m=await l.text()}const y={};return l.headers.forEach((_,E)=>{y[E]=_}),{data:m,headers:y,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}lc("CapacitorHttp",{web:()=>new D_});const U_=()=>{if(Xo.isNativePlatform())return(void 0).includes("localhost")?"http://10.0.2.2:3000":void 0;try{const e=window.location.origin,n=new URL(void 0).origin;if(e===n)return"/api"}catch{return"/api"}},Be=U_(),F_={track:async(t,e,n,o,s,l)=>{console.log(` [Meta CAPI] Encaminhando para Hub: ${n} (${o})`);try{(await fetch(`${Be}/api/tracking/capi`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:"meta",pixelId:t,accessToken:e,eventName:n,eventId:o,eventData:s,userData:{...l,userAgent:navigator.userAgent,ip:"0.0.0.0"},url:window.location.href})})).ok||console.warn("[Meta CAPI] Servidor retornou erro, mas o fluxo segue.")}catch(c){console.error("[Meta CAPI] Erro de rede ao tentar CAPI:",c)}}},O_=async(t,e,n)=>{const o=`${t}_${e}_${n}`;return`flux_${(await Zm(o)).substring(0,16)}`},b_=["PageView","Lead","CompleteRegistration","Purchase","InitiateCheckout","AddPaymentInfo","ViewContent","GalleryInteraction"],V_=["PageView","ViewContent","TimeStay30s","TimeStay60s","GalleryInteraction","GalleryZoom"],B_=["Lead","InitiateCheckout","AddPaymentInfo","Purchase"],lo={isSingleton:t=>b_.includes(t),shouldRouteToBrowser:t=>V_.includes(t),shouldRouteToCapi:t=>B_.includes(t),requiresContentContext:t=>["Lead","ViewContent","InitiateCheckout","Purchase","AddPaymentInfo","GalleryInteraction"].includes(t)},Gp={canTrack:(t,e,n="global")=>{if(!lo.isSingleton(t))return!0;const o=lo.requiresContentContext(t)?n:"global",s=`flux_px_guard_${e}_${t}_${o}`;return localStorage.getItem(s)==="true"?(console.warn(` [PixelGuard] Disparo duplicado de ${t} para ${o} foi bloqueado.`),!1):!0},markAsTracked:(t,e,n="global")=>{if(!lo.isSingleton(t))return;const o=lo.requiresContentContext(t)?n:"global",s=`flux_px_guard_${e}_${t}_${o}`;localStorage.setItem(s,"true")},clearGuards:t=>{Object.keys(localStorage).forEach(e=>{e.startsWith(`flux_px_guard_${t}`)&&localStorage.removeItem(e)})}},ng={isDevelopmentMode:()=>!1,isProductionMode:()=>!0},kt={admin:{id:"u-admin-001",email:"admin@flux.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"flux_admin",nickname:"Flux Official",bio:"Conta de administrao do sistema Flux.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isPrivate:!1,website:"https://flux.com"},lastSeen:Date.now()},creator:{id:"u-creator-002",email:"creator@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"pixel_master",nickname:"Eduardo MKT",bio:"Especialista em trfego pago e funis de venda. Me siga para dicas dirias!",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Eduardo",isPrivate:!1,phone:"11999999999"},paymentConfig:{providerId:"syncpay",isConnected:!0},lastSeen:Date.now()-5e3},user:{id:"u-user-003",email:"user@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"ana_clara",nickname:"Ana Clara",bio:"Apenas explorando os melhores grupos VIP do Flux. ",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Ana",isPrivate:!0},lastSeen:Date.now()-36e5},star:{id:"u-star-004",email:"star@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"julia_vendas",nickname:"Julia Sales",bio:"Top 1 Afiliada Flux. Mentoria de vendas no link abaixo.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Julia",isPrivate:!1,website:"https://juliasales.com"},lastSeen:Date.now()-12e4},dev:{id:"u-dev-005",email:"dev@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"marcos_tech",nickname:"Marcos Tech",bio:"Desenvolvedor Fullstack e entusiasta de Web3.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Marcos",isPrivate:!1},lastSeen:Date.now()-8e5},m001:{id:"u-mock-006",email:"roberto@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"roberto_s",nickname:"Roberto Silva",bio:"Engenheiro de Software nas horas vagas.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Roberto",isPrivate:!1},lastSeen:Date.now()-45e5},m002:{id:"u-mock-007",email:"mariana@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"mari_costa",nickname:"Mariana Costa",bio:"Viajante e criadora de contedo.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Mariana",isPrivate:!1},lastSeen:Date.now()-15e3},m003:{id:"u-mock-008",email:"felipe@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"felipe_dev",nickname:"Felipe Rocha",bio:"Build, ship, iterate.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felipe",isPrivate:!1},lastSeen:Date.now()-9e6},m004:{id:"u-mock-009",email:"camila@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"caca_mkt",nickname:"Camila Oliveira",bio:"Growth Hacker em startups.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Camila",isPrivate:!1},lastSeen:Date.now()-300},m010:{id:"u-mock-010",email:"vitor@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"vitor_ads",nickname:"Vitor Hugo",bio:"Gestor de Trfego.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Vitor",isPrivate:!1}},m011:{id:"u-mock-011",email:"carla@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"carla_copy",nickname:"Carla Souza",bio:"Copywriter de alta converso.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Carla",isPrivate:!1}},m012:{id:"u-mock-012",email:"bruno@test.com",isVerified:!0,isProfileCompleted:!0,profile:{name:"bruno_scale",nickname:"Bruno Mendes",bio:"Estrategista de Escala.",photoUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Bruno",isPrivate:!1}}},oo=[{id:"g-vip-001",name:"Networking Elite (VIP)",description:"Acesso exclusivo aos maiores players do mercado digital. Networking, hacks de escala e chamadas semanais.",isVip:!0,isPrivate:!0,price:"97.00",currency:"BRL",accessType:"temporary",coverImage:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=1000&auto=format&fit=crop",creatorId:"u-creator-002",creatorEmail:"creator@test.com",memberIds:["u-admin-001","u-user-003","u-creator-002","u-mock-006","u-mock-007","u-mock-008","u-mock-009","u-mock-010","u-mock-011","u-mock-012","u-star-004","u-dev-005"],adminIds:["u-creator-002","u-admin-001","u-user-003"],pendingMemberIds:["u-mock-010"],status:"active",timestamp:Date.now()-1e7,vipDoor:{text:"O segredo da escala no est no produto, mas no networking. Entre para o time que fatura 6 dgitos por ms.",buttonText:"ASSINAR ACESSO VIP",mediaItems:[{url:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=1000&auto=format&fit=crop",type:"image"}]}},{id:"g-vip-002",name:"Sinais de Cripto Pro",description:"Anlises dirias de Bitcoin e Altcoins. Entradas e sadas em tempo real.",isVip:!0,isPrivate:!0,price:"149.90",currency:"BRL",accessType:"temporary",coverImage:"https://images.unsplash.com/photo-1518546305927-5a555bb7020d?q=80&w=1000&auto=format&fit=crop",creatorId:"u-admin-001",creatorEmail:"admin@flux.com",memberIds:["u-admin-001","u-creator-002","u-mock-008"],adminIds:["u-admin-001"],status:"active",timestamp:Date.now()-5e6,vipDoor:{text:"No perca o prximo bull market. Nossos analistas trabalham 24/7 para voc.",buttonText:"QUERO OS SINAIS",mediaItems:[{url:"https://images.unsplash.com/photo-1518546305927-5a555bb7020d?q=80&w=1000&auto=format&fit=crop",type:"image"}]}},{id:"g-pub-001",name:"Dicas de Design UI/UX",description:"Grupo aberto para troca de experincias e feedbacks de layouts. Focado em mobile-first design.",isVip:!1,isPrivate:!1,coverImage:"https://images.unsplash.com/photo-1558655146-d09347e92766?q=80&w=1000&auto=format&fit=crop",creatorId:"u-admin-001",creatorEmail:"admin@flux.com",memberIds:["u-user-003","u-creator-002","u-admin-001","u-mock-006","u-mock-007","u-mock-008","u-mock-009"],adminIds:["u-admin-001"],lastMessage:"Algum tem o link do novo Figma?",time:"10:30",timestamp:Date.now()-2e6},{id:"g-pub-002",name:"Desenvolvedores React Br",description:"Comunidade de devs apaixonados por React, Next.js e TypeScript.",isVip:!1,isPrivate:!1,coverImage:"https://images.unsplash.com/photo-1633356122544-f134324a6cee?q=80&w=1000&auto=format&fit=crop",creatorId:"u-user-003",creatorEmail:"user@test.com",memberIds:["u-user-003","u-admin-001","u-mock-008"],adminIds:["u-user-003"],lastMessage:"Vite ou Webpack em 2024?",time:"08:45",timestamp:Date.now()-1e6},{id:"g-priv-001",name:"Mastermind E-commerce Br",description:"Grupo fechado apenas para donos de lojas com faturamento acima de 50k. Requer aprovao.",isVip:!1,isPrivate:!0,coverImage:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?q=80&w=1000&auto=format&fit=crop",creatorId:"u-creator-002",creatorEmail:"creator@test.com",memberIds:["u-creator-002","u-mock-009"],adminIds:["u-creator-002"],pendingMemberIds:["u-user-003","u-mock-006"],lastMessage:"Solicitao de entrada pendente.",time:"Ontem",timestamp:Date.now()-864e5},{id:"g-priv-002",name:"Investidores Anjo Annimos",description:"Discusses privadas sobre aportes em startups early stage.",isVip:!1,isPrivate:!0,coverImage:"https://images.unsplash.com/photo-1553729459-efe14ef6055d?q=80&w=1000&auto=format&fit=crop",creatorId:"u-admin-001",creatorEmail:"admin@flux.com",memberIds:["u-admin-001","u-mock-007"],adminIds:["u-admin-001"],lastMessage:"Grupo restrito.",time:"3 dias",timestamp:Date.now()-2592e5}],vs=[{id:"camp-pending-001",ownerId:"u-creator-002",ownerEmail:"creator@test.com",name:"Campanha em Aprovao",scheduleType:"continuous",budget:50,trafficObjective:"visits",pricingModel:"budget",creative:{text:"Este anncio est aguardando o pagamento para entrar em veiculao global.",mediaUrl:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=1000",mediaType:"image"},campaignObjective:"traffic",destinationType:"url",targetUrl:"https://flux.com",optimizationGoal:"clicks",placements:["feed","marketplace"],ctaButton:"saiba mais",status:"pending",timestamp:Date.now(),stats:{views:0,clicks:0,conversions:0}},{id:"camp-001",ownerId:"u-creator-002",ownerEmail:"creator@test.com",name:"Lanamento Mentoria Flux",scheduleType:"continuous",budget:1500,trafficObjective:"conversions",pricingModel:"budget",creative:{text:"Quer faturar como os grandes? Entre para o nosso grupo VIP agora!",mediaUrl:"https://images.unsplash.com/photo-1557804506-669a67965ba0?q=80&w=1000&auto=format&fit=crop",mediaType:"image"},campaignObjective:"sales",destinationType:"group",targetGroupId:"g-vip-001",optimizationGoal:"group_joins",placements:["feed","reels"],ctaButton:"assinar",status:"active",timestamp:Date.now()-864e5,stats:{views:12500,clicks:840,conversions:45}},{id:"camp-002",ownerId:"u-creator-002",ownerEmail:"creator@test.com",name:"Retargeting iPhone 15",scheduleType:"date",startDate:Date.now(),endDate:Date.now()+6048e5,budget:500,trafficObjective:"visits",pricingModel:"budget",creative:{text:"Voc viu mas no comprou. O iPhone 15 Pro com desconto acaba hoje!",mediaUrl:"https://images.unsplash.com/photo-1695048133142-1a20484d2569?q=80&w=1000&auto=format&fit=crop",mediaType:"image"},campaignObjective:"traffic",destinationType:"url",targetUrl:"https://flux.com/marketplace/product/prod-001",optimizationGoal:"clicks",placements:["feed","marketplace"],ctaButton:"comprar",status:"active",timestamp:Date.now(),stats:{views:3200,clicks:410,conversions:12}},{id:"camp-003",ownerId:"u-creator-002",ownerEmail:"creator@test.com",name:"Algoritmo de Vendas (CPA)",scheduleType:"continuous",budget:0,trafficObjective:"engagement",pricingModel:"commission",creative:{text:"Participe do maior grupo de networking do Brasil.",mediaUrl:"https://assets.mixkit.co/videos/preview/mixkit-girl-in-neon-lighting-dancing-3182-large.mp4",mediaType:"video"},campaignObjective:"engagement",destinationType:"group",targetGroupId:"g-vip-001",optimizationGoal:"views",placements:["reels"],ctaButton:"entrar",status:"active",timestamp:Date.now()-36e5,stats:{views:89e3,clicks:12400,conversions:0}}],G_=[{id:"admin@flux.com_creator@test.com",contactName:"Suporte Flux",isBlocked:!1,messages:[{id:Date.now()-1e7,text:"Ol! Bem-vindo ao Flux. Como podemos ajudar?",type:"received",contentType:"text",timestamp:"14:20",status:"read",senderEmail:"admin@flux.com",senderName:"Flux Official"}]},{id:"another@test.com_creator@test.com",contactName:"Filipe Silva",isBlocked:!1,messages:[{id:Date.now()-5e6,text:"E a! Vi seu post sobre escala. Muito bom.",type:"received",contentType:"text",timestamp:"09:15",status:"read",senderEmail:"another@test.com",senderName:"Filipe Silva"},{id:Date.now()-6e5,text:"Temos call amanh?",type:"received",contentType:"text",timestamp:"5m",status:"delivered",senderEmail:"another@test.com",senderName:"Filipe Silva"}]},{id:"user@test.com_creator@test.com",contactName:"Ana Clara",isBlocked:!1,messages:[{id:Date.now()-864e5,text:"Pode me mandar o link do grupo VIP?",type:"received",contentType:"text",timestamp:"Ontem",status:"read",senderEmail:"user@test.com",senderName:"Ana Clara"}]}],H_=[{id:99,type:"expiring_vip",senderId:"system",username:"flux_system",recipientId:"u-creator-002",recipientEmail:"creator@test.com",text:"Networking Elite (VIP)",groupId:"g-vip-001",time:"Expira em 2 dias",timestamp:Date.now()-36e5,avatar:"https://cdn-icons-png.flaticon.com/512/10543/10543306.png",read:!1},{id:1,type:"sale",senderId:"u-user-003",username:"@ana_clara",recipientId:"u-creator-002",recipientEmail:"creator@test.com",text:'Comprou seu item "iPhone 15 Pro Max". Voc recebeu R$ 7.890,00!',time:"Agora",timestamp:Date.now()-6e4,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Ana",read:!1},{id:2,type:"pending",subtype:"group_join",senderId:"u-user-003",username:"@ana_clara",recipientId:"u-creator-002",recipientEmail:"creator@test.com",text:'solicitou entrada no grupo "Networking Elite (VIP)"',time:"5m",timestamp:Date.now()-3e5,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Ana",read:!1},{id:3,type:"comment",senderId:"u-admin-001",username:"@flux_admin",recipientId:"u-creator-002",recipientEmail:"creator@test.com",text:'comentou: "Incrvel esses resultados! "',time:"1h",timestamp:Date.now()-36e5,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",postImage:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=200&auto=format&fit=crop",read:!1},{id:4,type:"like",senderId:"u-user-003",username:"@ana_clara",recipientId:"u-creator-002",recipientEmail:"creator@test.com",time:"3h",timestamp:Date.now()-108e5,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Ana",postImage:"https://images.unsplash.com/photo-1557804506-669a67965ba0?q=80&w=200&auto=format&fit=crop",read:!0},{id:5,type:"follow",senderId:"u-admin-001",username:"@flux_admin",recipientId:"u-creator-002",recipientEmail:"creator@test.com",text:"",time:"5h",timestamp:Date.now()-18e6,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isFollowing:!1,read:!0},{id:6,type:"mention",senderId:"u-creator-002",username:"@pixel_master",recipientId:"u-creator-002",recipientEmail:"creator@test.com",text:"te mencionou em um post.",time:"1d",timestamp:Date.now()-864e5,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Eduardo",read:!0}],lt=ng.isDemoMode();var Au=(t=>(t.USER_NOT_FOUND="Gmail no existe",t.WRONG_PASSWORD="Senha incorreta",t.EMAIL_NOT_VERIFIED="Verifique seu email",t.INVALID_FORMAT="Formato invlido",t.ALREADY_EXISTS="Email j cadastrado",t.PASSWORD_TOO_SHORT="Senha muito curta",t.PASSWORDS_DONT_MATCH="Senhas no coincidem",t.TERMS_REQUIRED="Aceite os termos",t.CODE_INVALID="Cdigo incorreto",t.CODE_EXPIRED="Cdigo expirado",t.TOO_MANY_ATTEMPTS="Muitas tentativas. Bloqueado por 24h.",t.NAME_TAKEN="Nome indisponvel",t.NAME_REQUIRED="Nome obrigatrio",t.GENERIC="Ocorreu um erro",t.ACCOUNT_BANNED=" CONTA BANIDA: Violao dos Termos",t))(Au||{});const $_=`${Be}/api/send-email`,q_=async(t,e,n)=>{try{const o=await fetch($_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,subject:e,html:n})});if(!o.ok)throw new Error(`Falha ao enviar e-mail. Status: ${o.status}`)}catch(o){throw console.error("Erro no servio de e-mail:",o),new Error("No foi possvel enviar o e-mail. Tente novamente.")}},og={sendVerificationCode:async(t,e,n="register")=>{const o=n==="reset",s=o?"Redefinio de senha":"Verificao de e-mail",h=`
            <div style="font-family: Arial, sans-serif; color: #333;">
                <h2 style="color: ${o?"#d32f2f":"#333"}">${o?"Redefinio de Senha":"Bem-vindo ao Flux!"}</h2>
                <p>${o?"Use o cdigo abaixo para redefinir sua senha.":"Use o cdigo abaixo para confirmar o seu e-mail."}</p>
                <div style="background: ${o?"#fff0f0":"#f4f4f4"}; padding: 15px; font-size: 24px; letter-spacing: 5px; font-weight: bold; text-align: center; border-radius: 8px; margin: 20px 0;">
                    ${e}
                </div>
                <p style="font-size: 12px; color: #888;">Se voc no solicitou este cdigo, ignore este e-mail.</p>
            </div>
        `;await q_(t,s,h)},sendPasswordResetCode:async(t,e)=>og.sendVerificationCode(t,e,"reset")},Hp="flux_encryption_key_v1",Pu=t=>{let e="";const n=new Uint8Array(t),o=n.byteLength;for(let s=0;s<o;s++)e+=String.fromCharCode(n[s]);return window.btoa(e)},Ru=t=>{const e=window.atob(t),n=e.length,o=new Uint8Array(n);for(let s=0;s<n;s++)o[s]=e.charCodeAt(s);return o.buffer},$p=async()=>{let t=localStorage.getItem(Hp);if(t){const e=Ru(t);return await window.crypto.subtle.importKey("raw",e,"AES-GCM",!0,["encrypt","decrypt"])}else{const e=await window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),n=await window.crypto.subtle.exportKey("raw",e);return localStorage.setItem(Hp,Pu(n)),e}},ti={hashPassword:async t=>{const e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")},encryptData:async t=>{try{const e=await $p(),n=window.crypto.getRandomValues(new Uint8Array(12)),o=new TextEncoder().encode(t),s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,o),l=Pu(n.buffer),c=Pu(s);return`${l}:${c}`}catch(e){return console.error("Encryption failed:",e),""}},decryptData:async t=>{try{if(!t||!t.includes(":"))return"";const[e,n]=t.split(":"),o=Ru(e),s=Ru(n),l=await $p(),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(o)},l,s);return new TextDecoder().decode(c)}catch(e){return console.error("Decrypt Error (Data may be corrupted or key changed):",e),""}}},su="flux_sync_metadata",Wo={getMetadata:()=>{const t=localStorage.getItem(su);return t?JSON.parse(t):{lastFullSync:0,lastDeltaSync:0,serviceCheckpoints:{}}},updateCheckpoint:t=>{const e=Wo.getMetadata();e.serviceCheckpoints[t]=Date.now(),e.lastDeltaSync=Date.now(),localStorage.setItem(su,JSON.stringify(e))},setFullSyncComplete:()=>{const t=Wo.getMetadata();t.lastFullSync=Date.now(),localStorage.setItem(su,JSON.stringify(t))},shouldDoFullSync:()=>{const t=Wo.getMetadata(),e=3600*1e3;return Date.now()-t.lastFullSync>e}},_s={MIN_VIP_PRICE:1},qp={applyExclusivity:t=>t.isSalesPlatformEnabled?{...t,channels:[],channelSections:[]}:t,getEntryPath:t=>t.isSalesPlatformEnabled?`/group-platform/${t.id}`:t.channels&&t.channels.length>0?`/group/${t.id}/channels`:`/group-chat/${t.id}`},$r=`${Be}/groups`,Ve={async fetchGroups(){try{const t=await fetch($r);if(t.ok){const n=(await t.json()).data||[];return db.groups.saveAll(n),n}}catch(t){console.error("Fetch groups failed",t)}return db.groups.getAll()},getGroupsSync(){return db.groups.getAll().sort((t,e)=>{const n=new Date(t.updated_at||t.created_at||0).getTime();return new Date(e.updated_at||e.created_at||0).getTime()-n})},getGroupsPaginated(t,e){const n=te.getCurrentUserId(),s=db.groups.getAll().filter(l=>l.memberIds?.includes(n||"")||l.creatorId===n).sort((l,c)=>(c.timestamp||0)-(l.timestamp||0));return{groups:s.slice(t,t+e),hasMore:t+e<s.length}},getGroupById:t=>db.groups.findById(t),async fetchGroupById(t){try{const e=await fetch(`${$r}/${t}`);if(e.ok){const n=await e.json();if(n.group)return db.groups.update(n.group),n.group}}catch(e){console.error("Fetch specific group failed",e)}return db.groups.findById(t)},async createGroup(t){const e=te.getCurrentUserId();if(e&&(t.creatorId=e),t.isVip){const o=parseFloat(t.price||"0");if(isNaN(o)||o<_s.MIN_VIP_PRICE)throw new Error(`O preo mnimo para grupos VIP  R$ ${_s.MIN_VIP_PRICE.toFixed(2)}.`)}const n=qp.applyExclusivity(t);n.updated_at=new Date().toISOString(),n.timestamp=Date.now(),n.memberCount=t.memberIds?.length||1,db.groups.add(n);try{await fetch(`${$r}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(o){console.error("Server group creation failed",o)}},async updateGroup(t){const e=db.groups.findById(t.id);if(t.isVip||e&&e.isVip){const o=parseFloat(t.price||e?.price||"0");if(isNaN(o)||o<_s.MIN_VIP_PRICE)throw new Error(`O preo mnimo para grupos VIP  R$ ${_s.MIN_VIP_PRICE.toFixed(2)}.`)}let n={...e,...t};n=qp.applyExclusivity(n),n.updated_at=new Date().toISOString(),n.memberIds&&(n.memberCount=n.memberIds.length),db.groups.update(n);try{await fetch(`${$r}/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(o){console.error("Server group update failed",o)}},async deleteGroup(t){db.groups.delete(t);try{await fetch(`${$r}/${t}`,{method:"DELETE"})}catch(e){console.error("Server group delete failed",e)}}},z_={Dono:100,Admin:70,Moderador:50,Membro:10},J_={async processDeparture(t,e){const n=db.groups.findById(t);if(!n)throw new Error("Grupo no encontrado.");const o=n.creatorId===e,s=(n.memberIds||[]).filter(l=>l!==e);if(s.length===0)return await Ve.deleteGroup(t),{action:"dissolved"};if(o){const l=this.calculateSuccessor(n,e);n.creatorId=l,n.memberIds=s;const c={id:`log_${Date.now()}`,adminId:"system",adminName:"Flux Intelligence",action:"TROCA_POSSE_AUTO",target:"O dono anterior saiu. Nova posse transferida para o membro mais forte.",timestamp:Date.now()};return n.auditLogs=[c,...n.auditLogs||[]],await Ve.updateGroup(n),{action:"transferred"}}return n.memberIds=s,n.adminIds=(n.adminIds||[]).filter(l=>l!==e),await Ve.updateGroup(n),{action:"left"}},calculateSuccessor(t,e){const s=(t.memberIds||[]).filter(m=>m!==e).map(m=>{let h="Membro";return t.adminIds?.includes(m)&&(h="Admin"),{id:m,weight:z_[h]||10}}),l=Math.max(...s.map(m=>m.weight)),c=s.filter(m=>m.weight===l);return c[Math.floor(Math.random()*c.length)].id}},lu="app_current_user_id",W_={currentUserId:()=>localStorage.getItem(lu),setCurrentUserId:t=>localStorage.setItem(lu,t),clearSession:()=>{localStorage.removeItem(lu)}},W={auth:W_},Ht={resolveUser:t=>{if(!t)return;const e=Object.values(W.users.getAll()),n=t.toLowerCase().trim();return e.find(o=>o.id===t||o.email.toLowerCase()===n||o.profile?.name?.toLowerCase()===n.replace("@",""))},getUuid:t=>Ht.resolveUser(t)?.id,getDisplayHandle:t=>{const e=Ht.resolveUser(t);return e?.profile?.name?`@${e.profile.name}`:"usurio"}},qr={updateMemberCount:async(t,e)=>{const n=W.groups.findById(t);if(!n)return;const o=n.memberCount||n.memberIds?.length||0;n.memberCount=Math.max(0,o+e),W.groups.update(n);try{const s=e>0?"increment":"decrement";fetch(`${Be}/api/groups/${t}/${s}-members`,{method:"POST"}).catch(()=>{})}catch{}}},Gt={joinGroup(t){const e=te.getCurrentUserId(),n=db.groups.findById(t);if(!e||!n)return"error";const o=Ht.getUuid(e)||e;if(n.memberIds?.includes(o))return"joined";if(n.bannedUserIds?.includes(o))return"banned";const s=n.memberCount||n.memberIds?.length||0;return n.settings?.memberLimit&&s>=n.settings.memberLimit?"full":n.isPrivate||n.settings?.approveMembers?(n.pendingMemberIds=[...n.pendingMemberIds||[],o],Ve.updateGroup(n),"pending"):(n.memberIds=[...n.memberIds||[],o],Ve.updateGroup(n),qr.updateMemberCount(t,1),"joined")},getGroupMembers(t){const e=db.groups.findById(t);return e?(db.users.getAll(),(e.memberIds||[]).map(n=>Ht.resolveUser(n)).filter(n=>!!n&&!!n.profile)):[]},getPendingMembers(t){const e=db.groups.findById(t);return e?(e.pendingMemberIds||[]).map(n=>Ht.resolveUser(n)).filter(n=>!!n&&!!n.profile):[]},removeMember(t,e){const n=db.groups.findById(t);if(n){const o=Ht.getUuid(e)||e;n.memberIds=n.memberIds?.filter(s=>s!==o),n.adminIds=n.adminIds?.filter(s=>s!==o),Ve.updateGroup(n),qr.updateMemberCount(t,-1)}},banMember(t,e){const n=db.groups.findById(t);if(n){const o=Ht.getUuid(e)||e;n.memberIds=n.memberIds?.filter(s=>s!==o),n.adminIds=n.adminIds?.filter(s=>s!==o),n.bannedUserIds=[...n.bannedUserIds||[],o],Ve.updateGroup(n),qr.updateMemberCount(t,-1)}},promoteMember(t,e){const n=db.groups.findById(t);if(n){const o=Ht.getUuid(e)||e,s=n.adminIds||[];s.includes(o)||(n.adminIds=[...s,o],Ve.updateGroup(n))}},demoteMember(t,e){const n=db.groups.findById(t);if(n){const o=Ht.getUuid(e)||e;n.adminIds=n.adminIds?.filter(s=>s!==o),Ve.updateGroup(n)}},approveMember(t,e){const n=db.groups.findById(t);if(n){const o=Ht.getUuid(e)||e;n.pendingMemberIds=n.pendingMemberIds?.filter(l=>l!==o);const s=n.memberIds||[];s.includes(o)||(n.memberIds=[...s,o],Ve.updateGroup(n),qr.updateMemberCount(t,1))}},rejectMember(t,e){const n=db.groups.findById(t);if(n){const o=Ht.getUuid(e)||e;n.pendingMemberIds=n.pendingMemberIds?.filter(s=>s!==o),Ve.updateGroup(n)}},async leaveGroup(t){const e=te.getCurrentUserId();if(!e)return;const n=await J_.processDeparture(t,e);(n.action==="left"||n.action==="transferred")&&qr.updateMemberCount(t,-1)}},au={addGroupLink(t,e,n,o){const s=db.groups.findById(t);if(!s)return null;const l={id:Date.now().toString(),name:e,code:Math.random().toString(36).substr(2,6).toUpperCase(),joins:0,createdAt:Date.now(),maxUses:n,expiresAt:o};return s.links=[l,...s.links||[]],Ve.updateGroup(s),l},removeGroupLink(t,e){const n=db.groups.findById(t);n&&n.links&&(n.links=n.links.filter(o=>o.id!==e),Ve.updateGroup(n))},joinGroupByLinkCode(t){const e=db.groups.getAll();for(const n of e){const o=n.links?.find(s=>s.code===t);if(o)return o.maxUses&&o.joins>=o.maxUses?{success:!1,message:"Link esgotado."}:Gt.joinGroup(n.id)==="joined"?(o.joins++,Ve.updateGroup(n),{success:!0,message:"Bem-vindo!",groupId:n.id}):{success:!1,message:"Erro ao entrar."}}return{success:!1,message:"Cdigo invlido."}}},K_={checkVipStatus(t,e){const n=db.vipAccess.get(e,t);return n&&n.status==="active"?n.expiresAt&&Date.now()>n.expiresAt?Date.now()-n.expiresAt<1440*60*1e3?"grace_period":"expired":"active":"none"}},xu={calculateScore:t=>{const e=t.memberIds?.length||0,n=Date.now(),o=t.timestamp||0,l=n-o<864e5?500:0;return e*100+l},getRankedList:t=>W.groups.getAll().filter(o=>t==="vip"?o.isVip:t==="private"?o.isPrivate&&!o.isVip:!o.isPrivate&&!o.isVip).sort((o,s)=>xu.calculateScore(s)-xu.calculateScore(o))},Y_={fetchGroups:Ve.fetchGroups,getGroupsSync:Ve.getGroupsSync,getGroupsPaginated:Ve.getGroupsPaginated,getAllGroupsForRanking:async t=>xu.getRankedList(t),getGroupById:Ve.getGroupById,fetchGroupById:Ve.fetchGroupById,createGroup:Ve.createGroup,updateGroup:Ve.updateGroup,deleteGroup:Ve.deleteGroup,joinGroup:Gt.joinGroup,getGroupMembers:Gt.getGroupMembers,getPendingMembers:Gt.getPendingMembers,removeMember:Gt.removeMember,banMember:Gt.banMember,promoteMember:Gt.promoteMember,demoteMember:Gt.demoteMember,approveMember:Gt.approveMember,rejectMember:Gt.rejectMember,leaveGroup:Gt.leaveGroup,addGroupLink:au.addGroupLink,removeGroupLink:au.removeGroupLink,joinGroupByLinkCode:au.joinGroupByLinkCode,checkVipStatus:K_.checkVipStatus},Q_={fetchGroups:async()=>{const t=W.groups.getAll();return t.length===0?(oo.forEach(e=>W.groups.add(e)),oo):t},getGroupsSync:()=>W.groups.getAll().sort((t,e)=>(e.timestamp||0)-(t.timestamp||0)),getGroupsPaginated:(t,e)=>{const n=te.getCurrentUserId(),s=W.groups.getAll().filter(l=>l.memberIds?.includes(n||"")||l.creatorId===n).sort((l,c)=>(c.timestamp||0)-(l.timestamp||0));return{groups:s.slice(t,t+e),hasMore:t+e<s.length}},getAllGroupsForRanking:async t=>{W.groups.getAll().length===0&&oo.forEach(o=>W.groups.add(o));const n=W.groups.getAll();return t==="vip"?n.filter(o=>o.isVip):t==="private"?n.filter(o=>o.isPrivate&&!o.isVip):n.filter(o=>!o.isPrivate&&!o.isVip)},getGroupById:t=>W.groups.findById(t)||oo.find(e=>e.id===t),fetchGroupById:async t=>{const e=W.groups.findById(t);return e||oo.find(n=>n.id===t)||null},createGroup:async t=>{const e=te.getCurrentUserId();t.creatorId=e||"mock-user",t.timestamp=Date.now(),W.groups.add(t)},updateGroup:async t=>{const n={...W.groups.findById(t.id),...t,updated_at:new Date().toISOString()};W.groups.update(n)},deleteGroup:async t=>{W.groups.delete(t)},joinGroup:t=>{const e=te.getCurrentUserId()||"mock-user",n=W.groups.findById(t);return n?n.isPrivate?(n.pendingMemberIds=[...n.pendingMemberIds||[],e],W.groups.update(n),"pending"):(n.memberIds=[...n.memberIds||[],e],W.groups.update(n),"joined"):"error"},checkVipStatus:(t,e)=>W.vipAccess.get(e,t)?"active":"none",getGroupMembers:t=>{const e=W.groups.findById(t)||oo.find(l=>l.id===t);if(!e)return[];const n=Object.values(kt),o=te.getCurrentUserId();if(!e.memberIds||e.memberIds.length<=1){const l=o?n.find(p=>p.id===o):null,c=[...n];return l&&!c.find(p=>p.id===l.id)&&c.unshift(l),c}return n.filter(l=>e.memberIds?.includes(l.id))},getPendingMembers:t=>{const e=W.groups.findById(t)||oo.find(o=>o.id===t);return e?Object.values(kt).filter(o=>e.pendingMemberIds?.includes(o.id)):[]},addGroupLink:(t,e,n,o)=>{const s=W.groups.findById(t);if(!s)return null;const l={id:Date.now().toString(),name:e,code:"MOCK"+Math.random().toString(36).substr(2,4).toUpperCase(),joins:0,createdAt:Date.now(),maxUses:n,expiresAt:o};return s.links=[l,...s.links||[]],W.groups.update(s),l},removeGroupLink:(t,e)=>{const n=W.groups.findById(t);n&&(n.links=n.links?.filter(o=>o.id!==e),W.groups.update(n))},removeMember:(t,e)=>{const n=W.groups.findById(t);n&&(n.memberIds=n.memberIds?.filter(o=>o!==e),n.adminIds=n.adminIds?.filter(o=>o!==e),W.groups.update(n))},banMember:(t,e)=>{const n=W.groups.findById(t);n&&(n.memberIds=n.memberIds?.filter(o=>o!==e),n.adminIds=n.adminIds?.filter(o=>o!==e),n.bannedUserIds=[...n.bannedUserIds||[],e],W.groups.update(n))},promoteMember:(t,e)=>{const n=W.groups.findById(t);n&&(n.adminIds=[...n.adminIds||[],e],W.groups.update(n))},demoteMember:(t,e)=>{const n=W.groups.findById(t);n&&(n.adminIds=n.adminIds?.filter(o=>o!==e),W.groups.update(n))},approveMember:(t,e)=>{const n=W.groups.findById(t);n&&(n.pendingMemberIds=n.pendingMemberIds?.filter(o=>o!==e),n.memberIds=[...n.memberIds||[],e],W.groups.update(n))},rejectMember:(t,e)=>{const n=W.groups.findById(t);n&&(n.pendingMemberIds=n.pendingMemberIds?.filter(o=>o!==e),W.groups.update(n))},leaveGroup:async t=>{const e=te.getCurrentUserId()||"mock-user",n=W.groups.findById(t);n&&(n.memberIds=n.memberIds?.filter(o=>o!==e),W.groups.update(n))},joinGroupByLinkCode:t=>({success:!0,message:"Voc entrou via link!",groupId:"g-pub-001"})},X_=lt?Q_:Y_,Z_={filterVisible:(t,e)=>{if(!e)return t;const n=e.toLowerCase();return t.filter(o=>o.id.toString().includes("@")?!(o.deletedBy||[]).some(l=>l.toLowerCase()===n):!0)},isVisible:(t,e)=>!e||!t.id.toString().includes("@")?!0:!(t.deletedBy||[]).some(o=>o.toLowerCase()===e.toLowerCase())},Vo=`${Be}/api/messages`,Ns={getAllChats:()=>{const t=te.getCurrentUserEmail(),n=Object.values(db.chats.getAll()).filter(o=>o.id.toString().includes("@"));return Z_.filterVisible(n,t)},syncChats:async()=>{const t=te.getCurrentUserEmail();if(t)try{const e=await fetch(`${Vo}/private?email=${encodeURIComponent(t)}`);e.ok&&(await e.json()).chats?.forEach(o=>{o.id.toString().includes("@")&&db.chats.set(o)})}catch{console.warn("Chat sync failed")}},getPrivateChatId:(t,e)=>[t.toLowerCase(),e.toLowerCase()].sort().join("_"),getChat:t=>{let e=db.chats.get(t);return e||(e={id:t,contactName:t.includes("@")?"Chat":"Grupo",isBlocked:!1,messages:[],deletedBy:[]},db.chats.set(e)),e},fetchChatMessages:async(t,e=50,n)=>{try{const o=!t.includes("@"),s=o?`${Vo}/groups/${t}?limit=${e}&before=${n||""}`:`${Vo}/private/${t}?limit=${e}&before=${n||""}`,l=await fetch(s);if(l.ok){const c=await l.json();if(c.messages){const p=db.chats.get(t)||{id:t,contactName:o?"Grupo":"Chat",isBlocked:!1,messages:[],deletedBy:[]},m=[...p.messages||[],...c.messages],h=new Map;m.forEach(y=>h.set(y.id,y)),p.messages=Array.from(h.values()).sort((y,_)=>y.id-_.id),db.chats.set(p)}}}catch{console.warn("Failed to fetch messages")}},sendMessage:async(t,e)=>{const n=te.getCurrentUserId();n&&(e.senderId=n);const o=db.chats.get(t);o&&(e.id||(e.id=Date.now()),new Set(o.messages.map(l=>l.id)).has(e.id)||(o.messages.push(e),o.deletedBy=[],db.chats.set(o)));try{await fetch(`${Vo}/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatId:t,message:e})})}catch{console.error("Failed to send message")}},getUnreadCount:()=>{const t=te.getCurrentUserEmail();return t?Ns.getAllChats().reduce((n,o)=>n+o.messages.filter(s=>(s.senderEmail||s.senderId||"").toLowerCase()!==t.toLowerCase()&&s.status!=="read").length,0):0},getGroupUnreadCount:t=>{const e=db.chats.get(t),n=te.getCurrentUserEmail()?.toLowerCase();return!n||!e?0:e.messages.filter(o=>(o.senderEmail||o.senderId||"").toLowerCase()!==n&&o.status!=="read").length},markChatAsRead:t=>{const e=db.chats.get(t),n=te.getCurrentUserEmail()?.toLowerCase();e&&n&&(e.messages.forEach(o=>{(o.senderEmail||o.senderId||"").toLowerCase()!==n&&(o.status="read")}),db.chats.set(e))},toggleBlock:t=>{const e=db.chats.get(t);return e?(e.isBlocked=!e.isBlocked,db.chats.set(e),e.isBlocked):!1},deleteMessages:async(t,e,n="me")=>{const o=!t.includes("@"),s=te.getCurrentUserEmail();if(o)try{await fetch(`${Vo}/groups/${t}/hide`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageIds:e,userEmail:s})})}catch{}else try{if(await fetch(`${Vo}/private/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageIds:e,target:n,userEmail:s})}),e.length===0)if(n==="all")db.chats.delete(t);else{const l=db.chats.get(t);if(l&&s){const c=new Set(l.deletedBy||[]);c.add(s),l.deletedBy=Array.from(c),db.chats.set(l)}}}catch{}if(e.length>0){const l=db.chats.get(t);l&&(l.messages=l.messages.filter(c=>!e.includes(c.id)),db.chats.set(l))}},clearChat:(t,e="me")=>{te.getCurrentUserEmail()&&Ns.deleteMessages(t,[],e)},markAllAsRead:()=>{const t=te.getCurrentUserEmail()?.toLowerCase();if(!t)return;const e=db.chats.getAll();Object.values(e).forEach(n=>{n.id.toString().includes("@")&&(n.messages.forEach(o=>{(o.senderEmail||o.senderId||"").toLowerCase()!==t&&(o.status="read")}),db.chats.set(n))})},hasBlockingRelationship:(t,e)=>{const n=Ns.getPrivateChatId(t,e);return db.chats.get(n)?.isBlocked||!1},toggleBlockByContactName:t=>{const e=t.replace("@","").toLowerCase(),n=db.chats.getAll(),o=Object.values(n).find(s=>s.contactName.toLowerCase()===e);return o?(o.isBlocked=!o.isBlocked,db.chats.set(o),o.isBlocked):!1},getBlockedIdentifiers:t=>{const e=db.chats.getAll(),n=new Set;return Object.values(e).forEach(o=>{o.isBlocked&&n.add(o.contactName)}),n}},j_=t=>{const e=t.toLowerCase();return G_.map(n=>{const o=n.id.toString(),s=o.includes("creator@test.com")?o.replace("creator@test.com",e):o;return{...n,id:s,messages:n.messages.map(l=>{const c=l.senderEmail==="creator@test.com";return{...l,senderEmail:c?e:l.senderEmail,type:c?"sent":"received"}})}})},Un={getAllChats:()=>{const t=te.getCurrentUserEmail()?.toLowerCase();return t?(Object.values(W.chats.getAll()).filter(o=>o.id.toString().includes("@")).length===0&&j_(t).forEach(s=>{W.chats.get(s.id.toString())||W.chats.set(s)}),Object.values(W.chats.getAll()).filter(o=>o.id.toString().includes("@")&&o.id.toString().toLowerCase().includes(t))):[]},syncChats:async()=>(Un.getAllChats(),Promise.resolve()),getPrivateChatId:(t,e)=>[t.toLowerCase(),e.toLowerCase()].sort().join("_"),getChat:t=>{let e=W.chats.get(t);return e||(e={id:t,contactName:"Conversa",isBlocked:!1,messages:[]},W.chats.set(e)),e},fetchChatMessages:async()=>Promise.resolve(),sendMessage:async(t,e)=>{const n=Un.getChat(t);new Set(n.messages.map(s=>s.id)).has(e.id)||(n.messages.push(e),W.chats.set(n))},getUnreadCount:()=>{const t=te.getCurrentUserEmail()?.toLowerCase();return t?Un.getAllChats().reduce((n,o)=>n+o.messages.filter(s=>s.senderEmail?.toLowerCase()!==t&&s.status!=="read").length,0):0},getGroupUnreadCount:t=>{const e=W.chats.get(t),n=te.getCurrentUserEmail()?.toLowerCase();return!e||!n?0:e.messages.filter(o=>o.senderEmail?.toLowerCase()!==n&&o.status!=="read").length},markChatAsRead:t=>{const e=W.chats.get(t),n=te.getCurrentUserEmail()?.toLowerCase();e&&n&&(e.messages.forEach(o=>{o.senderEmail?.toLowerCase()!==n&&(o.status="read")}),W.chats.set(e))},toggleBlock:t=>{const e=Un.getChat(t);return e.isBlocked=!e.isBlocked,W.chats.set(e),e.isBlocked},deleteMessages:async(t,e)=>{const n=Un.getChat(t);n.messages=n.messages.filter(o=>!e.includes(o.id)),W.chats.set(n)},clearChat:t=>{const e=Un.getChat(t);e.messages=[],W.chats.set(e)},markAllAsRead:()=>{const t=te.getCurrentUserEmail()?.toLowerCase();if(!t)return;const e=W.chats.getAll();Object.values(e).forEach(n=>{n.id.toString().includes(t)&&(n.messages.forEach(o=>{o.senderEmail?.toLowerCase()!==t&&(o.status="read")}),W.chats.set(n))})},hasBlockingRelationship:(t,e)=>{const n=Un.getPrivateChatId(t,e);return W.chats.get(n)?.isBlocked||!1},toggleBlockByContactName:t=>{const e=t.replace("@","").toLowerCase(),n=W.chats.getAll(),o=Object.values(n).find(s=>s.contactName.toLowerCase()===e);return o?(o.isBlocked=!o.isBlocked,W.chats.set(o),o.isBlocked):!1},getBlockedIdentifiers:()=>{const t=W.chats.getAll(),e=new Set;return Object.values(t).forEach(n=>{n.isBlocked&&e.add(n.contactName)}),e}},eE=lt?Un:Ns,uu=`${Be}/api/relationships`,tE={syncRelationships:async()=>{const t=te.getCurrentUserId();if(t)try{const e=await fetch(`${uu}/me?followerId=${encodeURIComponent(t)}`);if(e.ok){const n=await e.json();n.relationships&&Array.isArray(n.relationships)&&n.relationships.forEach(o=>{db.relationships.add(o)})}}catch{console.warn(" [Relationship] Falha ao sincronizar relacionamentos.")}},followUser:async t=>{const e=te.getCurrentUserId();if(!e)throw new Error("Voc precisa estar logado.");if(!t)throw new Error("Usurio invlido.");const n=String(t).replace("@","").toLowerCase().trim();let o=te.getUserByHandle(n);if(o||(o=await te.fetchUserByHandle(n)),!o)throw new Error("Usurio no encontrado no sistema.");try{const s=await fetch(`${uu}/follow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({followerId:e,followingId:o.id,status:"accepted"})});if(!s.ok){const c=await s.json().catch(()=>({}));throw new Error(c.error||"Falha ao seguir usurio no servidor.")}const l={followerId:e,followingId:o.id,followingUsername:`@${n}`,status:"accepted"};return db.relationships.add(l),"following"}catch(s){throw console.error("[RelationshipService] Follow error:",s),s}},unfollowUser:async t=>{const e=te.getCurrentUserId();if(!e||!t)return;const n=String(t).replace("@","").toLowerCase().trim();let o=te.getUserByHandle(n);if(o||(o=await te.fetchUserByHandle(n)),!!o)try{if(!(await fetch(`${uu}/unfollow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({followerId:e,followingId:o.id})})).ok)throw new Error("Erro ao deixar de seguir.");db.relationships.remove(e,o.id)}catch(s){throw console.error("[RelationshipService] Unfollow error:",s),s}},isFollowing:t=>{if(!t)return"none";const e=te.getCurrentUserId();if(!e)return"none";const n=String(t).replace("@","").toLowerCase().trim(),s=db.relationships.getAll().find(l=>l&&String(l.followerId)===String(e)&&(String(l.followingId)===String(t)||l.followingUsername&&String(l.followingUsername).toLowerCase().replace("@","")===n));return s?s.status==="accepted"?"following":"requested":"none"},getFollowers:t=>{if(!t)return[];const e=String(t).replace("@","").toLowerCase(),n=te.getUserByHandle(e);if(!n)return[];const o=db.relationships.getAll().filter(l=>l&&String(l.followingId)===String(n.id)&&l.status==="accepted"),s=db.users.getAll();return o.map(l=>{const c=Object.values(s).find(p=>p.id===l.followerId);return{name:c?.profile?.nickname||c?.profile?.name||"User",username:c?.profile?.name||"user",avatar:c?.profile?.photoUrl}})},getFollowing:t=>{if(!t)return[];const e=db.relationships.getAll().filter(o=>o&&String(o.followerId)===String(t)&&o.status==="accepted"),n=db.users.getAll();return e.map(o=>{const s=Object.values(n).find(l=>l.id===o.followingId);return{name:s?.profile?.nickname||s?.profile?.name||"User",username:s?.profile?.name||"user",avatar:s?.profile?.photoUrl}})},getMutualFriends:async()=>{const t=te.getCurrentUserId();if(!t)return[];const e=db.relationships.getAll(),n=e.filter(c=>c&&String(c.followerId)===String(t)&&c.status==="accepted").map(c=>c.followingId),o=e.filter(c=>c&&String(c.followingId)===String(t)&&c.status==="accepted").map(c=>c.followerId),s=n.filter(c=>o.includes(c)),l=db.users.getAll();return s.map(c=>{const p=Object.values(l).find(m=>m.id===c);return{id:c,name:p?.profile?.nickname||p?.profile?.name||"",username:p?.profile?.name||"",avatar:p?.profile?.photoUrl||""}})},getTopCreators:async()=>{try{return(await(await fetch(`${Be}/api/rankings/top`)).json()).data||[]}catch{return[]}},acceptFollowRequest:async t=>{const e=te.getCurrentUserId();if(!t)return;const n=String(t).replace("@","").toLowerCase(),o=te.getUserByHandle(n);if(!e||!o)return;const s=db.relationships.getAll().find(l=>l&&String(l.followerId)===String(o.id)&&String(l.followingId)===String(e));s&&(s.status="accepted",db.relationships.add(s))},rejectFollowRequest:async t=>{const e=te.getCurrentUserId();if(!t)return;const n=String(t).replace("@","").toLowerCase(),o=te.getUserByHandle(n);!e||!o||db.relationships.remove(o.id,e)}},nE={syncRelationships:async()=>{},followUser:async t=>{const e=te.getCurrentUserId(),n=te.getUserByHandle(t);if(e&&n){const o={followerId:e,followingId:n.id,followingUsername:t,status:"accepted"};return W.relationships.add(o),"following"}return"none"},unfollowUser:async t=>{const e=te.getCurrentUserId(),n=te.getUserByHandle(t);e&&n&&W.relationships.remove(e,n.id)},isFollowing:t=>{const e=te.getCurrentUserId(),n=te.getUserByHandle(t);return!e||!n?"none":W.relationships.getAll().some(s=>s.followerId===e&&s.followingId===n.id)?"following":"none"},getFollowers:t=>[],getFollowing:t=>[],getMutualFriends:async()=>[],getTopCreators:async()=>{await new Promise(n=>setTimeout(n,500));const t=Object.values(kt);return t.map((n,o)=>({...n,followerCount:(t.length-o)*1250+Math.floor(Math.random()*500)})).sort((n,o)=>o.followerCount-n.followerCount)},acceptFollowRequest:async()=>{},rejectFollowRequest:async()=>{}},oE=lt?nE:tE;class rE{readyModules=new Set;listeners=new Set;CRITICAL_MODULES=["AUTH","GROUPS","WALLET"];markReady(e){this.readyModules.add(e),this.isFullyHydrated()&&this.notify(!0)}isFullyHydrated(){return this.CRITICAL_MODULES.every(e=>this.readyModules.has(e))}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(e){this.listeners.forEach(n=>n(e))}reset(){this.readyModules.clear(),this.notify(!1)}}const Gn=new rE,cu={name:"SocialWorker",async syncHighPriority(){const t=te.getCurrentUserEmail();try{await Promise.all([X_.fetchGroups().catch(()=>{}),t?eE.syncChats().catch(()=>{}):Promise.resolve()])}finally{Gn.markReady("GROUPS")}},async syncLowPriority(){te.getCurrentUserEmail();try{await Promise.all([oE.syncRelationships().catch(()=>{}),te.syncRemoteUsers().catch(()=>{})])}catch{console.warn(" [Sync] Falha no background sync social.")}}},Es=`${Be}/api/notifications`,ac={getNotifications:async()=>{const t=te.getCurrentUserEmail();if(!t)return[];try{const e=await fetch(`${Es}?email=${encodeURIComponent(t)}`);return e.ok?((await e.json()).notifications||[]).sort((o,s)=>s.timestamp-o.timestamp):(console.error("Failed to fetch notifications with status:",e.status),[])}catch(e){return console.warn("[Notification Service] Failed to fetch from server:",e),[]}},getUnreadCount:async()=>(await ac.getNotifications()).filter(e=>!e.read).length,addNotification:async t=>{try{await fetch(Es,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(e){console.error("Failed to add notification:",e)}},removeNotification:async t=>{try{await fetch(`${Es}/${t}`,{method:"DELETE"})}catch(e){console.error("Failed to remove notification:",e)}},markAllAsRead:async()=>{const t=te.getCurrentUserEmail();if(t)try{await fetch(`${Es}/mark-all-read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})})}catch(e){console.error("Failed to mark all notifications as read:",e)}}},ku={getNotifications:()=>{const t=db.notifications.getAll();return t.length===0?H_:t.sort((e,n)=>n.timestamp-e.timestamp)},getUnreadCount:()=>ku.getNotifications().filter(e=>!e.read).length,syncNotifications:async()=>Promise.resolve(),addNotification:t=>{const e={...t,id:Date.now(),timestamp:Date.now(),time:"Agora",read:!1};db.notifications.add(e)},removeNotification:t=>{db.notifications.delete(t)},markAllAsRead:()=>{ku.getNotifications().forEach(e=>{if(!e.read){const n={...e,read:!0};db.notifications.add(n)}})}},iE=lt?ku:ac,zp={name:"SystemWorker",async syncHighPriority(){const t=te.getCurrentUserEmail();if(!t){Gn.markReady("AUTH");return}try{await Promise.all([this.syncIntegrityStatus(t),this.syncNotifications()])}catch(e){console.warn(" [Sync] Falha no check de sistema:",e)}finally{Gn.markReady("AUTH")}},async syncNotifications(){console.log(" [Sync] Sincronizando notificaes..."),await iE.syncNotifications()},async syncIntegrityStatus(t){try{const e=await fetch(`${Be}/api/users/update?email=${encodeURIComponent(t)}`);if(e.ok){const o=(await e.json()).user;if(o){if(o.isBanned){te.logout(),window.location.reload();return}console.log(" [Sync] Hidratando perfil do usurio via PostgreSQL"),W.users.set(o),localStorage.setItem("cached_user_profile",JSON.stringify(o)),localStorage.setItem("user_id",o.id)}}}catch{console.warn(" [Sync] Falha ao verificar integridade, mantendo estado local.")}}},zr=`${Be}/api/syncpay`,Bo=async(t,e={})=>{const n=await fetch(t,e);if(!n.ok){const o=await n.json().catch(()=>({}));throw new Error(o.error||`Request failed: ${n.status}`)}return n.json()},sE=()=>{const t=w=>Math.floor(Math.random()*w),e=(w,P)=>Math.round(w-Math.floor(w/P)*P),n=t(10),o=t(10),s=t(10),l=t(10),c=t(10),p=t(10),m=t(10),h=t(10),y=t(10);let _=y*2+h*3+m*4+p*5+c*6+l*7+s*8+o*9+n*10;_=11-e(_,11),_>=10&&(_=0);let E=_*2+y*3+h*4+m*5+p*6+c*7+l*8+s*9+o*10+n*11;return E=11-e(E,11),E>=10&&(E=0),`${n}${o}${s}${l}${c}${p}${m}${h}${y}${_}${E}`},lE={authenticate:async(t,e)=>Bo(`${zr}/auth-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientId:t,clientSecret:e})}),createPayment:async(t,e,n="pix")=>{const o=e.id,s=e.creatorEmail||e.creatorId;if(!s)throw new Error("Vendedor no identificado neste grupo.");const l=t.profile?.cpf?.replace(/\D/g,"")||sE();let p=(t.profile?.nickname||t.profile?.name||"Cliente Flux").replace(/[^a-zA-Z- ]/g," ").trim();p.includes(" ")||(p+=" Visitante");const m=(t.profile?.phone||"11999999999").replace(/\D/g,""),h=uo.getStoredParams(),y=HP("_fbp"),_={amount:parseFloat(e.price||"0"),description:`Acesso VIP: ${e.name.substring(0,25)}`,ownerEmail:s,client:{name:p,cpf:l,email:t.email,phone:m},metadata:{groupId:o,fbp:y,...h,sellerId:e.creatorId}},E=await Bo(`${zr}/cash-in`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payload:_})});return{pixCode:E.pix_code||"",identifier:E.identifier||"",qrCodeImage:E.qr_code_image||"",boletoUrl:E.url||E.boleto_url||""}},checkTransactionStatus:async(t,e,n,o)=>Bo(`${zr}/check-status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:t,ownerEmail:e||o,groupId:n,email:o})}),getBalance:async t=>{try{return(await Bo(`${zr}/balance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})})).balance||0}catch{return 0}},getTransactions:async t=>[],getAffiliateStats:async t=>Bo(`${Be}/api/affiliates/stats?email=${encodeURIComponent(t)}`),requestWithdrawal:async(t,e,n,o)=>Bo(`${zr}/withdraw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e,pix_key:n,pix_key_type:o})})},aE={authenticate:async()=>!0,createPayment:async(t,e,n="pix")=>({pixCode:"00020126360014BR.GOV.BCB.PIX0114MOCK-KEY-FLUX520400005303986540510.005802BR5913FLUX-PLATFORM6009SAO-PAULO62070503***6304E1D1",identifier:"tx_"+Math.random().toString(36).substr(2,9),qrCodeImage:"",boletoUrl:""}),checkTransactionStatus:async(t,e,n,o)=>({status:"pending"}),getBalance:async()=>12450.85,getTransactions:async t=>{const e=Date.now(),n=1440*60*1e3,o=window.location.hash.split("/"),s=o[o.length-1];return[{id:"1",amount:97,status:"paid",provider:"syncpay",method:"Pix",country:"BR",groupId:s,createdAt:e-36e5},{id:"2",amount:97,status:"paid",provider:"syncpay",method:"Pix",country:"BR",groupId:s,createdAt:e-18e6},{id:"3",amount:19.9,status:"paid",provider:"stripe",method:"Card",country:"US",groupId:s,createdAt:e-n-5e3},{id:"4",amount:19.9,status:"paid",provider:"stripe",method:"Card",country:"US",groupId:s,createdAt:e-2*n},{id:"5",amount:45,status:"paid",provider:"paypal",method:"Wallet",country:"DE",groupId:s,createdAt:e-5*n},{id:"6",amount:97,status:"paid",provider:"syncpay",method:"Pix",country:"BR",groupId:s,createdAt:e-1e4},{id:"7",amount:19.9,status:"paid",provider:"stripe",method:"Card",country:"GB",groupId:s,createdAt:e-6e5}]},getAffiliateStats:async()=>({totalEarned:450,totalInvoiced:5e3,referredSellers:[],recentSales:[]}),getFees:async()=>({sale_fee_type:"percent",sale_fee_value:10,withdrawal_fee:5}),requestWithdrawal:async()=>({transactionId:"wd_mock"})},uE=lt?aE:lE,cE={async getFingerprint(){const t=document.createElement("canvas"),e=t.getContext("2d"),n=navigator.userAgent,o=`${window.screen.width}x${window.screen.height}`,s=Intl.DateTimeFormat().resolvedOptions().timeZone;e&&(e.textBaseline="top",e.font="14px 'Arial'",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText("flux_ads_fp",2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText("flux_ads_fp",4,17));const l=t.toDataURL(),c=`${n}-${o}-${s}-${l.substring(20,100)}`;let p=0;for(let m=0;m<c.length;m++){const h=c.charCodeAt(m);p=(p<<5)-p+h,p=p&p}return`fp_${Math.abs(p).toString(16)}`}},Nu={STORAGE_KEY:"flux_attr_trail",WINDOW_DAYS:30,async recordTouchpoint(t,e,n){await cE.getFingerprint();const o=this.getTrail();o[t]={adId:t,campaignId:e,timestamp:Date.now(),type:n},localStorage.setItem(this.STORAGE_KEY,JSON.stringify(o))},getAttributedCampaigns(){const t=this.getTrail(),e=Date.now(),n=this.WINDOW_DAYS*24*60*60*1e3;return Object.values(t).filter(s=>e-s.timestamp<n).sort((s,l)=>l.timestamp-s.timestamp).map(s=>s.campaignId)},getTrail(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):{}}catch{return{}}}},rg={STORAGE_KEY:"flux_ads_dna_weights",recordSuccess(t,e){const n=this.getWeights(),o=W.ads.getAll().find(c=>c.id===t);if(!o)return;o.creative.text.toLowerCase().split(" ").filter(c=>c.length>4).forEach(c=>{n.topicBonus[c]=(n.topicBonus[c]||1)+.05,n.topicBonus[c]>3&&(n.topicBonus[c]=3)});const l=new Date().getHours();n.timeWeights[l]+=.1,localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n))},getHeuristicMultiplier(t){const e=this.getWeights(),n=t.toLowerCase().split(" "),o=new Date().getHours();let s=1;n.forEach(c=>{e.topicBonus[c]&&(s*=e.topicBonus[c]*.5+.5)});const l=e.timeWeights[o]||1;return s*Math.min(l,2)},getWeights(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):{topicBonus:{},timeWeights:new Array(24).fill(1),globalEfficiency:1}}catch{return{topicBonus:{},timeWeights:new Array(24).fill(1),globalEfficiency:1}}}},ro=`${Be}/api/ads`,Zt={async createCampaign(t){const e=te.getCurrentUser();if(!e)throw new Error("Usurio no autenticado");const n={...t,id:t.id||Date.now().toString(),ownerId:e.id,ownerEmail:e.email,status:t.status||"pending",timestamp:Date.now(),pricingModel:t.pricingModel||"budget",stats:{views:0,clicks:0,conversions:0}};try{await fetch(`${ro}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(o){console.error("Failed to create ad on server",o)}return db.ads.add(n),!0},async updateCampaignStatus(t,e){const n=this.getCampaignById(t);if(n){n.status=e,db.ads.update(n);try{await fetch(`${ro}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})}catch{console.warn("Failed to sync status update to server")}return!0}return!1},async updateCampaign(t,e){const n=this.getCampaignById(t);if(n){const o={...n,...e};db.ads.update(o);try{await fetch(`${ro}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch{console.warn("Failed to sync campaign update to server")}return!0}return!1},async addBudget(t,e){const n=this.getCampaignById(t);if(n){const o=(Number(n.budget)||0)+e;n.budget=o,db.ads.update(n);try{await fetch(`${ro}/${t}/top-up`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e})})}catch{console.warn("Failed to sync budget top-up to server")}return!0}return!1},async getCampaignPerformance(t){try{const e=await fetch(`${ro}/${t}/performance`);if(e.ok)return(await e.json()).metrics}catch(e){console.error("Error fetching real performance",e)}return null},getMyCampaigns(){const t=te.getCurrentUser();return t?db.ads.getAll().filter(e=>e.ownerId===t.id||e.ownerEmail===t.email).sort((e,n)=>n.timestamp-e.timestamp):[]},getCampaignById(t){return db.ads.getAll().find(e=>e.id===t)},async deleteCampaign(t){db.ads.delete(t);try{await fetch(`${ro}/${t}`,{method:"DELETE"})}catch(e){console.error("Server delete failed",e)}},async trackMetric(t,e,n=0){const o=te.getCurrentUser();(e==="click"||e==="view")&&Nu.recordTouchpoint(t,t,e),e==="conversion"&&o&&rg.recordSuccess(t,o.id);const s=db.ads.getAll().find(l=>l.id===t);s&&(s.stats||(s.stats={views:0,clicks:0,conversions:0}),e==="view"&&s.stats.views++,e==="click"&&s.stats.clicks++,e==="conversion"&&s.stats.conversions++,db.ads.update(s));try{await fetch(`${ro}/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adId:t,userId:o?.id,type:e,value:n,metadata:{ua:navigator.userAgent,ts:Date.now(),attributedTrail:e==="conversion"?Nu.getAttributedCampaigns():void 0}})})}catch{console.warn("Analytics track failed")}}},dE={match(t,e){if(!t.targeting)return!0;const{ageMin:n,ageMax:o,gender:s,interests:l,location:c}=t.targeting,p=e.profile;if(!p||c&&p.phone&&c.toLowerCase().includes("brasil")&&!p.phone.startsWith("55"))return!1;if(l&&l.length>0){const m=p.bio?.toLowerCase()||"";l.some(h=>m.includes(h.toLowerCase()))}return!0}},fE=10,pE=.5,ig={getEstimatedSpend(t){if(t.pricingModel==="commission")return 0;const e=t.stats?.views||0,n=t.stats?.clicks||0,o=e/1e3*fE,s=n*pE;return o+s},hasAvailableBudget(t){return t.pricingModel==="commission"?!0:this.getEstimatedSpend(t)<t.budget},getSpendPercentage(t){return t.pricingModel==="commission"?0:t.budget===0?100:this.getEstimatedSpend(t)/t.budget*100}},hE={shouldShow(t){if(t.pricingModel==="commission"||t.scheduleType==="continuous")return!0;const e=new Date,o=(e.getHours()+e.getMinutes()/60)/24,s=ig.getSpendPercentage(t)/100;if(s>o+.1){const l=Math.max(.1,1-(s-o));return Math.random()<l}return!0}};var mE={};let gE,yE;function vE(){return{geminiUrl:gE,vertexUrl:yE}}function _E(t,e,n,o){var s,l;if(!t?.baseUrl){const c=vE();return e?(s=c.vertexUrl)!==null&&s!==void 0?s:n:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}class hn{}function Q(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function d(t,e,n){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const p=c.slice(0,-2);if(!(p in t))if(Array.isArray(n))t[p]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[p])){const m=t[p];if(Array.isArray(n))for(let h=0;h<m.length;h++){const y=m[h];d(y,e.slice(l+1),n[h])}else for(const h of m)d(h,e.slice(l+1),n)}return}else if(c.endsWith("[0]")){const p=c.slice(0,-3);p in t||(t[p]=[{}]);const m=t[p];d(m[0],e.slice(l+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(p=>u(p,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function EE(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),l=o.split("."),c=new Set;let p=-1;for(let m=0;m<s.length;m++)if(s[m]==="*"){p=m;break}if(p!==-1&&l.length>p)for(let m=p;m<l.length;m++){const h=l[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}Mu(t,s,l,0,c)}}function Mu(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),p=t;if(c in p&&Array.isArray(p[c]))for(const m of p[c])Mu(m,e,n,o+1,s)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,p=Object.keys(c).filter(h=>!h.startsWith("_")&&!s.has(h)),m={};for(const h of p)m[h]=c[h];for(const[h,y]of Object.entries(m)){const _=[];for(const E of n.slice(o))E==="*"?_.push(h):_.push(E);d(c,_,y)}for(const h of p)delete c[h]}}else{const c=t;l in c&&Mu(c[l],e,n,o+1,s)}}function uc(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function SE(t){const e={},n=u(t,["operationName"]);n!=null&&d(e,["operationName"],n);const o=u(t,["resourceName"]);return o!=null&&d(e,["_url","resourceName"],o),e}function CE(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const o=u(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const l=u(t,["error"]);l!=null&&d(e,["error"],l);const c=u(t,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],TE(c)),e}function wE(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const o=u(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const l=u(t,["error"]);l!=null&&d(e,["error"],l);const c=u(t,["response"]);return c!=null&&d(e,["response"],IE(c)),e}function TE(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>AE(c))),d(e,["generatedVideos"],l)}const o=u(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function IE(t){const e={},n=u(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>PE(c))),d(e,["generatedVideos"],l)}const o=u(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function AE(t){const e={},n=u(t,["video"]);return n!=null&&d(e,["video"],LE(n)),e}function PE(t){const e={},n=u(t,["_self"]);return n!=null&&d(e,["video"],DE(n)),e}function RE(t){const e={},n=u(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function xE(t){const e={},n=u(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function kE(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const o=u(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const l=u(t,["error"]);l!=null&&d(e,["error"],l);const c=u(t,["response"]);return c!=null&&d(e,["response"],NE(c)),e}function NE(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["parent"]);o!=null&&d(e,["parent"],o);const s=u(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function sg(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const o=u(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const l=u(t,["error"]);l!=null&&d(e,["error"],l);const c=u(t,["response"]);return c!=null&&d(e,["response"],ME(c)),e}function ME(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["parent"]);o!=null&&d(e,["parent"],o);const s=u(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function LE(t){const e={},n=u(t,["uri"]);n!=null&&d(e,["uri"],n);const o=u(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],uc(o));const s=u(t,["encoding"]);return s!=null&&d(e,["mimeType"],s),e}function DE(t){const e={},n=u(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const o=u(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],uc(o));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}var Jp;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Jp||(Jp={}));var Wp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Wp||(Wp={}));var Kp;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Kp||(Kp={}));var bn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(bn||(bn={}));var Yp;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Yp||(Yp={}));var Qp;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Qp||(Qp={}));var Xp;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Xp||(Xp={}));var Zp;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Zp||(Zp={}));var jp;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(jp||(jp={}));var eh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eh||(eh={}));var th;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(th||(th={}));var nh;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(nh||(nh={}));var oh;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(oh||(oh={}));var rh;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(rh||(rh={}));var ih;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ih||(ih={}));var sh;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(sh||(sh={}));var lh;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(lh||(lh={}));var ah;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ah||(ah={}));var uh;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(uh||(uh={}));var ch;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(ch||(ch={}));var dh;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(dh||(dh={}));var Hs;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Hs||(Hs={}));var fh;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(fh||(fh={}));var ph;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ph||(ph={}));var hh;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(hh||(hh={}));var Lu;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lu||(Lu={}));var mh;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(mh||(mh={}));var gh;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(gh||(gh={}));var Du;(function(t){t.COLLECTION="COLLECTION"})(Du||(Du={}));var yh;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(yh||(yh={}));var vh;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(vh||(vh={}));var _h;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(_h||(_h={}));var Eh;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Eh||(Eh={}));var Sh;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Sh||(Sh={}));var Ch;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ch||(Ch={}));var wh;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(wh||(wh={}));var Th;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Th||(Th={}));var Ih;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ih||(Ih={}));var Ah;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ah||(Ah={}));var Ph;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ph||(Ph={}));var Rh;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Rh||(Rh={}));var xh;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(xh||(xh={}));var kh;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(kh||(kh={}));var Nh;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Nh||(Nh={}));var Mh;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Mh||(Mh={}));var Lh;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Lh||(Lh={}));var Dh;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Dh||(Dh={}));var Uh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Uh||(Uh={}));var Fh;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Fh||(Fh={}));var Oh;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Oh||(Oh={}));var bh;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(bh||(bh={}));var Vh;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Vh||(Vh={}));var Bh;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Bh||(Bh={}));var Gh;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Gh||(Gh={}));var Hh;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Hh||(Hh={}));var $h;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})($h||($h={}));var qo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(qo||(qo={}));class Uu{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Jr{get text(){var e,n,o,s,l,c,p,m;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const _=[];for(const E of(m=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)!==null&&m!==void 0?m:[]){for(const[w,P]of Object.entries(E))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(P!==null||P!==void 0)&&_.push(w);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;y=!0,h+=E.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,n,o,s,l,c,p,m;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const _ of(m=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)!==null&&m!==void 0?m:[]){for(const[E,w]of Object.entries(_))E!=="inlineData"&&(w!==null||w!==void 0)&&y.push(E);_.inlineData&&typeof _.inlineData.data=="string"&&(h+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,o,s,l,c,p,m;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if(h?.length!==0)return h}get executableCode(){var e,n,o,s,l,c,p,m,h;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,o,s,l,c,p,m,h;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.output}}class qh{}class zh{}class UE{}class FE{}class OE{}class bE{}class Jh{}class Wh{}class Kh{}class VE{}class $s{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new $s;let s;const l=e;return n?s=wE(l):s=CE(l),Object.assign(o,s),o}}class Yh{}class Qh{}class Xh{}class Zh{}class BE{}class GE{}class HE{}class cc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new cc,l=kE(e);return Object.assign(o,l),o}}class $E{}class qE{}class zE{}class JE{}class jh{}class WE{get text(){var e,n,o;let s="",l=!1;const c=[];for(const p of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[m,h]of Object.entries(p))m!=="text"&&m!=="thought"&&h!==null&&c.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;l=!0,s+=p.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,n,o;let s="";const l=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[p,m]of Object.entries(c))p!=="inlineData"&&m!==null&&l.push(p);c.inlineData&&typeof c.inlineData.data=="string"&&(s+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class KE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class dc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new dc,l=sg(e);return Object.assign(o,l),o}}function Te(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function lg(t,e){const n=Te(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ag(t){return Array.isArray(t)?t.map(e=>qs(e)):[qs(t)]}function qs(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function ug(t){const e=qs(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cg(t){const e=qs(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function em(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function dg(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>em(e)):[em(t)]}function Fu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function tm(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function nm(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function at(t){if(t==null)throw new Error("ContentUnion is required");return Fu(t)?t:{role:"user",parts:dg(t)}}function fc(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=at(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=at(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>at(n)):[at(e)]}function Mt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(tm(t)||nm(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[at(t)]}const e=[],n=[],o=Fu(t[0]);for(const s of t){const l=Fu(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(tm(s)||nm(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:dg(n)}),e}function YE(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(bn).includes(n[0].toUpperCase())?n[0].toUpperCase():bn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(bn).includes(o.toUpperCase())?o.toUpperCase():bn.TYPE_UNSPECIFIED})}}function Ko(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&YE(t.type,e);for(const[c,p]of Object.entries(t))if(p!=null)if(c=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(bn).includes(p.toUpperCase())?p.toUpperCase():bn.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Ko(p);else if(o.includes(c)){const m=[];for(const h of p){if(h.type=="null"){e.nullable=!0;continue}m.push(Ko(h))}e[c]=m}else if(s.includes(c)){const m={};for(const[h,y]of Object.entries(p))m[h]=Ko(y);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=p}return e}function pc(t){return Ko(t)}function hc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function mc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function jo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ko(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ko(e.response));return t}function er(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function QE(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function mn(t,e){if(typeof e!="string")throw new Error("name must be a string");return QE(t,e,"cachedContents")}function fg(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function $n(t){return uc(t)}function XE(t){return t!=null&&typeof t=="object"&&"name"in t}function ZE(t){return t!=null&&typeof t=="object"&&"video"in t}function jE(t){return t!=null&&typeof t=="object"&&"uri"in t}function pg(t){var e;let n;if(XE(t)&&(n=t.name),!(jE(t)&&(n=t.uri,n===void 0))&&!(ZE(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function hg(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function mg(t){for(const e of["models","tunedModels","publisherModels"])if(eS(t,e))return t[e];return[]}function eS(t,e){return t!==null&&typeof t=="object"&&e in t}function tS(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function nS(t,e={}){const n=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=tS(s,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function gg(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function oS(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function yg(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let l=!1;for(const c of s){if(typeof c!="object"||c===null)continue;const m=c.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function tr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function vg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function rS(t){const e={},n=u(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const o=u(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>bS(c))),d(e,["inlinedResponses"],l)}const s=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["inlinedEmbedContentResponses"],l)}return e}function iS(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const o=u(t,["gcsDestination","outputUriPrefix"]);o!=null&&d(e,["gcsUri"],o);const s=u(t,["bigqueryDestination","outputUri"]);return s!=null&&d(e,["bigqueryUri"],s),e}function sS(t){const e={},n=u(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const o=u(t,["gcsUri"]);o!=null&&d(e,["gcsDestination","outputUriPrefix"],o);const s=u(t,["bigqueryUri"]);if(s!=null&&d(e,["bigqueryDestination","outputUri"],s),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ms(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const o=u(t,["metadata","displayName"]);o!=null&&d(e,["displayName"],o);const s=u(t,["metadata","state"]);s!=null&&d(e,["state"],vg(s));const l=u(t,["metadata","createTime"]);l!=null&&d(e,["createTime"],l);const c=u(t,["metadata","endTime"]);c!=null&&d(e,["endTime"],c);const p=u(t,["metadata","updateTime"]);p!=null&&d(e,["updateTime"],p);const m=u(t,["metadata","model"]);m!=null&&d(e,["model"],m);const h=u(t,["metadata","output"]);return h!=null&&d(e,["dest"],rS(yg(h))),e}function Ou(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const o=u(t,["displayName"]);o!=null&&d(e,["displayName"],o);const s=u(t,["state"]);s!=null&&d(e,["state"],vg(s));const l=u(t,["error"]);l!=null&&d(e,["error"],l);const c=u(t,["createTime"]);c!=null&&d(e,["createTime"],c);const p=u(t,["startTime"]);p!=null&&d(e,["startTime"],p);const m=u(t,["endTime"]);m!=null&&d(e,["endTime"],m);const h=u(t,["updateTime"]);h!=null&&d(e,["updateTime"],h);const y=u(t,["model"]);y!=null&&d(e,["model"],y);const _=u(t,["inputConfig"]);_!=null&&d(e,["src"],lS(_));const E=u(t,["outputConfig"]);E!=null&&d(e,["dest"],iS(yg(E)));const w=u(t,["completionStats"]);return w!=null&&d(e,["completionStats"],w),e}function lS(t){const e={},n=u(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const o=u(t,["gcsSource","uris"]);o!=null&&d(e,["gcsUri"],o);const s=u(t,["bigquerySource","inputUri"]);return s!=null&&d(e,["bigqueryUri"],s),e}function aS(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=u(e,["fileName"]);o!=null&&d(n,["fileName"],o);const s=u(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>OS(t,c))),d(n,["requests","requests"],l)}return n}function uS(t){const e={},n=u(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const o=u(t,["gcsUri"]);o!=null&&d(e,["gcsSource","uris"],o);const s=u(t,["bigqueryUri"]);if(s!=null&&d(e,["bigquerySource","inputUri"],s),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function cS(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function dS(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],tr(t,o)),n}function fS(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],tr(t,o)),n}function pS(t){const e={},n=u(t,["content"]);n!=null&&d(e,["content"],n);const o=u(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],hS(o));const s=u(t,["tokenCount"]);s!=null&&d(e,["tokenCount"],s);const l=u(t,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=u(t,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const p=u(t,["groundingMetadata"]);p!=null&&d(e,["groundingMetadata"],p);const m=u(t,["index"]);m!=null&&d(e,["index"],m);const h=u(t,["logprobsResult"]);h!=null&&d(e,["logprobsResult"],h);const y=u(t,["safetyRatings"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(w=>w)),d(e,["safetyRatings"],E)}const _=u(t,["urlContextMetadata"]);return _!=null&&d(e,["urlContextMetadata"],_),e}function hS(t){const e={},n=u(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["citations"],o)}return e}function _g(t){const e={},n=u(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>zS(l))),d(e,["parts"],s)}const o=u(t,["role"]);return o!=null&&d(e,["role"],o),e}function mS(t,e){const n={},o=u(t,["displayName"]);if(e!==void 0&&o!=null&&d(e,["batch","displayName"],o),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function gS(t,e){const n={},o=u(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=u(t,["dest"]);return e!==void 0&&s!=null&&d(e,["outputConfig"],sS(oS(s))),n}function om(t,e){const n={},o=u(e,["model"]);o!=null&&d(n,["_url","model"],Te(t,o));const s=u(e,["src"]);s!=null&&d(n,["batch","inputConfig"],aS(t,gg(t,s)));const l=u(e,["config"]);return l!=null&&mS(l,n),n}function yS(t,e){const n={},o=u(e,["model"]);o!=null&&d(n,["model"],Te(t,o));const s=u(e,["src"]);s!=null&&d(n,["inputConfig"],uS(gg(t,s)));const l=u(e,["config"]);return l!=null&&gS(l,n),n}function vS(t,e){const n={},o=u(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["batch","displayName"],o),n}function _S(t,e){const n={},o=u(e,["model"]);o!=null&&d(n,["_url","model"],Te(t,o));const s=u(e,["src"]);s!=null&&d(n,["batch","inputConfig"],AS(t,s));const l=u(e,["config"]);return l!=null&&vS(l,n),n}function ES(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],tr(t,o)),n}function SS(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],tr(t,o)),n}function CS(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["name"]);o!=null&&d(e,["name"],o);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const l=u(t,["error"]);return l!=null&&d(e,["error"],l),e}function wS(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["name"]);o!=null&&d(e,["name"],o);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const l=u(t,["error"]);return l!=null&&d(e,["error"],l),e}function TS(t,e){const n={},o=u(e,["contents"]);if(o!=null){let l=fc(t,o);Array.isArray(l)&&(l=l.map(c=>c)),d(n,["requests[]","request","content"],l)}const s=u(e,["config"]);return s!=null&&(d(n,["_self"],IS(s,n)),EE(n,{"requests[].*":"requests[].request.*"})),n}function IS(t,e){const n={},o=u(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const s=u(t,["title"]);e!==void 0&&s!=null&&d(e,["requests[]","title"],s);const l=u(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function AS(t,e){const n={},o=u(e,["fileName"]);o!=null&&d(n,["file_name"],o);const s=u(e,["inlinedRequests"]);return s!=null&&d(n,["requests"],TS(t,s)),n}function PS(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=u(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function RS(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const o=u(t,["args"]);o!=null&&d(e,["args"],o);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xS(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=u(t,["mode"]);if(o!=null&&d(e,["mode"],o),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function kS(t,e,n){const o={},s=u(e,["systemInstruction"]);n!==void 0&&s!=null&&d(n,["systemInstruction"],_g(at(s)));const l=u(e,["temperature"]);l!=null&&d(o,["temperature"],l);const c=u(e,["topP"]);c!=null&&d(o,["topP"],c);const p=u(e,["topK"]);p!=null&&d(o,["topK"],p);const m=u(e,["candidateCount"]);m!=null&&d(o,["candidateCount"],m);const h=u(e,["maxOutputTokens"]);h!=null&&d(o,["maxOutputTokens"],h);const y=u(e,["stopSequences"]);y!=null&&d(o,["stopSequences"],y);const _=u(e,["responseLogprobs"]);_!=null&&d(o,["responseLogprobs"],_);const E=u(e,["logprobs"]);E!=null&&d(o,["logprobs"],E);const w=u(e,["presencePenalty"]);w!=null&&d(o,["presencePenalty"],w);const P=u(e,["frequencyPenalty"]);P!=null&&d(o,["frequencyPenalty"],P);const k=u(e,["seed"]);k!=null&&d(o,["seed"],k);const A=u(e,["responseMimeType"]);A!=null&&d(o,["responseMimeType"],A);const U=u(e,["responseSchema"]);U!=null&&d(o,["responseSchema"],pc(U));const $=u(e,["responseJsonSchema"]);if($!=null&&d(o,["responseJsonSchema"],$),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=u(e,["safetySettings"]);if(n!==void 0&&b!=null){let Ie=b;Array.isArray(Ie)&&(Ie=Ie.map(Pe=>JS(Pe))),d(n,["safetySettings"],Ie)}const H=u(e,["tools"]);if(n!==void 0&&H!=null){let Ie=er(H);Array.isArray(Ie)&&(Ie=Ie.map(Pe=>KS(jo(Pe)))),d(n,["tools"],Ie)}const F=u(e,["toolConfig"]);if(n!==void 0&&F!=null&&d(n,["toolConfig"],WS(F)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=u(e,["cachedContent"]);n!==void 0&&ae!=null&&d(n,["cachedContent"],mn(t,ae));const Y=u(e,["responseModalities"]);Y!=null&&d(o,["responseModalities"],Y);const le=u(e,["mediaResolution"]);le!=null&&d(o,["mediaResolution"],le);const ee=u(e,["speechConfig"]);if(ee!=null&&d(o,["speechConfig"],hc(ee)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const de=u(e,["thinkingConfig"]);de!=null&&d(o,["thinkingConfig"],de);const _e=u(e,["imageConfig"]);_e!=null&&d(o,["imageConfig"],FS(_e));const Se=u(e,["enableEnhancedCivicAnswers"]);if(Se!=null&&d(o,["enableEnhancedCivicAnswers"],Se),u(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function NS(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(h=>pS(h))),d(e,["candidates"],m)}const s=u(t,["modelVersion"]);s!=null&&d(e,["modelVersion"],s);const l=u(t,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=u(t,["responseId"]);c!=null&&d(e,["responseId"],c);const p=u(t,["usageMetadata"]);return p!=null&&d(e,["usageMetadata"],p),e}function MS(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],tr(t,o)),n}function LS(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],tr(t,o)),n}function DS(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function US(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function FS(t){const e={},n=u(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const o=u(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function OS(t,e){const n={},o=u(e,["model"]);o!=null&&d(n,["request","model"],Te(t,o));const s=u(e,["contents"]);if(s!=null){let p=Mt(s);Array.isArray(p)&&(p=p.map(m=>_g(m))),d(n,["request","contents"],p)}const l=u(e,["metadata"]);l!=null&&d(n,["metadata"],l);const c=u(e,["config"]);return c!=null&&d(n,["request","generationConfig"],kS(t,c,u(n,["request"],{}))),n}function bS(t){const e={},n=u(t,["response"]);n!=null&&d(e,["response"],NS(n));const o=u(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=u(t,["error"]);return s!=null&&d(e,["error"],s),e}function VS(t,e){const n={},o=u(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=u(t,["pageToken"]);if(e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function BS(t,e){const n={},o=u(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=u(t,["pageToken"]);e!==void 0&&s!=null&&d(e,["_query","pageToken"],s);const l=u(t,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),n}function GS(t){const e={},n=u(t,["config"]);return n!=null&&VS(n,e),e}function HS(t){const e={},n=u(t,["config"]);return n!=null&&BS(n,e),e}function $S(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=u(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Ms(c))),d(e,["batchJobs"],l)}return e}function qS(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=u(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Ou(c))),d(e,["batchJobs"],l)}return e}function zS(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=u(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const l=u(t,["fileData"]);l!=null&&d(e,["fileData"],PS(l));const c=u(t,["functionCall"]);c!=null&&d(e,["functionCall"],RS(c));const p=u(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const m=u(t,["inlineData"]);m!=null&&d(e,["inlineData"],cS(m));const h=u(t,["text"]);h!=null&&d(e,["text"],h);const y=u(t,["thought"]);y!=null&&d(e,["thought"],y);const _=u(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const E=u(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function JS(t){const e={},n=u(t,["category"]);if(n!=null&&d(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=u(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function WS(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=u(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],xS(o)),e}function KS(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=u(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=u(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),d(e,["functionDeclarations"],y)}const c=u(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],DS(c));const p=u(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],US(p));const m=u(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}var fn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(fn||(fn={}));class po{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(s=c.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class YS extends hn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new po(fn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=om(this.apiClient,e),o=n._url,s=Q("{model}:batchGenerateContent",o),p=n.batch.inputConfig.requests,m=p.requests,h=[];for(const y of m){const _=Object.assign({},y);if(_.systemInstruction){const E=_.systemInstruction;delete _.systemInstruction;const w=_.request;w.systemInstruction=E,_.request=w}h.push(_)}return p.requests=h,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${s}`;else if(c)o.dest=`${c}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=yS(this.apiClient,e);return p=Q("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>Ou(y))}else{const h=om(this.apiClient,e);return p=Q("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Ms(y))}}async createEmbeddingsInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=_S(this.apiClient,e);return l=Q("{model}:asyncBatchEmbedContent",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>Ms(m))}}async get(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=LS(this.apiClient,e);return p=Q("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>Ou(y))}else{const h=MS(this.apiClient,e);return p=Q("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Ms(y))}}async cancel(e){var n,o,s,l;let c="",p={};if(this.apiClient.isVertexAI()){const m=fS(this.apiClient,e);c=Q("batchPredictionJobs/{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const m=dS(this.apiClient,e);c=Q("batches/{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=HS(e);return p=Q("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=qS(y),E=new jh;return Object.assign(E,_),E})}else{const h=GS(e);return p=Q("batches",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=$S(y),E=new jh;return Object.assign(E,_),E})}}async delete(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=SS(this.apiClient,e);return p=Q("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>wS(y))}else{const h=ES(this.apiClient,e);return p=Q("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>CS(y))}}}function QS(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function rm(t){const e={},n=u(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>_C(l))),d(e,["parts"],s)}const o=u(t,["role"]);return o!=null&&d(e,["role"],o),e}function XS(t,e){const n={},o=u(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const s=u(t,["expireTime"]);e!==void 0&&s!=null&&d(e,["expireTime"],s);const l=u(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let y=Mt(c);Array.isArray(y)&&(y=y.map(_=>rm(_))),d(e,["contents"],y)}const p=u(t,["systemInstruction"]);e!==void 0&&p!=null&&d(e,["systemInstruction"],rm(at(p)));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(_=>SC(_))),d(e,["tools"],y)}const h=u(t,["toolConfig"]);if(e!==void 0&&h!=null&&d(e,["toolConfig"],EC(h)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ZS(t,e){const n={},o=u(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const s=u(t,["expireTime"]);e!==void 0&&s!=null&&d(e,["expireTime"],s);const l=u(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=u(t,["contents"]);if(e!==void 0&&c!=null){let _=Mt(c);Array.isArray(_)&&(_=_.map(E=>E)),d(e,["contents"],_)}const p=u(t,["systemInstruction"]);e!==void 0&&p!=null&&d(e,["systemInstruction"],at(p));const m=u(t,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(E=>CC(E))),d(e,["tools"],_)}const h=u(t,["toolConfig"]);e!==void 0&&h!=null&&d(e,["toolConfig"],h);const y=u(t,["kmsKeyName"]);return e!==void 0&&y!=null&&d(e,["encryption_spec","kmsKeyName"],y),n}function jS(t,e){const n={},o=u(e,["model"]);o!=null&&d(n,["model"],lg(t,o));const s=u(e,["config"]);return s!=null&&XS(s,n),n}function eC(t,e){const n={},o=u(e,["model"]);o!=null&&d(n,["model"],lg(t,o));const s=u(e,["config"]);return s!=null&&ZS(s,n),n}function tC(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],mn(t,o)),n}function nC(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],mn(t,o)),n}function oC(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function rC(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function iC(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=u(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function sC(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const o=u(t,["args"]);o!=null&&d(e,["args"],o);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lC(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);const o=u(t,["mode"]);if(o!=null&&d(e,["mode"],o),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function aC(t){const e={},n=u(t,["description"]);n!=null&&d(e,["description"],n);const o=u(t,["name"]);o!=null&&d(e,["name"],o);const s=u(t,["parameters"]);s!=null&&d(e,["parameters"],s);const l=u(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=u(t,["response"]);c!=null&&d(e,["response"],c);const p=u(t,["responseJsonSchema"]);if(p!=null&&d(e,["responseJsonSchema"],p),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function uC(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],mn(t,o)),n}function cC(t,e){const n={},o=u(e,["name"]);return o!=null&&d(n,["_url","name"],mn(t,o)),n}function dC(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function fC(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function pC(t,e){const n={},o=u(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function hC(t,e){const n={},o=u(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function mC(t){const e={},n=u(t,["config"]);return n!=null&&pC(n,e),e}function gC(t){const e={},n=u(t,["config"]);return n!=null&&hC(n,e),e}function yC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=u(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function vC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=u(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function _C(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=u(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const l=u(t,["fileData"]);l!=null&&d(e,["fileData"],iC(l));const c=u(t,["functionCall"]);c!=null&&d(e,["functionCall"],sC(c));const p=u(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const m=u(t,["inlineData"]);m!=null&&d(e,["inlineData"],QS(m));const h=u(t,["text"]);h!=null&&d(e,["text"],h);const y=u(t,["thought"]);y!=null&&d(e,["thought"],y);const _=u(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const E=u(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function EC(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);const o=u(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],lC(o)),e}function SC(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=u(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=u(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),d(e,["functionDeclarations"],y)}const c=u(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],dC(c));const p=u(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],fC(p));const m=u(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function CC(t){const e={},n=u(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=u(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=u(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);const l=u(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const c=u(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(E=>aC(E))),d(e,["functionDeclarations"],_)}const p=u(t,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const m=u(t,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const h=u(t,["googleSearchRetrieval"]);h!=null&&d(e,["googleSearchRetrieval"],h);const y=u(t,["urlContext"]);return y!=null&&d(e,["urlContext"],y),e}function wC(t,e){const n={},o=u(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const s=u(t,["expireTime"]);return e!==void 0&&s!=null&&d(e,["expireTime"],s),n}function TC(t,e){const n={},o=u(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const s=u(t,["expireTime"]);return e!==void 0&&s!=null&&d(e,["expireTime"],s),n}function IC(t,e){const n={},o=u(e,["name"]);o!=null&&d(n,["_url","name"],mn(t,o));const s=u(e,["config"]);return s!=null&&wC(s,n),n}function AC(t,e){const n={},o=u(e,["name"]);o!=null&&d(n,["_url","name"],mn(t,o));const s=u(e,["config"]);return s!=null&&TC(s,n),n}class PC extends hn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new po(fn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=eC(this.apiClient,e);return p=Q("cachedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=jS(this.apiClient,e);return p=Q("cachedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async get(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=cC(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=uC(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async delete(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=nC(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=rC(y),E=new Xh;return Object.assign(E,_),E})}else{const h=tC(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=oC(y),E=new Xh;return Object.assign(E,_),E})}}async update(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=AC(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=IC(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async listInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=gC(e);return p=Q("cachedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=vC(y),E=new Zh;return Object.assign(E,_),E})}else{const h=mC(e);return p=Q("cachedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=yC(y),E=new Zh;return Object.assign(E,_),E})}}}function zs(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function im(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(t){return this instanceof me?(this.v=t,this):new me(t)}function qt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",c),s[Symbol.asyncIterator]=function(){return this},s;function c(w){return function(P){return Promise.resolve(P).then(w,_)}}function p(w,P){o[w]&&(s[w]=function(k){return new Promise(function(A,U){l.push([w,k,A,U])>1||m(w,k)})},P&&(s[w]=P(s[w])))}function m(w,P){try{h(o[w](P))}catch(k){E(l[0][3],k)}}function h(w){w.value instanceof me?Promise.resolve(w.value.v).then(y,_):E(l[0][2],w)}function y(w){m("next",w)}function _(w){m("throw",w)}function E(w,P){w(P),l.shift(),l.length&&m(l[0][0],l[0][1])}}function zt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof im=="function"?im(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(c){return new Promise(function(p,m){c=t[l](c),s(p,m,c.done,c.value)})}}function s(l,c,p,m){Promise.resolve(m).then(function(h){l({value:h,done:p})},c)}}function RC(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Eg(n)}function Eg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function xC(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function sm(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),l&&!Eg(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class kC{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new NC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let NC=class{constructor(e,n,o,s={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),xC(l)}async sendMessage(e){var n;await this.sendPromise;const o=at(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,c,p;const m=await s,h=(c=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,y=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let E=[];y!=null&&(E=(p=y.slice(_))!==null&&p!==void 0?p:[]);const w=h?[h]:[];this.recordHistory(o,w,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=at(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?sm(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return qt(this,arguments,function*(){var s,l,c,p,m,h;const y=[];try{for(var _=!0,E=zt(e),w;w=yield me(E.next()),s=w.done,!s;_=!0){p=w.value,_=!1;const P=p;if(RC(P)){const k=(h=(m=P.candidates)===null||m===void 0?void 0:m[0])===null||h===void 0?void 0:h.content;k!==void 0&&y.push(k)}yield yield me(P)}}catch(P){l={error:P}}finally{try{!_&&!s&&(c=E.return)&&(yield me(c.call(E)))}finally{if(l)throw l.error}}this.recordHistory(n,y)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(l=>l.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...sm(o)):this.history.push(e),this.history.push(...s)}};class ri extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ri.prototype)}}function MC(t){const e={},n=u(t,["file"]);return n!=null&&d(e,["file"],n),e}function LC(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function DC(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","file"],pg(n)),e}function UC(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function FC(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","file"],pg(n)),e}function OC(t){const e={},n=u(t,["uris"]);return n!=null&&d(e,["uris"],n),e}function bC(t,e){const n={},o=u(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function VC(t){const e={},n=u(t,["config"]);return n!=null&&bC(n,e),e}function BC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=u(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["files"],l)}return e}function GC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),d(e,["files"],s)}return e}class HC extends hn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new po(fn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=VC(e);return l=Q("files",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=BC(m),y=new $E;return Object.assign(y,h),y})}}async createInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=MC(e);return l=Q("upload/v1beta/files",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>{const h=LC(m),y=new qE;return Object.assign(y,h),y})}}async get(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=FC(e);return l=Q("files/{file}",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=DC(e);return l=Q("files/{file}",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=UC(m),y=new zE;return Object.assign(y,h),y})}}async registerFilesInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=OC(e);return l=Q("files:register",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>{const h=GC(m),y=new JE;return Object.assign(y,h),y})}}}function Ls(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function $C(t){const e={},n=u(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>iw(l))),d(e,["parts"],s)}const o=u(t,["role"]);return o!=null&&d(e,["role"],o),e}function qC(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=u(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function zC(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const o=u(t,["args"]);o!=null&&d(e,["args"],o);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JC(t){const e={},n=u(t,["description"]);n!=null&&d(e,["description"],n);const o=u(t,["name"]);o!=null&&d(e,["name"],o);const s=u(t,["parameters"]);s!=null&&d(e,["parameters"],s);const l=u(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=u(t,["response"]);c!=null&&d(e,["response"],c);const p=u(t,["responseJsonSchema"]);if(p!=null&&d(e,["responseJsonSchema"],p),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function WC(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const o=u(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const s=u(t,["audioTimestamp"]);s!=null&&d(e,["audioTimestamp"],s);const l=u(t,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=u(t,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const p=u(t,["frequencyPenalty"]);p!=null&&d(e,["frequencyPenalty"],p);const m=u(t,["logprobs"]);m!=null&&d(e,["logprobs"],m);const h=u(t,["maxOutputTokens"]);h!=null&&d(e,["maxOutputTokens"],h);const y=u(t,["mediaResolution"]);y!=null&&d(e,["mediaResolution"],y);const _=u(t,["presencePenalty"]);_!=null&&d(e,["presencePenalty"],_);const E=u(t,["responseLogprobs"]);E!=null&&d(e,["responseLogprobs"],E);const w=u(t,["responseMimeType"]);w!=null&&d(e,["responseMimeType"],w);const P=u(t,["responseModalities"]);P!=null&&d(e,["responseModalities"],P);const k=u(t,["responseSchema"]);k!=null&&d(e,["responseSchema"],k);const A=u(t,["routingConfig"]);A!=null&&d(e,["routingConfig"],A);const U=u(t,["seed"]);U!=null&&d(e,["seed"],U);const $=u(t,["speechConfig"]);$!=null&&d(e,["speechConfig"],$);const b=u(t,["stopSequences"]);b!=null&&d(e,["stopSequences"],b);const H=u(t,["temperature"]);H!=null&&d(e,["temperature"],H);const F=u(t,["thinkingConfig"]);F!=null&&d(e,["thinkingConfig"],F);const ae=u(t,["topK"]);ae!=null&&d(e,["topK"],ae);const Y=u(t,["topP"]);if(Y!=null&&d(e,["topP"],Y),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function KC(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function YC(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function QC(t,e){const n={},o=u(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const s=u(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const l=u(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=u(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const p=u(t,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const h=u(t,["mediaResolution"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","mediaResolution"],h);const y=u(t,["seed"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","seed"],y);const _=u(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],mc(_));const E=u(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const w=u(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=u(t,["systemInstruction"]);e!==void 0&&P!=null&&d(e,["setup","systemInstruction"],$C(at(P)));const k=u(t,["tools"]);if(e!==void 0&&k!=null){let ae=er(k);Array.isArray(ae)&&(ae=ae.map(Y=>lw(jo(Y)))),d(e,["setup","tools"],ae)}const A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&d(e,["setup","sessionResumption"],sw(A));const U=u(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&d(e,["setup","inputAudioTranscription"],U);const $=u(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&d(e,["setup","outputAudioTranscription"],$);const b=u(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&d(e,["setup","realtimeInputConfig"],b);const H=u(t,["contextWindowCompression"]);e!==void 0&&H!=null&&d(e,["setup","contextWindowCompression"],H);const F=u(t,["proactivity"]);if(e!==void 0&&F!=null&&d(e,["setup","proactivity"],F),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function XC(t,e){const n={},o=u(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],WC(o));const s=u(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const l=u(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=u(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const p=u(t,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const h=u(t,["mediaResolution"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","mediaResolution"],h);const y=u(t,["seed"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","seed"],y);const _=u(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],mc(_));const E=u(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const w=u(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=u(t,["systemInstruction"]);e!==void 0&&P!=null&&d(e,["setup","systemInstruction"],at(P));const k=u(t,["tools"]);if(e!==void 0&&k!=null){let Y=er(k);Array.isArray(Y)&&(Y=Y.map(le=>aw(jo(le)))),d(e,["setup","tools"],Y)}const A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&d(e,["setup","sessionResumption"],A);const U=u(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&d(e,["setup","inputAudioTranscription"],U);const $=u(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&d(e,["setup","outputAudioTranscription"],$);const b=u(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&d(e,["setup","realtimeInputConfig"],b);const H=u(t,["contextWindowCompression"]);e!==void 0&&H!=null&&d(e,["setup","contextWindowCompression"],H);const F=u(t,["proactivity"]);e!==void 0&&F!=null&&d(e,["setup","proactivity"],F);const ae=u(t,["explicitVadSignal"]);return e!==void 0&&ae!=null&&d(e,["setup","explicitVadSignal"],ae),n}function ZC(t,e){const n={},o=u(e,["model"]);o!=null&&d(n,["setup","model"],Te(t,o));const s=u(e,["config"]);return s!=null&&d(n,["config"],QC(s,n)),n}function jC(t,e){const n={},o=u(e,["model"]);o!=null&&d(n,["setup","model"],Te(t,o));const s=u(e,["config"]);return s!=null&&d(n,["config"],XC(s,n)),n}function ew(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function tw(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["weightedPrompts"],o)}return e}function nw(t){const e={},n=u(t,["media"]);if(n!=null){let h=ag(n);Array.isArray(h)&&(h=h.map(y=>Ls(y))),d(e,["mediaChunks"],h)}const o=u(t,["audio"]);o!=null&&d(e,["audio"],Ls(cg(o)));const s=u(t,["audioStreamEnd"]);s!=null&&d(e,["audioStreamEnd"],s);const l=u(t,["video"]);l!=null&&d(e,["video"],Ls(ug(l)));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const p=u(t,["activityStart"]);p!=null&&d(e,["activityStart"],p);const m=u(t,["activityEnd"]);return m!=null&&d(e,["activityEnd"],m),e}function ow(t){const e={},n=u(t,["media"]);if(n!=null){let h=ag(n);Array.isArray(h)&&(h=h.map(y=>y)),d(e,["mediaChunks"],h)}const o=u(t,["audio"]);o!=null&&d(e,["audio"],cg(o));const s=u(t,["audioStreamEnd"]);s!=null&&d(e,["audioStreamEnd"],s);const l=u(t,["video"]);l!=null&&d(e,["video"],ug(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const p=u(t,["activityStart"]);p!=null&&d(e,["activityStart"],p);const m=u(t,["activityEnd"]);return m!=null&&d(e,["activityEnd"],m),e}function rw(t){const e={},n=u(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const o=u(t,["serverContent"]);o!=null&&d(e,["serverContent"],o);const s=u(t,["toolCall"]);s!=null&&d(e,["toolCall"],s);const l=u(t,["toolCallCancellation"]);l!=null&&d(e,["toolCallCancellation"],l);const c=u(t,["usageMetadata"]);c!=null&&d(e,["usageMetadata"],uw(c));const p=u(t,["goAway"]);p!=null&&d(e,["goAway"],p);const m=u(t,["sessionResumptionUpdate"]);m!=null&&d(e,["sessionResumptionUpdate"],m);const h=u(t,["voiceActivityDetectionSignal"]);h!=null&&d(e,["voiceActivityDetectionSignal"],h);const y=u(t,["voiceActivity"]);return y!=null&&d(e,["voiceActivity"],cw(y)),e}function iw(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=u(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const l=u(t,["fileData"]);l!=null&&d(e,["fileData"],qC(l));const c=u(t,["functionCall"]);c!=null&&d(e,["functionCall"],zC(c));const p=u(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const m=u(t,["inlineData"]);m!=null&&d(e,["inlineData"],Ls(m));const h=u(t,["text"]);h!=null&&d(e,["text"],h);const y=u(t,["thought"]);y!=null&&d(e,["thought"],y);const _=u(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const E=u(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function sw(t){const e={},n=u(t,["handle"]);if(n!=null&&d(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lw(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=u(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=u(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),d(e,["functionDeclarations"],y)}const c=u(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],KC(c));const p=u(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],YC(p));const m=u(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function aw(t){const e={},n=u(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);const o=u(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=u(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);const l=u(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const c=u(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(E=>JC(E))),d(e,["functionDeclarations"],_)}const p=u(t,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const m=u(t,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const h=u(t,["googleSearchRetrieval"]);h!=null&&d(e,["googleSearchRetrieval"],h);const y=u(t,["urlContext"]);return y!=null&&d(e,["urlContext"],y),e}function uw(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const o=u(t,["cachedContentTokenCount"]);o!=null&&d(e,["cachedContentTokenCount"],o);const s=u(t,["candidatesTokenCount"]);s!=null&&d(e,["responseTokenCount"],s);const l=u(t,["toolUsePromptTokenCount"]);l!=null&&d(e,["toolUsePromptTokenCount"],l);const c=u(t,["thoughtsTokenCount"]);c!=null&&d(e,["thoughtsTokenCount"],c);const p=u(t,["totalTokenCount"]);p!=null&&d(e,["totalTokenCount"],p);const m=u(t,["promptTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(P=>P)),d(e,["promptTokensDetails"],w)}const h=u(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(P=>P)),d(e,["cacheTokensDetails"],w)}const y=u(t,["candidatesTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(P=>P)),d(e,["responseTokensDetails"],w)}const _=u(t,["toolUsePromptTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(P=>P)),d(e,["toolUsePromptTokensDetails"],w)}const E=u(t,["trafficType"]);return E!=null&&d(e,["trafficType"],E),e}function cw(t){const e={},n=u(t,["type"]);return n!=null&&d(e,["voiceActivityType"],n),e}function dw(t,e){const n={},o=u(t,["data"]);if(o!=null&&d(n,["data"],o),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&d(n,["mimeType"],s),n}function fw(t,e){const n={},o=u(t,["content"]);o!=null&&d(n,["content"],o);const s=u(t,["citationMetadata"]);s!=null&&d(n,["citationMetadata"],pw(s));const l=u(t,["tokenCount"]);l!=null&&d(n,["tokenCount"],l);const c=u(t,["finishReason"]);c!=null&&d(n,["finishReason"],c);const p=u(t,["avgLogprobs"]);p!=null&&d(n,["avgLogprobs"],p);const m=u(t,["groundingMetadata"]);m!=null&&d(n,["groundingMetadata"],m);const h=u(t,["index"]);h!=null&&d(n,["index"],h);const y=u(t,["logprobsResult"]);y!=null&&d(n,["logprobsResult"],y);const _=u(t,["safetyRatings"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(P=>P)),d(n,["safetyRatings"],w)}const E=u(t,["urlContextMetadata"]);return E!=null&&d(n,["urlContextMetadata"],E),n}function pw(t,e){const n={},o=u(t,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),d(n,["citations"],s)}return n}function hw(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["contents"]);if(l!=null){let c=Mt(l);Array.isArray(c)&&(c=c.map(p=>p)),d(o,["contents"],c)}return o}function mw(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["tokensInfo"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(n,["tokensInfo"],l)}return n}function gw(t,e){const n={},o=u(t,["values"]);o!=null&&d(n,["values"],o);const s=u(t,["statistics"]);return s!=null&&d(n,["statistics"],yw(s)),n}function yw(t,e){const n={},o=u(t,["truncated"]);o!=null&&d(n,["truncated"],o);const s=u(t,["token_count"]);return s!=null&&d(n,["tokenCount"],s),n}function Zs(t,e){const n={},o=u(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>AT(c))),d(n,["parts"],l)}const s=u(t,["role"]);return s!=null&&d(n,["role"],s),n}function vw(t,e){const n={},o=u(t,["controlType"]);o!=null&&d(n,["controlType"],o);const s=u(t,["enableControlImageComputation"]);return s!=null&&d(n,["computeControl"],s),n}function _w(t,e){const n={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Ew(t,e,n){const o={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&d(e,["systemInstruction"],at(s));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>Tg(m))),d(e,["tools"],p)}const c=u(t,["generationConfig"]);return e!==void 0&&c!=null&&d(e,["generationConfig"],dT(c)),o}function Sw(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["contents"]);if(l!=null){let p=Mt(l);Array.isArray(p)&&(p=p.map(m=>Zs(m))),d(o,["contents"],p)}const c=u(e,["config"]);return c!=null&&_w(c),o}function Cw(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["contents"]);if(l!=null){let p=Mt(l);Array.isArray(p)&&(p=p.map(m=>m)),d(o,["contents"],p)}const c=u(e,["config"]);return c!=null&&Ew(c,o),o}function ww(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["totalTokens"]);s!=null&&d(n,["totalTokens"],s);const l=u(t,["cachedContentTokenCount"]);return l!=null&&d(n,["cachedContentTokenCount"],l),n}function Tw(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["totalTokens"]);return s!=null&&d(n,["totalTokens"],s),n}function Iw(t,e,n){const o={},s=u(e,["model"]);return s!=null&&d(o,["_url","name"],Te(t,s)),o}function Aw(t,e,n){const o={},s=u(e,["model"]);return s!=null&&d(o,["_url","name"],Te(t,s)),o}function Pw(t,e){const n={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function Rw(t,e){const n={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function xw(t,e,n){const o={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const l=u(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);const c=u(t,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const p=u(t,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const m=u(t,["guidanceScale"]);e!==void 0&&m!=null&&d(e,["parameters","guidanceScale"],m);const h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const y=u(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&d(e,["parameters","safetySetting"],y);const _=u(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&d(e,["parameters","includeSafetyAttributes"],E);const w=u(t,["includeRaiReason"]);e!==void 0&&w!=null&&d(e,["parameters","includeRaiReason"],w);const P=u(t,["language"]);e!==void 0&&P!=null&&d(e,["parameters","language"],P);const k=u(t,["outputMimeType"]);e!==void 0&&k!=null&&d(e,["parameters","outputOptions","mimeType"],k);const A=u(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&d(e,["parameters","outputOptions","compressionQuality"],A);const U=u(t,["addWatermark"]);e!==void 0&&U!=null&&d(e,["parameters","addWatermark"],U);const $=u(t,["labels"]);e!==void 0&&$!=null&&d(e,["labels"],$);const b=u(t,["editMode"]);e!==void 0&&b!=null&&d(e,["parameters","editMode"],b);const H=u(t,["baseSteps"]);return e!==void 0&&H!=null&&d(e,["parameters","editConfig","baseSteps"],H),o}function kw(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["prompt"]);l!=null&&d(o,["instances[0]","prompt"],l);const c=u(e,["referenceImages"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>MT(h))),d(o,["instances[0]","referenceImages"],m)}const p=u(e,["config"]);return p!=null&&xw(p,o),o}function Nw(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>js(c))),d(n,["generatedImages"],l)}return n}function Mw(t,e,n){const o={},s=u(t,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const l=u(t,["title"]);e!==void 0&&l!=null&&d(e,["requests[]","title"],l);const c=u(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&d(e,["requests[]","outputDimensionality"],c),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Lw(t,e,n){const o={},s=u(t,["taskType"]);e!==void 0&&s!=null&&d(e,["instances[]","task_type"],s);const l=u(t,["title"]);e!==void 0&&l!=null&&d(e,["instances[]","title"],l);const c=u(t,["outputDimensionality"]);e!==void 0&&c!=null&&d(e,["parameters","outputDimensionality"],c);const p=u(t,["mimeType"]);e!==void 0&&p!=null&&d(e,["instances[]","mimeType"],p);const m=u(t,["autoTruncate"]);return e!==void 0&&m!=null&&d(e,["parameters","autoTruncate"],m),o}function Dw(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["contents"]);if(l!=null){let m=fc(t,l);Array.isArray(m)&&(m=m.map(h=>h)),d(o,["requests[]","content"],m)}const c=u(e,["config"]);c!=null&&Mw(c,o);const p=u(e,["model"]);return p!==void 0&&d(o,["requests[]","model"],Te(t,p)),o}function Uw(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["contents"]);if(l!=null){let p=fc(t,l);Array.isArray(p)&&(p=p.map(m=>m)),d(o,["instances[]","content"],p)}const c=u(e,["config"]);return c!=null&&Lw(c,o),o}function Fw(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["embeddings"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(p=>p)),d(n,["embeddings"],c)}const l=u(t,["metadata"]);return l!=null&&d(n,["metadata"],l),n}function Ow(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["predictions[]","embeddings"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(p=>gw(p))),d(n,["embeddings"],c)}const l=u(t,["metadata"]);return l!=null&&d(n,["metadata"],l),n}function bw(t,e){const n={},o=u(t,["endpoint"]);o!=null&&d(n,["name"],o);const s=u(t,["deployedModelId"]);return s!=null&&d(n,["deployedModelId"],s),n}function Vw(t,e){const n={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["fileUri"]);o!=null&&d(n,["fileUri"],o);const s=u(t,["mimeType"]);return s!=null&&d(n,["mimeType"],s),n}function Bw(t,e){const n={},o=u(t,["id"]);o!=null&&d(n,["id"],o);const s=u(t,["args"]);s!=null&&d(n,["args"],s);const l=u(t,["name"]);if(l!=null&&d(n,["name"],l),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function Gw(t,e){const n={},o=u(t,["allowedFunctionNames"]);o!=null&&d(n,["allowedFunctionNames"],o);const s=u(t,["mode"]);if(s!=null&&d(n,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function Hw(t,e){const n={},o=u(t,["description"]);o!=null&&d(n,["description"],o);const s=u(t,["name"]);s!=null&&d(n,["name"],s);const l=u(t,["parameters"]);l!=null&&d(n,["parameters"],l);const c=u(t,["parametersJsonSchema"]);c!=null&&d(n,["parametersJsonSchema"],c);const p=u(t,["response"]);p!=null&&d(n,["response"],p);const m=u(t,["responseJsonSchema"]);if(m!=null&&d(n,["responseJsonSchema"],m),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function $w(t,e,n,o){const s={},l=u(e,["systemInstruction"]);n!==void 0&&l!=null&&d(n,["systemInstruction"],Zs(at(l)));const c=u(e,["temperature"]);c!=null&&d(s,["temperature"],c);const p=u(e,["topP"]);p!=null&&d(s,["topP"],p);const m=u(e,["topK"]);m!=null&&d(s,["topK"],m);const h=u(e,["candidateCount"]);h!=null&&d(s,["candidateCount"],h);const y=u(e,["maxOutputTokens"]);y!=null&&d(s,["maxOutputTokens"],y);const _=u(e,["stopSequences"]);_!=null&&d(s,["stopSequences"],_);const E=u(e,["responseLogprobs"]);E!=null&&d(s,["responseLogprobs"],E);const w=u(e,["logprobs"]);w!=null&&d(s,["logprobs"],w);const P=u(e,["presencePenalty"]);P!=null&&d(s,["presencePenalty"],P);const k=u(e,["frequencyPenalty"]);k!=null&&d(s,["frequencyPenalty"],k);const A=u(e,["seed"]);A!=null&&d(s,["seed"],A);const U=u(e,["responseMimeType"]);U!=null&&d(s,["responseMimeType"],U);const $=u(e,["responseSchema"]);$!=null&&d(s,["responseSchema"],pc($));const b=u(e,["responseJsonSchema"]);if(b!=null&&d(s,["responseJsonSchema"],b),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=u(e,["safetySettings"]);if(n!==void 0&&H!=null){let Pe=H;Array.isArray(Pe)&&(Pe=Pe.map(Ge=>LT(Ge))),d(n,["safetySettings"],Pe)}const F=u(e,["tools"]);if(n!==void 0&&F!=null){let Pe=er(F);Array.isArray(Pe)&&(Pe=Pe.map(Ge=>BT(jo(Ge)))),d(n,["tools"],Pe)}const ae=u(e,["toolConfig"]);if(n!==void 0&&ae!=null&&d(n,["toolConfig"],VT(ae)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=u(e,["cachedContent"]);n!==void 0&&Y!=null&&d(n,["cachedContent"],mn(t,Y));const le=u(e,["responseModalities"]);le!=null&&d(s,["responseModalities"],le);const ee=u(e,["mediaResolution"]);ee!=null&&d(s,["mediaResolution"],ee);const de=u(e,["speechConfig"]);if(de!=null&&d(s,["speechConfig"],hc(de)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _e=u(e,["thinkingConfig"]);_e!=null&&d(s,["thinkingConfig"],_e);const Se=u(e,["imageConfig"]);Se!=null&&d(s,["imageConfig"],gT(Se));const Ie=u(e,["enableEnhancedCivicAnswers"]);if(Ie!=null&&d(s,["enableEnhancedCivicAnswers"],Ie),u(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function qw(t,e,n,o){const s={},l=u(e,["systemInstruction"]);n!==void 0&&l!=null&&d(n,["systemInstruction"],at(l));const c=u(e,["temperature"]);c!=null&&d(s,["temperature"],c);const p=u(e,["topP"]);p!=null&&d(s,["topP"],p);const m=u(e,["topK"]);m!=null&&d(s,["topK"],m);const h=u(e,["candidateCount"]);h!=null&&d(s,["candidateCount"],h);const y=u(e,["maxOutputTokens"]);y!=null&&d(s,["maxOutputTokens"],y);const _=u(e,["stopSequences"]);_!=null&&d(s,["stopSequences"],_);const E=u(e,["responseLogprobs"]);E!=null&&d(s,["responseLogprobs"],E);const w=u(e,["logprobs"]);w!=null&&d(s,["logprobs"],w);const P=u(e,["presencePenalty"]);P!=null&&d(s,["presencePenalty"],P);const k=u(e,["frequencyPenalty"]);k!=null&&d(s,["frequencyPenalty"],k);const A=u(e,["seed"]);A!=null&&d(s,["seed"],A);const U=u(e,["responseMimeType"]);U!=null&&d(s,["responseMimeType"],U);const $=u(e,["responseSchema"]);$!=null&&d(s,["responseSchema"],pc($));const b=u(e,["responseJsonSchema"]);b!=null&&d(s,["responseJsonSchema"],b);const H=u(e,["routingConfig"]);H!=null&&d(s,["routingConfig"],H);const F=u(e,["modelSelectionConfig"]);F!=null&&d(s,["modelConfig"],F);const ae=u(e,["safetySettings"]);if(n!==void 0&&ae!=null){let z=ae;Array.isArray(z)&&(z=z.map(se=>se)),d(n,["safetySettings"],z)}const Y=u(e,["tools"]);if(n!==void 0&&Y!=null){let z=er(Y);Array.isArray(z)&&(z=z.map(se=>Tg(jo(se)))),d(n,["tools"],z)}const le=u(e,["toolConfig"]);n!==void 0&&le!=null&&d(n,["toolConfig"],le);const ee=u(e,["labels"]);n!==void 0&&ee!=null&&d(n,["labels"],ee);const de=u(e,["cachedContent"]);n!==void 0&&de!=null&&d(n,["cachedContent"],mn(t,de));const _e=u(e,["responseModalities"]);_e!=null&&d(s,["responseModalities"],_e);const Se=u(e,["mediaResolution"]);Se!=null&&d(s,["mediaResolution"],Se);const Ie=u(e,["speechConfig"]);Ie!=null&&d(s,["speechConfig"],hc(Ie));const Pe=u(e,["audioTimestamp"]);Pe!=null&&d(s,["audioTimestamp"],Pe);const Ge=u(e,["thinkingConfig"]);Ge!=null&&d(s,["thinkingConfig"],Ge);const ze=u(e,["imageConfig"]);if(ze!=null&&d(s,["imageConfig"],yT(ze)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ke=u(e,["modelArmorConfig"]);return n!==void 0&&ke!=null&&d(n,["modelArmorConfig"],ke),s}function lm(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["contents"]);if(l!=null){let p=Mt(l);Array.isArray(p)&&(p=p.map(m=>Zs(m))),d(o,["contents"],p)}const c=u(e,["config"]);return c!=null&&d(o,["generationConfig"],$w(t,c,o)),o}function am(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["contents"]);if(l!=null){let p=Mt(l);Array.isArray(p)&&(p=p.map(m=>m)),d(o,["contents"],p)}const c=u(e,["config"]);return c!=null&&d(o,["generationConfig"],qw(t,c,o)),o}function um(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(y=>fw(y))),d(n,["candidates"],h)}const l=u(t,["modelVersion"]);l!=null&&d(n,["modelVersion"],l);const c=u(t,["promptFeedback"]);c!=null&&d(n,["promptFeedback"],c);const p=u(t,["responseId"]);p!=null&&d(n,["responseId"],p);const m=u(t,["usageMetadata"]);return m!=null&&d(n,["usageMetadata"],m),n}function cm(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(_=>_)),d(n,["candidates"],y)}const l=u(t,["createTime"]);l!=null&&d(n,["createTime"],l);const c=u(t,["modelVersion"]);c!=null&&d(n,["modelVersion"],c);const p=u(t,["promptFeedback"]);p!=null&&d(n,["promptFeedback"],p);const m=u(t,["responseId"]);m!=null&&d(n,["responseId"],m);const h=u(t,["usageMetadata"]);return h!=null&&d(n,["usageMetadata"],h),n}function zw(t,e,n){const o={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const l=u(t,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const c=u(t,["guidanceScale"]);if(e!==void 0&&c!=null&&d(e,["parameters","guidanceScale"],c),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m);const h=u(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&d(e,["parameters","includeSafetyAttributes"],h);const y=u(t,["includeRaiReason"]);e!==void 0&&y!=null&&d(e,["parameters","includeRaiReason"],y);const _=u(t,["language"]);e!==void 0&&_!=null&&d(e,["parameters","language"],_);const E=u(t,["outputMimeType"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","mimeType"],E);const w=u(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&d(e,["parameters","outputOptions","compressionQuality"],w),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=u(t,["imageSize"]);if(e!==void 0&&P!=null&&d(e,["parameters","sampleImageSize"],P),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Jw(t,e,n){const o={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const l=u(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);const c=u(t,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const p=u(t,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const m=u(t,["guidanceScale"]);e!==void 0&&m!=null&&d(e,["parameters","guidanceScale"],m);const h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const y=u(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&d(e,["parameters","safetySetting"],y);const _=u(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const E=u(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&d(e,["parameters","includeSafetyAttributes"],E);const w=u(t,["includeRaiReason"]);e!==void 0&&w!=null&&d(e,["parameters","includeRaiReason"],w);const P=u(t,["language"]);e!==void 0&&P!=null&&d(e,["parameters","language"],P);const k=u(t,["outputMimeType"]);e!==void 0&&k!=null&&d(e,["parameters","outputOptions","mimeType"],k);const A=u(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&d(e,["parameters","outputOptions","compressionQuality"],A);const U=u(t,["addWatermark"]);e!==void 0&&U!=null&&d(e,["parameters","addWatermark"],U);const $=u(t,["labels"]);e!==void 0&&$!=null&&d(e,["labels"],$);const b=u(t,["imageSize"]);e!==void 0&&b!=null&&d(e,["parameters","sampleImageSize"],b);const H=u(t,["enhancePrompt"]);return e!==void 0&&H!=null&&d(e,["parameters","enhancePrompt"],H),o}function Ww(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["prompt"]);l!=null&&d(o,["instances[0]","prompt"],l);const c=u(e,["config"]);return c!=null&&zw(c,o),o}function Kw(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["prompt"]);l!=null&&d(o,["instances[0]","prompt"],l);const c=u(e,["config"]);return c!=null&&Jw(c,o),o}function Yw(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["predictions"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(p=>lT(p))),d(n,["generatedImages"],c)}const l=u(t,["positivePromptSafetyAttributes"]);return l!=null&&d(n,["positivePromptSafetyAttributes"],Cg(l)),n}function Qw(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["predictions"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(p=>js(p))),d(n,["generatedImages"],c)}const l=u(t,["positivePromptSafetyAttributes"]);return l!=null&&d(n,["positivePromptSafetyAttributes"],wg(l)),n}function Xw(t,e,n){const o={},s=u(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=u(t,["durationSeconds"]);if(e!==void 0&&l!=null&&d(e,["parameters","durationSeconds"],l),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const p=u(t,["resolution"]);e!==void 0&&p!=null&&d(e,["parameters","resolution"],p);const m=u(t,["personGeneration"]);if(e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(t,["negativePrompt"]);e!==void 0&&h!=null&&d(e,["parameters","negativePrompt"],h);const y=u(t,["enhancePrompt"]);if(e!==void 0&&y!=null&&d(e,["parameters","enhancePrompt"],y),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=u(t,["lastFrame"]);e!==void 0&&_!=null&&d(e,["instances[0]","lastFrame"],el(_));const E=u(t,["referenceImages"]);if(e!==void 0&&E!=null){let w=E;Array.isArray(w)&&(w=w.map(P=>jT(P))),d(e,["instances[0]","referenceImages"],w)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function Zw(t,e,n){const o={},s=u(t,["numberOfVideos"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const l=u(t,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const c=u(t,["fps"]);e!==void 0&&c!=null&&d(e,["parameters","fps"],c);const p=u(t,["durationSeconds"]);e!==void 0&&p!=null&&d(e,["parameters","durationSeconds"],p);const m=u(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const h=u(t,["aspectRatio"]);e!==void 0&&h!=null&&d(e,["parameters","aspectRatio"],h);const y=u(t,["resolution"]);e!==void 0&&y!=null&&d(e,["parameters","resolution"],y);const _=u(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const E=u(t,["pubsubTopic"]);e!==void 0&&E!=null&&d(e,["parameters","pubsubTopic"],E);const w=u(t,["negativePrompt"]);e!==void 0&&w!=null&&d(e,["parameters","negativePrompt"],w);const P=u(t,["enhancePrompt"]);e!==void 0&&P!=null&&d(e,["parameters","enhancePrompt"],P);const k=u(t,["generateAudio"]);e!==void 0&&k!=null&&d(e,["parameters","generateAudio"],k);const A=u(t,["lastFrame"]);e!==void 0&&A!=null&&d(e,["instances[0]","lastFrame"],Jt(A));const U=u(t,["referenceImages"]);if(e!==void 0&&U!=null){let H=U;Array.isArray(H)&&(H=H.map(F=>eI(F))),d(e,["instances[0]","referenceImages"],H)}const $=u(t,["mask"]);e!==void 0&&$!=null&&d(e,["instances[0]","mask"],ZT($));const b=u(t,["compressionQuality"]);return e!==void 0&&b!=null&&d(e,["parameters","compressionQuality"],b),o}function jw(t,e){const n={},o=u(t,["name"]);o!=null&&d(n,["name"],o);const s=u(t,["metadata"]);s!=null&&d(n,["metadata"],s);const l=u(t,["done"]);l!=null&&d(n,["done"],l);const c=u(t,["error"]);c!=null&&d(n,["error"],c);const p=u(t,["response","generateVideoResponse"]);return p!=null&&d(n,["response"],oT(p)),n}function eT(t,e){const n={},o=u(t,["name"]);o!=null&&d(n,["name"],o);const s=u(t,["metadata"]);s!=null&&d(n,["metadata"],s);const l=u(t,["done"]);l!=null&&d(n,["done"],l);const c=u(t,["error"]);c!=null&&d(n,["error"],c);const p=u(t,["response"]);return p!=null&&d(n,["response"],rT(p)),n}function tT(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["prompt"]);l!=null&&d(o,["instances[0]","prompt"],l);const c=u(e,["image"]);c!=null&&d(o,["instances[0]","image"],el(c));const p=u(e,["video"]);p!=null&&d(o,["instances[0]","video"],Ig(p));const m=u(e,["source"]);m!=null&&iT(m,o);const h=u(e,["config"]);return h!=null&&Xw(h,o),o}function nT(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["prompt"]);l!=null&&d(o,["instances[0]","prompt"],l);const c=u(e,["image"]);c!=null&&d(o,["instances[0]","image"],Jt(c));const p=u(e,["video"]);p!=null&&d(o,["instances[0]","video"],Ag(p));const m=u(e,["source"]);m!=null&&sT(m,o);const h=u(e,["config"]);return h!=null&&Zw(h,o),o}function oT(t,e){const n={},o=u(t,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(p=>uT(p))),d(n,["generatedVideos"],c)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&d(n,["raiMediaFilteredCount"],s);const l=u(t,["raiMediaFilteredReasons"]);return l!=null&&d(n,["raiMediaFilteredReasons"],l),n}function rT(t,e){const n={},o=u(t,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(p=>cT(p))),d(n,["generatedVideos"],c)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&d(n,["raiMediaFilteredCount"],s);const l=u(t,["raiMediaFilteredReasons"]);return l!=null&&d(n,["raiMediaFilteredReasons"],l),n}function iT(t,e,n){const o={},s=u(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const l=u(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],el(l));const c=u(t,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],Ig(c)),o}function sT(t,e,n){const o={},s=u(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const l=u(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],Jt(l));const c=u(t,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],Ag(c)),o}function lT(t,e){const n={},o=u(t,["_self"]);o!=null&&d(n,["image"],vT(o));const s=u(t,["raiFilteredReason"]);s!=null&&d(n,["raiFilteredReason"],s);const l=u(t,["_self"]);return l!=null&&d(n,["safetyAttributes"],Cg(l)),n}function js(t,e){const n={},o=u(t,["_self"]);o!=null&&d(n,["image"],Sg(o));const s=u(t,["raiFilteredReason"]);s!=null&&d(n,["raiFilteredReason"],s);const l=u(t,["_self"]);l!=null&&d(n,["safetyAttributes"],wg(l));const c=u(t,["prompt"]);return c!=null&&d(n,["enhancedPrompt"],c),n}function aT(t,e){const n={},o=u(t,["_self"]);o!=null&&d(n,["mask"],Sg(o));const s=u(t,["labels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(n,["labels"],l)}return n}function uT(t,e){const n={},o=u(t,["video"]);return o!=null&&d(n,["video"],QT(o)),n}function cT(t,e){const n={},o=u(t,["_self"]);return o!=null&&d(n,["video"],XT(o)),n}function dT(t,e){const n={},o=u(t,["modelSelectionConfig"]);o!=null&&d(n,["modelConfig"],o);const s=u(t,["responseJsonSchema"]);s!=null&&d(n,["responseJsonSchema"],s);const l=u(t,["audioTimestamp"]);l!=null&&d(n,["audioTimestamp"],l);const c=u(t,["candidateCount"]);c!=null&&d(n,["candidateCount"],c);const p=u(t,["enableAffectiveDialog"]);p!=null&&d(n,["enableAffectiveDialog"],p);const m=u(t,["frequencyPenalty"]);m!=null&&d(n,["frequencyPenalty"],m);const h=u(t,["logprobs"]);h!=null&&d(n,["logprobs"],h);const y=u(t,["maxOutputTokens"]);y!=null&&d(n,["maxOutputTokens"],y);const _=u(t,["mediaResolution"]);_!=null&&d(n,["mediaResolution"],_);const E=u(t,["presencePenalty"]);E!=null&&d(n,["presencePenalty"],E);const w=u(t,["responseLogprobs"]);w!=null&&d(n,["responseLogprobs"],w);const P=u(t,["responseMimeType"]);P!=null&&d(n,["responseMimeType"],P);const k=u(t,["responseModalities"]);k!=null&&d(n,["responseModalities"],k);const A=u(t,["responseSchema"]);A!=null&&d(n,["responseSchema"],A);const U=u(t,["routingConfig"]);U!=null&&d(n,["routingConfig"],U);const $=u(t,["seed"]);$!=null&&d(n,["seed"],$);const b=u(t,["speechConfig"]);b!=null&&d(n,["speechConfig"],b);const H=u(t,["stopSequences"]);H!=null&&d(n,["stopSequences"],H);const F=u(t,["temperature"]);F!=null&&d(n,["temperature"],F);const ae=u(t,["thinkingConfig"]);ae!=null&&d(n,["thinkingConfig"],ae);const Y=u(t,["topK"]);Y!=null&&d(n,["topK"],Y);const le=u(t,["topP"]);if(le!=null&&d(n,["topP"],le),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function fT(t,e,n){const o={},s=u(e,["model"]);return s!=null&&d(o,["_url","name"],Te(t,s)),o}function pT(t,e,n){const o={},s=u(e,["model"]);return s!=null&&d(o,["_url","name"],Te(t,s)),o}function hT(t,e){const n={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(t,["enableWidget"]);return o!=null&&d(n,["enableWidget"],o),n}function mT(t,e){const n={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(t,["timeRangeFilter"]);return o!=null&&d(n,["timeRangeFilter"],o),n}function gT(t,e){const n={},o=u(t,["aspectRatio"]);o!=null&&d(n,["aspectRatio"],o);const s=u(t,["imageSize"]);if(s!=null&&d(n,["imageSize"],s),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function yT(t,e){const n={},o=u(t,["aspectRatio"]);o!=null&&d(n,["aspectRatio"],o);const s=u(t,["imageSize"]);s!=null&&d(n,["imageSize"],s);const l=u(t,["personGeneration"]);l!=null&&d(n,["personGeneration"],l);const c=u(t,["outputMimeType"]);c!=null&&d(n,["imageOutputOptions","mimeType"],c);const p=u(t,["outputCompressionQuality"]);return p!=null&&d(n,["imageOutputOptions","compressionQuality"],p),n}function vT(t,e){const n={},o=u(t,["bytesBase64Encoded"]);o!=null&&d(n,["imageBytes"],$n(o));const s=u(t,["mimeType"]);return s!=null&&d(n,["mimeType"],s),n}function Sg(t,e){const n={},o=u(t,["gcsUri"]);o!=null&&d(n,["gcsUri"],o);const s=u(t,["bytesBase64Encoded"]);s!=null&&d(n,["imageBytes"],$n(s));const l=u(t,["mimeType"]);return l!=null&&d(n,["mimeType"],l),n}function el(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(t,["imageBytes"]);o!=null&&d(n,["bytesBase64Encoded"],$n(o));const s=u(t,["mimeType"]);return s!=null&&d(n,["mimeType"],s),n}function Jt(t,e){const n={},o=u(t,["gcsUri"]);o!=null&&d(n,["gcsUri"],o);const s=u(t,["imageBytes"]);s!=null&&d(n,["bytesBase64Encoded"],$n(s));const l=u(t,["mimeType"]);return l!=null&&d(n,["mimeType"],l),n}function _T(t,e,n,o){const s={},l=u(e,["pageSize"]);n!==void 0&&l!=null&&d(n,["_query","pageSize"],l);const c=u(e,["pageToken"]);n!==void 0&&c!=null&&d(n,["_query","pageToken"],c);const p=u(e,["filter"]);n!==void 0&&p!=null&&d(n,["_query","filter"],p);const m=u(e,["queryBase"]);return n!==void 0&&m!=null&&d(n,["_url","models_url"],hg(t,m)),s}function ET(t,e,n,o){const s={},l=u(e,["pageSize"]);n!==void 0&&l!=null&&d(n,["_query","pageSize"],l);const c=u(e,["pageToken"]);n!==void 0&&c!=null&&d(n,["_query","pageToken"],c);const p=u(e,["filter"]);n!==void 0&&p!=null&&d(n,["_query","filter"],p);const m=u(e,["queryBase"]);return n!==void 0&&m!=null&&d(n,["_url","models_url"],hg(t,m)),s}function ST(t,e,n){const o={},s=u(e,["config"]);return s!=null&&_T(t,s,o),o}function CT(t,e,n){const o={},s=u(e,["config"]);return s!=null&&ET(t,s,o),o}function wT(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const l=u(t,["_self"]);if(l!=null){let c=mg(l);Array.isArray(c)&&(c=c.map(p=>bu(p))),d(n,["models"],c)}return n}function TT(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const l=u(t,["_self"]);if(l!=null){let c=mg(l);Array.isArray(c)&&(c=c.map(p=>Vu(p))),d(n,["models"],c)}return n}function IT(t,e){const n={},o=u(t,["maskMode"]);o!=null&&d(n,["maskMode"],o);const s=u(t,["segmentationClasses"]);s!=null&&d(n,["maskClasses"],s);const l=u(t,["maskDilation"]);return l!=null&&d(n,["dilation"],l),n}function bu(t,e){const n={},o=u(t,["name"]);o!=null&&d(n,["name"],o);const s=u(t,["displayName"]);s!=null&&d(n,["displayName"],s);const l=u(t,["description"]);l!=null&&d(n,["description"],l);const c=u(t,["version"]);c!=null&&d(n,["version"],c);const p=u(t,["_self"]);p!=null&&d(n,["tunedModelInfo"],GT(p));const m=u(t,["inputTokenLimit"]);m!=null&&d(n,["inputTokenLimit"],m);const h=u(t,["outputTokenLimit"]);h!=null&&d(n,["outputTokenLimit"],h);const y=u(t,["supportedGenerationMethods"]);y!=null&&d(n,["supportedActions"],y);const _=u(t,["temperature"]);_!=null&&d(n,["temperature"],_);const E=u(t,["maxTemperature"]);E!=null&&d(n,["maxTemperature"],E);const w=u(t,["topP"]);w!=null&&d(n,["topP"],w);const P=u(t,["topK"]);P!=null&&d(n,["topK"],P);const k=u(t,["thinking"]);return k!=null&&d(n,["thinking"],k),n}function Vu(t,e){const n={},o=u(t,["name"]);o!=null&&d(n,["name"],o);const s=u(t,["displayName"]);s!=null&&d(n,["displayName"],s);const l=u(t,["description"]);l!=null&&d(n,["description"],l);const c=u(t,["versionId"]);c!=null&&d(n,["version"],c);const p=u(t,["deployedModels"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(w=>bw(w))),d(n,["endpoints"],E)}const m=u(t,["labels"]);m!=null&&d(n,["labels"],m);const h=u(t,["_self"]);h!=null&&d(n,["tunedModelInfo"],HT(h));const y=u(t,["defaultCheckpointId"]);y!=null&&d(n,["defaultCheckpointId"],y);const _=u(t,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(w=>w)),d(n,["checkpoints"],E)}return n}function AT(t,e){const n={},o=u(t,["mediaResolution"]);o!=null&&d(n,["mediaResolution"],o);const s=u(t,["codeExecutionResult"]);s!=null&&d(n,["codeExecutionResult"],s);const l=u(t,["executableCode"]);l!=null&&d(n,["executableCode"],l);const c=u(t,["fileData"]);c!=null&&d(n,["fileData"],Vw(c));const p=u(t,["functionCall"]);p!=null&&d(n,["functionCall"],Bw(p));const m=u(t,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const h=u(t,["inlineData"]);h!=null&&d(n,["inlineData"],dw(h));const y=u(t,["text"]);y!=null&&d(n,["text"],y);const _=u(t,["thought"]);_!=null&&d(n,["thought"],_);const E=u(t,["thoughtSignature"]);E!=null&&d(n,["thoughtSignature"],E);const w=u(t,["videoMetadata"]);return w!=null&&d(n,["videoMetadata"],w),n}function PT(t,e){const n={},o=u(t,["productImage"]);return o!=null&&d(n,["image"],Jt(o)),n}function RT(t,e,n){const o={},s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const l=u(t,["baseSteps"]);e!==void 0&&l!=null&&d(e,["parameters","baseSteps"],l);const c=u(t,["outputGcsUri"]);e!==void 0&&c!=null&&d(e,["parameters","storageUri"],c);const p=u(t,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const m=u(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const y=u(t,["addWatermark"]);e!==void 0&&y!=null&&d(e,["parameters","addWatermark"],y);const _=u(t,["outputMimeType"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","mimeType"],_);const E=u(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E);const w=u(t,["enhancePrompt"]);e!==void 0&&w!=null&&d(e,["parameters","enhancePrompt"],w);const P=u(t,["labels"]);return e!==void 0&&P!=null&&d(e,["labels"],P),o}function xT(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["source"]);l!=null&&NT(l,o);const c=u(e,["config"]);return c!=null&&RT(c,o),o}function kT(t,e){const n={},o=u(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>js(l))),d(n,["generatedImages"],s)}return n}function NT(t,e,n){const o={},s=u(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const l=u(t,["personImage"]);e!==void 0&&l!=null&&d(e,["instances[0]","personImage","image"],Jt(l));const c=u(t,["productImages"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>PT(m))),d(e,["instances[0]","productImages"],p)}return o}function MT(t,e){const n={},o=u(t,["referenceImage"]);o!=null&&d(n,["referenceImage"],Jt(o));const s=u(t,["referenceId"]);s!=null&&d(n,["referenceId"],s);const l=u(t,["referenceType"]);l!=null&&d(n,["referenceType"],l);const c=u(t,["maskImageConfig"]);c!=null&&d(n,["maskImageConfig"],IT(c));const p=u(t,["controlImageConfig"]);p!=null&&d(n,["controlImageConfig"],vw(p));const m=u(t,["styleImageConfig"]);m!=null&&d(n,["styleImageConfig"],m);const h=u(t,["subjectImageConfig"]);return h!=null&&d(n,["subjectImageConfig"],h),n}function Cg(t,e){const n={},o=u(t,["safetyAttributes","categories"]);o!=null&&d(n,["categories"],o);const s=u(t,["safetyAttributes","scores"]);s!=null&&d(n,["scores"],s);const l=u(t,["contentType"]);return l!=null&&d(n,["contentType"],l),n}function wg(t,e){const n={},o=u(t,["safetyAttributes","categories"]);o!=null&&d(n,["categories"],o);const s=u(t,["safetyAttributes","scores"]);s!=null&&d(n,["scores"],s);const l=u(t,["contentType"]);return l!=null&&d(n,["contentType"],l),n}function LT(t,e){const n={},o=u(t,["category"]);if(o!=null&&d(n,["category"],o),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(t,["threshold"]);return s!=null&&d(n,["threshold"],s),n}function DT(t,e){const n={},o=u(t,["image"]);return o!=null&&d(n,["image"],Jt(o)),n}function UT(t,e,n){const o={},s=u(t,["mode"]);e!==void 0&&s!=null&&d(e,["parameters","mode"],s);const l=u(t,["maxPredictions"]);e!==void 0&&l!=null&&d(e,["parameters","maxPredictions"],l);const c=u(t,["confidenceThreshold"]);e!==void 0&&c!=null&&d(e,["parameters","confidenceThreshold"],c);const p=u(t,["maskDilation"]);e!==void 0&&p!=null&&d(e,["parameters","maskDilation"],p);const m=u(t,["binaryColorThreshold"]);e!==void 0&&m!=null&&d(e,["parameters","binaryColorThreshold"],m);const h=u(t,["labels"]);return e!==void 0&&h!=null&&d(e,["labels"],h),o}function FT(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["source"]);l!=null&&bT(l,o);const c=u(e,["config"]);return c!=null&&UT(c,o),o}function OT(t,e){const n={},o=u(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>aT(l))),d(n,["generatedMasks"],s)}return n}function bT(t,e,n){const o={},s=u(t,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const l=u(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],Jt(l));const c=u(t,["scribbleImage"]);return e!==void 0&&c!=null&&d(e,["instances[0]","scribble"],DT(c)),o}function VT(t,e){const n={},o=u(t,["retrievalConfig"]);o!=null&&d(n,["retrievalConfig"],o);const s=u(t,["functionCallingConfig"]);return s!=null&&d(n,["functionCallingConfig"],Gw(s)),n}function BT(t,e){const n={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(t,["computerUse"]);o!=null&&d(n,["computerUse"],o);const s=u(t,["fileSearch"]);s!=null&&d(n,["fileSearch"],s);const l=u(t,["codeExecution"]);if(l!=null&&d(n,["codeExecution"],l),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=u(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(E=>E)),d(n,["functionDeclarations"],_)}const p=u(t,["googleMaps"]);p!=null&&d(n,["googleMaps"],hT(p));const m=u(t,["googleSearch"]);m!=null&&d(n,["googleSearch"],mT(m));const h=u(t,["googleSearchRetrieval"]);h!=null&&d(n,["googleSearchRetrieval"],h);const y=u(t,["urlContext"]);return y!=null&&d(n,["urlContext"],y),n}function Tg(t,e){const n={},o=u(t,["retrieval"]);o!=null&&d(n,["retrieval"],o);const s=u(t,["computerUse"]);if(s!=null&&d(n,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=u(t,["codeExecution"]);l!=null&&d(n,["codeExecution"],l);const c=u(t,["enterpriseWebSearch"]);c!=null&&d(n,["enterpriseWebSearch"],c);const p=u(t,["functionDeclarations"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(w=>Hw(w))),d(n,["functionDeclarations"],E)}const m=u(t,["googleMaps"]);m!=null&&d(n,["googleMaps"],m);const h=u(t,["googleSearch"]);h!=null&&d(n,["googleSearch"],h);const y=u(t,["googleSearchRetrieval"]);y!=null&&d(n,["googleSearchRetrieval"],y);const _=u(t,["urlContext"]);return _!=null&&d(n,["urlContext"],_),n}function GT(t,e){const n={},o=u(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const s=u(t,["createTime"]);s!=null&&d(n,["createTime"],s);const l=u(t,["updateTime"]);return l!=null&&d(n,["updateTime"],l),n}function HT(t,e){const n={},o=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(n,["baseModel"],o);const s=u(t,["createTime"]);s!=null&&d(n,["createTime"],s);const l=u(t,["updateTime"]);return l!=null&&d(n,["updateTime"],l),n}function $T(t,e,n){const o={},s=u(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const l=u(t,["description"]);e!==void 0&&l!=null&&d(e,["description"],l);const c=u(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),o}function qT(t,e,n){const o={},s=u(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const l=u(t,["description"]);e!==void 0&&l!=null&&d(e,["description"],l);const c=u(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),o}function zT(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","name"],Te(t,s));const l=u(e,["config"]);return l!=null&&$T(l,o),o}function JT(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["config"]);return l!=null&&qT(l,o),o}function WT(t,e,n){const o={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const l=u(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);const c=u(t,["personGeneration"]);e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c);const p=u(t,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","mimeType"],m);const h=u(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","compressionQuality"],h);const y=u(t,["enhanceInputImage"]);e!==void 0&&y!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],y);const _=u(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=u(t,["labels"]);e!==void 0&&E!=null&&d(e,["labels"],E);const w=u(t,["numberOfImages"]);e!==void 0&&w!=null&&d(e,["parameters","sampleCount"],w);const P=u(t,["mode"]);return e!==void 0&&P!=null&&d(e,["parameters","mode"],P),o}function KT(t,e,n){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],Te(t,s));const l=u(e,["image"]);l!=null&&d(o,["instances[0]","image"],Jt(l));const c=u(e,["upscaleFactor"]);c!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],c);const p=u(e,["config"]);return p!=null&&WT(p,o),o}function YT(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>js(c))),d(n,["generatedImages"],l)}return n}function QT(t,e){const n={},o=u(t,["uri"]);o!=null&&d(n,["uri"],o);const s=u(t,["encodedVideo"]);s!=null&&d(n,["videoBytes"],$n(s));const l=u(t,["encoding"]);return l!=null&&d(n,["mimeType"],l),n}function XT(t,e){const n={},o=u(t,["gcsUri"]);o!=null&&d(n,["uri"],o);const s=u(t,["bytesBase64Encoded"]);s!=null&&d(n,["videoBytes"],$n(s));const l=u(t,["mimeType"]);return l!=null&&d(n,["mimeType"],l),n}function ZT(t,e){const n={},o=u(t,["image"]);o!=null&&d(n,["_self"],Jt(o));const s=u(t,["maskMode"]);return s!=null&&d(n,["maskMode"],s),n}function jT(t,e){const n={},o=u(t,["image"]);o!=null&&d(n,["image"],el(o));const s=u(t,["referenceType"]);return s!=null&&d(n,["referenceType"],s),n}function eI(t,e){const n={},o=u(t,["image"]);o!=null&&d(n,["image"],Jt(o));const s=u(t,["referenceType"]);return s!=null&&d(n,["referenceType"],s),n}function Ig(t,e){const n={},o=u(t,["uri"]);o!=null&&d(n,["uri"],o);const s=u(t,["videoBytes"]);s!=null&&d(n,["encodedVideo"],$n(s));const l=u(t,["mimeType"]);return l!=null&&d(n,["encoding"],l),n}function Ag(t,e){const n={},o=u(t,["uri"]);o!=null&&d(n,["gcsUri"],o);const s=u(t,["videoBytes"]);s!=null&&d(n,["bytesBase64Encoded"],$n(s));const l=u(t,["mimeType"]);return l!=null&&d(n,["mimeType"],l),n}function tI(t,e){const n={},o=u(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["displayName"],o),n}function nI(t){const e={},n=u(t,["config"]);return n!=null&&tI(n,e),e}function oI(t,e){const n={},o=u(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function rI(t){const e={},n=u(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=u(t,["config"]);return o!=null&&oI(o,e),e}function iI(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function sI(t,e){const n={},o=u(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["customMetadata"],l)}const s=u(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function lI(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const o=u(t,["metadata"]);o!=null&&d(e,["metadata"],o);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const l=u(t,["error"]);l!=null&&d(e,["error"],l);const c=u(t,["response"]);return c!=null&&d(e,["response"],uI(c)),e}function aI(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=u(t,["fileName"]);o!=null&&d(e,["fileName"],o);const s=u(t,["config"]);return s!=null&&sI(s,e),e}function uI(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["parent"]);o!=null&&d(e,["parent"],o);const s=u(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function cI(t,e){const n={},o=u(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function dI(t){const e={},n=u(t,["config"]);return n!=null&&cI(n,e),e}function fI(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=u(t,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["fileSearchStores"],l)}return e}function Pg(t,e){const n={},o=u(t,["mimeType"]);e!==void 0&&o!=null&&d(e,["mimeType"],o);const s=u(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const l=u(t,["customMetadata"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>m)),d(e,["customMetadata"],p)}const c=u(t,["chunkingConfig"]);return e!==void 0&&c!=null&&d(e,["chunkingConfig"],c),n}function pI(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const o=u(t,["config"]);return o!=null&&Pg(o,e),e}function hI(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}const mI="Content-Type",gI="X-Server-Timeout",yI="User-Agent",Bu="x-goog-api-client",vI="1.39.0",_I=`google-genai-sdk/${vI}`,EI="v1beta1",SI="v1beta";class CI{constructor(e){var n,o,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const p=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!p?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:EI}else{if(!this.clientOptions.apiKey)throw new ri({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:SI,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Du.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[c,p]of Object.entries(e.queryParams))s.searchParams.append(c,String(p));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(n))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,s){if(n&&n.timeout||s){const l=new AbortController,c=l.signal;if(n.timeout&&n?.timeout>0){const p=setTimeout(()=>l.abort(),n.timeout);p&&typeof p.unref=="function"&&p.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=c}return n&&n.extraBody!==null&&wI(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await dm(s),new Uu(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await dm(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return qt(this,arguments,function*(){var o;const s=(o=e?.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let c="";const p="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:y}=yield me(s.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(y,{stream:!0});try{const P=JSON.parse(_);if("error"in P){const k=JSON.parse(JSON.stringify(P.error)),A=k.status,U=k.code,$=`got status: ${A}. ${JSON.stringify(P)}`;if(U>=400&&U<600)throw new ri({message:$,status:U})}}catch(P){if(P.name==="ApiError")throw P}c+=_;let E=-1,w=0;for(;;){E=-1,w=0;for(const A of m){const U=c.indexOf(A);U!==-1&&(E===-1||U<E)&&(E=U,w=A.length)}if(E===-1)break;const P=c.substring(0,E);c=c.substring(E+w);const k=P.trim();if(k.startsWith(p)){const A=k.substring(p.length).trim();try{const U=new Response(A,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield me(new Uu(U))}catch(U){throw new Error(`exception parsing stream chunk ${A}. ${U}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=_I+" "+this.clientOptions.userAgentExtra;return e[yI]=n,e[Bu]=n,e[mI]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))o.append(s,l);e.timeout&&e.timeout>0&&o.append(gI,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);s.sizeBytes=String(c.size);const p=(o=n?.mimeType)!==null&&o!==void 0?o:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=p;const m={file:s},h=this.getFileName(e),y=Q("upload/v1beta/files",m._url),_=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,m,n?.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,n,o){var s;const l=this.clientOptions.uploader,c=await l.stat(n),p=String(c.size),m=(s=o?.mimeType)!==null&&s!==void 0?s:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),_={};o!=null&&Pg(o,_);const E=await this.fetchUploadUrl(h,p,m,y,_,o?.httpOptions);return l.uploadToFileSearchStore(n,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,s,l,c){var p;let m={};c?m=c:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(p=h?.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function dm(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new ri({message:s,status:n}):new Error(s)}}function wI(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const p=Object.assign({},l);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const h=c[m],y=p[m];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?p[m]=o(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),p[m]=h)}return p}const s=o(n,e);t.body=JSON.stringify(s)}const TI="mcp_used/unknown";let II=!1;function Rg(t){for(const e of t)if(AI(e)||typeof e=="object"&&"inputSchema"in e)return!0;return II}function xg(t){var e;const n=(e=t[Bu])!==null&&e!==void 0?e:"";t[Bu]=(n+` ${TI}`).trimStart()}function AI(t){return t!==null&&typeof t=="object"&&t instanceof gc}function PI(t){return qt(this,arguments,function*(n,o=100){let s,l=0;for(;l<o;){const c=yield me(n.listTools({cursor:s}));for(const p of c.tools)yield yield me(p),l++;if(!c.nextCursor)break;s=c.nextCursor}})}class gc{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new gc(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const l={},c=[];for(const y of this.mcpClients)try{for(var p=!0,m=(n=void 0,zt(PI(y))),h;h=await m.next(),e=h.done,!e;p=!0){s=h.value,p=!1;const _=s;c.push(_);const E=_.name;if(l[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);l[E]=y}}catch(_){n={error:_}}finally{try{!p&&!e&&(o=m.return)&&await o.call(m)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),nS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await s.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return n}}async function RI(t,e,n){const o=new KE;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)}class xI{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=MI(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),m=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${p}`;let h=()=>{};const y=new Promise(b=>{h=b}),_=e.callbacks,E=function(){h({})},w=this.apiClient,P={onopen:E,onmessage:b=>{RI(w,_.onmessage,b)},onerror:(n=_?.onerror)!==null&&n!==void 0?n:function(b){},onclose:(o=_?.onclose)!==null&&o!==void 0?o:function(b){}},k=this.webSocketFactory.create(m,NI(c),P);k.connect(),await y;const $={setup:{model:Te(this.apiClient,e.model)}};return k.send(JSON.stringify($)),new kI(k,this.apiClient)}}class kI{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=tw(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=ew(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(qo.PLAY)}pause(){this.sendPlaybackControl(qo.PAUSE)}stop(){this.sendPlaybackControl(qo.STOP)}resetContext(){this.sendPlaybackControl(qo.RESET_CONTEXT)}close(){this.conn.close()}}function NI(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function MI(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}const LI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function DI(t,e,n){const o=new WE;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const l=JSON.parse(s);if(t.isVertexAI()){const c=rw(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class UI{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new xI(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,l,c,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&Rg(e.config.tools)&&xg(_);const E=VI(_);if(this.apiClient.isVertexAI()){const ee=this.apiClient.getProject(),de=this.apiClient.getLocation(),_e=this.apiClient.getApiKey(),Se=!!ee&&!!de||!!_e;this.apiClient.getCustomBaseUrl()&&!Se?y=m:(y=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,y))}else{const ee=this.apiClient.getApiKey();let de="BidiGenerateContent",_e="key";ee?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),de="BidiGenerateContentConstrained",_e="access_token"),y=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${de}?${_e}=${ee}`}let w=()=>{};const P=new Promise(ee=>{w=ee}),k=e.callbacks,A=function(){var ee;(ee=k?.onopen)===null||ee===void 0||ee.call(k),w({})},U=this.apiClient,$={onopen:A,onmessage:ee=>{DI(U,k.onmessage,ee)},onerror:(n=k?.onerror)!==null&&n!==void 0?n:function(ee){},onclose:(o=k?.onclose)!==null&&o!==void 0?o:function(ee){}},b=this.webSocketFactory.create(y,bI(E),$);b.connect(),await P;let H=Te(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const ee=this.apiClient.getProject(),de=this.apiClient.getLocation();ee&&de&&(H=`projects/${ee}/locations/${de}/`+H)}let F={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Hs.AUDIO]}:e.config.responseModalities=[Hs.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ae=(p=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&p!==void 0?p:[],Y=[];for(const ee of ae)if(this.isCallableTool(ee)){const de=ee;Y.push(await de.tool())}else Y.push(ee);Y.length>0&&(e.config.tools=Y);const le={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=jC(this.apiClient,le):F=ZC(this.apiClient,le),delete F.config,b.send(JSON.stringify(F)),new OI(b,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const FI={turnComplete:!0};class OI{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Mt(n.turns),e.isVertexAI()||(o=o.map(s=>Zs(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(LI)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},FI),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ow(e)}:n={realtimeInput:nw(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function bI(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function VI(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}const fm=10;function pm(t){var e,n,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const c of(n=t?.tools)!==null&&n!==void 0?n:[])if(Yo(c)){s=!0;break}if(!s)return!0;const l=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Yo(t){return"callTool"in t&&typeof t.callTool=="function"}function BI(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Yo(s)))!==null&&o!==void 0?o:!1}function hm(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(Yo(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(s)}),n}function mm(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class GI extends hn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,l,c,p;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!BI(n)||pm(n.config))return await this.generateContentInternal(m);const h=hm(n);if(h.length>0){const k=h.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let y,_;const E=Mt(m.contents),w=(l=(s=(o=m.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:fm;let P=0;for(;P<w&&(y=await this.generateContentInternal(m),!(!y.functionCalls||y.functionCalls.length===0));){const k=y.candidates[0].content,A=[];for(const U of(p=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&p!==void 0?p:[])if(Yo(U)){const b=await U.callTool(y.functionCalls);A.push(...b)}P++,_={role:"user",parts:A},m.contents=Mt(m.contents),m.contents.push(k),m.contents.push(_),mm(m.config)&&(E.push(k),E.push(_))}return mm(m.config)&&(y.automaticFunctionCallingHistory=E),y},this.generateContentStream=async n=>{var o,s,l,c,p;if(this.maybeMoveToResponseJsonSchem(n),pm(n.config)){const _=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(_)}const m=hm(n);if(m.length>0){const _=m.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(s=(o=n?.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(p=(c=n?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let l;const c=[];if(o?.generatedImages)for(const m of o.generatedImages)m&&m?.safetyAttributes&&((s=m?.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=m?.safetyAttributes:c.push(m);let p;return l?p={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:p={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},p}),this.list=async n=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new po(fn.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(c),c)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var o,s,l,c,p,m;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((m=(p=n.source)===null||p===void 0?void 0:p.video)===null||m===void 0)&&m.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const c=await Promise.all(l.map(async m=>Yo(m)?await m.tool():m)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(p.config.tools=c,e.config&&e.config.tools&&Rg(e.config.tools)){const m=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),xg(h),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return p}async initAfcToolsMap(e){var n,o,s;const l=new Map;for(const c of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Yo(c)){const p=c,m=await p.tool();for(const h of(s=m.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,p)}}return l}async processAfcStream(e){var n,o,s;const l=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:fm;let c=!1,p=0;const m=await this.initAfcToolsMap(e);return(function(h,y,_){return qt(this,arguments,function*(){for(var E,w,P,k,A,U;p<l;){c&&(p++,c=!1);const F=yield me(h.processParamsMaybeAddMcpUsage(_)),ae=yield me(h.generateContentStreamInternal(F)),Y=[],le=[];try{for(var $=!0,b=(w=void 0,zt(ae)),H;H=yield me(b.next()),E=H.done,!E;$=!0){k=H.value,$=!1;const ee=k;if(yield yield me(ee),ee.candidates&&(!((A=ee.candidates[0])===null||A===void 0)&&A.content)){le.push(ee.candidates[0].content);for(const de of(U=ee.candidates[0].content.parts)!==null&&U!==void 0?U:[])if(p<l&&de.functionCall){if(!de.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(de.functionCall.name)){const _e=yield me(y.get(de.functionCall.name).callTool([de.functionCall]));Y.push(..._e)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${de.functionCall.name}`)}}}}catch(ee){w={error:ee}}finally{try{!$&&!E&&(P=b.return)&&(yield me(P.call(b)))}finally{if(w)throw w.error}}if(Y.length>0){c=!0;const ee=new Jr;ee.candidates=[{content:{role:"user",parts:Y}}],yield yield me(ee);const de=[];de.push(...le),de.push({role:"user",parts:Y});const _e=Mt(_.contents).concat(de);_.contents=_e}else break}})})(this,m,e)}async generateContentInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=am(this.apiClient,e);return p=Q("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=cm(y),E=new Jr;return Object.assign(E,_),E})}else{const h=lm(this.apiClient,e);return p=Q("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=um(y),E=new Jr;return Object.assign(E,_),E})}}async generateContentStreamInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=am(this.apiClient,e);return p=Q("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return qt(this,arguments,function*(){var E,w,P,k;try{for(var A=!0,U=zt(_),$;$=yield me(U.next()),E=$.done,!E;A=!0){k=$.value,A=!1;const b=k,H=cm(yield me(b.json()),e);H.sdkHttpResponse={headers:b.headers};const F=new Jr;Object.assign(F,H),yield yield me(F)}}catch(b){w={error:b}}finally{try{!A&&!E&&(P=U.return)&&(yield me(P.call(U)))}finally{if(w)throw w.error}}})})}else{const h=lm(this.apiClient,e);return p=Q("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return qt(this,arguments,function*(){var E,w,P,k;try{for(var A=!0,U=zt(_),$;$=yield me(U.next()),E=$.done,!E;A=!0){k=$.value,A=!1;const b=k,H=um(yield me(b.json()),e);H.sdkHttpResponse={headers:b.headers};const F=new Jr;Object.assign(F,H),yield yield me(F)}}catch(b){w={error:b}}finally{try{!A&&!E&&(P=U.return)&&(yield me(P.call(U)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=Uw(this.apiClient,e);return p=Q("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=Ow(y),E=new qh;return Object.assign(E,_),E})}else{const h=Dw(this.apiClient,e);return p=Q("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=Fw(y),E=new qh;return Object.assign(E,_),E})}}async generateImagesInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=Kw(this.apiClient,e);return p=Q("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=Qw(y),E=new zh;return Object.assign(E,_),E})}else{const h=Ww(this.apiClient,e);return p=Q("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=Yw(y),E=new zh;return Object.assign(E,_),E})}}async editImageInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const p=kw(this.apiClient,e);return l=Q("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=Nw(m),y=new UE;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const p=KT(this.apiClient,e);return l=Q("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=YT(m),y=new FE;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const p=xT(this.apiClient,e);return l=Q("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>{const h=kT(m),y=new OE;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const p=FT(this.apiClient,e);return l=Q("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>{const h=OT(m),y=new bE;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=pT(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>Vu(y))}else{const h=fT(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>bu(y))}}async listInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=CT(this.apiClient,e);return p=Q("{models_url}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=TT(y),E=new Jh;return Object.assign(E,_),E})}else{const h=ST(this.apiClient,e);return p=Q("{models_url}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=wT(y),E=new Jh;return Object.assign(E,_),E})}}async update(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=JT(this.apiClient,e);return p=Q("{model}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>Vu(y))}else{const h=zT(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>bu(y))}}async delete(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=Aw(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=Rw(y),E=new Wh;return Object.assign(E,_),E})}else{const h=Iw(this.apiClient,e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=Pw(y),E=new Wh;return Object.assign(E,_),E})}}async countTokens(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=Cw(this.apiClient,e);return p=Q("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=Tw(y),E=new Kh;return Object.assign(E,_),E})}else{const h=Sw(this.apiClient,e);return p=Q("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=ww(y),E=new Kh;return Object.assign(E,_),E})}}async computeTokens(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const p=hw(this.apiClient,e);return l=Q("{model}:computeTokens",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=mw(m),y=new VE;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=nT(this.apiClient,e);return p=Q("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const _=eT(y),E=new $s;return Object.assign(E,_),E})}else{const h=tT(this.apiClient,e);return p=Q("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const _=jw(y),E=new $s;return Object.assign(E,_),E})}}}class HI extends hn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=xE(e);return p=Q("{operationName}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c}else{const h=RE(e);return p=Q("{operationName}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c}}async fetchPredictVideosOperationInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const p=SE(e);return l=Q("{resourceName}:fetchPredictOperation",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}function $I(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function qI(t){const e={},n=u(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>jI(l))),d(e,["parts"],s)}const o=u(t,["role"]);return o!=null&&d(e,["role"],o),e}function zI(t,e,n){const o={},s=u(e,["expireTime"]);n!==void 0&&s!=null&&d(n,["expireTime"],s);const l=u(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&d(n,["newSessionExpireTime"],l);const c=u(e,["uses"]);n!==void 0&&c!=null&&d(n,["uses"],c);const p=u(e,["liveConnectConstraints"]);n!==void 0&&p!=null&&d(n,["bidiGenerateContentSetup"],ZI(t,p));const m=u(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&d(n,["fieldMask"],m),o}function JI(t,e){const n={},o=u(e,["config"]);return o!=null&&d(n,["config"],zI(t,o,n)),n}function WI(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const o=u(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function KI(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const o=u(t,["args"]);o!=null&&d(e,["args"],o);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function YI(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function QI(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function XI(t,e){const n={},o=u(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const s=u(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const l=u(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=u(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const p=u(t,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const m=u(t,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const h=u(t,["mediaResolution"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","mediaResolution"],h);const y=u(t,["seed"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","seed"],y);const _=u(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],mc(_));const E=u(t,["thinkingConfig"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","thinkingConfig"],E);const w=u(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],w);const P=u(t,["systemInstruction"]);e!==void 0&&P!=null&&d(e,["setup","systemInstruction"],qI(at(P)));const k=u(t,["tools"]);if(e!==void 0&&k!=null){let ae=er(k);Array.isArray(ae)&&(ae=ae.map(Y=>tA(jo(Y)))),d(e,["setup","tools"],ae)}const A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&d(e,["setup","sessionResumption"],eA(A));const U=u(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&d(e,["setup","inputAudioTranscription"],U);const $=u(t,["outputAudioTranscription"]);e!==void 0&&$!=null&&d(e,["setup","outputAudioTranscription"],$);const b=u(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&d(e,["setup","realtimeInputConfig"],b);const H=u(t,["contextWindowCompression"]);e!==void 0&&H!=null&&d(e,["setup","contextWindowCompression"],H);const F=u(t,["proactivity"]);if(e!==void 0&&F!=null&&d(e,["setup","proactivity"],F),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ZI(t,e){const n={},o=u(e,["model"]);o!=null&&d(n,["setup","model"],Te(t,o));const s=u(e,["config"]);return s!=null&&d(n,["config"],XI(s,n)),n}function jI(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const o=u(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const l=u(t,["fileData"]);l!=null&&d(e,["fileData"],WI(l));const c=u(t,["functionCall"]);c!=null&&d(e,["functionCall"],KI(c));const p=u(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const m=u(t,["inlineData"]);m!=null&&d(e,["inlineData"],$I(m));const h=u(t,["text"]);h!=null&&d(e,["text"],h);const y=u(t,["thought"]);y!=null&&d(e,["thought"],y);const _=u(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const E=u(t,["videoMetadata"]);return E!=null&&d(e,["videoMetadata"],E),e}function eA(t){const e={},n=u(t,["handle"]);if(n!=null&&d(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tA(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);const o=u(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=u(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),d(e,["functionDeclarations"],y)}const c=u(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],YI(c));const p=u(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],QI(p));const m=u(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function nA(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${n}.${l}`);e.push(...s)}else e.push(n)}return e.join(",")}function oA(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const l=nA(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];s.length>0&&(p=s.map(h=>c.includes(h)?`generationConfig.${h}`:h));const m=[];l&&m.push(l),p.length>0&&m.push(...p),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class rA extends hn{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=JI(this.apiClient,e);l=Q("auth_tokens",p._url),c=p._query,delete p.config,delete p._url,delete p._query;const m=oA(p,e.config);return s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}function iA(t,e){const n={},o=u(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),n}function sA(t){const e={},n=u(t,["name"]);n!=null&&d(e,["_url","name"],n);const o=u(t,["config"]);return o!=null&&iA(o,e),e}function lA(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function aA(t,e){const n={},o=u(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function uA(t){const e={},n=u(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const o=u(t,["config"]);return o!=null&&aA(o,e),e}function cA(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const o=u(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const s=u(t,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["documents"],l)}return e}class dA extends hn{constructor(e){super(),this.apiClient=e,this.list=async n=>new po(fn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=lA(e);return l=Q("{name}",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=sA(e);s=Q("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=uA(e);return l=Q("{parent}/documents",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>{const h=cA(m),y=new BE;return Object.assign(y,h),y})}}}class fA extends hn{constructor(e,n=new dA(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new po(fn.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=nI(e);return l=Q("fileSearchStores",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async get(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=iI(e);return l=Q("{name}",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rI(e);s=Q("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=dI(e);return l=Q("fileSearchStores",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>{const h=fI(m),y=new GE;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=pI(e);return l=Q("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>{const h=hI(m),y=new HE;return Object.assign(y,h),y})}}async importFile(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=aI(e);return l=Q("{file_search_store_name}:importFile",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>{const h=lI(m),y=new cc;return Object.assign(y,h),y})}}}let kg=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return kg=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const pA=()=>kg();function Gu(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Hu=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Lt extends Error{}class ft extends Lt{constructor(e,n,o,s){super(`${ft.makeMessage(e,n,o)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,o){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,o,s){if(!e||!s)return new tl({message:o,cause:Hu(n)});const l=n;return e===400?new Mg(e,l,o,s):e===401?new Lg(e,l,o,s):e===403?new Dg(e,l,o,s):e===404?new Ug(e,l,o,s):e===409?new Fg(e,l,o,s):e===422?new Og(e,l,o,s):e===429?new bg(e,l,o,s):e>=500?new Vg(e,l,o,s):new ft(e,l,o,s)}}class $u extends ft{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class tl extends ft{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Ng extends tl{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Mg extends ft{}class Lg extends ft{}class Dg extends ft{}class Ug extends ft{}class Fg extends ft{}class Og extends ft{}class bg extends ft{}class Vg extends ft{}const hA=/^[a-z][a-z0-9+.-]*:/i,mA=t=>hA.test(t);let qu=t=>(qu=Array.isArray,qu(t));const gA=qu;let yA=gA;const gm=yA;function vA(t){if(!t)return!0;for(const e in t)return!1;return!0}function _A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const EA=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Lt(`${t} must be an integer`);if(e<0)throw new Lt(`${t} must be a positive integer`);return e},SA=t=>{try{return JSON.parse(t)}catch{return}};const CA=t=>new Promise(e=>setTimeout(e,t));const Ho="0.0.1";function wA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const TA=()=>{var t,e,n,o,s;const l=wA();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":vm(Deno.build.os),"X-Stainless-Arch":ym(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":vm((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":ym((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const c=IA();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function IA(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const s=o[1]||0,l=o[2]||0,c=o[3]||0;return{browser:e,version:`${s}.${l}.${c}`}}}return null}const ym=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",vm=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ss;const AA=()=>Ss??(Ss=TA());function PA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bg(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function RA(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Bg({start(){},async pull(n){const{done:o,value:s}=await e.next();o?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Gg(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function xA(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),s=o.cancel();o.releaseLock(),await s}const kA=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const Hg=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function du(t,e,n){return Hg(),new File(t,e??"unknown_file",n)}function NA(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const MA=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const $g=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",LA=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&$g(t),DA=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function UA(t,e,n){if(Hg(),t=await t,LA(t))return t instanceof File?t:du([await t.arrayBuffer()],t.name);if(DA(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),du(await zu(s),e,n)}const o=await zu(t);if(e||(e=NA(t)),!n?.type){const s=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return du(o,e,n)}async function zu(t){var e,n,o,s,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if($g(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(MA(t))try{for(var p=!0,m=zt(t),h;h=await m.next(),e=h.done,!e;p=!0){s=h.value,p=!1;const y=s;c.push(...await zu(y))}}catch(y){n={error:y}}finally{try{!p&&!e&&(o=m.return)&&await o.call(m)}finally{if(n)throw n.error}}else{const y=(l=t?.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${FA(t)}`)}return c}function FA(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class qg{constructor(e){this._client=e}}qg._key=[];function zg(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const _m=Object.freeze(Object.create(null)),OA=(t=zg)=>(function(n,...o){if(n.length===1)return n[0];let s=!1;const l=[],c=n.reduce((y,_,E)=>{var w,P,k;/[?#]/.test(_)&&(s=!0);const A=o[E];let U=(s?encodeURIComponent:t)(""+A);return E!==o.length&&(A==null||typeof A=="object"&&A.toString===((k=Object.getPrototypeOf((P=Object.getPrototypeOf((w=A.hasOwnProperty)!==null&&w!==void 0?w:_m))!==null&&P!==void 0?P:_m))===null||k===void 0?void 0:k.toString))&&(U=A+"",l.push({start:y.length+_.length,length:U.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),y+_+(E===o.length?"":U)},""),p=c.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=m.exec(p))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((y,_)=>y.start-_.start),l.length>0){let y=0;const _=l.reduce((E,w)=>{const P=" ".repeat(w.start-y),k="^".repeat(w.length);return y=w.start+w.length,E+P+k},"");throw new Lt(`Path parameters result in path with invalid segments:
${l.map(E=>E.error).join(`
`)}
${c}
${_}`)}return c}),Cs=OA(zg);class Jg extends qg{create(e,n){var o;const{api_version:s=this._client.apiVersion}=e,l=zs(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Lt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Lt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Cs`/${s}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(Cs`/${s}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(Cs`/${s}/interactions/${e}/cancel`,o)}get(e,n={},o){var s;const l=n??{},{api_version:c=this._client.apiVersion}=l,p=zs(l,["api_version"]);return this._client.get(Cs`/${c}/interactions/${e}`,Object.assign(Object.assign({query:p},o),{stream:(s=n?.stream)!==null&&s!==void 0?s:!1}))}}Jg._key=Object.freeze(["interactions"]);class Wg extends Jg{}function bA(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return n}let ws;function yc(t){let e;return(ws??(e=new globalThis.TextEncoder,ws=e.encode.bind(e)))(t)}let Ts;function Em(t){let e;return(Ts??(e=new globalThis.TextDecoder,Ts=e.decode.bind(e)))(t)}class nl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?yc(e):e;this.buffer=bA([this.buffer,n]);const o=[];let s;for(;(s=VA(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(Em(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,c=Em(this.buffer.subarray(0,l));o.push(c),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}nl.NEWLINE_CHARS=new Set([`
`,"\r"]);nl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function VA(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function BA(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}const Js={off:0,error:200,warn:300,info:400,debug:500},Sm=(t,e,n)=>{if(t){if(_A(Js,t))return t;dt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Js))}`)}};function Xr(){}function Is(t,e,n){return!e||Js[t]>Js[n]?Xr:e[t].bind(e)}const GA={error:Xr,warn:Xr,info:Xr,debug:Xr};let Cm=new WeakMap;function dt(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return GA;const s=Cm.get(n);if(s&&s[0]===o)return s[1];const l={error:Is("error",n,o),warn:Is("warn",n,o),info:Is("info",n,o),debug:Is("debug",n,o)};return Cm.set(n,[o,l]),l}const so=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);class zo{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let s=!1;const l=o?dt(o):console;function c(){return qt(this,arguments,function*(){var m,h,y,_;if(s)throw new Lt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let E=!1;try{try{for(var w=!0,P=zt(HA(e,n)),k;k=yield me(P.next()),m=k.done,!m;w=!0){_=k.value,w=!1;const A=_;if(!E)if(A.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield me(JSON.parse(A.data))}catch(U){throw l.error("Could not parse message into JSON:",A.data),l.error("From chunk:",A.raw),U}}}catch(A){h={error:A}}finally{try{!w&&!m&&(y=P.return)&&(yield me(y.call(P)))}finally{if(h)throw h.error}}E=!0}catch(A){if(Gu(A))return yield me(void 0);throw A}finally{E||n.abort()}})}return new zo(c,n,o)}static fromReadableStream(e,n,o){let s=!1;function l(){return qt(this,arguments,function*(){var m,h,y,_;const E=new nl,w=Gg(e);try{for(var P=!0,k=zt(w),A;A=yield me(k.next()),m=A.done,!m;P=!0){_=A.value,P=!1;const U=_;for(const $ of E.decode(U))yield yield me($)}}catch(U){h={error:U}}finally{try{!P&&!m&&(y=k.return)&&(yield me(y.call(k)))}finally{if(h)throw h.error}}for(const U of E.flush())yield yield me(U)})}function c(){return qt(this,arguments,function*(){var m,h,y,_;if(s)throw new Lt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let E=!1;try{try{for(var w=!0,P=zt(l()),k;k=yield me(P.next()),m=k.done,!m;w=!0){_=k.value,w=!1;const A=_;E||A&&(yield yield me(JSON.parse(A)))}}catch(A){h={error:A}}finally{try{!w&&!m&&(y=P.return)&&(yield me(y.call(P)))}finally{if(h)throw h.error}}E=!0}catch(A){if(Gu(A))return yield me(void 0);throw A}finally{E||n.abort()}})}return new zo(c,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),s=l=>({next:()=>{if(l.length===0){const c=o.next();e.push(c),n.push(c)}return l.shift()}});return[new zo(()=>s(e),this.controller,this.client),new zo(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Bg({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:l}=await n.next();if(l)return o.close();const c=yc(JSON.stringify(s)+`
`);o.enqueue(c)}catch(s){o.error(s)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function HA(t,e){return qt(this,arguments,function*(){var o,s,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Lt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Lt("Attempted to iterate over a response with no body");const p=new qA,m=new nl,h=Gg(t.body);try{for(var y=!0,_=zt($A(h)),E;E=yield me(_.next()),o=E.done,!o;y=!0){c=E.value,y=!1;const w=c;for(const P of m.decode(w)){const k=p.decode(P);k&&(yield yield me(k))}}}catch(w){s={error:w}}finally{try{!y&&!o&&(l=_.return)&&(yield me(l.call(_)))}finally{if(s)throw s.error}}for(const w of m.flush()){const P=p.decode(w);P&&(yield yield me(P))}})}function $A(t){return qt(this,arguments,function*(){var n,o,s,l;let c=new Uint8Array;try{for(var p=!0,m=zt(t),h;h=yield me(m.next()),n=h.done,!n;p=!0){l=h.value,p=!1;const y=l;if(y==null)continue;const _=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?yc(y):y;let E=new Uint8Array(c.length+_.length);E.set(c),E.set(_,c.length),c=E;let w;for(;(w=BA(c))!==-1;)yield yield me(c.slice(0,w)),c=c.slice(w)}}catch(y){o={error:y}}finally{try{!p&&!n&&(s=m.return)&&(yield me(s.call(m)))}finally{if(o)throw o.error}}c.length>0&&(yield yield me(c))})}class qA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,s]=zA(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function zA(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function JA(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:s,startTime:l}=e,c=await(async()=>{var p;if(e.options.stream)return dt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):zo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const m=n.headers.get("content-type"),h=(p=m?.split(";")[0])===null||p===void 0?void 0:p.trim();return h?.includes("application/json")||h?.endsWith("+json")?await n.json():await n.text()})();return dt(t).debug(`[${o}] response parsed`,so({retryOfRequestLogID:s,url:n.url,status:n.status,body:c,durationMs:Date.now()-l})),c}class vc extends Promise{constructor(e,n,o=JA){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new vc(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const Kg=Symbol("brand.privateNullableHeaders");function*WA(t){if(!t)return;if(Kg in t){const{values:o,nulls:s}=t;yield*o.entries();for(const l of s)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():gm(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=gm(o[1])?o[1]:[o[1]];let c=!1;for(const p of l)p!==void 0&&(e&&!c&&(c=!0,yield[s,null]),yield[s,p])}}const Wr=t=>{const e=new Headers,n=new Set;for(const o of t){const s=new Set;for(const[l,c]of WA(o)){const p=l.toLowerCase();s.has(p)||(e.delete(l),s.add(p)),c===null?(e.delete(l),n.add(p)):(e.append(l,c),n.delete(p))}}return{[Kg]:!0,values:e,nulls:n}};const fu=t=>{var e,n,o,s,l,c;if(typeof globalThis.process<"u")return(o=(n=(e=mE)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,t))===null||c===void 0?void 0:c.trim()};var Yg;class ol{constructor(e){var n,o,s,l,c,p,m,{baseURL:h=fu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=fu("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:_="v1beta"}=e,E=zs(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:y,apiVersion:_},E),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(o=w.timeout)!==null&&o!==void 0?o:ol.DEFAULT_TIMEOUT,this.logger=(s=w.logger)!==null&&s!==void 0?s:console;const P="warn";this.logLevel=P,this.logLevel=(c=(l=Sm(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Sm(fu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:P,this.fetchOptions=w.fetchOptions,this.maxRetries=(p=w.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(m=w.fetch)!==null&&m!==void 0?m:PA(),this.encoder=kA,this._options=w,this.apiKey=y,this.apiVersion=_,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Wr([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Wr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Wr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new Lt(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ho}`}defaultIdempotencyKey(){return`stainless-node-retry-${pA()}`}makeStatusError(e,n,o,s){return ft.generate(e,n,o,s)}buildURL(e,n,o){const s=!this.baseURLOverridden()&&o||this.baseURL,l=mA(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return vA(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new vc(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var s,l,c;const p=await e,m=(s=p.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=m),await this.prepareOptions(p);const{req:h,url:y,timeout:_}=await this.buildRequest(p,{retryCount:m-n});await this.prepareRequest(h,{url:y,options:p});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=o===void 0?"":`, retryOf: ${o}`,P=Date.now();if(dt(this).debug(`[${E}] sending request`,so({retryOfRequestLogID:o,method:p.method,url:y,options:p,headers:h.headers})),!((l=p.signal)===null||l===void 0)&&l.aborted)throw new $u;const k=new AbortController,A=await this.fetchWithTimeout(y,h,_,k).catch(Hu),U=Date.now();if(A instanceof globalThis.Error){const b=`retrying, ${n} attempts remaining`;if(!((c=p.signal)===null||c===void 0)&&c.aborted)throw new $u;const H=Gu(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(n)return dt(this).info(`[${E}] connection ${H?"timed out":"failed"} - ${b}`),dt(this).debug(`[${E}] connection ${H?"timed out":"failed"} (${b})`,so({retryOfRequestLogID:o,url:y,durationMs:U-P,message:A.message})),this.retryRequest(p,n,o??E);throw dt(this).info(`[${E}] connection ${H?"timed out":"failed"} - error; no more retries left`),dt(this).debug(`[${E}] connection ${H?"timed out":"failed"} (error; no more retries left)`,so({retryOfRequestLogID:o,url:y,durationMs:U-P,message:A.message})),H?new Ng:new tl({cause:A})}const $=`[${E}${w}] ${h.method} ${y} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${U-P}ms`;if(!A.ok){const b=await this.shouldRetry(A);if(n&&b){const ee=`retrying, ${n} attempts remaining`;return await xA(A.body),dt(this).info(`${$} - ${ee}`),dt(this).debug(`[${E}] response error (${ee})`,so({retryOfRequestLogID:o,url:A.url,status:A.status,headers:A.headers,durationMs:U-P})),this.retryRequest(p,n,o??E,A.headers)}const H=b?"error; no more retries left":"error; not retryable";dt(this).info(`${$} - ${H}`);const F=await A.text().catch(ee=>Hu(ee).message),ae=SA(F),Y=ae?void 0:F;throw dt(this).debug(`[${E}] response error (${H})`,so({retryOfRequestLogID:o,url:A.url,status:A.status,headers:A.headers,message:Y,durationMs:Date.now()-P})),this.makeStatusError(A.status,ae,Y,A.headers)}return dt(this).info($),dt(this).debug(`[${E}] response start`,so({retryOfRequestLogID:o,url:A.url,status:A.status,headers:A.headers,durationMs:U-P})),{response:A,options:p,controller:k,requestLogID:E,retryOfRequestLogID:o,startTime:P}}async fetchWithTimeout(e,n,o,s){const l=n||{},{signal:c,method:p}=l,m=zs(l,["signal","method"]);c&&c.addEventListener("abort",()=>s.abort());const h=setTimeout(()=>s.abort(),o),y=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,_=Object.assign(Object.assign(Object.assign({signal:s.signal},y?{duplex:"half"}:{}),{method:"GET"}),m);p&&(_.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,s){var l;let c;const p=s?.get("retry-after-ms");if(p){const h=parseFloat(p);Number.isNaN(h)||(c=h)}const m=s?.get("retry-after");if(m&&!c){const h=parseFloat(m);Number.isNaN(h)?c=Date.parse(m)-Date.now():c=h*1e3}if(!(c&&0<=c&&c<60*1e3)){const h=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,h)}return await CA(c),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,c=Math.min(.5*Math.pow(2,l),8),p=1-Math.random()*.25;return c*p*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,s,l;const c=Object.assign({},e),{method:p,path:m,query:h,defaultBaseURL:y}=c,_=this.buildURL(m,h,y);"timeout"in c&&EA("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:E,body:w}=this.buildBody({options:c}),P=await this.buildHeaders({options:e,method:p,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:P},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:s}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let p=Wr([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),AA()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Wr([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:RA(e)}:this.encoder({body:e,headers:o})}}ol.DEFAULT_TIMEOUT=6e4;class et extends ol{constructor(){super(...arguments),this.interactions=new Wg(this)}}Yg=et;et.GeminiNextGenAPIClient=Yg;et.GeminiNextGenAPIClientError=Lt;et.APIError=ft;et.APIConnectionError=tl;et.APIConnectionTimeoutError=Ng;et.APIUserAbortError=$u;et.NotFoundError=Ug;et.ConflictError=Fg;et.RateLimitError=bg;et.BadRequestError=Mg;et.AuthenticationError=Lg;et.InternalServerError=Vg;et.PermissionDeniedError=Dg;et.UnprocessableEntityError=Og;et.toFile=UA;et.Interactions=Wg;function KA(t,e){const n={},o=u(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function YA(t,e){const n={},o=u(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function QA(t,e){const n={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function XA(t,e){const n={},o=u(t,["sdkHttpResponse"]);return o!=null&&d(n,["sdkHttpResponse"],o),n}function ZA(t,e,n){const o={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=u(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&d(e,["displayName"],s),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=u(t,["epochCount"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","epochCount"],l);const c=u(t,["learningRateMultiplier"]);if(c!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(u(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(u(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const p=u(t,["batchSize"]);e!==void 0&&p!=null&&d(e,["tuningTask","hyperparameters","batchSize"],p);const m=u(t,["learningRate"]);if(e!==void 0&&m!=null&&d(e,["tuningTask","hyperparameters","learningRate"],m),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(u(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(u(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(u(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(u(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function jA(t,e,n){const o={};let s=u(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const F=u(t,["validationDataset"]);e!==void 0&&F!=null&&d(e,["supervisedTuningSpec"],pu(F))}else if(s==="PREFERENCE_TUNING"){const F=u(t,["validationDataset"]);e!==void 0&&F!=null&&d(e,["preferenceOptimizationSpec"],pu(F))}else if(s==="DISTILLATION"){const F=u(t,["validationDataset"]);e!==void 0&&F!=null&&d(e,["distillationSpec"],pu(F))}const l=u(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&d(e,["tunedModelDisplayName"],l);const c=u(t,["description"]);e!==void 0&&c!=null&&d(e,["description"],c);let p=u(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const F=u(t,["epochCount"]);e!==void 0&&F!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],F)}else if(p==="PREFERENCE_TUNING"){const F=u(t,["epochCount"]);e!==void 0&&F!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],F)}else if(p==="DISTILLATION"){const F=u(t,["epochCount"]);e!==void 0&&F!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],F)}let m=u(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const F=u(t,["learningRateMultiplier"]);e!==void 0&&F!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],F)}else if(m==="PREFERENCE_TUNING"){const F=u(t,["learningRateMultiplier"]);e!==void 0&&F!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],F)}else if(m==="DISTILLATION"){const F=u(t,["learningRateMultiplier"]);e!==void 0&&F!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],F)}let h=u(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const F=u(t,["exportLastCheckpointOnly"]);e!==void 0&&F!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],F)}else if(h==="PREFERENCE_TUNING"){const F=u(t,["exportLastCheckpointOnly"]);e!==void 0&&F!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],F)}else if(h==="DISTILLATION"){const F=u(t,["exportLastCheckpointOnly"]);e!==void 0&&F!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],F)}let y=u(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const F=u(t,["adapterSize"]);e!==void 0&&F!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],F)}else if(y==="PREFERENCE_TUNING"){const F=u(t,["adapterSize"]);e!==void 0&&F!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],F)}else if(y==="DISTILLATION"){const F=u(t,["adapterSize"]);e!==void 0&&F!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],F)}let _=u(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const F=u(t,["tuningMode"]);e!==void 0&&F!=null&&d(e,["supervisedTuningSpec","tuningMode"],F)}const E=u(t,["customBaseModel"]);e!==void 0&&E!=null&&d(e,["customBaseModel"],E);let w=u(n,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const F=u(t,["batchSize"]);e!==void 0&&F!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],F)}let P=u(n,["config","method"]);if(P===void 0&&(P="SUPERVISED_FINE_TUNING"),P==="SUPERVISED_FINE_TUNING"){const F=u(t,["learningRate"]);e!==void 0&&F!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],F)}const k=u(t,["labels"]);e!==void 0&&k!=null&&d(e,["labels"],k);const A=u(t,["beta"]);e!==void 0&&A!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],A);const U=u(t,["baseTeacherModel"]);e!==void 0&&U!=null&&d(e,["distillationSpec","baseTeacherModel"],U);const $=u(t,["tunedTeacherModelSource"]);e!==void 0&&$!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],$);const b=u(t,["sftLossWeightMultiplier"]);e!==void 0&&b!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],b);const H=u(t,["outputUri"]);return e!==void 0&&H!=null&&d(e,["outputUri"],H),o}function eP(t,e){const n={},o=u(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const s=u(t,["preTunedModel"]);s!=null&&d(n,["preTunedModel"],s);const l=u(t,["trainingDataset"]);l!=null&&dP(l);const c=u(t,["config"]);return c!=null&&ZA(c,n),n}function tP(t,e){const n={},o=u(t,["baseModel"]);o!=null&&d(n,["baseModel"],o);const s=u(t,["preTunedModel"]);s!=null&&d(n,["preTunedModel"],s);const l=u(t,["trainingDataset"]);l!=null&&fP(l,n,e);const c=u(t,["config"]);return c!=null&&jA(c,n,e),n}function nP(t,e){const n={},o=u(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function oP(t,e){const n={},o=u(t,["name"]);return o!=null&&d(n,["_url","name"],o),n}function rP(t,e,n){const o={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=u(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=u(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function iP(t,e,n){const o={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const l=u(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=u(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function sP(t,e){const n={},o=u(t,["config"]);return o!=null&&rP(o,n),n}function lP(t,e){const n={},o=u(t,["config"]);return o!=null&&iP(o,n),n}function aP(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const l=u(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(p=>Qg(p))),d(n,["tuningJobs"],c)}return n}function uP(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const l=u(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(p=>Ju(p))),d(n,["tuningJobs"],c)}return n}function cP(t,e){const n={},o=u(t,["name"]);o!=null&&d(n,["model"],o);const s=u(t,["name"]);return s!=null&&d(n,["endpoint"],s),n}function dP(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=u(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),d(n,["examples","examples"],s)}return n}function fP(t,e,n){const o={};let s=u(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const c=u(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(s==="PREFERENCE_TUNING"){const c=u(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(s==="DISTILLATION"){const c=u(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["distillationSpec","promptDatasetUri"],c)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=u(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=u(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(l==="DISTILLATION"){const c=u(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["distillationSpec","promptDatasetUri"],c)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Qg(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["name"]);s!=null&&d(n,["name"],s);const l=u(t,["state"]);l!=null&&d(n,["state"],fg(l));const c=u(t,["createTime"]);c!=null&&d(n,["createTime"],c);const p=u(t,["tuningTask","startTime"]);p!=null&&d(n,["startTime"],p);const m=u(t,["tuningTask","completeTime"]);m!=null&&d(n,["endTime"],m);const h=u(t,["updateTime"]);h!=null&&d(n,["updateTime"],h);const y=u(t,["description"]);y!=null&&d(n,["description"],y);const _=u(t,["baseModel"]);_!=null&&d(n,["baseModel"],_);const E=u(t,["_self"]);return E!=null&&d(n,["tunedModel"],cP(E)),n}function Ju(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["name"]);s!=null&&d(n,["name"],s);const l=u(t,["state"]);l!=null&&d(n,["state"],fg(l));const c=u(t,["createTime"]);c!=null&&d(n,["createTime"],c);const p=u(t,["startTime"]);p!=null&&d(n,["startTime"],p);const m=u(t,["endTime"]);m!=null&&d(n,["endTime"],m);const h=u(t,["updateTime"]);h!=null&&d(n,["updateTime"],h);const y=u(t,["error"]);y!=null&&d(n,["error"],y);const _=u(t,["description"]);_!=null&&d(n,["description"],_);const E=u(t,["baseModel"]);E!=null&&d(n,["baseModel"],E);const w=u(t,["tunedModel"]);w!=null&&d(n,["tunedModel"],w);const P=u(t,["preTunedModel"]);P!=null&&d(n,["preTunedModel"],P);const k=u(t,["supervisedTuningSpec"]);k!=null&&d(n,["supervisedTuningSpec"],k);const A=u(t,["preferenceOptimizationSpec"]);A!=null&&d(n,["preferenceOptimizationSpec"],A);const U=u(t,["distillationSpec"]);U!=null&&d(n,["distillationSpec"],U);const $=u(t,["tuningDataStats"]);$!=null&&d(n,["tuningDataStats"],$);const b=u(t,["encryptionSpec"]);b!=null&&d(n,["encryptionSpec"],b);const H=u(t,["partnerModelTuningSpec"]);H!=null&&d(n,["partnerModelTuningSpec"],H);const F=u(t,["customBaseModel"]);F!=null&&d(n,["customBaseModel"],F);const ae=u(t,["experiment"]);ae!=null&&d(n,["experiment"],ae);const Y=u(t,["labels"]);Y!=null&&d(n,["labels"],Y);const le=u(t,["outputUri"]);le!=null&&d(n,["outputUri"],le);const ee=u(t,["pipelineJob"]);ee!=null&&d(n,["pipelineJob"],ee);const de=u(t,["serviceAccount"]);de!=null&&d(n,["serviceAccount"],de);const _e=u(t,["tunedModelDisplayName"]);_e!=null&&d(n,["tunedModelDisplayName"],_e);const Se=u(t,["veoTuningSpec"]);return Se!=null&&d(n,["veoTuningSpec"],Se),n}function pP(t,e){const n={},o=u(t,["sdkHttpResponse"]);o!=null&&d(n,["sdkHttpResponse"],o);const s=u(t,["name"]);s!=null&&d(n,["name"],s);const l=u(t,["metadata"]);l!=null&&d(n,["metadata"],l);const c=u(t,["done"]);c!=null&&d(n,["done"],c);const p=u(t,["error"]);return p!=null&&d(n,["error"],p),n}function pu(t,e){const n={},o=u(t,["gcsUri"]);o!=null&&d(n,["validationDatasetUri"],o);const s=u(t,["vertexDatasetResource"]);return s!=null&&d(n,["validationDatasetUri"],s),n}class hP extends hn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new po(fn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),l=await this.tuneMldevInternal(s);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Lu.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=oP(e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>Ju(y))}else{const h=nP(e);return p=Q("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>Qg(y))}}async listInternal(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=lP(e);return p=Q("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=uP(y),E=new Yh;return Object.assign(E,_),E})}else{const h=sP(e);return p=Q("tunedModels",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=aP(y),E=new Yh;return Object.assign(E,_),E})}}async cancel(e){var n,o,s,l;let c,p="",m={};if(this.apiClient.isVertexAI()){const h=YA(e);return p=Q("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=XA(y),E=new Qh;return Object.assign(E,_),E})}else{const h=KA(e);return p=Q("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:y.headers},E})),c.then(y=>{const _=QA(y),E=new Qh;return Object.assign(E,_),E})}}async tuneInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const p=tP(e,e);return l=Q("tuningJobs",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>Ju(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=eP(e);return l=Q("tunedModels",p._url),c=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>pP(m))}}}class mP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const gP=1024*1024*8,yP=3,vP=1e3,_P=2,Ws="x-goog-upload-status";async function EP(t,e,n){var o;const s=await Xg(t,e,n),l=await s?.json();if(((o=s?.headers)===null||o===void 0?void 0:o[Ws])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function SP(t,e,n){var o;const s=await Xg(t,e,n),l=await s?.json();if(((o=s?.headers)===null||o===void 0?void 0:o[Ws])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=sg(l),p=new dc;return Object.assign(p,c),p}async function Xg(t,e,n){var o,s;let l=0,c=0,p=new Uu(new Response),m="upload";for(l=t.size;c<l;){const h=Math.min(gP,l-c),y=t.slice(c,c+h);c+h>=l&&(m+=", finalize");let _=0,E=vP;for(;_<yP&&(p=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(h)}}}),!(!((o=p?.headers)===null||o===void 0)&&o[Ws]));)_++,await wP(E),E=E*_P;if(c+=h,((s=p?.headers)===null||s===void 0?void 0:s[Ws])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function CP(t){return{size:t.size,type:t.type}}function wP(t){return new Promise(e=>setTimeout(e,t))}class TP{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EP(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await SP(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CP(e)}}class IP{create(e,n,o){return new AP(e,n,o)}}class AP{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const wm="x-goog-api-key";class PP{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(wm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(wm,this.apiKey)}}}const RP="gl-node/";class xP{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new et({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=_E(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new PP(this.apiKey);this.apiClient=new CI({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:RP+"web",uploader:new TP,downloader:new mP}),this.models=new GI(this.apiClient),this.live=new UI(this.apiClient,s,new IP),this.batches=new YS(this.apiClient),this.chats=new kC(this.models,this.apiClient),this.caches=new PC(this.apiClient),this.files=new HC(this.apiClient),this.operations=new HI(this.apiClient),this.authTokens=new rA(this.apiClient),this.tunings=new hP(this.apiClient),this.fileSearchStores=new fA(this.apiClient)}}var Tm={};const kP={async predictImpulseProbability(t,e){if(!Tm.API_KEY)return .5;const n=new xP({apiKey:Tm.API_KEY}),o={timeSinceLastAction:Date.now()-(t.lastSeen||0),isNightTime:new Date().getHours()>22||new Date().getHours()<6,userBio:t.profile?.bio||"",adCopy:e.creative.text};try{const s=await n.models.generateContent({model:"gemini-3-flash-preview",contents:`Analise a inteno de compra. 
        Usurio: "${o.userBio}". 
        Contexto: Ativo h ${o.timeSinceLastAction}ms, Horrio local: ${new Date().getHours()}h.
        Anncio: "${o.adCopy}".
        Responda apenas um nmero entre 0.1 (baixa) e 1.0 (alta impulsividade).`}),l=parseFloat(s.text?.trim()||"0.5");return isNaN(l)?.5:l}catch{return .5}}},NP={getThrottleFactor(t){if(t.pricingModel==="commission")return 1;const e=new Date().getHours();return[7,8,12,13,18,19,20,21,22].includes(e)?1:.6}},MP={getScaleElasticity(t){const e=t.stats;return!e||e.views<5e3?1:((e.clicks+1)/(e.views+100),(e.conversions+1)/(e.clicks+10)<.02*.7&&t.budget>100?.5:1)}},LP={async runAuction(t,e){const n=t.filter(c=>c.status==="active"&&dE.match(c,e)&&ig.hasAvailableBudget(c)&&hE.shouldShow(c));if(n.length===0)return null;const o=Math.random(),l=(await Promise.all(n.map(async c=>{const p=NP.getThrottleFactor(c);if(o>p)return{campaign:c,finalScore:-1};const m=MP.getScaleElasticity(c);if(m<.6&&o>.3)return{campaign:c,finalScore:-1};const h=this.calculateBaseScore(c,e),y=await kP.predictImpulseProbability(e,c),_=rg.getHeuristicMultiplier(c.creative.text),w=Nu.getAttributedCampaigns().includes(c.id)?2.5:1;return{campaign:c,finalScore:h*y*_*m*w}}))).filter(c=>c.finalScore>0).sort((c,p)=>p.finalScore-c.finalScore)[0];return l?l.campaign:null},calculateBaseScore(t,e){const n=t.budget||1,o=t.stats||{views:1,clicks:0},s=(o.clicks+1)/(o.views+100),l=t.pricingModel==="commission"?3:1;return n*s*l}},Im={async getWinningAd(t){const e=te.getCurrentUser();if(!e)return null;const o=db.ads.getAll().filter(l=>l.placements?.includes(t)&&l.status==="active"),s=await LP.runAuction(o,e);return s?(Zt.trackMetric(s.id,"view"),this.formatAdForUI(s,t)):null},getAdsForPlacement(t){return db.ads.getAll().filter(n=>n.status==="active"&&n.placements?.includes(t)).map(n=>this.formatAdForUI(n,t))},formatAdForUI(t,e){const n=t.ownerEmail?`@${t.ownerEmail.split("@")[0]}`:"@Patrocinado",o=t.destinationType==="url"?t.targetUrl:`/group-landing/${t.targetGroupId}`,s=t.placementCtas?.[e]||t.ctaButton||"saiba mais";if(e==="marketplace")return{id:`ad_${t.id}`,title:t.name,price:0,category:"Destaque",location:"Patrocinado",description:t.creative.text,image:t.creative.mediaUrl,sellerId:t.ownerEmail,sellerName:n,timestamp:Date.now(),isAd:!0,adCampaignId:t.id,ctaText:s,ctaLink:o};{const l=t.creative.mediaType==="video";return{id:`ad_${t.id}`,authorId:t.ownerId,type:e==="reels"||l?"video":"photo",username:n,text:t.creative.text,image:l?void 0:t.creative.mediaUrl,video:l?t.creative.mediaUrl:void 0,time:"Patrocinado",timestamp:Date.now(),isPublic:!0,views:t.stats?.views||0,likes:0,comments:0,liked:!1,isAd:!0,adCampaignId:t.id,ctaText:s,ctaLink:o,location:"Patrocinado"}}}},DP={createCampaign:Zt.createCampaign,updateCampaignStatus:Zt.updateCampaignStatus,updateCampaign:Zt.updateCampaign,addBudget:Zt.addBudget,getCampaignPerformance:Zt.getCampaignPerformance,getMyCampaigns:Zt.getMyCampaigns,getCampaignById:Zt.getCampaignById,deleteCampaign:Zt.deleteCampaign,trackMetric:Zt.trackMetric,getWinningAd:t=>Im.getWinningAd(t),getAdsForPlacement:t=>Im.getAdsForPlacement(t)},Zr={createCampaign:async t=>(W.ads.add({...t,id:t.id||Date.now().toString(),status:t.status||"pending",timestamp:Date.now()}),!0),updateCampaignStatus:async(t,e)=>{const n=Zr.getCampaignById(t);return n?(n.status=e,W.ads.update(n),!0):!1},updateCampaign:async(t,e)=>{const n=Zr.getCampaignById(t);if(n){const o={...n,...e};return W.ads.update(o),!0}return!1},addBudget:async(t,e)=>{const n=Zr.getCampaignById(t);return n?(n.budget=(Number(n.budget)||0)+e,W.ads.update(n),!0):!1},getMyCampaigns:()=>{const t=te.getCurrentUser();if(!t)return[];const e=W.ads.getAll(),n=t.email.includes("test.com")||t.id.startsWith("u-mock");return e.length===0&&n?vs:e.filter(o=>o.ownerId===t.id||o.ownerEmail===t.email||n&&o.ownerId==="u-creator-002").sort((o,s)=>(s.timestamp||0)-(o.timestamp||0))},getCampaignById:t=>W.ads.getAll().find(e=>e.id===t)||vs.find(e=>e.id===t),getCampaignPerformance:async t=>{await new Promise(_=>setTimeout(_,800));const e=Zr.getCampaignById(t)||vs[0],n=t?t.split("").reduce((_,E)=>_+E.charCodeAt(0),0):42,o=(_,E,w=0)=>{const P=Math.sin(n+w)*1e4;return Math.floor((P-Math.floor(P))*(E-_+1))+_},s=e.stats?.views||o(5e3,25e3,1),l=Math.round(s*(1+o(5,40,2)/100)),c=e.stats?.clicks||Math.round(l*(o(15,65,3)/1e3)),p=e.stats?.conversions||Math.round(c*(o(20,120,4)/1e3)),m=Math.round(l/(1+o(1,8,5)/10)),h=e.budget||500,y=e.pricingModel==="commission"?0:Math.min(h,h*(o(10,90,32)/100));return{delivery:{impressions:l,reach:m,frequency:(l/m).toFixed(2),cpm:o(8,25,6)+o(0,99,7)/100},click:{clicks:c,ctr:c/l*100,cpc:o(0,2,8)+o(10,90,9)/100,engagement:o(2,8,10)+o(0,9,11)/10},conversion:{conversions:p,conversionRate:c>0?p/c*100:0,cpa:p>0?o(10,50,12)/p:0,conversionValue:p*(o(29,199,13)+.9)},financial:{totalBudget:h,spent:y,roas:o(2,12,14)+o(0,9,15)/10,roi:o(150,800,16),avgTicket:o(30,150,17)+.9,ltv:o(100,500,18)+.5},audience:{segmentation:o(0,1,19)?"Homens, 18-34":"Mulheres, 25-45",overlap:o(5,25,20),retention:o(40,85,21),saturation:o(0,1,22)?"Saudvel":"Estvel"},creative:{viewTime:`${o(5,45,23)}s`,completionRate:o(15,60,24),rejectionRate:o(2,15,25),score:(o(60,95,26)/10).toFixed(1)},funnel:{costPerView:o(1,10,27)/100,costPerClick:o(20,150,28)/100,dropOff:o(10,40,29),speed:`${o(1,5,30)} dias`},system:{precision:99.8,matchRate:94.2,latency:o(80,300,31)}}},deleteCampaign:async t=>W.ads.delete(t),getAdsForPlacement:t=>{const n=W.ads.getAll().filter(o=>o.status==="active"&&o.placements?.includes(t));return n.length===0?vs.filter(o=>o.placements.includes(t)):n},trackMetric:()=>{}},UP=lt?Zr:DP,hu={name:"BusinessWorker",async syncHighPriority(){const t=te.getCurrentUserEmail();if(!t){Gn.markReady("WALLET");return}try{await this.syncWallet(t)}catch{console.warn(" [Sync] Falha na sincronizao da carteira, operando local.")}finally{Gn.markReady("WALLET")}},async syncLowPriority(){const t=te.getCurrentUserEmail();if(t)try{await Promise.all([this.syncMyAds(t),this.syncMyProducts(t)])}catch{console.warn(" [Sync] Falha no background sync business.")}},async syncWallet(t){const e=await uE.getBalance(t),n=te.getCurrentUser();n&&(n.lastSeen=Date.now(),n.walletBalance=e,W.users.set(n))},async syncMyAds(t){await UP.getMyCampaigns()},async syncMyProducts(t){}},Ds={async performFullSync(){console.log(" [Sync Orchestrator] Iniciando Sequncia de Sincronizao Total...");try{await Promise.all([cu.syncHighPriority(),zp.syncHighPriority(),hu.syncHighPriority()]),await cu.syncLowPriority(),await hu.syncLowPriority(),Wo.setFullSyncComplete(),console.log(" [Sync Orchestrator] Sincronizao completa com sucesso.")}catch(t){console.error(" [Sync Orchestrator] Erro crtico na sequncia de sync:",t)}},async performBackgroundSync(){console.log(" [Sync Orchestrator] Batimento de Background..."),await Promise.all([zp.syncHighPriority(),hu.syncHighPriority(),cu.syncHighPriority()]),Wo.updateCheckpoint("global_background")}},mu=`${Be}/api/auth`;let Am=()=>{};const Fn={setUserUpdater(t){Am=t},async performLoginSync(t){db.users.set(t),localStorage.setItem("auth_token",t.token||"mock_token"),db.auth.setCurrentUserId(t.id),Am(t),Gn.markReady("AUTH"),lt||Ds.performFullSync().catch(console.error)},async login(t,e){if(lt){const c=kt.creator;return await this.performLoginSync(c),{user:c,nextStep:"/feed"}}const n=String(t||"").toLowerCase().trim(),o=await ti.hashPassword(e),s=await fetch(`${mu}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:o})}),l=await s.json();if(!s.ok)throw new Error(l.error||"Falha no login.");return l.user.token=l.token,await this.performLoginSync(l.user),{user:l.user,nextStep:l.user.isBanned?"/banned":l.user.isProfileCompleted?"/feed":"/complete-profile"}},async loginWithGoogle(t,e){if(lt){const s=kt.user;return await this.performLoginSync(s),{user:s,nextStep:"/feed"}}const n=await fetch(`${mu}/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({googleToken:t,referredBy:e||null})}),o=await n.json();if(!n.ok)throw new Error(o.error||"Falha no Google Auth.");return o.user.token=o.token,await this.performLoginSync(o.user),{user:o.user,nextStep:o.user.isBanned?"/banned":o.isNew?"/complete-profile":"/feed"}},async register(t,e,n){if(!t)throw new Error("E-mail  obrigatrio.");const o=String(t).toLowerCase().trim(),s=await ti.hashPassword(e);localStorage.setItem("temp_register_email",o),localStorage.setItem("temp_register_pw",s),n&&localStorage.setItem("temp_referred_by_id",n),await this.sendVerificationCode(o)},async verifyCode(t,e,n=!1){if(lt)return!0;if(!t)throw new Error("E-mail no identificado para verificao.");const o=String(t).toLowerCase().trim(),s=JSON.parse(localStorage.getItem(`verify_${o}`)||"{}");if(!s.code||Date.now()>s.expiresAt)throw new Error(Au.CODE_EXPIRED);if(s.code!==e)throw new Error(Au.CODE_INVALID);if(!n){const l=await fetch(`${Be}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:localStorage.getItem("temp_register_pw"),isVerified:!0,referredById:localStorage.getItem("temp_referred_by_id")||void 0,profile:{name:o.split("@")[0].replace(/[^a-z0-9]/g,""),nickname:"Novo Usurio",isPrivate:!1}})}),c=await l.json();if(!l.ok)throw new Error(c.error);c.user.token="session_"+Date.now(),await this.performLoginSync(c.user)}return!0},async sendVerificationCode(t,e="register"){if(!t)return;const n=String(t).toLowerCase().trim(),o=Math.floor(1e5+Math.random()*9e5).toString();localStorage.setItem(`verify_${n}`,JSON.stringify({code:o,expiresAt:Date.now()+9e5})),lt?alert(`[DEMO] Cdigo: ${o}`):await og.sendVerificationCode(n,o,e)},async resetPassword(t,e){if(!t)throw new Error("E-mail  obrigatrio.");const n=String(t).toLowerCase().trim(),o=await ti.hashPassword(e);return(await fetch(`${mu}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:o})})).json()}},Pm=`${Be}/api/users`,$o={async syncRemoteUsers(t){try{const e=await fetch(`${Pm}/sync`);if(e.ok){const n=await e.json();n&&Array.isArray(n.users)&&n.users.forEach(o=>{t&&o.id===t||db.users.set(o)})}}catch{console.warn(" [Sync] Falha ao sincronizar usurios.")}},async searchUsers(t){try{const e=await fetch(`${Pm}/search?q=${encodeURIComponent(t)}`);if(e.ok)return await e.json()||[]}catch{console.warn("Search fetch failed")}return[]},async fetchUserByHandle(t,e){if(!t)return;const n=t.replace("@","").toLowerCase().trim(),s=(await this.searchUsers(n)).find(l=>l.profile?.name===n);return s&&db.users.set(s),s},getUserByHandle(t){const e=t.replace("@","").toLowerCase().trim();return Object.values(db.users.getAll()).find(n=>n.profile?.name===e)},getAllUsers(){return Object.values(db.users.getAll())}},Rm=`${Be}/api/auth`,As={updateHeartbeat(t){if(!t)return;const e=db.users.get(t);e&&(e.lastSeen=Date.now(),db.users.set(e))},getUserSessions(t){return t?db.users.get(t)?.sessions||[]:[]},async revokeOtherSessions(t){try{await fetch(`${Rm}/sessions/revoke-others`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})})}catch{console.error("Revoke sessions failed")}},async changePassword(t,e,n){const o=await ti.hashPassword(e),s=await ti.hashPassword(n),l=await fetch(`${Rm}/change-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,currentPassword:o,newPassword:s})});if(!l.ok){const c=await l.json();throw new Error(c.error||"Erro ao mudar senha.")}return!0}},FP=`${Be}/api/users`,xm={async completeProfile(t,e){const n=await fetch(`${FP}/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.toLowerCase().trim(),updates:{profile:e,isProfileCompleted:!0}})}),o=await n.json();if(!n.ok)throw new Error(o.error||"Erro ao atualizar perfil.");return db.users.set(o.user),localStorage.setItem("cached_user_profile",JSON.stringify(o.user)),o.user},async checkUsernameAvailability(t){return!(await $o.searchUsers(t)).some(n=>n.profile?.name===t.toLowerCase())}},gu=`${Be}/api/users`,Ps={async updateNotificationSettings(t,e){await fetch(`${gu}/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,updates:{notificationSettings:e}})})},async updateSecuritySettings(t,e){await fetch(`${gu}/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,updates:{securitySettings:e}})})},async updatePaymentConfig(t,e){if(!t)throw new Error("E-mail do usurio no identificado.");const n=await fetch(`${gu}/update-payment-config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.toLowerCase().trim(),provider:e.providerId,isConnected:e.isConnected})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Falha ao sincronizar configurao de pagamento.")}const o=await n.json();o.user&&(localStorage.setItem("cached_user_profile",JSON.stringify(o.user)),window.dispatchEvent(new Event("storage")))}};let ao=[],en=null;try{const t=localStorage.getItem("cached_user_profile");t&&(en=JSON.parse(t))}catch{en=null}const OP=()=>{for(const t of ao)t(en)},Zg=t=>{en=t,t?(localStorage.setItem("cached_user_profile",JSON.stringify(t)),localStorage.setItem("user_id",t.id)):(localStorage.removeItem("cached_user_profile"),localStorage.removeItem("user_id"),localStorage.removeItem("auth_token")),OP()},bP=()=>{const[t,e]=Bs.useState(en);return Bs.useEffect(()=>{const n=o=>e(o);return ao.push(n),()=>{ao=ao.filter(o=>o!==n)}},[]),t};Fn.setUserUpdater(Zg);const jt={subscribe:t=>(ao.push(t),t(en),()=>{ao=ao.filter(e=>e!==t)}),useAuth:bP,isValidEmail:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),isAuthenticated:()=>!!en&&!!localStorage.getItem("auth_token"),syncRemoteUsers:()=>$o.syncRemoteUsers(jt.getCurrentUserId()),searchUsers:t=>$o.searchUsers(t),fetchUserByHandle:(t,e)=>$o.fetchUserByHandle(t,e),getUserByHandle:t=>$o.getUserByHandle(t),getAllUsers:()=>$o.getAllUsers(),login:Fn.login,loginWithGoogle:Fn.loginWithGoogle,register:Fn.register,verifyCode:Fn.verifyCode,sendVerificationCode:Fn.sendVerificationCode,resetPassword:Fn.resetPassword,performLoginSync:t=>Fn.performLoginSync(t),updateHeartbeat:()=>As.updateHeartbeat(jt.getCurrentUserId()),getUserSessions:()=>As.getUserSessions(jt.getCurrentUserEmail()),revokeOtherSessions:()=>{const t=jt.getCurrentUserEmail();return t?As.revokeOtherSessions(t):Promise.resolve()},changePassword:(t,e)=>{const n=jt.getCurrentUserEmail();if(!n)throw new Error("No autenticado");return As.changePassword(n,t,e)},completeProfile:(t,e)=>xm.completeProfile(t,e),checkUsernameAvailability:t=>xm.checkUsernameAvailability(t),updateNotificationSettings:t=>{const e=jt.getCurrentUserEmail();return e?Ps.updateNotificationSettings(e,t):Promise.resolve()},updateSecuritySettings:t=>{const e=jt.getCurrentUserEmail();return e?Ps.updateSecuritySettings(e,t):Promise.resolve()},updatePaymentConfig:t=>{const e=jt.getCurrentUserEmail();if(!e){const n=jt.getCurrentUser();if(n?.email)return Ps.updatePaymentConfig(n.email,t);throw new Error("Usurio no identificado para salvar configurao.")}return Ps.updatePaymentConfig(e,t)},getCurrentUserId:()=>en?.id||null,getCurrentUserEmail:()=>en?.email||null,getCurrentUser:()=>en,logout:()=>{Zg(null),W.auth.clearSession(),sessionStorage.clear(),uo.hardReset(),window.location.href="/#/"}},Kr="auth_token",io="cached_user_profile",Yr="user_id",Us={isValidEmail:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),isAuthenticated:()=>!!localStorage.getItem(Kr),login:async(t,e)=>{const n=t.toLowerCase().trim();let o=Object.values(kt).find(s=>s.email===n);o||(o={id:"u-mock-"+Math.random().toString(36).substr(2,5),email:n,isVerified:!0,isProfileCompleted:!0,profile:{name:n.split("@")[0],nickname:"Usurio Teste",isPrivate:!1,photoUrl:`https://api.dicebear.com/7.x/avataaars/svg?seed=${n}`}}),localStorage.setItem(Kr,"mock_token_"+Date.now()),localStorage.setItem(io,JSON.stringify(o)),localStorage.setItem(Yr,o.id);try{W.users.set(o)}catch{}return{user:o,nextStep:o.isProfileCompleted?"/feed":"/complete-profile"}},loginWithGoogle:async(t,e)=>{const n=kt.creator;localStorage.setItem(Kr,"mock_token_google_"+Date.now()),localStorage.setItem(io,JSON.stringify(n)),localStorage.setItem(Yr,n.id);try{W.users.set(n)}catch{}return{user:n,nextStep:"/feed"}},register:async(t,e,n)=>(localStorage.setItem("temp_register_email",t.toLowerCase().trim()),!0),verifyCode:async(t,e)=>{const n={id:"u-"+Math.random().toString(36).substr(2,9),email:t.toLowerCase().trim(),isVerified:!0,isProfileCompleted:!1,profile:{name:t.split("@")[0],isPrivate:!1}};return localStorage.setItem(Kr,"mock_token_"+Date.now()),localStorage.setItem(io,JSON.stringify(n)),localStorage.setItem(Yr,n.id),!0},sendVerificationCode:async t=>{console.log("[MOCK] Cdigo: 123456")},completeProfile:async(t,e)=>{const n=Us.getCurrentUser();if(n){n.profile=e,n.isProfileCompleted=!0,localStorage.setItem(io,JSON.stringify(n));try{W.users.set(n)}catch{}return n}throw new Error("Sesso expirada")},getCurrentUserId:()=>localStorage.getItem(Yr),getCurrentUserEmail:()=>Us.getCurrentUser()?.email||null,getCurrentUser:()=>{const t=localStorage.getItem(io);if(!t)return null;try{return JSON.parse(t)}catch{return null}},logout:()=>{localStorage.removeItem(Kr),localStorage.removeItem(io),localStorage.removeItem(Yr),window.location.href="/#/"},getAllUsers:()=>Object.values(kt),searchUsers:async t=>{const e=t.toLowerCase();return Object.values(kt).filter(n=>n.profile?.name?.toLowerCase().includes(e)||n.profile?.nickname?.toLowerCase().includes(e))},fetchUserByHandle:async t=>{const e=t.replace("@","").toLowerCase();return Object.values(kt).find(n=>n.profile?.name===e)},getUserByHandle:t=>{const e=t.replace("@","").toLowerCase();return Object.values(kt).find(n=>n.profile?.name===e)},updateHeartbeat:()=>{},checkUsernameAvailability:async()=>!0,updateNotificationSettings:async()=>{},updateSecuritySettings:async()=>{},updatePaymentConfig:async t=>{const e=Us.getCurrentUser();if(e){const n=e.paymentConfigs||{};t.isConnected?(n[t.providerId]=t,e.paymentConfig=t):(delete n[t.providerId],e.paymentConfig?.providerId===t.providerId&&delete e.paymentConfig),e.paymentConfigs={...n},localStorage.setItem(io,JSON.stringify(e));try{W.users.set(e),window.dispatchEvent(new Event("storage"))}catch{}}},getUserSessions:()=>[],revokeOtherSessions:async()=>{},resetPassword:async()=>({success:!0}),changePassword:async(t,e)=>({success:!0}),syncRemoteUsers:async()=>{Object.values(kt).forEach(t=>W.users.set(t))}},te=lt?Us:jt,VP={detectCountry:async()=>{try{const e=await(await fetch("https://ipwho.is/")).json();if(e.success)return{countryCode:e.country_code,countryName:e.country,currency:e.currency.code,ip:e.ip};throw new Error("GeoIP primary failed")}catch{try{const n=await(await fetch("https://ipapi.co/json/")).json();return{countryCode:n.country_code,countryName:n.country_name,currency:n.currency,ip:n.ip}}catch{return{countryCode:"BR",countryName:"Brazil",currency:"BRL",ip:"0.0.0.0"}}}}},yu="flux_traffic_origin",BP={capture:()=>{const t=new URLSearchParams(window.location.search),e={},n=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","fbclid","ttclid","gclid"];let o=!1;n.forEach(s=>{const l=t.get(s);l&&(e[s]=l,o=!0)}),o&&(localStorage.setItem(yu,JSON.stringify({...e,timestamp:Date.now()})),console.log(" [TrafficSource] Origem de trfego capturada:",e))},getOriginData:()=>{const t=localStorage.getItem(yu);if(!t)return{};try{const e=JSON.parse(t);return Date.now()-e.timestamp>720*60*60*1e3?(localStorage.removeItem(yu),{}):e}catch{return{}}}},km={async buildUserData(t){const e=te.getCurrentUser(),n=BP.getOriginData(),o=await VP.detectCountry(),s=m=>{if(typeof document>"u")return;const y=`; ${document.cookie}`.split(`; ${m}=`);if(y.length===2)return y.pop()?.split(";").shift()},l=s("_fbp"),c=s("_fbc")||n.fbclid,p={email:t?.email||e?.email||localStorage.getItem("guest_email_capture")||void 0,phone:t?.phone||e?.profile?.phone||void 0,firstName:t?.firstName||e?.profile?.nickname||e?.profile?.name||void 0,externalId:e?.id||void 0,country:o?.countryCode||"BR",userAgent:navigator.userAgent,fbp:l,fbc:c,ip:o?.ip||"0.0.0.0"};return await jm(p)},buildEventData(t,e){return{...e,event_source_url:window.location.href,action_source:Xo.isNativePlatform()?"app":"website"}}};class GP{config={};processingEvents=new Set;init(e){this.config=e,e.metaId&&bp.init(e.metaId)}async track(e,n={},o={}){const s=this.config.metaId;if(!s)return;const l=n.content_ids?.[0]||"global",c=`${s}_${e}_${l}`;if(!this.processingEvents.has(c)&&Gp.canTrack(e,s,l)){lo.isSingleton(e)&&(this.processingEvents.add(c),Gp.markAsTracked(e,s,l));try{const p=await km.buildUserData(o),m=km.buildEventData(e,n),h=await O_(e,p.email||p.fbp||"anon",l),y={...m,event_id:h};lo.shouldRouteToBrowser(e)?await bp.track(e,y,p):lo.shouldRouteToCapi(e)&&this.config.pixelToken&&(await F_.track(s,this.config.pixelToken,e,h,y,p),console.debug(` [Pixel:CAPI] ${e} enviado com sucesso.`))}catch(p){console.error(` [PixelOrchestrator] Falha ao trackear ${e}:`,p)}finally{setTimeout(()=>this.processingEvents.delete(c),2e3)}}}}const Go=new GP,Ks={init:(t,e)=>{Go.init({metaId:t,pixelToken:e})},trackPageView:t=>{Ks.init(t),Go.track("PageView")},trackRecruitmentAccess:async t=>{if(t)try{const e=await fetch(`${Be}/api/tracking/pixel-info?ref=${encodeURIComponent(t)}`);if(e.ok){const{pixelId:n,pixelToken:o}=await e.json();n&&(Ks.init(n,o),Go.track("PageView"))}}catch{console.warn("[Pixel] Falha ao carregar pixel de afiliado.")}},trackLead:(t,e,n)=>{Go.track("Lead",{content_ids:n?[n]:[],content_type:"product_group"},e)},trackViewContent:(t,e,n)=>{Go.track("ViewContent",e,n)},trackInitiateCheckout:(t,e,n)=>{Go.track("InitiateCheckout",e,n)}},HP=t=>{try{const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));if(e)return e[2]}catch{return}};var $P={};const qP=()=>{const t=fo();return M.useEffect(()=>{uo.captureUrlParams();const e=uo.getAffiliateRef();e&&Ks.trackRecruitmentAccess(e);const n=$P.VITE_PIXEL_ID||"";n&&Ks.trackPageView(n)},[t]),null},zP="modulepreload",JP=function(t){return"/"+t},Nm={},X=function(e,n,o){let s=Promise.resolve();if(n&&n.length>0){let m=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=c?.nonce||c?.getAttribute("nonce");s=m(n.map(h=>{if(h=JP(h),h in Nm)return;Nm[h]=!0;const y=h.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const E=document.createElement("link");if(E.rel=y?"stylesheet":zP,y||(E.as="script"),E.crossOrigin="",E.href=h,p&&E.setAttribute("nonce",p),document.head.appendChild(E),y)return new Promise((w,P)=>{E.addEventListener("load",w),E.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${h}`)))})}))}function l(c){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=c,window.dispatchEvent(p),!p.defaultPrevented)throw c}return s.then(c=>{for(const p of c||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})},WP=lc("App",{web:()=>X(()=>import("./web-DAQU_HZw.js"),[]).then(t=>new t.AppWeb)}),KP=()=>{const t=sc();return M.useEffect(()=>{const e=WP.addListener("appUrlOpen",n=>{console.log(" Deep Link Opened:",n.url);try{const o=new URL(n.url),s=o.pathname,l=o.search;uo.captureUrlParams(),["vip-group-sales","group-landing","post/","user/","chat/","product/","reset-password"].some(p=>s.includes(p))&&t(s+l)}catch(o){console.error("Erro ao processar Deep Link",o)}});return()=>{e.then(n=>n.remove())}},[t]),null},YP=M.lazy(()=>X(()=>import("./Login-CPLZMK0H.js"),[]).then(t=>({default:t.Login}))),QP=M.lazy(()=>X(()=>import("./Register-D9G8JU9G.js"),[]).then(t=>({default:t.Register}))),XP=M.lazy(()=>X(()=>import("./VerifyEmail-BQp6mH_M.js"),__vite__mapDeps([0,1])).then(t=>({default:t.VerifyEmail}))),ZP=M.lazy(()=>X(()=>import("./ForgotPassword-Df-YXgOl.js"),__vite__mapDeps([2,1])).then(t=>({default:t.ForgotPassword}))),jP=M.lazy(()=>X(()=>import("./ResetPassword-BvRo9X7w.js"),[]).then(t=>({default:t.ResetPassword}))),eR=M.lazy(()=>X(()=>import("./Banned-Bo4KPvvu.js"),[]).then(t=>({default:t.Banned}))),tR=[C.jsx(K,{path:"/",element:C.jsx(YP,{})},"login"),C.jsx(K,{path:"/register",element:C.jsx(QP,{})},"register"),C.jsx(K,{path:"/verify-email",element:C.jsx(XP,{})},"verify-email"),C.jsx(K,{path:"/forgot-password",element:C.jsx(ZP,{})},"forgot-password"),C.jsx(K,{path:"/reset-password",element:C.jsx(jP,{})},"reset-password"),C.jsx(K,{path:"/banned",element:C.jsx(eR,{})},"banned")],nR=()=>C.jsx("div",{className:"h-screen w-full bg-[#0c0f14] flex items-center justify-center",children:C.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-[#00c2ff] text-2xl"})}),j=({children:t})=>{const[e,n]=M.useState(void 0),o=fo();return M.useEffect(()=>{const s=te.subscribe(l=>{n(l)});return()=>s()},[]),e===void 0?C.jsx(nR,{}):e?e.isBanned?C.jsx(wu,{to:"/banned",replace:!0}):C.jsx(C.Fragment,{children:t}):(o.pathname!=="/"&&!o.pathname.includes("login")&&sessionStorage.setItem("redirect_after_login",o.pathname+o.search),C.jsx(wu,{to:"/",state:{from:o},replace:!0}))},oR=M.lazy(()=>X(()=>import("./Feed-jvoR9924.js"),__vite__mapDeps([3,4,5,6,7,8,9,10])).then(t=>({default:t.Feed}))),rR=M.lazy(()=>X(()=>import("./PostDetails-BY5olW9B.js"),__vite__mapDeps([11,4,6,7,8,12,13])).then(t=>({default:t.PostDetails}))),iR=M.lazy(()=>X(()=>import("./CreatePost-DOQPxxE-.js"),__vite__mapDeps([14,4,15,16])).then(t=>({default:t.CreatePost}))),sR=M.lazy(()=>X(()=>import("./CreatePoll-HyDbaVdH.js"),__vite__mapDeps([17,4,16])).then(t=>({default:t.CreatePoll}))),Mm=M.lazy(()=>X(()=>import("./Reels-_uciQtRE.js"),__vite__mapDeps([18,19,4,7,8,20,13,5,12])).then(t=>({default:t.Reels}))),lR=M.lazy(()=>X(()=>import("./CreateReel-BKELwJbg.js"),__vite__mapDeps([21,19,4,15])).then(t=>({default:t.CreateReel}))),aR=M.lazy(()=>X(()=>import("./ReelsSearch-CsuyqrBy.js"),__vite__mapDeps([22,19,4])).then(t=>({default:t.ReelsSearch}))),uR=M.lazy(()=>X(()=>import("./FeedSearch-lrFLhffR.js"),__vite__mapDeps([23,4,6,7,8])).then(t=>({default:t.FeedSearch}))),cR=[C.jsx(K,{path:"/feed",element:C.jsx(j,{children:C.jsx(oR,{})})},"feed"),C.jsx(K,{path:"/post/:id",element:C.jsx(j,{children:C.jsx(rR,{})})},"post-details"),C.jsx(K,{path:"/create-post",element:C.jsx(j,{children:C.jsx(iR,{})})},"create-post"),C.jsx(K,{path:"/create-poll",element:C.jsx(j,{children:C.jsx(sR,{})})},"create-poll"),C.jsx(K,{path:"/reels",element:C.jsx(j,{children:C.jsx(Mm,{})})},"reels"),C.jsx(K,{path:"/reels/:id",element:C.jsx(j,{children:C.jsx(Mm,{})})},"reel-specific"),C.jsx(K,{path:"/reels-search",element:C.jsx(j,{children:C.jsx(aR,{})})},"reels-search"),C.jsx(K,{path:"/feed-search",element:C.jsx(j,{children:C.jsx(uR,{})})},"feed-search"),C.jsx(K,{path:"/create-reel",element:C.jsx(j,{children:C.jsx(lR,{})})},"create-reel")],dR=M.lazy(()=>X(()=>import("./Groups-48rbjcdc.js"),__vite__mapDeps([24,9,10])).then(t=>({default:t.Groups}))),Lm=M.lazy(()=>X(()=>import("./GroupChat-BOOQFcAc.js"),__vite__mapDeps([25,26])).then(t=>({default:t.GroupChat}))),fR=M.lazy(()=>X(()=>import("./GroupLanding-CdwLajI3.js"),[]).then(t=>({default:t.GroupLanding}))),pR=M.lazy(()=>X(()=>import("./CreateGroup-BVHV7f95.js"),[]).then(t=>({default:t.CreateGroup}))),hR=M.lazy(()=>X(()=>import("./CreateVipGroup-B-k5D7HV.js"),__vite__mapDeps([27,4,16,28,29,30,31,32])).then(t=>({default:t.CreateVipGroup}))),mR=M.lazy(()=>X(()=>import("./CreatePublicGroup-CeXb5SKy.js"),__vite__mapDeps([33,4,31,16])).then(t=>({default:t.CreatePublicGroup}))),gR=M.lazy(()=>X(()=>import("./CreatePrivateGroup-BIHNtHjK.js"),__vite__mapDeps([34,4,31,16])).then(t=>({default:t.CreatePrivateGroup}))),yR=M.lazy(()=>X(()=>import("./EditGroup-1GxT8un-.js"),__vite__mapDeps([35,4,29,32])).then(t=>({default:t.EditGroup}))),vR=M.lazy(()=>X(()=>import("./VipGroupSales-pzwn4GeT.js"),__vite__mapDeps([36,37,38,39,40])).then(t=>({default:t.VipGroupSales}))),_R=M.lazy(()=>X(()=>import("./GroupSettings-EiumkGWN.js"),__vite__mapDeps([41,42,43])).then(t=>({default:t.GroupSettings}))),ER=M.lazy(()=>X(()=>import("./SuccessBridge-DFT6KgaJ.js"),__vite__mapDeps([44,45])).then(t=>({default:t.SuccessBridge}))),SR=M.lazy(()=>X(()=>import("./GroupInfoPage-DqJU4nDH.js"),__vite__mapDeps([46,42])).then(t=>({default:t.GroupInfoPage}))),CR=M.lazy(()=>X(()=>import("./GroupAccessPage-DxBV5FnV.js"),__vite__mapDeps([47,42])).then(t=>({default:t.GroupAccessPage}))),wR=M.lazy(()=>X(()=>import("./GroupModerationPage-DiNRq9Tm.js"),__vite__mapDeps([48,42])).then(t=>({default:t.GroupModerationPage}))),TR=M.lazy(()=>X(()=>import("./GroupMembersPage-DketAI7d.js"),__vite__mapDeps([49,42])).then(t=>({default:t.GroupMembersPage}))),IR=M.lazy(()=>X(()=>import("./GroupVipPage-DxdtFw0P.js"),__vite__mapDeps([50,42,28,30,4,32])).then(t=>({default:t.GroupVipPage}))),AR=M.lazy(()=>X(()=>import("./GroupStatisticsPage-BdHXjUn5.js"),__vite__mapDeps([51,42])).then(t=>({default:t.GroupStatisticsPage}))),PR=M.lazy(()=>X(()=>import("./GroupAuditLogs-Cd_4ktBc.js"),[]).then(t=>({default:t.GroupAuditLogs}))),RR=M.lazy(()=>X(()=>import("./GroupChannelsPage-CqTvQC8H.js"),__vite__mapDeps([52,42,53])).then(t=>({default:t.GroupChannelsPage}))),xR=M.lazy(()=>X(()=>import("./GroupSchedule-D2xwrIRu.js"),[]).then(t=>({default:t.GroupSchedule}))),kR=M.lazy(()=>X(()=>import("./GroupSalesPlatformPage-DrpHhpU0.js"),__vite__mapDeps([54,42,53])).then(t=>({default:t.GroupSalesPlatformPage}))),NR=M.lazy(()=>X(()=>import("./GroupSalesPlatformView-BqVZDLH1.js"),__vite__mapDeps([55,56])).then(t=>({default:t.GroupSalesPlatformView}))),MR=M.lazy(()=>X(()=>import("./SalesFolderContentPage-DGn4_abc.js"),__vite__mapDeps([57,4,32])).then(t=>({default:t.SalesFolderContentPage}))),LR=M.lazy(()=>X(()=>import("./GroupRolesPage-B09BEH03.js"),__vite__mapDeps([58,42])).then(t=>({default:t.GroupRolesPage}))),DR=M.lazy(()=>X(()=>import("./GroupChannelsList-BSya_NNy.js"),__vite__mapDeps([59,56])).then(t=>({default:t.GroupChannelsList}))),UR=M.lazy(()=>X(()=>import("./GroupCheckoutConfigPage-DvPZoiIF.js"),__vite__mapDeps([60,61])).then(t=>({default:t.GroupCheckoutConfigPage}))),FR=M.lazy(()=>X(()=>import("./LimitAndControl-DxFoI95z.js"),[]).then(t=>({default:t.LimitAndControl}))),OR=M.lazy(()=>X(()=>import("./ManageGroupLinks-4SoIzR7F.js"),[]).then(t=>({default:t.ManageGroupLinks}))),bR=M.lazy(()=>X(()=>import("./GroupRevenue-Cx_svrRt.js"),__vite__mapDeps([62,39])).then(t=>({default:t.GroupRevenue}))),VR=M.lazy(()=>X(()=>import("./VipSalesHistory-G8VobXtX.js"),[]).then(t=>({default:t.VipSalesHistory}))),BR=[C.jsx(K,{path:"/groups",element:C.jsx(j,{children:C.jsx(dR,{})})},"groups"),C.jsx(K,{path:"/group-chat/:id",element:C.jsx(j,{children:C.jsx(Lm,{})})},"group-chat"),C.jsx(K,{path:"/group-chat/:id/:channelId",element:C.jsx(j,{children:C.jsx(Lm,{})})},"group-chat-channel"),C.jsx(K,{path:"/group/:id/channels",element:C.jsx(j,{children:C.jsx(DR,{})})},"group-channels"),C.jsx(K,{path:"/group-landing/:id",element:C.jsx(fR,{})},"group-landing"),C.jsx(K,{path:"/vip-group-sales/:id",element:C.jsx(vR,{})},"vip-sales"),C.jsx(K,{path:"/create-group",element:C.jsx(j,{children:C.jsx(pR,{})})},"create-group"),C.jsx(K,{path:"/create-group/vip",element:C.jsx(j,{children:C.jsx(hR,{})})},"create-group-vip"),C.jsx(K,{path:"/create-group/public",element:C.jsx(j,{children:C.jsx(mR,{})})},"create-group-public"),C.jsx(K,{path:"/create-group/private",element:C.jsx(j,{children:C.jsx(gR,{})})},"create-group-private"),C.jsx(K,{path:"/edit-group/:id",element:C.jsx(j,{children:C.jsx(yR,{})})},"edit-group"),C.jsx(K,{path:"/payment-success-bridge/:id",element:C.jsx(j,{children:C.jsx(ER,{})})},"payment-success-bridge"),C.jsx(K,{path:"/group-settings/:id",element:C.jsx(j,{children:C.jsx(_R,{})})},"group-settings"),C.jsx(K,{path:"/group-settings/:id/info",element:C.jsx(j,{children:C.jsx(SR,{})})},"gs-info"),C.jsx(K,{path:"/group-settings/:id/access",element:C.jsx(j,{children:C.jsx(CR,{})})},"gs-access"),C.jsx(K,{path:"/group-settings/:id/moderation",element:C.jsx(j,{children:C.jsx(wR,{})})},"gs-mod"),C.jsx(K,{path:"/group-settings/:id/members",element:C.jsx(j,{children:C.jsx(TR,{})})},"gs-members"),C.jsx(K,{path:"/group-settings/:id/roles",element:C.jsx(j,{children:C.jsx(LR,{})})},"gs-roles"),C.jsx(K,{path:"/group-settings/:id/vip",element:C.jsx(j,{children:C.jsx(IR,{})})},"gs-vip"),C.jsx(K,{path:"/group-settings/:id/stats",element:C.jsx(j,{children:C.jsx(AR,{})})},"gs-stats"),C.jsx(K,{path:"/group-settings/:id/audit",element:C.jsx(j,{children:C.jsx(PR,{})})},"gs-audit"),C.jsx(K,{path:"/group-settings/:id/channels",element:C.jsx(j,{children:C.jsx(RR,{})})},"gs-channels"),C.jsx(K,{path:"/group-settings/:id/schedule",element:C.jsx(j,{children:C.jsx(xR,{})})},"gs-schedule"),C.jsx(K,{path:"/group-settings/:id/sales-platform",element:C.jsx(j,{children:C.jsx(kR,{})})},"gs-platform"),C.jsx(K,{path:"/group-settings/:id/checkout-config",element:C.jsx(j,{children:C.jsx(UR,{})})},"gs-checkout"),C.jsx(K,{path:"/group-platform/:id",element:C.jsx(j,{children:C.jsx(NR,{})})},"gp-view"),C.jsx(K,{path:"/group-folder/:groupId/:folderId",element:C.jsx(j,{children:C.jsx(MR,{})})},"gp-folder"),C.jsx(K,{path:"/group-limits/:id",element:C.jsx(j,{children:C.jsx(FR,{})})},"g-limits"),C.jsx(K,{path:"/group-links/:id",element:C.jsx(j,{children:C.jsx(OR,{})})},"g-links"),C.jsx(K,{path:"/group-revenue/:id",element:C.jsx(j,{children:C.jsx(bR,{})})},"g-rev"),C.jsx(K,{path:"/vip-sales-history/:id",element:C.jsx(j,{children:C.jsx(VR,{})})},"v-history")],GR=M.lazy(()=>X(()=>import("./Marketplace-Bz7XTYg5.js"),__vite__mapDeps([63,64,65,9])).then(t=>({default:t.Marketplace}))),HR=M.lazy(()=>X(()=>import("./ProductDetails_v2-BgLC8m-a.js"),__vite__mapDeps([66,64,20,13,4,67])).then(t=>({default:t.ProductDetailsV2}))),$R=M.lazy(()=>X(()=>import("./CreateMarketplaceItem-CcvM6XfH.js"),__vite__mapDeps([68,64,4,16])).then(t=>({default:t.CreateMarketplaceItem}))),qR=M.lazy(()=>X(()=>import("./MyStore-DrAyVmk6.js"),__vite__mapDeps([69,64,12,38,39])).then(t=>({default:t.MyStore}))),zR=M.lazy(()=>X(()=>import("./AdPlacementSelector-DG4NgdDv.js"),__vite__mapDeps([70,16,71,6,7,8,4,65,40])).then(t=>({default:t.AdPlacementSelector}))),JR=M.lazy(()=>X(()=>import("./CampaignPerformance-s9HTjCia.js"),__vite__mapDeps([72,71,6,7,8,4,65])).then(t=>({default:t.CampaignPerformance}))),WR=M.lazy(()=>X(()=>import("./AdCampaignTypeSelector-CIi2zDlQ.js"),__vite__mapDeps([73,74])).then(t=>({default:t.AdCampaignTypeSelector}))),KR=M.lazy(()=>X(()=>import("./AdContentSelector-B3o_gEwQ.js"),__vite__mapDeps([75,4,74,6,7,8])).then(t=>({default:t.AdContentSelector}))),YR=[C.jsx(K,{path:"/marketplace",element:C.jsx(j,{children:C.jsx(GR,{})})},"marketplace"),C.jsx(K,{path:"/marketplace/product/:id",element:C.jsx(j,{children:C.jsx(HR,{})})},"product-details"),C.jsx(K,{path:"/create-marketplace-item",element:C.jsx(j,{children:C.jsx($R,{})})},"create-product"),C.jsx(K,{path:"/my-store",element:C.jsx(j,{children:C.jsx(qR,{})})},"my-store"),C.jsx(K,{path:"/ad-placement-selector",element:C.jsx(j,{children:C.jsx(zR,{})})},"ad-placement"),C.jsx(K,{path:"/campaign-performance/:id",element:C.jsx(j,{children:C.jsx(JR,{})})},"ad-performance"),C.jsx(K,{path:"/ad-type-selector",element:C.jsx(j,{children:C.jsx(WR,{})})},"ad-type"),C.jsx(K,{path:"/ad-content-selector",element:C.jsx(j,{children:C.jsx(KR,{})})},"ad-content")],QR=M.lazy(()=>X(()=>import("./Profile-CgDq9kmE.js"),__vite__mapDeps([76,4,64,6,7,8,9,10,77,65])).then(t=>({default:t.Profile}))),XR=M.lazy(()=>X(()=>import("./UserProfile-CEuNYUBZ.js"),__vite__mapDeps([78,4,64,6,7,8,9,10,77,65])).then(t=>({default:t.UserProfile}))),ZR=M.lazy(()=>X(()=>import("./CompleteProfile-Dtua9Hi5.js"),__vite__mapDeps([79,4,31])).then(t=>({default:t.CompleteProfile}))),jR=M.lazy(()=>X(()=>import("./EditProfile-BPXXXH1A.js"),__vite__mapDeps([80,4,31])).then(t=>({default:t.EditProfile}))),ex=M.lazy(()=>X(()=>import("./GlobalSearch-sVONZqWS.js"),[]).then(t=>({default:t.GlobalSearch}))),tx=M.lazy(()=>X(()=>import("./Leaderboard-C-7N9KRR.js"),[]).then(t=>({default:t.Leaderboard}))),Dm=M.lazy(()=>X(()=>import("./TopGroups-DKWtl_et.js"),[]).then(t=>({default:t.TopGroups}))),nx=[C.jsx(K,{path:"/profile",element:C.jsx(j,{children:C.jsx(QR,{})})},"profile-me"),C.jsx(K,{path:"/user/:username",element:C.jsx(j,{children:C.jsx(XR,{})})},"profile-user"),C.jsx(K,{path:"/complete-profile",element:C.jsx(j,{children:C.jsx(ZR,{})})},"profile-complete"),C.jsx(K,{path:"/edit-profile",element:C.jsx(j,{children:C.jsx(jR,{})})},"profile-edit"),C.jsx(K,{path:"/global-search",element:C.jsx(j,{children:C.jsx(ex,{})})},"global-search"),C.jsx(K,{path:"/rank",element:C.jsx(j,{children:C.jsx(tx,{})})},"leaderboard"),C.jsx(K,{path:"/top-groups",element:C.jsx(j,{children:C.jsx(Dm,{})})},"top-groups"),C.jsx(K,{path:"/top-groups/:category",element:C.jsx(j,{children:C.jsx(Dm,{})})},"top-groups-cat")],ox=M.lazy(()=>X(()=>import("./Messages-DLtkgk53.js"),__vite__mapDeps([81,10,8])).then(t=>({default:t.Messages}))),rx=M.lazy(()=>X(()=>import("./Chat-BaGDi18z.js"),__vite__mapDeps([82,26])).then(t=>({default:t.Chat}))),ix=M.lazy(()=>X(()=>import("./BlockedUsers-BSFhq1Yl.js"),[]).then(t=>({default:t.BlockedUsers}))),sx=M.lazy(()=>X(()=>import("./Notifications-DOtBib_D.js"),__vite__mapDeps([83,39,9,4,10])).then(t=>({default:t.Notifications}))),lx=M.lazy(()=>X(()=>import("./Settings-Dw1iJFQx.js"),__vite__mapDeps([84,9,43,85])).then(t=>({default:t.Settings}))),ax=M.lazy(()=>X(()=>import("./NotificationSettings-Cxuki-eS.js"),[]).then(t=>({default:t.NotificationSettings}))),ux=M.lazy(()=>X(()=>import("./SecurityLogin-Dhopj34Q.js"),[]).then(t=>({default:t.SecurityLogin}))),cx=M.lazy(()=>X(()=>import("./TermsAndPrivacy-Bm3xzux-.js"),[]).then(t=>({default:t.TermsAndPrivacy}))),dx=M.lazy(()=>X(()=>import("./HelpSupport-Cr1FyQSP.js"),[]).then(t=>({default:t.HelpSupport}))),fx=M.lazy(()=>X(()=>import("./LocationSelector-B8Nm5H6Y.js"),[]).then(t=>({default:t.LocationSelector}))),px=M.lazy(()=>X(()=>import("./LanguageSettings-CxVe64_s.js"),[]).then(t=>({default:t.LanguageSettings}))),hx=M.lazy(()=>X(()=>import("./FinancialPanel-Csamner1.js"),__vite__mapDeps([86,28])).then(t=>({default:t.FinancialPanel}))),mx=M.lazy(()=>X(()=>import("./ProviderConfig-CUm3QMFq.js"),__vite__mapDeps([87,88])).then(t=>({default:t.ProviderConfig}))),gx=M.lazy(()=>X(()=>import("./ChatThemeSelector-CeT19E2i.js"),[]).then(t=>({default:t.ChatThemeSelector}))),yx=[C.jsx(K,{path:"/messages",element:C.jsx(j,{children:C.jsx(ox,{})})},"messages"),C.jsx(K,{path:"/chat/:id",element:C.jsx(j,{children:C.jsx(rx,{})})},"chat-private"),C.jsx(K,{path:"/notifications",element:C.jsx(j,{children:C.jsx(sx,{})})},"notifications"),C.jsx(K,{path:"/blocked-users",element:C.jsx(j,{children:C.jsx(ix,{})})},"blocked-users"),C.jsx(K,{path:"/settings",element:C.jsx(j,{children:C.jsx(lx,{})})},"settings"),C.jsx(K,{path:"/notification-settings",element:C.jsx(j,{children:C.jsx(ax,{})})},"notif-settings"),C.jsx(K,{path:"/security-login",element:C.jsx(j,{children:C.jsx(ux,{})})},"security-login"),C.jsx(K,{path:"/settings/language",element:C.jsx(j,{children:C.jsx(px,{})})},"lang-settings"),C.jsx(K,{path:"/terms",element:C.jsx(j,{children:C.jsx(cx,{})})},"terms"),C.jsx(K,{path:"/help",element:C.jsx(j,{children:C.jsx(dx,{})})},"help"),C.jsx(K,{path:"/location-filter",element:C.jsx(j,{children:C.jsx(fx,{})})},"location"),C.jsx(K,{path:"/financial",element:C.jsx(j,{children:C.jsx(hx,{})})},"financial"),C.jsx(K,{path:"/financial/providers",element:C.jsx(j,{children:C.jsx(mx,{})})},"financial-providers"),C.jsx(K,{path:"/settings/chat-themes",element:C.jsx(j,{children:C.jsx(gx,{})})},"chat-themes")],vx=()=>C.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0c0f14] text-white",children:C.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-3xl text-[#00c2ff]"})}),_x=()=>C.jsx(M.Suspense,{fallback:C.jsx(vx,{}),children:C.jsxs(c_,{children:[tR,cR,BR,YR,nx,yx,C.jsx(K,{path:"*",element:C.jsx(wu,{to:"/",replace:!0})})]})}),nn=Object.create(null);nn.open="0";nn.close="1";nn.ping="2";nn.pong="3";nn.message="4";nn.upgrade="5";nn.noop="6";const Fs=Object.create(null);Object.keys(nn).forEach(t=>{Fs[nn[t]]=t});const Wu={type:"error",data:"parser error"},jg=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ey=typeof ArrayBuffer=="function",ty=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,_c=({type:t,data:e},n,o)=>jg&&e instanceof Blob?n?o(e):Um(e,o):ey&&(e instanceof ArrayBuffer||ty(e))?n?o(e):Um(new Blob([e]),o):o(nn[t]+(e||"")),Um=(t,e)=>{const n=new FileReader;return n.onload=function(){const o=n.result.split(",")[1];e("b"+(o||""))},n.readAsDataURL(t)};function Fm(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let vu;function Ex(t,e){if(jg&&t.data instanceof Blob)return t.data.arrayBuffer().then(Fm).then(e);if(ey&&(t.data instanceof ArrayBuffer||ty(t.data)))return e(Fm(t.data));_c(t,!1,n=>{vu||(vu=new TextEncoder),e(vu.encode(n))})}const Om="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Om.length;t++)jr[Om.charCodeAt(t)]=t;const Sx=t=>{let e=t.length*.75,n=t.length,o,s=0,l,c,p,m;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),y=new Uint8Array(h);for(o=0;o<n;o+=4)l=jr[t.charCodeAt(o)],c=jr[t.charCodeAt(o+1)],p=jr[t.charCodeAt(o+2)],m=jr[t.charCodeAt(o+3)],y[s++]=l<<2|c>>4,y[s++]=(c&15)<<4|p>>2,y[s++]=(p&3)<<6|m&63;return h},Cx=typeof ArrayBuffer=="function",Ec=(t,e)=>{if(typeof t!="string")return{type:"message",data:ny(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:wx(t.substring(1),e)}:Fs[n]?t.length>1?{type:Fs[n],data:t.substring(1)}:{type:Fs[n]}:Wu},wx=(t,e)=>{if(Cx){const n=Sx(t);return ny(n,e)}else return{base64:!0,data:t}},ny=(t,e)=>e==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,oy="",Tx=(t,e)=>{const n=t.length,o=new Array(n);let s=0;t.forEach((l,c)=>{_c(l,!1,p=>{o[c]=p,++s===n&&e(o.join(oy))})})},Ix=(t,e)=>{const n=t.split(oy),o=[];for(let s=0;s<n.length;s++){const l=Ec(n[s],e);if(o.push(l),l.type==="error")break}return o};function Ax(){return new TransformStream({transform(t,e){Ex(t,n=>{const o=n.length;let s;if(o<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,o);else if(o<65536){s=new Uint8Array(3);const l=new DataView(s.buffer);l.setUint8(0,126),l.setUint16(1,o)}else{s=new Uint8Array(9);const l=new DataView(s.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(o))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let _u;function Rs(t){return t.reduce((e,n)=>e+n.length,0)}function xs(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let o=0;for(let s=0;s<e;s++)n[s]=t[0][o++],o===t[0].length&&(t.shift(),o=0);return t.length&&o<t[0].length&&(t[0]=t[0].slice(o)),n}function Px(t,e){_u||(_u=new TextDecoder);const n=[];let o=0,s=-1,l=!1;return new TransformStream({transform(c,p){for(n.push(c);;){if(o===0){if(Rs(n)<1)break;const m=xs(n,1);l=(m[0]&128)===128,s=m[0]&127,s<126?o=3:s===126?o=1:o=2}else if(o===1){if(Rs(n)<2)break;const m=xs(n,2);s=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),o=3}else if(o===2){if(Rs(n)<8)break;const m=xs(n,8),h=new DataView(m.buffer,m.byteOffset,m.length),y=h.getUint32(0);if(y>Math.pow(2,21)-1){p.enqueue(Wu);break}s=y*Math.pow(2,32)+h.getUint32(4),o=3}else{if(Rs(n)<s)break;const m=xs(n,s);p.enqueue(Ec(l?m:_u.decode(m),e)),o=0}if(s===0||s>t){p.enqueue(Wu);break}}}})}const ry=4;function We(t){if(t)return Rx(t)}function Rx(t){for(var e in We.prototype)t[e]=We.prototype[e];return t}We.prototype.on=We.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};We.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};We.prototype.off=We.prototype.removeListener=We.prototype.removeAllListeners=We.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o,s=0;s<n.length;s++)if(o=n[s],o===e||o.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};We.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(n){n=n.slice(0);for(var o=0,s=n.length;o<s;++o)n[o].apply(this,e)}return this};We.prototype.emitReserved=We.prototype.emit;We.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};We.prototype.hasListeners=function(t){return!!this.listeners(t).length};const rl=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Nt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),xx="arraybuffer";function iy(t,...e){return e.reduce((n,o)=>(t.hasOwnProperty(o)&&(n[o]=t[o]),n),{})}const kx=Nt.setTimeout,Nx=Nt.clearTimeout;function il(t,e){e.useNativeTimers?(t.setTimeoutFn=kx.bind(Nt),t.clearTimeoutFn=Nx.bind(Nt)):(t.setTimeoutFn=Nt.setTimeout.bind(Nt),t.clearTimeoutFn=Nt.clearTimeout.bind(Nt))}const Mx=1.33;function Lx(t){return typeof t=="string"?Dx(t):Math.ceil((t.byteLength||t.size)*Mx)}function Dx(t){let e=0,n=0;for(let o=0,s=t.length;o<s;o++)e=t.charCodeAt(o),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n}function sy(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ux(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Fx(t){let e={},n=t.split("&");for(let o=0,s=n.length;o<s;o++){let l=n[o].split("=");e[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return e}class Ox extends Error{constructor(e,n,o){super(e),this.description=n,this.context=o,this.type="TransportError"}}class Sc extends We{constructor(e){super(),this.writable=!1,il(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,o){return super.emitReserved("error",new Ox(e,n,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Ec(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Ux(e);return n.length?"?"+n:""}}class bx extends Sc{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||n()})),this.writable||(o++,this.once("drain",function(){--o||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};Ix(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Tx(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=sy()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let ly=!1;try{ly=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Vx=ly;function Bx(){}class Gx extends bx{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let o=location.port;o||(o=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||o!==e.port}}doWrite(e,n){const o=this.request({method:"POST",data:e});o.on("success",n),o.on("error",(s,l)=>{this.onError("xhr post error",s,l)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,o)=>{this.onError("xhr poll error",n,o)}),this.pollXhr=e}}class tn extends We{constructor(e,n,o){super(),this.createRequest=e,il(this,o),this._opts=o,this._method=o.method||"GET",this._uri=n,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var e;const n=iy(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(n);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&o.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var s;o.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=tn.requestsCount++,tn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Bx,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete tn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}tn.requestsCount=0;tn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",bm);else if(typeof addEventListener=="function"){const t="onpagehide"in Nt?"pagehide":"unload";addEventListener(t,bm,!1)}}function bm(){for(let t in tn.requests)tn.requests.hasOwnProperty(t)&&tn.requests[t].abort()}const Hx=(function(){const t=ay({xdomain:!1});return t&&t.responseType!==null})();class $x extends Gx{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Hx&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new tn(ay,this.uri(),e)}}function ay(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Vx))return new XMLHttpRequest}catch{}if(!e)try{return new Nt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const uy=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class qx extends Sc{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,o=uy?{}:iy(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,o)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const o=e[n],s=n===e.length-1;_c(o,this.supportsBinary,l=>{try{this.doWrite(o,l)}catch{}s&&rl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=sy()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Eu=Nt.WebSocket||Nt.MozWebSocket;class zx extends qx{createSocket(e,n,o){return uy?new Eu(e,n,o):n?new Eu(e,n):new Eu(e)}doWrite(e,n){this.ws.send(n)}}class Jx extends Sc{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Px(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=e.readable.pipeThrough(n).getReader(),s=Ax();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const l=()=>{o.read().then(({done:p,value:m})=>{p||(this.onPacket(m),l())}).catch(p=>{})};l();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const o=e[n],s=n===e.length-1;this._writer.write(o).then(()=>{s&&rl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Wx={websocket:zx,webtransport:Jx,polling:$x},Kx=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Yx=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ku(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),o=t.indexOf("]");n!=-1&&o!=-1&&(t=t.substring(0,n)+t.substring(n,o).replace(/:/g,";")+t.substring(o,t.length));let s=Kx.exec(t||""),l={},c=14;for(;c--;)l[Yx[c]]=s[c]||"";return n!=-1&&o!=-1&&(l.source=e,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=Qx(l,l.path),l.queryKey=Xx(l,l.query),l}function Qx(t,e){const n=/\/{2,9}/g,o=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&o.splice(0,1),e.slice(-1)=="/"&&o.splice(o.length-1,1),o}function Xx(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,s,l){s&&(n[s]=l)}),n}const Yu=typeof addEventListener=="function"&&typeof removeEventListener=="function",Os=[];Yu&&addEventListener("offline",()=>{Os.forEach(t=>t())},!1);class Bn extends We{constructor(e,n){if(super(),this.binaryType=xx,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const o=Ku(e);n.hostname=o.host,n.secure=o.protocol==="https"||o.protocol==="wss",n.port=o.port,o.query&&(n.query=o.query)}else n.host&&(n.hostname=Ku(n.host).host);il(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(o=>{const s=o.prototype.name;this.transports.push(s),this._transportsByName[s]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Fx(this.opts.query)),Yu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Os.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=ry,n.transport=e,this.id&&(n.sid=this.id);const o=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Bn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Bn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let o=0;o<this.writeBuffer.length;o++){const s=this.writeBuffer[o].data;if(s&&(n+=Lx(s)),o>0&&n>this._maxPayload)return this.writeBuffer.slice(0,o);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,rl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,o){return this._sendPacket("message",e,n,o),this}send(e,n,o){return this._sendPacket("message",e,n,o),this}_sendPacket(e,n,o,s){if(typeof n=="function"&&(s=n,n=void 0),typeof o=="function"&&(s=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const l={type:e,data:n,options:o};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},o=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():e()}):this.upgrading?o():e()),this}_onError(e){if(Bn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=Os.indexOf(this._offlineEventListener);o!==-1&&Os.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Bn.protocol=ry;class Zx extends Bn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),o=!1;Bn.priorWebsocketSuccess=!1;const s=()=>{o||(n.send([{type:"ping",data:"probe"}]),n.once("packet",_=>{if(!o)if(_.type==="pong"&&_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Bn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(y(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const E=new Error("probe error");E.transport=n.name,this.emitReserved("upgradeError",E)}}))};function l(){o||(o=!0,y(),n.close(),n=null)}const c=_=>{const E=new Error("probe error: "+_);E.transport=n.name,l(),this.emitReserved("upgradeError",E)};function p(){c("transport closed")}function m(){c("socket closed")}function h(_){n&&_.name!==n.name&&l()}const y=()=>{n.removeListener("open",s),n.removeListener("error",c),n.removeListener("close",p),this.off("close",m),this.off("upgrading",h)};n.once("open",s),n.once("error",c),n.once("close",p),this.once("close",m),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{o||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let o=0;o<e.length;o++)~this.transports.indexOf(e[o])&&n.push(e[o]);return n}}let jx=class extends Zx{constructor(e,n={}){const o=typeof e=="object"?e:n;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(s=>Wx[s]).filter(s=>!!s)),super(e,o)}};function ek(t,e="",n){let o=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),o=Ku(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const l=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+l+":"+o.port+e,o.href=o.protocol+"://"+l+(n&&n.port===o.port?"":":"+o.port),o}const tk=typeof ArrayBuffer=="function",nk=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,cy=Object.prototype.toString,ok=typeof Blob=="function"||typeof Blob<"u"&&cy.call(Blob)==="[object BlobConstructor]",rk=typeof File=="function"||typeof File<"u"&&cy.call(File)==="[object FileConstructor]";function Cc(t){return tk&&(t instanceof ArrayBuffer||nk(t))||ok&&t instanceof Blob||rk&&t instanceof File}function bs(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,o=t.length;n<o;n++)if(bs(t[n]))return!0;return!1}if(Cc(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return bs(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&bs(t[n]))return!0;return!1}function ik(t){const e=[],n=t.data,o=t;return o.data=Qu(n,e),o.attachments=e.length,{packet:o,buffers:e}}function Qu(t,e){if(!t)return t;if(Cc(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let o=0;o<t.length;o++)n[o]=Qu(t[o],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=Qu(t[o],e));return n}return t}function sk(t,e){return t.data=Xu(t.data,e),delete t.attachments,t}function Xu(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Xu(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Xu(t[n],e));return t}const lk=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Ee;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ee||(Ee={}));class ak{constructor(e){this.replacer=e}encode(e){return(e.type===Ee.EVENT||e.type===Ee.ACK)&&bs(e)?this.encodeAsBinary({type:e.type===Ee.EVENT?Ee.BINARY_EVENT:Ee.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Ee.BINARY_EVENT||e.type===Ee.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=ik(e),o=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(o),s}}class wc extends We{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const o=n.type===Ee.BINARY_EVENT;o||n.type===Ee.BINARY_ACK?(n.type=o?Ee.EVENT:Ee.ACK,this.reconstructor=new uk(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Cc(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const o={type:Number(e.charAt(0))};if(Ee[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===Ee.BINARY_EVENT||o.type===Ee.BINARY_ACK){const l=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const c=e.substring(l,n);if(c!=Number(c)||e.charAt(n)!=="-")throw new Error("Illegal attachments");o.attachments=Number(c)}if(e.charAt(n+1)==="/"){const l=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););o.nsp=e.substring(l,n)}else o.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const l=n+1;for(;++n;){const c=e.charAt(n);if(c==null||Number(c)!=c){--n;break}if(n===e.length)break}o.id=Number(e.substring(l,n+1))}if(e.charAt(++n)){const l=this.tryParse(e.substr(n));if(wc.isPayloadValid(o.type,l))o.data=l;else throw new Error("invalid payload")}return o}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Ee.CONNECT:return Vm(n);case Ee.DISCONNECT:return n===void 0;case Ee.CONNECT_ERROR:return typeof n=="string"||Vm(n);case Ee.EVENT:case Ee.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&lk.indexOf(n[0])===-1);case Ee.ACK:case Ee.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class uk{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=sk(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Vm(t){return Object.prototype.toString.call(t)==="[object Object]"}const ck=Object.freeze(Object.defineProperty({__proto__:null,Decoder:wc,Encoder:ak,get PacketType(){return Ee}},Symbol.toStringTag,{value:"Module"}));function $t(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const dk=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class dy extends We{constructor(e,n,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[$t(e,"open",this.onopen.bind(this)),$t(e,"packet",this.onpacket.bind(this)),$t(e,"error",this.onerror.bind(this)),$t(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var o,s,l;if(dk.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const c={type:Ee.EVENT,data:n};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const y=this.ids++,_=n.pop();this._registerAckCallback(y,_),c.id=y}const p=(s=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||s===void 0?void 0:s.writable,m=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!p||(m?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(e,n){var o;const s=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===e&&this.sendBuffer.splice(p,1);n.call(this,new Error("operation has timed out"))},s),c=(...p)=>{this.io.clearTimeoutFn(l),n.apply(this,p)};c.withError=!0,this.acks[e]=c}emitWithAck(e,...n){return new Promise((o,s)=>{const l=(c,p)=>c?s(c):o(p);l.withError=!0,n.push(l),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...l)=>(this._queue[0],s!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...l)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ee.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(o=>String(o.id)===e)){const o=this.acks[e];delete this.acks[e],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ee.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ee.EVENT:case Ee.BINARY_EVENT:this.onevent(e);break;case Ee.ACK:case Ee.BINARY_ACK:this.onack(e);break;case Ee.DISCONNECT:this.ondisconnect();break;case Ee.CONNECT_ERROR:this.destroy();const o=new Error(e.data.message);o.data=e.data.data,this.emitReserved("connect_error",o);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const o of n)o.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let o=!1;return function(...s){o||(o=!0,n.packet({type:Ee.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ee.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let o=0;o<n.length;o++)if(e===n[o])return n.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let o=0;o<n.length;o++)if(e===n[o])return n.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const o of n)o.apply(this,e.data)}}}function nr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}nr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};nr.prototype.reset=function(){this.attempts=0};nr.prototype.setMin=function(t){this.ms=t};nr.prototype.setMax=function(t){this.max=t};nr.prototype.setJitter=function(t){this.jitter=t};class Zu extends We{constructor(e,n){var o;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,il(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((o=n.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new nr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||ck;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new jx(this.uri,this.opts);const n=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const s=$t(n,"open",function(){o.onopen(),e&&e()}),l=p=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",p),e?e(p):this.maybeReconnectOnOpen()},c=$t(n,"error",l);if(this._timeout!==!1){const p=this._timeout,m=this.setTimeoutFn(()=>{s(),l(new Error("timeout")),n.close()},p);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(s),this.subs.push(c),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push($t(e,"ping",this.onping.bind(this)),$t(e,"data",this.ondata.bind(this)),$t(e,"error",this.onerror.bind(this)),$t(e,"close",this.onclose.bind(this)),$t(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){rl(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let o=this.nsps[e];return o?this._autoConnect&&!o.active&&o.connect():(o=new dy(this,e,n),this.nsps[e]=o),o}_destroy(e){const n=Object.keys(this.nsps);for(const o of n)if(this.nsps[o].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let o=0;o<n.length;o++)this.engine.write(n[o],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Qr={};function Vs(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=ek(t,e.path||"/socket.io"),o=n.source,s=n.id,l=n.path,c=Qr[s]&&l in Qr[s].nsps,p=e.forceNew||e["force new connection"]||e.multiplex===!1||c;let m;return p?m=new Zu(o,e):(Qr[s]||(Qr[s]=new Zu(o,e)),m=Qr[s]),n.query&&!e.query&&(e.query=n.queryKey),m.socket(n.path,e)}Object.assign(Vs,{Manager:Zu,Socket:dy,io:Vs,connect:Vs});let je=null;const ii={connect:()=>{if(je&&je.connected)return;const t=te.getCurrentUserEmail();je=Vs(Be||window.location.origin,{autoConnect:!0,reconnection:!0,auth:{token:localStorage.getItem("auth_token"),email:t}}),je.on("connect",()=>{console.log(" [Socket.io] Connected:",je?.id),t&&je?.emit("join_user",t)}),je.on("connect_error",e=>{console.warn(" [Socket.io] Connection error:",e.message)})},disconnect:()=>{je&&(je.disconnect(),je=null)},joinChat:t=>{je&&je.emit("join_chat",t)},on:(t,e)=>(je||ii.connect(),je?.on(t,e),()=>je?.off(t,e)),emit:(t,e)=>{je||ii.connect(),je?.emit(t,e)},getSocket:()=>je},fk={init(){ii.on("payment_confirmed",t=>{console.log(" [Payment Handler] Pagamento confirmado em tempo real:",t),ac.addNotification({type:"sale",senderId:"system",username:"Financeiro Flux",text:t.message,recipientId:"me",recipientEmail:"me",avatar:"https://cdn-icons-png.flaticon.com/512/10543/10543306.png",groupId:t.groupId}),alert(` ${t.message}`)})}},pk=()=>{M.useEffect(()=>{const t=te.getCurrentUserEmail();t&&(ii.connect(),fk.init()),(async()=>t&&Wo.shouldDoFullSync()?await Ds.performFullSync():await Ds.performBackgroundSync())();const n=setInterval(()=>{te.getCurrentUserEmail()&&te.updateHeartbeat()},6e4),o=setInterval(()=>{te.getCurrentUserEmail()&&Ds.performBackgroundSync()},3e5);return()=>{clearInterval(n),clearInterval(o),ii.disconnect()}},[])},hk=`${Be}/api/events/ingest`,ju={track:async(t,e,n="frontend")=>{const o=crypto.randomUUID(),s=te.getCurrentUser(),l={event_id:o,source:n,type:t,timestamp:Date.now(),payload:e,user_id:s?.id||void 0,session_id:localStorage.getItem("auth_token")||void 0};return fetch(hk,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).catch(c=>{console.warn(`[Collector] Event ${t} queued locally due to connection issues.`)}),o},trackError:(t,e={})=>{ju.track("user_error",{message:t,...e})}};class mk{buffer=[];MAX_LOGS=15;push(e,n="interaction",o){const s={timestamp:Date.now(),action:e,category:n,data:o};this.buffer.push(s),this.buffer.length>this.MAX_LOGS&&this.buffer.shift()}getSnapshot(){return[...this.buffer]}clear(){this.buffer=[]}}const Ys=new mk,ec={trackCriticalError:(t,e)=>{const n=typeof t=="string"?t:t.message,o=t instanceof Error?t.stack:void 0;console.error(` [EventTracker] Critical Error in ${e}:`,n),ju.track("user_error",{context:e,message:n,stack:o,breadcrumbs:Ys.getSnapshot(),url:window.location.href,ua:navigator.userAgent})},trackAction:(t,e)=>{Ys.push(t,"interaction",e),ju.track("system_health_check",{action:t,...e})}};class gk extends M.Component{state={hasError:!1,error:void 0};constructor(e){super(e)}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error(" [CRITICAL UI ERROR]:",e,n),ec.trackCriticalError(e,"GLOBAL_BOUNDARY_CATCH")}handleReset=()=>{this.setState({hasError:!1,error:void 0}),window.location.hash="/feed",window.location.reload()};render(){return this.state.hasError?C.jsxs("div",{className:"min-h-screen bg-[#0c0f14] flex flex-col items-center justify-center p-6 text-center font-['Inter']",children:[C.jsx("style",{children:`
            .error-circle {
              width: 80px; height: 80px;
              background: rgba(0, 194, 255, 0.1);
              border: 2px solid #00c2ff;
              border-radius: 24px;
              display: flex; align-items: center; justify-content: center;
              color: #00c2ff; font-size: 32px; margin-bottom: 24px;
              box-shadow: 0 0 30px rgba(0, 194, 255, 0.2);
            }
            .error-title { font-size: 24px; font-weight: 800; color: #fff; margin-bottom: 8px; }
            .error-msg { font-size: 14px; color: #666; max-width: 300px; margin-bottom: 32px; line-height: 1.6; }
            .retry-btn {
              background: #00c2ff; color: #000;
              padding: 16px 40px; border-radius: 16px;
              font-weight: 800; font-size: 14px; text-transform: uppercase;
              letter-spacing: 1px; border: none; cursor: pointer;
              transition: all 0.2s ease;
              box-shadow: 0 10px 20px rgba(0, 194, 255, 0.2);
            }
            .retry-btn:active { transform: scale(0.98); }
          `}),C.jsx("div",{className:"error-circle animate-pulse",children:C.jsx("i",{className:"fa-solid fa-microchip"})}),C.jsx("h1",{className:"error-title",children:"Ops! Algo falhou."}),C.jsx("p",{className:"error-msg",children:"Ocorreu um erro inesperado na interface. Mas no se preocupe, seus dados esto seguros."}),C.jsx("button",{className:"retry-btn",onClick:this.handleReset,children:"Recuperar Sistema"}),C.jsx("div",{className:"mt-12 opacity-20 text-[9px] font-black uppercase tracking-[4px]",children:"Flux Recovery Engine"})]}):this.props.children||null}}var yk={};const vk="4.2.0";class Jo{static instance;clientId;constructor(){this.clientId=localStorage.getItem("flux_instance_id")||`flx_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("flux_instance_id",this.clientId)}static getInstance(){return Jo.instance||(Jo.instance=new Jo),Jo.instance}async call(e,n={}){const{timeout:o=15e3,isAdminAction:s=!1,...l}=n,c=e.startsWith("http")?e:`${Be}/api${e.startsWith("/")?"":"/"}${e}`,p=new AbortController,m=setTimeout(()=>p.abort(),o),h=`trc_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,y=new Headers(l.headers||{});y.set("Content-Type","application/json"),y.set("X-Flux-Client-ID",this.clientId),y.set("X-Flux-Trace-ID",h),y.set("X-Protocol-Version",vk);const _=yk.VITE_ADMIN_TOKEN||"ADMIN_TOKEN_V3",E=localStorage.getItem("auth_token");s||e.includes("/admin/")?(y.set("Authorization",`Bearer ${_}`),y.set("X-Admin-Action","true")):E&&y.set("Authorization",`Bearer ${E}`);try{const w=await fetch(c,{...l,headers:y,signal:p.signal});if(clearTimeout(m),(w.status===404||w.status===401)&&(await w.json().catch(()=>({}))).error?.message?.includes("Requested entity was not found"))throw console.error(" [FluxClient] API KEY DO GEMINI INVLIDA OU EXPIRADA"),new Error("API_KEY_REQUIRED");if(!w.ok){const P=await w.json().catch(()=>({}));throw new Error(P.error||`HTTP_ERROR_${w.status}`)}return await w.json()}catch(w){throw w.name==="AbortError"?new Error("TIMEOUT: O servidor demorou demais para responder."):w}}}const _k=Jo.getInstance();class Ek{async call(e,n={}){return _k.call(e,{...n,isAdminAction:!0})}}const Sk=new Ek;class Ck{currentConfig=null;async boot(){try{const e=await Sk.call("/api/admin/execute/system/config"),n=e&&typeof e=="object"?e:{};return this.currentConfig={...this.getFallbackConfig(),...n},this.currentConfig}catch{return console.warn(" [ConfigControl] Falha ao sincronizar via API. Usando fallback seguro (Manuteno OFF)."),this.currentConfig=this.getFallbackConfig(),this.currentConfig}}getConfig(){return this.currentConfig||this.getFallbackConfig()}isMaintenanceActive(){return this.currentConfig?.maintenanceMode===!0}getFallbackConfig(){return{maintenanceMode:!1,minWithdrawalAmount:5,aiModelPreference:"flash",activeGateways:["syncpay","stripe"],killSwitches:{disableMarketplace:!1,disableAds:!1,disableWithdrawals:!1}}}}const wk=new Ck,Tk=()=>C.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0c0f14] text-white font-['Inter'] p-8 text-center overflow-hidden",children:[C.jsx("style",{children:`
        .gear-container {
          position: relative;
          width: 100px;
          height: 100px;
          margin-bottom: 40px;
        }
        .gear {
          font-size: 60px;
          color: #00c2ff;
          animation: spin 4s linear infinite;
          opacity: 0.8;
        }
        .gear-small {
          position: absolute;
          bottom: 0;
          right: 0;
          font-size: 30px;
          color: #00ff82;
          animation: spin-reverse 3s linear infinite;
        }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes spin-reverse { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }
        
        .pulse-bg {
          position: absolute;
          width: 300px;
          height: 300px;
          background: radial-gradient(circle, rgba(0, 194, 255, 0.1) 0%, transparent 70%);
          animation: pulse 2s ease-in-out infinite;
          z-index: 0;
        }
        @keyframes pulse { 0% { transform: scale(0.8); opacity: 0.3; } 50% { transform: scale(1.2); opacity: 0.6; } 100% { transform: scale(0.8); opacity: 0.3; } }
      `}),C.jsx("div",{className:"pulse-bg"}),C.jsxs("div",{className:"gear-container relative z-10",children:[C.jsx("i",{className:"fa-solid fa-gear gear"}),C.jsx("i",{className:"fa-solid fa-cog gear-small"})]}),C.jsx("h1",{className:"text-3xl font-black mb-4 relative z-10 uppercase tracking-tighter",children:"Ajustando as Engrenagens"}),C.jsx("p",{className:"text-gray-400 text-sm max-w-xs mx-auto leading-relaxed relative z-10 mb-10",children:"Estamos realizando uma atualizao programada no Flux para garantir mais velocidade e segurana para voc. Voltaremos em alguns instantes."}),C.jsxs("div",{className:"flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full border border-white/10 relative z-10 animate-pulse",children:[C.jsx("div",{className:"w-2 h-2 rounded-full bg-[#00c2ff]"}),C.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[#00c2ff]",children:"Manuteno Ativa"})]}),C.jsx("div",{className:"absolute bottom-10 opacity-20 text-[9px] font-black uppercase tracking-[5px] w-full text-center",children:"Flux Infrastructure v4.3"})]}),Ik=()=>lt?C.jsx("div",{className:"fixed bottom-24 left-4 z-[100] animate-fade-in pointer-events-none",children:C.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 backdrop-blur-md border border-yellow-500/50 px-3 py-1.5 rounded-full shadow-lg",children:[C.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),C.jsx("span",{className:"text-[10px] font-black text-yellow-500 uppercase tracking-widest",children:"Modo Visualizao"})]})}):null,Ak=()=>{const[t,e]=M.useState(!1),[n,o]=M.useState(!1),[s,l]=M.useState(Gn.isFullyHydrated());return pk(),M.useEffect(()=>{const c=Gn.subscribe(l);return(async()=>{const m=setTimeout(()=>{t||(console.warn(" [Boot] Timeout de segurana atingido. Forando entrada..."),e(!0),o(!1))},5e3);try{const h=w=>{const P=new URLSearchParams(window.location.search);if(P.has(w))return P.get(w);const k=window.location.hash.split("?")[1];return k?new URLSearchParams(k).get(w):null},y=h("ignoreMaintenance")==="true"||h("force")==="true",E=(await wk.boot()).maintenanceMode===!0&&!lt&&!y;o(E)}catch(h){console.error("Erro no boot do sistema:",h),o(!1)}finally{clearTimeout(m),e(!0),(lt||!localStorage.getItem("auth_token"))&&l(!0)}})(),()=>c()},[t]),!t||!s&&!lt?C.jsxs("div",{className:"h-screen w-full bg-[#0c0f14] flex flex-col items-center justify-center gap-4",children:[C.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-[#00c2ff] text-2xl"}),C.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[3px]",children:"Iniciando Protocolos..."})]}):n?C.jsx(Tk,{}):C.jsx(gk,{children:C.jsx(S_,{children:C.jsxs(y_,{children:[C.jsx(qP,{}),C.jsx(KP,{}),C.jsx(Ik,{}),C.jsx(_x,{})]})})})};var Su={};const Pk=()=>{const t=ng.isDemoMode(),n=[{key:"VITE_API_URL",val:Su.VITE_API_URL},{key:"GOOGLE_CLIENT_ID",val:Su.GOOGLE_CLIENT_ID},{key:"API_KEY",val:Su.API_KEY}].filter(o=>!o.val||o.val===""||o.val.includes("PLACEHOLDER")||o.val.includes("NAO_CONFIGURADO"));if(n.length>0){if(t){console.info(" [Environment] O app est rodando em Modo de Demonstrao. Utilizando dados locais (Mocks). Chaves ausentes: "+n.map(o=>o.key).join(", "));return}console.group(" [CRITICAL CONFIGURATION ERROR]"),console.error("As seguintes chaves de ambiente esto ausentes ou so invlidas:"),n.forEach(o=>console.error(`- ${o.key}`)),console.warn("Isso impedir o funcionamento de logins, IA e pagamentos em ambiente real."),console.groupEnd(),window.location.hostname!=="localhost"&&console.log("%c O SISTEMA EST RODANDO EM MODO DEGRADADO ","background: red; color: white; padding: 10px; font-weight: bold;")}else console.log(" [Environment] Verificado com sucesso. Todas as conexes seguras esto prontas.")},Rk=()=>{const t=window.fetch;if(!t)return;const e=async(n,o)=>{const s=typeof n=="string"?n:n instanceof URL?n.href:n.url,l=performance.now(),c=crypto.randomUUID(),p=s.includes("/api/events/ingest");try{const m=await t(n,o),h=performance.now()-l;return p||(Ys.push(`API_CALL: ${s}`,"api",{status:m.status,duration:`${h.toFixed(0)}ms`,requestId:c}),h>2e3&&ec.trackAction("SLOW_API_DETECTED",{url:s,duration:h,requestId:c})),m}catch(m){if(!p){const h=s.toLowerCase();h.includes("ipapi.co")||h.includes("ipwho.is")||h.includes("nominatim")||h.includes("openstreetmap.org")||h.includes("geo.api")?Ys.push(`GEO_FETCH_FAIL (Likely AdBlock/Browser Block): ${s}`,"system"):ec.trackCriticalError(m,`NETWORK_FETCH_FAILURE: ${s}`)}throw m}};try{window.fetch=e}catch{try{Object.defineProperty(window,"fetch",{value:e,configurable:!0,writable:!0,enumerable:!0})}catch{console.warn(" [NetworkInterceptor] No foi possvel interceptar a Fetch API. Telemetria de rede desativada.")}}};var ei=(t=>(t.AUTH="AUTH",t.API="API",t.UI="UI",t.PAYMENT="PAYMENT",t.LIFECYCLE="LIFECYCLE",t.NAVIGATION="NAVIGATION",t.GENERAL="GENERAL",t))(ei||{});class xk{getContext(){const e=te.getCurrentUser();return{url:typeof window<"u"?window.location.href:"",user:{id:e?.id||null,email:e?.email||null}}}write(e,n,o,s={}){const l={timestamp:new Date().toISOString(),level:e,category:n,message:o,...this.getContext(),details:s};switch(s.error instanceof Error&&(l.message=`${o} - ${s.error.message}`,l.stack=s.error.stack,delete s.error),JSON.stringify(l,null,2),e){case"DEBUG":console.debug(`[${n}] - ${o}`,l);break;case"INFO":console.info(`[${n}] - ${o}`,l);break;case"WARN":console.warn(`[${n}] - ${o}`,l);break;case"ERROR":case"CRITICAL":console.error(`[${n}] - ${o}`,l);break}}debug(e,n,o){this.write("DEBUG",e,n,o)}info(e,n,o){this.write("INFO",e,n,o)}warn(e,n,o){this.write("WARN",e,n,o)}error(e,n,o,s){this.write("ERROR",e,n,{...s,error:o})}critical(e,n,o,s){this.write("CRITICAL",e,n,{...s,error:o})}}const ks=new xk;async function kk(){try{Pk(),Rk(),typeof window<"u"&&(window.addEventListener("error",n=>{if(n.message&&n.message.includes("ResizeObserver loop")){n.stopImmediatePropagation();return}const o=n.error||new Error(n.message||"Erro global desconhecido");ks.critical(ei.LIFECYCLE,"Erro global no capturado (window.onerror)",o,{colno:n.colno,lineno:n.lineno,filename:n.filename})}),window.addEventListener("unhandledrejection",n=>{const o=n.reason||new Error("Rejeio de promise no tratada");ks.critical(ei.LIFECYCLE,"Rejeio de promise no tratada (unhandledrejection)",o)}));const t=document.getElementById("root");if(!t){const n=new Error("Elemento root no encontrado para montar a aplicao.");throw ks.critical(ei.LIFECYCLE,n.message,n),n}y0.createRoot(t).render(C.jsx(Bs.StrictMode,{children:C.jsx(Ak,{})}))}catch(t){ks.critical(ei.LIFECYCLE,"Falha crtica na inicializao da aplicao.",t);const e=document.getElementById("root");e&&(e.innerHTML='<div style="text-align: center; margin-top: 50px;"><h1>Erro Crtico</h1><p>A aplicao no pde ser iniciada. Por favor, contate o suporte.</p></div>')}}kk();export{Be as A,ii as B,Uk as C,Ks as D,xP as G,Lk as L,vs as M,Bs as R,lt as U,tg as W,X as _,fo as a,ei as b,te as c,Au as d,Dk as e,Mk as f,X_ as g,UP as h,W as i,C as j,eE as k,ks as l,VP as m,iE as n,_k as o,Nk as p,Go as q,M as r,J_ as s,uo as t,sc as u,z_ as v,uE as w,ig as x,oE as y,xu as z};

import{u as e,r as t,c as a,j as r}from"./index-CipjSFYz.js";import{C as s}from"./CodeVerificationCard-G1Kjtygx.js";const i=()=>{const i=e(),[n,c]=t.useState(["","","","","",""]),[o,l]=t.useState(""),[f,u]=t.useState(!1),[d,m]=t.useState(30),[p,x]=t.useState(!1),g=t.useRef([]),v=a.getCurrentUserEmail();t.useEffect(()=>{if(!v)return void i("/register");const e=setInterval(()=>{m(t=>t<=1?(x(!0),clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)},[v,i]);return r.jsxs("div",{className:"h-screen w-full bg-[#0c0f14] text-white font-['Inter'] flex items-center justify-center p-5",children:[r.jsx("header",{className:"fixed top-0 left-0 w-full p-5 z-10",children:r.jsx("button",{onClick:()=>i("/register"),className:"bg-white/10 p-2 rounded-full border border-[#00c2ff] text-[#00c2ff]",children:r.jsx("i",{className:"fa-solid fa-arrow-left"})})}),r.jsx(s,{email:v||"",code:n,setCode:c,onInput:(e,t)=>{var a;const r=[...n];r[e]=t.slice(-1),c(r),t&&e<5&&(null==(a=g.current[e+1])||a.focus())},onKeyDown:(e,t)=>{var a;"Backspace"===t.key&&!n[e]&&e>0&&(null==(a=g.current[e-1])||a.focus())},onPaste:e=>{e.preventDefault();const t=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),a=[...n];t.split("").forEach((e,t)=>a[t]=e),c(a)},onSubmit:async e=>{e.preventDefault(),u(!0),l("");try{v&&(await a.verifyCode(v,n.join("")),i("/complete-profile"))}catch(t){l(t.message)}finally{u(!1)}},onResend:async()=>{if(p&&v){x(!1),m(30);try{await a.sendVerificationCode(v)}catch(e){l(e.message),x(!0)}}},timer:d,canResend:p,loading:f,error:o,inputsRef:g,title:"Verificação de E-mail",subtitle:"Enviamos o código para o seu e-mail cadastrado."})]})};export{i as VerifyEmail};

import{u as b,r as s,c as d,j as o}from"./index-BC19Iu_T.js";import{C as w}from"./CodeVerificationCard-BOnm4mtt.js";const D=()=>{const c=b(),[a,i]=s.useState(["","","","","",""]),[h,l]=s.useState(""),[y,m]=s.useState(!1),[v,p]=s.useState(30),[g,f]=s.useState(!1),u=s.useRef([]),r=d.getCurrentUserEmail();s.useEffect(()=>{if(!r){c("/register");return}const e=setInterval(()=>{p(t=>t<=1?(f(!0),clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)},[r,c]);const x=async e=>{e.preventDefault(),m(!0),l("");try{r&&(await d.verifyCode(r,a.join("")),c("/complete-profile"))}catch(t){l(t.message)}finally{m(!1)}},j=async()=>{if(!(!g||!r)){f(!1),p(30);try{await d.sendVerificationCode(r)}catch(e){l(e.message),f(!0)}}};return o.jsxs("div",{className:"h-screen w-full bg-[#0c0f14] text-white font-['Inter'] flex items-center justify-center p-5",children:[o.jsx("header",{className:"fixed top-0 left-0 w-full p-5 z-10",children:o.jsx("button",{onClick:()=>c("/register"),className:"bg-white/10 p-2 rounded-full border border-[#00c2ff] text-[#00c2ff]",children:o.jsx("i",{className:"fa-solid fa-arrow-left"})})}),o.jsx(w,{email:r||"",code:a,setCode:i,onInput:(e,t)=>{const n=[...a];n[e]=t.slice(-1),i(n),t&&e<5&&u.current[e+1]?.focus()},onKeyDown:(e,t)=>{t.key==="Backspace"&&!a[e]&&e>0&&u.current[e-1]?.focus()},onPaste:e=>{e.preventDefault();const t=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),n=[...a];t.split("").forEach((C,E)=>n[E]=C),i(n)},onSubmit:x,onResend:j,timer:v,canResend:g,loading:y,error:h,inputsRef:u,title:"Verificação de E-mail",subtitle:"Enviamos o código para o seu e-mail cadastrado."})]})};export{D as VerifyEmail};

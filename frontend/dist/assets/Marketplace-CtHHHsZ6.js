import{u as e,j as a,r as o,c as t,i as s}from"./index-CipjSFYz.js";import{m as r}from"./marketplaceService-C3sj9O_N.js";import{P as n}from"./ProductCard-CMhsnpTX.js";import{F as i}from"./Footer-CKHcXoCt.js";const l=()=>{const o=e();return a.jsxs("header",{className:"flex items-center justify-between p-[16px_32px] bg-[#0c0f14] fixed w-full z-30 border-b border-white/10 h-[80px] top-0",children:[a.jsx("button",{onClick:()=>o("/feed"),className:"bg-none border-none text-[#00c2ff] text-2xl cursor-pointer transition-all p-1.5",children:a.jsx("i",{className:"fa-solid fa-arrow-left"})}),a.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 w-[60px] h-[60px] bg-white/5 rounded-2xl flex justify-center items-center z-20 cursor-pointer shadow-[0_0_20px_rgba(0,194,255,0.3),inset_0_0_20px_rgba(0,194,255,0.08)]",onClick:()=>o("/feed"),children:[a.jsx("div",{className:"absolute w-[40px] h-[22px] rounded-[50%] border-[3px] border-[#00c2ff] rotate-[25deg]"}),a.jsx("div",{className:"absolute w-[40px] h-[22px] rounded-[50%] border-[3px] border-[#00c2ff] -rotate-[25deg]"})]}),a.jsx("button",{onClick:()=>o("/my-store"),className:"bg-none border-none text-[#00c2ff] text-2xl cursor-pointer transition-all p-1.5",children:a.jsx("i",{className:"fa-solid fa-briefcase"})})]})},c=({value:e,onChange:o})=>a.jsxs("div",{className:"search-bar flex items-center gap-2.5 w-full max-w-[600px] mx-auto mb-4 p-[12px_20px] rounded-[50px] bg-white/5 backdrop-blur-xl border border-white/10 transition-all sticky top-0 z-25",children:[a.jsx("style",{children:"\n                .search-bar:focus-within {\n                    border-color: rgba(0, 194, 255, 0.4);\n                    background: rgba(255, 255, 255, 0.1);\n                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);\n                }\n            "}),a.jsx("i",{className:"fa-solid fa-magnifying-glass text-gray-500"}),a.jsx("input",{type:"text",placeholder:"O que você procura hoje?",value:e,onChange:e=>o(e.target.value),className:"flex-1 bg-transparent border-none outline-none color-white text-base placeholder-gray-500"})]}),d=[{id:"Todos",icon:"fa-store",label:"Todos"},{id:"Destaque",icon:"fa-rocket",label:"Destaques"},{id:"Comida",icon:"fa-utensils",label:"Comida"},{id:"Infoprodutos",icon:"fa-graduation-cap",label:"Infoprodutos"},{id:"Vagas de Emprego",icon:"fa-briefcase",label:"Empregos"},{id:"Serviços",icon:"fa-screwdriver-wrench",label:"Serviços"},{id:"Imóveis",icon:"fa-building",label:"Imóveis"},{id:"Casa",icon:"fa-couch",label:"Casa"},{id:"Automotivo",icon:"fa-car",label:"Carro"},{id:"Eletrônicos",icon:"fa-mobile-screen",label:"Eletrônicos"},{id:"Moda",icon:"fa-shirt",label:"Moda"}],x=({activeCategory:e,onSelect:o})=>a.jsxs("div",{className:"category-scroll-container",children:[a.jsx("style",{children:"\n                .category-scroll-container { width: 100%; position: relative; z-index: 20; margin-bottom: 20px; flex-shrink: 0; background: transparent; }\n                .category-scroll { display:flex; gap:12px; overflow-x:auto; scroll-behavior:smooth; padding:5px 5px 15px 5px; width:100%; flex-wrap: nowrap; }\n                .category-scroll::-webkit-scrollbar { display: none; }\n                \n                .category-icon {\n                    flex:0 0 auto; background: rgba(255,255,255,0.05);\n                    border:1px solid rgba(255,255,255,0.1); border-radius:16px; padding:12px 16px;\n                    text-align:center; color:#aaa; cursor:pointer;\n                    transition:all 0.3s ease; min-width: 90px;\n                }\n                .category-icon i { font-size:20px; margin-bottom:6px; display:block; transition: 0.3s; }\n                .category-icon span { font-size:11px; font-weight: 500; }\n                .category-icon:hover { background: rgba(255,255,255,0.1); color: #fff; }\n                .category-icon.active { background:#00c2ff; color:#000; border-color: #00c2ff; box-shadow: 0 4px 15px rgba(0,194,255,0.4); transform: translateY(-2px); }\n                .category-icon.active span { font-weight:800; }\n            "}),a.jsx("div",{className:"category-scroll no-scrollbar",children:d.map(t=>a.jsxs("div",{className:"category-icon "+(e===t.id?"active":""),onClick:()=>o(t.id),children:[a.jsx("i",{className:`fa-solid ${t.icon}`}),a.jsx("span",{children:t.label})]},t.id))})]}),f=({items:e,isLoading:o,onItemClick:t})=>a.jsx("div",{className:"products-grid grid grid-cols-2 sm:grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-4 w-full max-w-[1200px] mx-auto relative z-1 items-start content-start",children:o?a.jsxs("div",{className:"col-span-full w-full text-center text-[#555] mt-20 flex flex-col items-center",children:[a.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-[#00c2ff] text-2xl mb-4"}),a.jsx("p",{className:"text-sm font-medium",children:"Carregando ofertas..."})]}):e.length>0?e.map(e=>a.jsx(n,{product:e,onClick:t},e.id)):a.jsxs("div",{className:"col-span-full w-full text-center text-gray-600 mt-20 flex flex-col items-center gap-2",children:[a.jsx("i",{className:"fa-solid fa-ghost text-4xl opacity-30"}),a.jsx("p",{className:"text-sm",children:"Nenhum resultado encontrado."})]})}),p=({isOpen:o,setIsOpen:t})=>{const s=e(),r=(e,a)=>{t(!1),s(e,{state:a})};return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:"\n                #postButton {\n                    position: fixed; bottom: 110px; right: 20px; width: 56px; height: 56px;\n                    background: #00c2ff; border: none; border-radius: 50%; color: #fff;\n                    font-size: 24px; cursor: pointer; box-shadow: 0 4px 20px rgba(0,194,255,0.4);\n                    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 35; \n                    display: flex; align-items: center; justify-content: center;\n                }\n                #postButton:hover { transform: scale(1.1); background: #fff; color: #00c2ff; }\n                #postButton.active { transform: rotate(45deg); background: #ff4d4d; color: #fff; }\n\n                .fab-menu-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 30; backdrop-filter: blur(3px); animation: fadeIn 0.2s; }\n                .fab-menu { position: fixed; bottom: 180px; right: 20px; display: flex; flex-direction: column; gap: 12px; z-index: 35; align-items: flex-end; }\n                .fab-option {\n                    background: #1a1e26; border: 1px solid rgba(255,255,255,0.1);\n                    padding: 12px 20px; border-radius: 12px; color: #fff;\n                    display: flex; align-items: center; gap: 12px;\n                    box-shadow: 0 8px 30px rgba(0,0,0,0.5);\n                    cursor: pointer; transition: all 0.2s;\n                    animation: slideUp 0.3s forwards;\n                    opacity: 0; transform: translateY(20px);\n                }\n                .fab-option:hover { transform: translateX(-5px); background: #252a33; border-color: #00c2ff; }\n                .fab-option span { font-weight: 600; font-size: 14px; }\n                @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }\n            "}),o&&a.jsx("div",{className:"fab-menu-overlay",onClick:()=>t(!1)}),o&&a.jsxs("div",{className:"fab-menu",children:[a.jsxs("button",{className:"fab-option",onClick:()=>r("/ad-type-selector"),children:[a.jsx("span",{children:"Impulsionar Alcance"}),a.jsx("i",{className:"fa-solid fa-rocket",style:{color:"#FFD700"}})]}),a.jsxs("button",{className:"fab-option",onClick:()=>r("/create-marketplace-item",{type:"organic"}),children:[a.jsx("span",{children:"Anunciar Grátis"}),a.jsx("i",{className:"fa-solid fa-tag",style:{color:"#00ff82"}})]})]}),a.jsx("button",{id:"postButton",className:o?"active":"",onClick:()=>t(!o),children:a.jsx("i",{className:"fa-solid fa-plus"})})]})},m=()=>{const n=e(),[d,m]=o.useState("Todos"),[b,u]=o.useState(""),[g,h]=o.useState([]),[j,w]=o.useState(!1),[v,y]=o.useState(void 0),[k,N]=o.useState(!0),C=o.useCallback(()=>{const e=t.getCurrentUserEmail()||void 0,a=r.getRecommendedItems(e);h(a||[]),N(!1)},[]);o.useEffect(()=>{const e=t.getCurrentUserEmail()||void 0;y(e),C(),r.fetchItems().catch(e=>{});const a=s.subscribe("marketplace",()=>{C()});return()=>a()},[C]);const _=o.useMemo(()=>{if(!g)return[];let e=[...g];if("Todos"!==d&&(e="Destaque"===d?e.filter(e=>e&&e.isAd):e.filter(e=>e&&e.category===d)),b.trim()){const a=b.toLowerCase();e=e.filter(e=>e&&(e.title&&e.title.toLowerCase().includes(a)||e.location&&e.location.toLowerCase().includes(a)))}return e},[g,d,b]);return a.jsxs("div",{className:"h-screen flex flex-col font-['Inter'] overflow-hidden bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white",children:[a.jsx(l,{}),a.jsxs("main",{className:"flex-grow pt-[100px] pb-[100px] px-5 flex flex-col overflow-y-auto no-scrollbar",children:[a.jsx(c,{value:b,onChange:u}),a.jsx(x,{activeCategory:d,onSelect:m}),a.jsx(f,{items:_,isLoading:k,onItemClick:e=>{e&&(v&&r.trackView(e,v),e.isAd&&e.ctaLink?e.ctaLink.startsWith("http")?window.open(e.ctaLink,"_blank"):n(e.ctaLink):n(`/marketplace/product/${e.id}`))}})]}),a.jsx(p,{isOpen:j,setIsOpen:w}),a.jsx(i,{})]})};export{m as Marketplace};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PaymentFlowModal-DDdg7Dq_.js","assets/index-CipjSFYz.js","assets/index-DBFgheNr.css","assets/currencyService-CUGBeSum.js","assets/VipSalesTracker-6iL3DgUP.js","assets/paypalService-CfPjuhjL.js","assets/PurchaseIntention-BPUq0Pu8.js"])))=>i.map(i=>d[i]);
import{u as e,j as a,e as n,r as t,w as s,_ as i,h as r,c as o}from"./index-CipjSFYz.js";import{m as c}from"./marketplaceService-C3sj9O_N.js";import{a as d}from"./apiClient-CNoApq48.js";import{u as l}from"./useVipPricing-BdOEGtA9.js";import"./currencyService-CUGBeSum.js";const p={getMyBusinessData:async e=>await d.call(`/api/screens/my-business?userId=${e}`),getAdminDashboardData:async()=>(await d.call("/api/admin/execute/stats/dashboard")).data},m=({products:n,onDelete:t})=>{const s=e();return a.jsxs("div",{className:"products-list animate-fade-in",children:[a.jsx("style",{children:"\n                .item-badge-ad {\n                    font-size: 8px;\n                    font-weight: 900;\n                    text-transform: uppercase;\n                    background: #FFD700;\n                    color: #000;\n                    padding: 1px 4px;\n                    border-radius: 3px;\n                    margin-left: 6px;\n                }\n            "}),n.length>0?n.map(e=>{return a.jsxs("div",{className:"store-item",onClick:()=>s(`/marketplace/product/${e.id}`),children:[a.jsx("img",{src:e.image||"https://via.placeholder.com/100",className:"item-thumb",alt:e.title}),a.jsxs("div",{className:"item-info",children:[a.jsxs("div",{className:"item-title flex items-center",children:[e.title,e.isAd&&a.jsx("span",{className:"item-badge-ad",children:"AD"})]}),a.jsxs("div",{className:"item-meta",children:[e.category,a.jsxs("span",{className:"item-sales",children:[a.jsx("i",{className:"fa-solid fa-bag-shopping"})," ",e.soldCount||0]})]}),a.jsx("div",{className:"item-price",children:(n=e.price,n.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))})]}),a.jsx("div",{className:"item-actions",children:a.jsx("div",{className:"action-icon delete",onClick:a=>t(e.id,a),title:"Excluir Produto",children:a.jsx("i",{className:"fa-solid fa-trash-can"})})})]},e.id);var n}):a.jsxs("div",{className:"empty-state",children:[a.jsx("i",{className:"fa-solid fa-box-open"}),a.jsx("p",{children:"Você ainda não publicou produtos."})]}),a.jsxs("button",{className:"add-btn",onClick:()=>s("/create-marketplace-item"),children:[a.jsx("i",{className:"fa-solid fa-plus-circle"})," Criar Novo Anúncio"]})]})},x=t.lazy(()=>i(()=>import("./PaymentFlowModal-DDdg7Dq_.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.PaymentFlowModal}))),g=e=>e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString():"0",u=({campaigns:i,onDelete:o,onEnd:c,onResume:d})=>{const p=e(),{showPrompt:m}=n(),[u,f]=t.useState(null),[b,h]=t.useState(0),{geoData:j,displayPriceInfo:v}=l(u?{id:u.id,name:u.name,price:(b||u.budget).toString(),currency:"BRL"}:null);return a.jsxs("div",{className:"campaigns-list animate-fade-in",children:[a.jsx("style",{children:"\n                .btn-performance-grid {\n                    width: 32px;\n                    height: 32px;\n                    border-radius: 8px;\n                    background: rgba(0, 194, 255, 0.1);\n                    color: #00c2ff;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    cursor: pointer;\n                    transition: 0.3s;\n                    border: 1px solid rgba(0, 194, 255, 0.2);\n                    margin-top: 4px;\n                }\n                .btn-performance-grid:hover {\n                    background: #00c2ff;\n                    color: #000;\n                    transform: translateY(-2px);\n                    box-shadow: 0 4px 10px rgba(0,194,255,0.3);\n                }\n                .camp-card-wrapper {\n                    position: relative;\n                    margin-bottom: 15px;\n                    transition: 0.3s;\n                }\n                .camp-card-wrapper.pending {\n                    cursor: pointer;\n                }\n                .camp-card-wrapper.pending:active {\n                    transform: scale(0.98);\n                }\n                .camp-status.pending-payment {\n                    background: #FFD700;\n                    color: #000;\n                    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);\n                }\n                .camp-status.ended {\n                    background: rgba(255, 255, 255, 0.1);\n                    color: #888;\n                }\n                .pending-overlay { position: absolute; inset: 0; background: rgba(255, 215, 0, 0.03); border-radius: 20px; pointer-events: none; border: 1px solid rgba(255, 215, 0, 0.1); }\n                .pay-now-btn { width: 100%; padding: 14px; background: linear-gradient(90deg, #FFD700, #FDB931); color: #000; border: none; border-radius: 12px; font-weight: 900; font-size: 14px; text-transform: uppercase; letter-spacing: 1px; margin-top: 15px; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); display: flex; align-items: center; justify-content: center; gap: 8px; }\n                \n                .top-up-btn {\n                    width: 100%; padding: 12px; background: rgba(0, 194, 255, 0.08); \n                    border: 1px solid rgba(0, 194, 255, 0.2); border-radius: 12px; \n                    color: #00c2ff; font-weight: 900; font-size: 12px; \n                    text-transform: uppercase; letter-spacing: 1.5px;\n                    display: flex; align-items: center; justify-content: center; gap: 8px;\n                    margin-bottom: 12px; transition: 0.3s; cursor: pointer;\n                }\n                .top-up-btn:hover { background: #00c2ff; color: #000; box-shadow: 0 0 20px rgba(0, 194, 255, 0.3); }\n\n                .camp-actions-footer {\n                    display: flex;\n                    gap: 10px;\n                    margin-top: 15px;\n                }\n                .action-btn-list {\n                    flex: 1;\n                    padding: 12px;\n                    border-radius: 12px;\n                    font-size: 11px;\n                    font-weight: 800;\n                    text-transform: uppercase;\n                    cursor: pointer;\n                    transition: 0.2s;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 6px;\n                }\n                .btn-stop { \n                    background: transparent; \n                    border: 1px solid rgba(255, 77, 77, 0.3); \n                    color: #ff4d4d; \n                    width: 100%;\n                }\n                .btn-stop:hover { background: rgba(255, 77, 77, 0.08); }\n\n                .btn-resume { \n                    background: rgba(0, 194, 255, 0.1); \n                    border: 1px solid #00c2ff; \n                    color: #00c2ff; \n                }\n                .btn-resume:hover { background: #00c2ff; color: #000; }\n\n                .btn-delete { \n                    background: transparent; \n                    border: 1px solid rgba(255, 255, 255, 0.1); \n                    color: #666; \n                }\n                .btn-delete:hover { border-color: #ff4d4d; color: #ff4d4d; background: rgba(255, 77, 77, 0.05); }\n            "}),i.length>0?i.map(e=>{var n,t;const i="active"===e.status,r=!s.hasAvailableBudget(e),l=i&&"commission"!==e.pricingModel&&r;return a.jsxs("div",{className:"campaign-card camp-card-wrapper "+("pending"===e.status?"pending":""),onClick:()=>(e=>{"pending"===e.status&&(h(0),f(e))})(e),children:["pending"===e.status&&a.jsx("div",{className:"pending-overlay"}),a.jsxs("div",{className:"camp-header",children:[a.jsx("div",{className:"camp-name",children:e.name}),a.jsx("div",{className:"camp-status "+("active"===e.status?"":"ended"===e.status?"ended":"pending-payment"),children:"active"===e.status?"Veiculando":"ended"===e.status?"Encerrada":"Aguardando Pagamento"})]}),a.jsx("div",{className:"camp-desc",children:e.creative.text.length>80?e.creative.text.substring(0,80)+"...":e.creative.text}),a.jsxs("div",{className:"camp-metrics",children:[a.jsxs("div",{className:"metric",children:[a.jsx("span",{className:"metric-label",children:"Investimento"}),a.jsx("span",{className:"metric-val",style:{color:"commission"===e.pricingModel?"#FFD700":"#00ff82"},children:"commission"===e.pricingModel?"CPA":(x=e.budget,x.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))})]}),a.jsxs("div",{className:"metric",children:[a.jsx("span",{className:"metric-label",children:"Alcance"}),a.jsx("span",{className:"metric-val",children:g((null==(n=e.stats)?void 0:n.views)||0)})]}),a.jsxs("div",{className:"metric",children:[a.jsx("span",{className:"metric-label",children:"Cliques"}),a.jsx("span",{className:"metric-val",children:g((null==(t=e.stats)?void 0:t.clicks)||0)})]}),a.jsxs("div",{className:"metric action",children:[a.jsx("span",{className:"metric-label",children:"Métricas"}),a.jsx("div",{className:"btn-performance-grid",title:"Ver Desempenho Completo",onClick:a=>{a.preventDefault(),a.stopPropagation(),"active"===e.status||"ended"===e.status?p(`/campaign-performance/${e.id}`):alert("As métricas estarão disponíveis após a ativação do pagamento.")},children:a.jsx("i",{className:"fa-solid "+("pending"!==e.status?"fa-chart-simple":"fa-lock opacity-30")})})]})]}),l&&a.jsxs("button",{className:"top-up-btn",onClick:a=>(async(e,a)=>{e.stopPropagation();const n=await m("Adicionar Saldo","Informe o valor que deseja adicionar à sua campanha (Min R$ 10,00):","Ex: 50,00");if(n){const e=parseFloat(n.replace(/\./g,"").replace(",","."));if(isNaN(e)||e<10)return void alert("Valor inválido. O mínimo é R$ 10,00.");h(e),f(a)}})(a,e),children:[a.jsx("i",{className:"fa-solid fa-circle-plus"})," Adicionar Saldo (Orçamento Esgotado)"]}),"pending"===e.status&&a.jsxs("button",{className:"pay-now-btn",onClick:a=>{a.stopPropagation(),f(e)},children:[a.jsx("i",{className:"fa-solid fa-credit-card"})," Fazer Pagamento"]}),a.jsx("div",{className:"camp-actions-footer",children:"active"===e.status?a.jsxs("button",{className:"action-btn-list btn-stop",onClick:a=>c(e.id,a),children:[a.jsx("i",{className:"fa-solid fa-stop-circle"})," Encerrar Campanha"]}):"ended"===e.status?a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"action-btn-list btn-resume",onClick:a=>d(e.id,a),children:[a.jsx("i",{className:"fa-solid fa-play-circle"})," Retomar"]}),a.jsxs("button",{className:"action-btn-list btn-delete",onClick:a=>o(e.id,a),children:[a.jsx("i",{className:"fa-solid fa-trash-can"})," Excluir"]})]}):a.jsxs("button",{className:"action-btn-list btn-delete w-full",onClick:a=>o(e.id,a),children:[a.jsx("i",{className:"fa-solid fa-trash-can"})," Remover Rascunho"]})})]},e.id);var x}):a.jsxs("div",{className:"empty-state",children:[a.jsx("i",{className:"fa-solid fa-bullhorn"}),a.jsx("p",{children:"Nenhuma campanha configurada."})]}),a.jsxs("button",{className:"add-btn gold",onClick:()=>p("/ad-type-selector"),children:[a.jsx("i",{className:"fa-solid fa-rocket"})," Iniciar Nova Promoção"]}),a.jsx(t.Suspense,{fallback:null,children:u&&a.jsx(x,{isOpen:!!u,onClose:()=>{f(null),h(0)},group:{id:u.id,name:b>0?`Recarga: ${u.name}`:`Anúncio: ${u.name}`,price:(b||u.budget).toString(),currency:"BRL",creatorEmail:u.ownerEmail,isVip:!1},provider:"BR"===(null==j?void 0:j.countryCode)?"syncpay":"stripe",convertedPriceInfo:v,geo:j,onSuccess:async()=>{u&&(b>0?await r.addBudget(u.id,b):await r.updateCampaignStatus(u.id,"active"),f(null),h(0))}})})]})},f=()=>{const s=e(),{showConfirm:i}=n(),[d,l]=t.useState("products"),[x,g]=t.useState(null),[f,b]=t.useState(!0),h=async()=>{const e=o.getCurrentUser();if(e){b(!0);try{const a=await p.getMyBusinessData(e.id);g(a)}catch(a){}finally{b(!1)}}else s("/")};t.useEffect(()=>{h()},[]);return a.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white font-['Inter'] flex flex-col overflow-hidden",children:[a.jsx("style",{children:"\n        header { display:flex; align-items:center; padding:16px; background: #0c0f14; position:fixed; width:100%; top:0; z-index:10; border-bottom:1px solid rgba(255,255,255,0.1); height: 65px; }\n        header .back-btn { background:none; border:none; color:#fff; font-size:22px; cursor:pointer; padding-right: 15px; }\n        header h1 { font-size:20px; font-weight:600; }\n        main { padding-top: 80px; padding-bottom: 40px; width: 100%; max-width: 600px; margin: 0 auto; padding-left: 20px; padding-right: 20px; flex-grow: 1; overflow-y: auto; }\n        \n        /* Tabs Styling */\n        .store-tabs { display: flex; background: rgba(255,255,255,0.05); border-radius: 12px; padding: 4px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }\n        .tab-btn { flex: 1; padding: 12px; border: none; background: transparent; color: #aaa; font-size: 14px; font-weight: 600; cursor: pointer; border-radius: 8px; transition: 0.3s; }\n        .tab-btn.active { background: #00c2ff; color: #000; box-shadow: 0 2px 10px rgba(0,194,255,0.3); }\n\n        /* Generic Add Button */\n        .add-btn { width: 100%; padding: 18px; border-radius: 16px; font-weight: 800; cursor: pointer; border: 1px dashed rgba(255,255,255,0.1); background: rgba(255,255,255,0.02); color: #888; margin-top: 15px; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; text-transform: uppercase; font-size: 13px; letter-spacing: 1px; }\n        .add-btn.gold { border-color: rgba(255,215,0,0.3); color: #FFD700; background: rgba(255,215,0,0.02); }\n        .add-btn:hover { background: rgba(255,255,255,0.05); border-color: #00c2ff; color: #fff; }\n\n        /* Products List Styles */\n        .store-item { \n            display: flex; gap: 15px; background: rgba(255,255,255,0.03); \n            border: 1px solid rgba(255,255,255,0.05); border-radius: 16px; \n            padding: 12px; margin-bottom: 12px; cursor: pointer; transition: 0.2s;\n        }\n        .store-item:hover { border-color: #00c2ff33; background: rgba(255,255,255,0.06); }\n        .item-thumb { width: 64px; height: 64px; border-radius: 10px; object-fit: cover; background: #000; }\n        .item-info { flex: 1; min-width: 0; display: flex; flex-direction: column; justify-content: center; }\n        .item-title { font-weight: 700; font-size: 15px; color: #fff; margin-bottom: 2px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }\n        .item-meta { font-size: 11px; color: #666; display: flex; align-items: center; gap: 10px; }\n        .item-sales { color: #FFD700; font-weight: 700; }\n        .item-price { font-size: 14px; font-weight: 800; color: #00ff82; margin-top: 2px; }\n        .item-actions { display: flex; align-items: center; padding-left: 10px; }\n        .action-icon { width: 36px; height: 36px; display: flex; items-center; justify-content: center; border-radius: 10px; background: rgba(255,255,255,0.05); color: #555; cursor: pointer; transition: 0.2s; }\n        .action-icon.delete:hover { background: rgba(255,77,77,0.1); color: #ff4d4d; }\n\n        /* Campaigns List Styles */\n        .campaign-card { \n            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); \n            border-radius: 20px; padding: 20px; margin-bottom: 16px; \n        }\n        .camp-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }\n        .camp-name { font-weight: 800; font-size: 16px; color: #fff; }\n        .camp-status { font-size: 10px; font-weight: 900; text-transform: uppercase; padding: 3px 8px; border-radius: 6px; background: #00ff82; color: #000; }\n        .camp-desc { font-size: 13px; color: #888; line-height: 1.4; margin-bottom: 15px; }\n        .camp-metrics { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 15px 0; border-top: 1px solid rgba(255,255,255,0.05); }\n        .metric { display: flex; flex-direction: column; gap: 4px; }\n        .metric-label { font-size: 9px; color: #555; text-transform: uppercase; font-weight: 700; }\n        .metric-val { font-size: 14px; font-weight: 800; color: #fff; }\n\n        /* Empty State */\n        .empty-state { text-align: center; padding: 60px 20px; color: #444; display: flex; flex-direction: column; align-items: center; gap: 15px; }\n        .empty-state i { font-size: 48px; opacity: 0.2; }\n        .empty-state p { font-size: 14px; font-weight: 500; }\n      "}),a.jsxs("header",{children:[a.jsx("button",{onClick:()=>{s(-1)},className:"back-btn",children:a.jsx("i",{className:"fa-solid fa-arrow-left"})}),a.jsx("h1",{children:"Meus Negócios"})]}),a.jsx("main",{className:"no-scrollbar",children:f?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50",children:[a.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-2xl text-[#00c2ff] mb-2"}),a.jsx("p",{className:"text-xs uppercase font-bold tracking-widest",children:"Lendo cabo de dados..."})]}):x&&a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:"store-tabs",children:[a.jsxs("button",{className:"tab-btn "+("products"===d?"active":""),onClick:()=>l("products"),children:["Meus Produtos (",x.stats.totalProducts,")"]}),a.jsxs("button",{className:"tab-btn "+("campaigns"===d?"active":""),onClick:()=>l("campaigns"),children:["Minhas Campanhas (",x.stats.activeAds,")"]})]}),"products"===d?a.jsx(m,{products:x.lists.products,onDelete:async(e,a)=>{a.stopPropagation(),await i("Excluir Produto","Tem certeza? A ação não pode ser desfeita.","Excluir","Cancelar")&&(await c.deleteItem(e),h())}}):a.jsx(u,{campaigns:x.lists.campaigns,onEnd:async(e,a)=>{a.stopPropagation(),await i("Encerrar Campanha","Deseja parar a veiculação? Você poderá retomá-la a qualquer momento.","Encerrar","Manter")&&(await r.updateCampaignStatus(e,"ended"),h())},onResume:async(e,a)=>{a.stopPropagation(),await i("Retomar Campanha","Deseja reativar o anúncio agora?","Retomar","Cancelar")&&(await r.updateCampaignStatus(e,"active"),h())},onDelete:async(e,a)=>{a.stopPropagation(),await i("Excluir Campanha","Deseja remover permanentemente este registro? O orçamento restante não será reembolsado.","Excluir","Cancelar")&&(await r.deleteCampaign(e),h())}})]})})]})};export{f as MyStore};

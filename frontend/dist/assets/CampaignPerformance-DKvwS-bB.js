import{j as e,u as a,f as s,e as t,r as i,h as l}from"./index-Bkpya5GW.js";import{A as n,C as r}from"./AdPreview-HGhSkwC6.js";import"./FeedItem-BVlRJhTQ.js";import"./UserBadge-B6APxn0Y.js";import"./UserAvatar-B4jG9SAR.js";import"./postService-B_maMF9u.js";import"./ProductCard-CkqBdyAW.js";const c=({campaign:a})=>{var s,t;return e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 mb-8 shadow-xl animate-fade-in",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-[#00c2ff] tracking-widest mb-1",children:"Configuração da Campanha"}),e.jsx("h2",{className:"text-xl font-bold text-white leading-tight",children:a.name})]}),e.jsx("div",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider "+("active"===a.status?"bg-[#00ff82]/10 text-[#00ff82] border border-[#00ff82]/20":"bg-gray-500/10 text-gray-400 border border-gray-500/20"),children:"active"===a.status?"Veiculando":"Finalizada"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4 border-y border-white/5",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-tight",children:"Orçamento Total"}),e.jsx("span",{className:"text-lg font-bold text-white",children:"commission"===a.pricingModel?e.jsx("span",{className:"text-[#FFD700]",children:"CPA (Comissão)"}):(i=a.budget||0,i.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))})]}),e.jsxs("div",{className:"flex flex-col gap-1 text-right",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-tight",children:"Duração"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-200 flex items-center justify-end gap-2",children:[e.jsx("i",{className:"fa-solid "+("continuous"===a.scheduleType?"fa-infinity text-[#00c2ff]":"fa-calendar-day")}),"continuous"===a.scheduleType?"Contínua":"Data Fixa"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-tight",children:"Legenda / Criativo"}),e.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5 italic text-sm text-gray-300 leading-relaxed",children:['"',null==(s=a.creative)?void 0:s.text,'"']})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-bullseye text-[#ff4d4d] text-xs"}),e.jsx("span",{className:"text-[11px] font-bold text-gray-400 uppercase",children:a.campaignObjective})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-map-pin text-[#00c2ff] text-xs"}),e.jsx("span",{className:"text-[11px] font-bold text-gray-400 uppercase",children:null==(t=a.placements)?void 0:t.join(" • ")})]})]})]})});var i},o=({label:a,value:s,trend:t,description:i,icon:l})=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 flex flex-col gap-1 hover:border-white/20 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-[10px] font-black uppercase text-gray-500 tracking-widest",children:a}),l&&e.jsx("i",{className:`${l} text-[#00c2ff] opacity-40 text-xs`})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mt-1",children:[e.jsx("span",{className:"text-xl font-bold text-white",children:s}),t&&e.jsxs("span",{className:"text-[10px] font-bold "+(t.isUp?"text-[#00ff82]":"text-red-400"),children:[e.jsx("i",{className:`fa-solid fa-caret-${t.isUp?"up":"down"} mr-0.5`}),t.val]})]}),i&&e.jsx("p",{className:"text-[9px] text-gray-600 leading-tight mt-1",children:i})]}),d=({data:a})=>e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsx(o,{label:"Impressões",value:a.impressions.toLocaleString(),icon:"fa-solid fa-eye",description:"Total de vezes que o anúncio foi renderizado."}),e.jsx(o,{label:"Alcance",value:a.reach.toLocaleString(),icon:"fa-solid fa-users",description:"Pessoas únicas que viram o anúncio."}),e.jsx(o,{label:"Frequência",value:`${a.frequency}x`,icon:"fa-solid fa-repeat",description:"Média de visualizações por pessoa."}),e.jsx(o,{label:"CPM",value:`R$ ${a.cpm.toFixed(2)}`,icon:"fa-solid fa-money-bill-1",description:"Custo médio para cada 1.000 impressões."})]}),x=({data:a})=>e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsx(o,{label:"Cliques",value:a.clicks.toLocaleString(),icon:"fa-solid fa-arrow-pointer"}),e.jsx(o,{label:"CTR",value:`${a.ctr.toFixed(2)}%`,trend:{val:"0.4%",isUp:!0},icon:"fa-solid fa-percent",description:"Relação entre cliques e impressões."}),e.jsx(o,{label:"CPC",value:`R$ ${a.cpc.toFixed(2)}`,icon:"fa-solid fa-tag"}),e.jsx(o,{label:"Engajamento",value:`${a.engagement.toFixed(1)}%`,icon:"fa-solid fa-heart",description:"Interações sobre impressões totais."})]}),p=({data:a})=>e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsx(o,{label:"Conversões",value:a.conversions,icon:"fa-solid fa-trophy",description:"Ações de compra ou assinatura concluídas."}),e.jsx(o,{label:"Taxa Conv.",value:`${a.conversionRate.toFixed(2)}%`,icon:"fa-solid fa-bullseye"}),e.jsx(o,{label:"CPA",value:`R$ ${a.cpa.toFixed(2)}`,icon:"fa-solid fa-hand-holding-dollar",description:"Custo por cada conversão realizada."}),e.jsx(o,{label:"Valor Total",value:`R$ ${a.conversionValue.toFixed(2)}`,icon:"fa-solid fa-coins"})]}),m=({data:a})=>{const s=e=>`R$ ${e.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsx(o,{label:"Valor Investido",value:s(a.totalBudget||0),icon:"fa-solid fa-wallet",description:"Orçamento total alocado para esta campanha."}),e.jsx(o,{label:"Valor Usado",value:s(a.spent||0),icon:"fa-solid fa-chart-pie",trend:{val:`${(a.spent/a.totalBudget*100).toFixed(1)}%`,isUp:!0},description:"Total consumido do orçamento até o momento."}),e.jsx(o,{label:"ROAS",value:`${a.roas.toFixed(1)}x`,icon:"fa-solid fa-chart-line",description:"Retorno sobre investimento direto."}),e.jsx(o,{label:"ROI",value:`${a.roi.toFixed(0)}%`,icon:"fa-solid fa-sack-dollar",description:"Lucro líquido sobre o gasto."}),e.jsx(o,{label:"Ticket Médio",value:`R$ ${a.avgTicket.toFixed(2)}`,icon:"fa-solid fa-receipt"}),e.jsx(o,{label:"LTV Est.",value:`R$ ${a.ltv.toFixed(2)}`,icon:"fa-solid fa-infinity",description:"Valor estimado do cliente a longo prazo."})]})},f=()=>{const o=a(),{id:f}=s(),{showAlert:u,showOptions:g}=t(),[h,b]=i.useState(!0),[v,j]=i.useState(!1),[N,y]=i.useState(null),[w,k]=i.useState(null),[C,F]=i.useState(null),[$,S]=i.useState("feed"),[R,A]=i.useState(""),[T,U]=i.useState(""),[B,z]=i.useState(void 0),[D,L]=i.useState("image"),P=e=>e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),I=i.useMemo(()=>{var e,a,s,t,i;return!!N&&(R!==(null==(e=N.creative)?void 0:e.text)||T!==((null==(a=N.placementCtas)?void 0:a[$])||N.ctaButton)||B!==((null==(t=null==(s=N.placementCreatives)?void 0:s[$])?void 0:t.mediaUrl)||(null==(i=N.creative)?void 0:i.mediaUrl)))},[N,R,T,B,$]);i.useEffect(()=>{(async()=>{var e,a,s,t,i,n,r,c;if(f){b(!0),F(null);try{const o=l.getCampaignById(f);if(o){y(o),A((null==(e=o.creative)?void 0:e.text)||""),U((null==(a=o.placementCtas)?void 0:a[$])||o.ctaButton||"saiba mais"),z((null==(t=null==(s=o.placementCreatives)?void 0:s[$])?void 0:t.mediaUrl)||(null==(i=o.creative)?void 0:i.mediaUrl)),L((null==(r=null==(n=o.placementCreatives)?void 0:n[$])?void 0:r.mediaType)||(null==(c=o.creative)?void 0:c.mediaType)||"image");const d=await l.getCampaignPerformance(f);d?k(d):F("Não foi possível processar as métricas desta campanha.")}else F("Campanha não encontrada no banco de dados.")}catch(d){F("Ocorreu um erro ao sincronizar os dados.")}finally{b(!1)}}else o("/my-store")})()},[f,o]),i.useEffect(()=>{var e,a,s,t,i,l,n;N&&(U((null==(e=N.placementCtas)?void 0:e[$])||N.ctaButton||"saiba mais"),z((null==(s=null==(a=N.placementCreatives)?void 0:a[$])?void 0:s.mediaUrl)||(null==(t=N.creative)?void 0:t.mediaUrl)),L((null==(l=null==(i=N.placementCreatives)?void 0:i[$])?void 0:l.mediaType)||(null==(n=N.creative)?void 0:n.mediaType)||"image"))},[$,N]);return e.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-white font-['Inter'] pb-12",children:[e.jsx("style",{children:"\n                .edit-section {\n                    background: #15191f; border: 1px solid rgba(255,255,255,0.05);\n                    border-radius: 24px; padding: 24px; margin-bottom: 30px;\n                }\n                .update-btn {\n                    width: 100%; padding: 16px; background: #00c2ff; color: #000;\n                    border-radius: 14px; font-weight: 900; font-size: 13px;\n                    text-transform: uppercase; letter-spacing: 1px; transition: 0.3s;\n                    box-shadow: 0 4px 20px rgba(0,194,255,0.3); margin-top: 20px;\n                }\n                .update-btn:disabled { background: #333; color: #555; box-shadow: none; cursor: not-allowed; }\n                .edit-input {\n                    width: 100%; background: #0a0c10; border: 1px solid rgba(255,255,255,0.1);\n                    padding: 14px; border-radius: 12px; color: #fff; font-size: 14px; outline: none; transition: 0.3s;\n                }\n                .edit-input:focus { border-color: #00c2ff; }\n                .highlight-card {\n                    background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.01) 100%);\n                    border: 1px solid rgba(255,255,255,0.08);\n                    border-radius: 20px;\n                    padding: 20px;\n                    display: flex;\n                    flex-direction: column;\n                    gap: 8px;\n                    position: relative;\n                    overflow: hidden;\n                }\n                .highlight-card.invested { border-left: 4px solid #00ff82; }\n                .highlight-card.used { border-left: 4px solid #ff4d4d; }\n            "}),e.jsxs("header",{className:"flex items-center gap-4 p-4 bg-[#0c0f14] sticky top-0 z-50 border-b border-white/10 h-[65px]",children:[e.jsx("button",{onClick:()=>o(-1),className:"text-[#00c2ff] text-xl p-2 hover:bg-white/5 rounded-full transition-all",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Dashboard de Performance"}),e.jsx("span",{className:"text-base font-bold text-white truncate max-w-[200px]",children:(null==N?void 0:N.name)||"Carregando..."})]})]}),e.jsx("main",{className:"p-5 max-w-[600px] mx-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50",children:[e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-2xl text-[#00c2ff] mb-2"}),e.jsx("p",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Sincronizando Flux de Dados..."})]}):C?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-4xl text-red-500 mb-4 opacity-50"}),e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Ops! Algo deu errado"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 px-10",children:C}),e.jsx("button",{onClick:()=>o("/my-store"),className:"text-[#00c2ff] font-bold uppercase text-xs tracking-widest underline",children:"Voltar para meus negócios"})]}):N?e.jsxs("div",{className:"animate-fade-in",children:[e.jsx(c,{campaign:N}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-8",children:[e.jsxs("div",{className:"highlight-card invested shadow-lg animate-slide-up",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Grana Investida"}),e.jsx("div",{className:"text-xl font-black text-white",children:P(w.financial.totalBudget||0)}),e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:e.jsx("i",{className:"fa-solid fa-wallet text-4xl"})})]}),e.jsxs("div",{className:"highlight-card used shadow-lg animate-slide-up",style:{animationDelay:"0.1s"},children:[e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Grana Usada"}),e.jsx("div",{className:"text-xl font-black text-white",children:P(w.financial.spent||0)}),e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:e.jsx("i",{className:"fa-solid fa-chart-pie text-4xl"})})]})]}),e.jsxs("section",{className:"mb-12",children:[e.jsxs("h2",{className:"text-[10px] font-black text-[#FFD700] uppercase tracking-[2px] mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-3 bg-[#FFD700] rounded-full"}),"Gestão de Criativos"]}),e.jsx(n,{campaign:{...N,creative:{text:R,mediaUrl:B,mediaType:D},placementCtas:{...N.placementCtas,[$]:T}},previewTab:$,setPreviewTab:S,destinationMode:N.destinationType||"url"}),e.jsxs("div",{className:"edit-section mt-6 animate-fade-in",children:[e.jsx("h3",{className:"text-xs font-black text-gray-500 uppercase tracking-widest mb-4",children:"Ajustar Comunicação"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-gray-600 uppercase mb-2 block",children:"Legenda (Copy)"}),e.jsx("textarea",{className:"edit-input min-h-[100px] resize-none",value:R,onChange:e=>A(e.target.value),placeholder:"Sua legenda impactante..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-gray-600 uppercase mb-2 block",children:"Mídia do Anúncio"}),e.jsxs("button",{onClick:()=>{var e;return null==(e=document.getElementById("edit-file-input"))?void 0:e.click()},className:"w-full py-3.5 bg-black/20 border border-white/10 rounded-xl text-xs font-bold text-white hover:border-[#00c2ff] transition-all",children:[e.jsx("i",{className:"fa-solid fa-cloud-arrow-up mr-2 text-[#00c2ff]"})," Alterar"]}),e.jsx("input",{type:"file",id:"edit-file-input",hidden:!0,accept:"image/*,video/*",onChange:e=>{var a;const s=null==(a=e.target.files)?void 0:a[0];if(s){const e=new FileReader;e.onload=e=>{var a;z(null==(a=e.target)?void 0:a.result),L(s.type.startsWith("video/")?"video":"image")},e.readAsDataURL(s)}}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-gray-600 uppercase mb-2 block",children:"Botão de Ação"}),e.jsxs("button",{onClick:async()=>{const e=r.map(e=>({label:e.label,value:e.label,icon:`fa-solid ${e.icon}`})),a=await g("Escolher Ação",e);a&&U(a)},className:"w-full py-3.5 bg-black/20 border border-white/10 rounded-xl text-xs font-bold text-white hover:border-[#00c2ff] transition-all flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-mouse-pointer text-[#00c2ff]"})," ",T.toUpperCase()]})]})]}),e.jsx("button",{className:"update-btn",disabled:!I||v,onClick:async()=>{if(f&&N&&!v){j(!0);try{const e={creative:{...N.creative,text:R},placementCtas:{...N.placementCtas,[$]:T},placementCreatives:{...N.placementCreatives,[$]:{mediaUrl:B,mediaType:D}}};await l.updateCampaign(f,e),y({...N,...e}),await u("Sucesso","Criativo atualizado com sucesso na rede Flux Ads.")}catch(e){await u("Erro","Falha ao atualizar o anúncio.")}finally{j(!1)}}},children:v?e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin mr-2"}):"Salvar Alterações no Criativo"})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-[10px] font-black text-[#00c2ff] uppercase tracking-[2px] mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-3 bg-[#00c2ff] rounded-full"}),"Entrega e Alcance"]}),e.jsx(d,{data:w.delivery})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-[10px] font-black text-[#00c2ff] uppercase tracking-[2px] mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-3 bg-[#00c2ff] rounded-full"}),"Cliques e Relevância"]}),e.jsx(x,{data:w.click})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-[10px] font-black text-[#00ff82] uppercase tracking-[2px] mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-3 bg-[#00ff82] rounded-full"}),"Conversão"]}),e.jsx(p,{data:w.conversion})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-[10px] font-black text-[#FFD700] uppercase tracking-[2px] mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-3 bg-[#FFD700] rounded-full"}),"Métricas Financeiras"]}),e.jsx(m,{data:w.financial})]}),e.jsx("div",{className:"bg-white/5 p-5 rounded-2xl border border-dashed border-white/10 text-center opacity-40",children:e.jsxs("p",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[2px] leading-relaxed",children:[e.jsx("i",{className:"fa-solid fa-shield-halved mr-1"})," Dados auditados via Flux API."]})})]}):null})]})};export{f as CampaignPerformance};

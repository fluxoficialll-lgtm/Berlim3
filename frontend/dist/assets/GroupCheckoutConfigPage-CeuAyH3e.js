import{u as e,e as a,r as l,c as o,g as i,j as c,f as r}from"./index-Bkpya5GW.js";import{PREVIEW_COUNTRIES as t}from"./GlobalSimulatorModal-vgBi7w2g.js";const n={syncpay:{BR:[{id:"pix",label:"Pix",icon:"fa-pix",color:"#00ff82",badge:"Instantâneo"},{id:"boleto",label:"Boleto",icon:"fa-barcode",color:"#aaa"}]},stripe:{BR:[{id:"pix",label:"Pix",icon:"fa-pix",color:"#00ff82"},{id:"card",label:"Cartão de Crédito",icon:"fa-credit-card",color:"#00c2ff"},{id:"debit_card",label:"Cartão de Débito",icon:"fa-credit-card",color:"#5dade2"},{id:"boleto",label:"Boleto",icon:"fa-barcode",color:"#aaa"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],US:[{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"ach",label:"ACH Direct Debit",icon:"fa-building-columns",color:"#85929e"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-google-pay",color:"#fff"}],EU:[{id:"sofort",label:"Sofort / Klarna",icon:"fa-money-bill-transfer",color:"#f39c12"},{id:"sepa",label:"SEPA Direct Debit",icon:"fa-university",color:"#2ecc71"},{id:"klarna",label:"Klarna BNPL",icon:"fa-shopping-bag",color:"#ffb3c6"},{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],GB:[{id:"card",label:"Debit / Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"bacs",label:"BACS Direct Debit",icon:"fa-building-columns",color:"#5dade2"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],IN:[{id:"upi",label:"UPI Pay",icon:"fa-mobile-screen-button",color:"#ff9933"},{id:"card",label:"International Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-google-pay",color:"#fff"}],JP:[{id:"konbini",label:"Konbini",icon:"fa-shop",color:"#27ae60"},{id:"card",label:"Credit Card (JCB)",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],MX:[{id:"oxxo",label:"OXXO Cash",icon:"fa-barcode",color:"#e74c3c"},{id:"card",label:"Crédito Parcelado",icon:"fa-credit-card",color:"#00c2ff"},{id:"debit_card",label:"Débito",icon:"fa-credit-card",color:"#5dade2"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],CA:[{id:"interac",label:"Interac e-Transfer",icon:"fa-exchange-alt",color:"#e74c3c"},{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"pad",label:"Pre-auth Debit (PAD)",icon:"fa-university",color:"#5dade2"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}],AU:[{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"becs",label:"BECS Direct Debit",icon:"fa-university",color:"#85929e"},{id:"afterpay",label:"Afterpay",icon:"fa-clock-rotate-left",color:"#b2fce4"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-google-pay",color:"#fff"}],SG:[{id:"paynow",label:"PayNow",icon:"fa-qrcode",color:"#635bff"},{id:"grabpay",label:"GrabPay",icon:"fa-wallet",color:"#00b14f"},{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-google-pay",color:"#fff"}],DEFAULT:[{id:"card",label:"Credit Card",icon:"fa-credit-card",color:"#00c2ff"},{id:"link",label:"Link",icon:"fa-link",color:"#00d66f"},{id:"wallet",label:"Wallets",icon:"fa-brands fa-apple-pay",color:"#fff"}]}},d=c=>{const r=e(),{showAlert:d,showOptions:s}=a(),[f,b]=l.useState(null),[p,x]=l.useState(!0),[h,u]=l.useState("stripe"),[m,g]=l.useState("BR"),[v,k]=l.useState([]),y=o.getCurrentUser();l.useEffect(()=>{if(c){const e=i.getGroupById(c);if(e){b(e);const a=e.checkoutConfig;if(a&&a.enabledMethods&&a.enabledMethods.length>0)u(a.providerId),g(a.targetCountry),k(a.enabledMethods);else{const a=e.selectedProviderId||"stripe";u(a),g("BR"),k((()=>{const e=new Set;return Object.values(n).forEach(a=>{Object.values(a).forEach(a=>{a.forEach(a=>e.add(a.id))})}),Array.from(e)})())}}x(!1)}},[c]);const j=l.useMemo(()=>{const e=n[h]||n.stripe;return e[m]||e.DEFAULT||[]},[h,m]),w=l.useMemo(()=>j.filter(e=>v.includes(e.id)),[j,v]),C=l.useCallback(e=>{k(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},[]);return{group:f,loading:p,provider:h,country:m,availableMethods:j,enabledMethods:v,previewEnabledMethods:w,handleSelectProvider:async()=>{var e,a,l,o;const i=[],c=(null==y?void 0:y.paymentConfigs)||{};if(((null==(e=null==y?void 0:y.paymentConfig)?void 0:e.isConnected)||(null==(a=c.syncpay)?void 0:a.isConnected))&&i.push({label:"SyncPay (Pix)",value:"syncpay",icon:"fa-solid fa-bolt"}),(null==(l=c.stripe)?void 0:l.isConnected)&&i.push({label:"Stripe (Global)",value:"stripe",icon:"fa-brands fa-stripe"}),(null==(o=c.paypal)?void 0:o.isConnected)&&i.push({label:"PayPal",value:"paypal",icon:"fa-brands fa-paypal"}),0===i.length)return void d("Erro","Conecte um provedor no painel financeiro antes.");const r=await s("Selecionar Provedor",i);r&&u(r)},handleSelectCountry:async()=>{const e=t.map(e=>({label:`${e.flag} ${e.name}`,value:e.code,icon:"fa-solid fa-earth-americas"})),a=await s("País de Venda",e);a&&g(a)},toggleMethod:C,handleSave:async()=>{if(!f)return;if(0===v.length)return void d("Aviso","Habilite ao menos um método para salvar.");const e={providerId:h,targetCountry:m,enabledMethods:v};await i.updateGroup({...f,checkoutConfig:e}),await d("Sucesso","Configurações de checkout sincronizadas."),r(-1)},activateAllInRegion:()=>{const e=j.map(e=>e.id);k(a=>Array.from(new Set([...a,...e])))}}},s=({onBack:e})=>c.jsxs("header",{className:"flex items-center p-4 bg-[#0c0f14] border-b border-white/10 h-[65px] sticky top-0 z-50",children:[c.jsx("button",{onClick:e,className:"mr-4 text-[#00c2ff] text-xl p-2 hover:bg-white/5 rounded-full transition-all active:scale-90",children:c.jsx("i",{className:"fa-solid fa-arrow-left"})}),c.jsx("h1",{className:"font-bold text-white",children:"Checkout Personalizado"})]}),f=({provider:e,country:a,onSelectProvider:l,onSelectCountry:o})=>c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 cursor-pointer hover:border-[#00c2ff33] transition-all",onClick:l,children:[c.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest block mb-2",children:"Provedor"}),c.jsxs("div",{className:"flex items-center gap-2 text-white font-bold text-sm",children:[c.jsx("i",{className:"fa-solid fa-wallet text-[#00c2ff]"}),e.toUpperCase()]})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 cursor-pointer hover:border-[#00ff8233] transition-all",onClick:o,children:[c.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest block mb-2",children:"País Alvo"}),c.jsxs("div",{className:"flex items-center gap-2 text-white font-bold text-sm",children:[c.jsx("i",{className:"fa-solid fa-earth-americas text-[#00ff82]"}),a]})]})]}),b=({id:e,label:a,icon:l,color:o,badge:i,isActive:r,onToggle:t})=>c.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/20 rounded-2xl border transition-all cursor-pointer "+(r?"border-[#00c2ff] bg-[#00c2ff08]":"border-white/5"),onClick:()=>{t(e)},children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-black/40",style:{color:o},children:c.jsx("i",{className:`fa-solid ${l} text-lg`})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-bold text-gray-200",children:a}),i&&c.jsx("span",{className:"text-[8px] font-black uppercase text-[#00ff82] tracking-tighter",children:i})]})]}),c.jsxs("label",{className:"switch",onClick:e=>e.stopPropagation(),children:[c.jsx("input",{type:"checkbox",checked:r,onChange:a=>{t(e)}}),c.jsx("span",{className:"slider-switch"})]})]}),p=({enabledMethods:e})=>c.jsxs("div",{className:"mt-10 animate-fade-in",children:[c.jsx("div",{className:"text-center mb-4",children:c.jsx("span",{className:"text-[10px] font-black text-[#FFD700] uppercase tracking-[4px]",children:"Previsão do Checkout"})}),c.jsxs("div",{className:"bg-[#0c0f14] border-2 border-[#1a1e26] rounded-[40px] p-6 w-full max-w-[320px] mx-auto shadow-[0_20px_50px_rgba(0,0,0,0.6)]",children:[c.jsx("div",{className:"text-[10px] text-gray-600 font-bold uppercase mb-5 text-center tracking-widest",children:"Interface do Cliente"}),c.jsx("div",{className:"space-y-2.5 min-h-[120px] flex flex-col justify-center",children:e.length>0?e.map(e=>c.jsxs("div",{className:"w-full p-4 rounded-xl flex items-center gap-3 bg-white/5 border border-white/5 animate-slide-up",children:[c.jsx("i",{className:`fa-solid ${e.icon} text-sm`,style:{color:e.color}}),c.jsxs("span",{className:"text-[12px] font-bold text-white",children:["Pagar com ",e.label]})]},e.id)):c.jsxs("div",{className:"py-10 text-center opacity-20 flex flex-col items-center gap-2",children:[c.jsx("i",{className:"fa-solid fa-ghost text-3xl"}),c.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"Nenhum método ativo"})]})}),c.jsxs("div",{className:"mt-8 pt-4 border-t border-white/5 flex items-center justify-center gap-2 opacity-30",children:[c.jsx("i",{className:"fa-solid fa-shield-halved text-[9px]"}),c.jsx("span",{className:"text-[8px] font-black uppercase tracking-[2px]",children:"Flux Secure Engine"})]})]})]}),x=()=>{const a=e(),{id:l}=r(),{group:o,loading:i,provider:t,country:n,availableMethods:x,enabledMethods:h,previewEnabledMethods:u,handleSelectProvider:m,handleSelectCountry:g,toggleMethod:v,handleSave:k,activateAllInRegion:y}=d(l);return i||!o?null:c.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-white font-['Inter'] flex flex-col",children:[c.jsx(s,{onBack:()=>a(-1)}),c.jsxs("main",{className:"flex-1 overflow-y-auto p-5 pb-32 max-w-[600px] mx-auto w-full no-scrollbar",children:[c.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 p-5 rounded-3xl mb-8 animate-fade-in",children:c.jsx("p",{className:"text-xs text-blue-300 leading-relaxed italic text-center",children:'"Personalize o checkout conforme a região do seu tráfego. Métodos locais como ACH nos EUA ou UPI na Índia convertem até 40% mais."'})}),c.jsx(f,{provider:t,country:n,onSelectProvider:m,onSelectCountry:g}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 mb-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px] ml-1",children:"Métodos da Região"}),c.jsx("button",{onClick:y,className:"text-[9px] font-black text-[#00c2ff] uppercase tracking-widest hover:underline",children:"Ativar Todos"})]}),c.jsx("div",{className:"space-y-2.5",children:x.map(e=>c.jsx(b,{...e,isActive:h.includes(e.id),onToggle:v},`${e.id}-${n}`))})]}),c.jsx(p,{enabledMethods:u}),c.jsx("button",{className:"btn-save-fixed",onClick:k,children:"Salvar Configurações"})]})]})};export{x as GroupCheckoutConfigPage};

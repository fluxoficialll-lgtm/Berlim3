import{u as o,r as n,c as e,j as r}from"./index-Bkpya5GW.js";import{p as t}from"./postService-B_maMF9u.js";import{g as i}from"./idGenerator-C-_CWH9r.js";const a=()=>{var a,l;const s=o(),[d,p]=n.useState(""),[c,f]=n.useState(["",""]),[x,u]=n.useState("24 Horas"),[b,g]=n.useState(!0),m=e.getCurrentUser(),h=(null==(a=null==m?void 0:m.profile)?void 0:a.name)?`@${m.profile.name}`:"@usuario",v=(null==(l=null==m?void 0:m.profile)?void 0:l.photoUrl)||"https://randomuser.me/api/portraits/men/32.jpg";n.useEffect(()=>{const o=d.trim().length>0,n=c.filter(o=>o.trim().length>0).length;g(!(o&&n>=2))},[d,c]);const j=o=>{if(o.preventDefault(),b)return;const n=c.filter(o=>o.trim().length>0).map(o=>({text:o,votes:0})),e={id:i(),type:"poll",authorId:(null==m?void 0:m.id)||"",username:h,avatar:v,text:d,time:"Agora",timestamp:Date.now(),isPublic:!0,views:0,likes:0,comments:0,liked:!1,pollOptions:n,votedOptionIndex:null};t.addPost(e),s("/feed")};return r.jsxs("div",{className:"h-screen flex flex-col overflow-y-auto overflow-x-hidden font-['Inter']",style:{background:"radial-gradient(circle at 5% 5%, #0c0f14, #0a0c10)",color:"#fff"},children:[r.jsx("style",{children:"\n            * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }\n            \n            header {\n                display: flex; align-items: center; justify-content: space-between;\n                padding: 16px 20px; background: #0c0f14; position: fixed; width: 100%; z-index: 50;\n                border-bottom: 1px solid rgba(255, 255, 255, 0.1); top: 0;\n            }\n            header h1 { font-size: 18px; font-weight: 600; color: #00c2ff; }\n            header button {\n                background: none; border: none; color: #00c2ff; font-size: 18px; cursor: pointer; transition: 0.3s; padding: 8px;\n            }\n            header button:hover { color: #fff; }\n\n            #createPollBtn {\n                background: #00c2ff; color: #0c0f14; padding: 8px 16px; border-radius: 8px;\n                font-weight: bold; font-size: 16px; transition: 0.3s; border: none;\n            }\n            #createPollBtn:hover { background: #007bff; color: #fff; }\n            #createPollBtn:disabled {\n                background: rgba(0, 194, 255, 0.2); color: rgba(255, 255, 255, 0.5); cursor: not-allowed; transform: none;\n            }\n\n            main { flex-grow: 1; width: 100%; max-width: 600px; margin: 0 auto; padding: 100px 20px 40px 20px; }\n\n            .poll-container {\n                background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px;\n                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4); margin-bottom: 20px;\n            }\n\n            .poll-question {\n                width: 100%; min-height: 80px; background: none; border: 2px solid rgba(0, 194, 255, 0.5);\n                border-radius: 8px; resize: vertical; color: #fff; font-size: 18px; line-height: 1.4;\n                padding: 15px; margin-bottom: 20px; outline: none; transition: border-color 0.3s, box-shadow 0.3s;\n            }\n            .poll-question:focus { border-color: #00c2ff; box-shadow: 0 0 10px rgba(0, 194, 255, 0.7); }\n            .poll-question::placeholder { color: rgba(255, 255, 255, 0.6); font-weight: 500; }\n\n            .poll-option { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }\n            .poll-option input {\n                flex-grow: 1; padding: 10px; border-radius: 6px; border: 1px solid rgba(255, 255, 255, 0.2);\n                background: #1a1e24; color: #fff; font-size: 15px; outline: none; transition: border-color 0.2s;\n            }\n            .poll-option input:focus { border-color: #00c2ff; background: #101317; }\n\n            .remove-option-btn {\n                background: none; border: none; color: #ff4d4d; font-size: 20px; cursor: pointer; padding: 5px; transition: 0.2s;\n            }\n            .remove-option-btn:hover { color: #ff0000; }\n\n            #addOptionBtn {\n                display: flex; align-items: center; justify-content: center; width: 100%; padding: 10px;\n                border: 2px dashed rgba(0, 194, 255, 0.4); background: rgba(0, 194, 255, 0.05);\n                color: #00c2ff; border-radius: 8px; cursor: pointer; transition: 0.3s;\n                font-size: 16px; font-weight: bold; gap: 10px;\n            }\n            #addOptionBtn:hover { background: rgba(0, 194, 255, 0.15); border-color: #00c2ff; }\n            #addOptionBtn:disabled { opacity: 0.5; cursor: not-allowed; }\n\n            .options-container { display: flex; flex-direction: column; gap: 15px; }\n            .option-item {\n                background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 10px;\n                display: flex; justify-content: space-between; align-items: center; cursor: pointer;\n                transition: 0.3s; border: 1px solid transparent;\n            }\n            .option-item:hover { background: rgba(0, 194, 255, 0.15); border-color: #00c2ff; }\n            .option-item span { font-size: 15px; color: #fff; }\n            .option-item i { color: #00c2ff; }\n            .duration-selection { font-weight: bold; color: #00c2ff; margin-left: 10px; }\n        "}),r.jsxs("header",{children:[r.jsx("button",{onClick:()=>s("/create-post"),"aria-label":"Fechar",role:"button",children:r.jsx("i",{className:"fa-solid fa-xmark"})}),r.jsx("h1",{children:"Criar Enquete"}),r.jsx("button",{id:"createPollBtn",onClick:j,disabled:b,role:"button",children:"Criar"})]}),r.jsx("main",{children:r.jsxs("form",{id:"pollForm",onSubmit:j,children:[r.jsxs("div",{className:"poll-container",children:[r.jsx("textarea",{id:"pollQuestion",className:"poll-question",placeholder:"Qual é o tópico da sua enquete?",value:d,onChange:o=>p(o.target.value)}),r.jsx("div",{id:"optionsContainer",children:c.map((o,n)=>r.jsxs("div",{className:"poll-option",children:[r.jsx("input",{type:"text",placeholder:`Opção ${n+1}`,maxLength:100,value:o,onChange:o=>((o,n)=>{const e=[...c];e[o]=n,f(e)})(n,o.target.value),required:!0}),c.length>2&&r.jsx("button",{type:"button",className:"remove-option-btn",onClick:()=>(o=>{const n=c.filter((n,e)=>e!==o);f(n)})(n),"aria-label":"Remover opção",children:r.jsx("i",{className:"fa-solid fa-xmark"})})]},n))}),r.jsxs("button",{type:"button",id:"addOptionBtn",onClick:()=>{c.length<5?f([...c,""]):alert("Máximo de 5 opções atingido.")},disabled:c.length>=5,children:[r.jsx("i",{className:"fa-solid fa-plus-circle"})," Adicionar Opção"]})]}),r.jsx("div",{className:"options-container",children:r.jsxs("div",{className:"option-item",role:"button",onClick:()=>{let o;o="24 Horas"===x?"7 Dias":"7 Dias"===x?"30 Dias":"24 Horas",u(o),alert(`Duração da enquete alterada para: ${o}.`)},children:[r.jsxs("span",{children:[r.jsx("i",{className:"fa-solid fa-clock"})," Duração:",r.jsx("span",{className:"duration-selection",id:"pollDuration",children:x})]}),r.jsx("i",{className:"fa-solid fa-chevron-right"})]})})]})})]})};export{a as CreatePoll};

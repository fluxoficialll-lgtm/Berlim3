const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PaymentFlowModal-i1HSTqvY.js","assets/index-Bkpya5GW.js","assets/index-DBFgheNr.css","assets/currencyService-CUGBeSum.js","assets/VipSalesTracker-CtpqEFrn.js","assets/paypalService-D9R1o7YD.js","assets/PurchaseIntention-BPUq0Pu8.js"])))=>i.map(i=>d[i]);
import{c as e,i as a,M as t,U as n,u as s,j as r,e as i,r as o,w as c,_ as l,h as d}from"./index-Bkpya5GW.js";import{m as p}from"./marketplaceService-DFf-X3tk.js";import{a as m}from"./apiClient-Ccqh0pvL.js";import{u as g}from"./useVipPricing-BfQIdtBC.js";import"./currencyService-CUGBeSum.js";const u=[{id:"prod-001",title:"iPhone 15 Pro Max 256GB - Titânio",price:7890,category:"Eletrônicos",location:"São Paulo, SP",description:"Aparelho novo, lacrado com nota fiscal e garantia Apple de 1 ano.",image:"https://images.unsplash.com/photo-1695048133142-1a20484d2569?q=80&w=600",sellerId:"u-creator-002",sellerName:"Eduardo MKT",timestamp:Date.now()-36e5,soldCount:14},{id:"prod-002",title:"Mentoria: Do Zero ao Milhão no Tráfego",price:497,category:"Infoprodutos",location:"Brasil / Online",description:"Aprenda as estratégias que usei para escalar mais de 100 operações de e-commerce.",image:"https://images.unsplash.com/photo-1557804506-669a67965ba0?q=80&w=600",sellerId:"u-creator-002",sellerName:"Eduardo MKT",timestamp:Date.now()-864e5,soldCount:156},{id:"prod-003",title:"Setup Home Office High-End",price:12500,category:"Eletrônicos",location:"Curitiba, PR",description:"Cadeira Herman Miller + Monitor Ultrawide 34 + MacBook M2 Pro.",image:"https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?q=80&w=600",sellerId:"u-creator-002",sellerName:"Eduardo MKT",timestamp:Date.now()-1728e5,soldCount:1},{id:"prod-004",title:"E-book: 100 Copys que Vendem",price:29.9,category:"Infoprodutos",location:"Online",description:"Biblioteca de modelos de copy prontos para usar em anúncios de alta conversão.",image:"https://images.unsplash.com/photo-1499750310107-5fef28a66643?q=80&w=600",sellerId:"u-creator-002",sellerName:"Eduardo MKT",timestamp:Date.now()-5e5,soldCount:890}],x=n?{getMyBusinessData:async n=>{await new Promise(e=>setTimeout(e,600));const s=e.getCurrentUser();if(!s)throw new Error("Usuário não autenticado");const r=s.email.includes("test.com")||s.id.startsWith("u-mock"),i=a.posts.getAll().filter(e=>e.authorId===n||r&&"u-creator-002"===e.authorId),o=a.marketplace.getAll(),c=o.length>0?o.filter(e=>e.sellerId===n||e.sellerId===s.email||r&&"u-creator-002"===e.sellerId):r?u:[],l=a.ads.getAll(),d=l.length>0?l.filter(e=>e.ownerId===n||e.ownerEmail===s.email||r&&"u-creator-002"===e.ownerId):r?t:[];return d.filter(e=>"active"===e.status).length,{stats:{totalPosts:i.filter(e=>"video"!==e.type).length,totalReels:i.filter(e=>"video"===e.type).length,totalProducts:c.length,activeAds:d.length,pendingReports:0},financial:{totalRevenue:1250.75,salesCount:14},lists:{products:c,campaigns:d}}},getAdminDashboardData:async()=>({financial:{totalGMV:5e4,totalTransactions:1200,platformNetProfit:5e3,revenueGrowth24h:1500},users:{totalRegistered:5e3,growthLast24h:45,bannedCount:12},content:{totalGroups:150,totalPosts:12e3,activeCampaigns:85},security:{pendingModeration:3}})}:{getMyBusinessData:async e=>await m.call(`/api/screens/my-business?userId=${e}`),getAdminDashboardData:async()=>(await m.call("/api/admin/execute/stats/dashboard")).data},f=({products:e,onDelete:a})=>{const t=s();return r.jsxs("div",{className:"products-list animate-fade-in",children:[r.jsx("style",{children:"\n                .item-badge-ad {\n                    font-size: 8px;\n                    font-weight: 900;\n                    text-transform: uppercase;\n                    background: #FFD700;\n                    color: #000;\n                    padding: 1px 4px;\n                    border-radius: 3px;\n                    margin-left: 6px;\n                }\n            "}),e.length>0?e.map(e=>{return r.jsxs("div",{className:"store-item",onClick:()=>t(`/marketplace/product/${e.id}`),children:[r.jsx("img",{src:e.image||"https://via.placeholder.com/100",className:"item-thumb",alt:e.title}),r.jsxs("div",{className:"item-info",children:[r.jsxs("div",{className:"item-title flex items-center",children:[e.title,e.isAd&&r.jsx("span",{className:"item-badge-ad",children:"AD"})]}),r.jsxs("div",{className:"item-meta",children:[e.category,r.jsxs("span",{className:"item-sales",children:[r.jsx("i",{className:"fa-solid fa-bag-shopping"})," ",e.soldCount||0]})]}),r.jsx("div",{className:"item-price",children:(n=e.price,n.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))})]}),r.jsx("div",{className:"item-actions",children:r.jsx("div",{className:"action-icon delete",onClick:t=>a(e.id,t),title:"Excluir Produto",children:r.jsx("i",{className:"fa-solid fa-trash-can"})})})]},e.id);var n}):r.jsxs("div",{className:"empty-state",children:[r.jsx("i",{className:"fa-solid fa-box-open"}),r.jsx("p",{children:"Você ainda não publicou produtos."})]}),r.jsxs("button",{className:"add-btn",onClick:()=>t("/create-marketplace-item"),children:[r.jsx("i",{className:"fa-solid fa-plus-circle"})," Criar Novo Anúncio"]})]})},b=o.lazy(()=>l(()=>import("./PaymentFlowModal-i1HSTqvY.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.PaymentFlowModal}))),h=e=>e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString():"0",j=({campaigns:e,onDelete:a,onEnd:t,onResume:n})=>{const l=s(),{showPrompt:p}=i(),[m,u]=o.useState(null),[x,f]=o.useState(0),{geoData:j,displayPriceInfo:v}=g(m?{id:m.id,name:m.name,price:(x||m.budget).toString(),currency:"BRL"}:null);return r.jsxs("div",{className:"campaigns-list animate-fade-in",children:[r.jsx("style",{children:"\n                .btn-performance-grid {\n                    width: 32px;\n                    height: 32px;\n                    border-radius: 8px;\n                    background: rgba(0, 194, 255, 0.1);\n                    color: #00c2ff;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    cursor: pointer;\n                    transition: 0.3s;\n                    border: 1px solid rgba(0, 194, 255, 0.2);\n                    margin-top: 4px;\n                }\n                .btn-performance-grid:hover {\n                    background: #00c2ff;\n                    color: #000;\n                    transform: translateY(-2px);\n                    box-shadow: 0 4px 10px rgba(0,194,255,0.3);\n                }\n                .camp-card-wrapper {\n                    position: relative;\n                    margin-bottom: 15px;\n                    transition: 0.3s;\n                }\n                .camp-card-wrapper.pending {\n                    cursor: pointer;\n                }\n                .camp-card-wrapper.pending:active {\n                    transform: scale(0.98);\n                }\n                .camp-status.pending-payment {\n                    background: #FFD700;\n                    color: #000;\n                    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);\n                }\n                .camp-status.ended {\n                    background: rgba(255, 255, 255, 0.1);\n                    color: #888;\n                }\n                .pending-overlay { position: absolute; inset: 0; background: rgba(255, 215, 0, 0.03); border-radius: 20px; pointer-events: none; border: 1px solid rgba(255, 215, 0, 0.1); }\n                .pay-now-btn { width: 100%; padding: 14px; background: linear-gradient(90deg, #FFD700, #FDB931); color: #000; border: none; border-radius: 12px; font-weight: 900; font-size: 14px; text-transform: uppercase; letter-spacing: 1px; margin-top: 15px; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); display: flex; align-items: center; justify-content: center; gap: 8px; }\n                \n                .top-up-btn {\n                    width: 100%; padding: 12px; background: rgba(0, 194, 255, 0.08); \n                    border: 1px solid rgba(0, 194, 255, 0.2); border-radius: 12px; \n                    color: #00c2ff; font-weight: 900; font-size: 12px; \n                    text-transform: uppercase; letter-spacing: 1.5px;\n                    display: flex; align-items: center; justify-content: center; gap: 8px;\n                    margin-bottom: 12px; transition: 0.3s; cursor: pointer;\n                }\n                .top-up-btn:hover { background: #00c2ff; color: #000; box-shadow: 0 0 20px rgba(0, 194, 255, 0.3); }\n\n                .camp-actions-footer {\n                    display: flex;\n                    gap: 10px;\n                    margin-top: 15px;\n                }\n                .action-btn-list {\n                    flex: 1;\n                    padding: 12px;\n                    border-radius: 12px;\n                    font-size: 11px;\n                    font-weight: 800;\n                    text-transform: uppercase;\n                    cursor: pointer;\n                    transition: 0.2s;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 6px;\n                }\n                .btn-stop { \n                    background: transparent; \n                    border: 1px solid rgba(255, 77, 77, 0.3); \n                    color: #ff4d4d; \n                    width: 100%;\n                }\n                .btn-stop:hover { background: rgba(255, 77, 77, 0.08); }\n\n                .btn-resume { \n                    background: rgba(0, 194, 255, 0.1); \n                    border: 1px solid #00c2ff; \n                    color: #00c2ff; \n                }\n                .btn-resume:hover { background: #00c2ff; color: #000; }\n\n                .btn-delete { \n                    background: transparent; \n                    border: 1px solid rgba(255, 255, 255, 0.1); \n                    color: #666; \n                }\n                .btn-delete:hover { border-color: #ff4d4d; color: #ff4d4d; background: rgba(255, 77, 77, 0.05); }\n            "}),e.length>0?e.map(e=>{var s,i;const o="active"===e.status,d=!c.hasAvailableBudget(e),m=o&&"commission"!==e.pricingModel&&d;return r.jsxs("div",{className:"campaign-card camp-card-wrapper "+("pending"===e.status?"pending":""),onClick:()=>(e=>{"pending"===e.status&&(f(0),u(e))})(e),children:["pending"===e.status&&r.jsx("div",{className:"pending-overlay"}),r.jsxs("div",{className:"camp-header",children:[r.jsx("div",{className:"camp-name",children:e.name}),r.jsx("div",{className:"camp-status "+("active"===e.status?"":"ended"===e.status?"ended":"pending-payment"),children:"active"===e.status?"Veiculando":"ended"===e.status?"Encerrada":"Aguardando Pagamento"})]}),r.jsx("div",{className:"camp-desc",children:e.creative.text.length>80?e.creative.text.substring(0,80)+"...":e.creative.text}),r.jsxs("div",{className:"camp-metrics",children:[r.jsxs("div",{className:"metric",children:[r.jsx("span",{className:"metric-label",children:"Investimento"}),r.jsx("span",{className:"metric-val",style:{color:"commission"===e.pricingModel?"#FFD700":"#00ff82"},children:"commission"===e.pricingModel?"CPA":(g=e.budget,g.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}))})]}),r.jsxs("div",{className:"metric",children:[r.jsx("span",{className:"metric-label",children:"Alcance"}),r.jsx("span",{className:"metric-val",children:h((null==(s=e.stats)?void 0:s.views)||0)})]}),r.jsxs("div",{className:"metric",children:[r.jsx("span",{className:"metric-label",children:"Cliques"}),r.jsx("span",{className:"metric-val",children:h((null==(i=e.stats)?void 0:i.clicks)||0)})]}),r.jsxs("div",{className:"metric action",children:[r.jsx("span",{className:"metric-label",children:"Métricas"}),r.jsx("div",{className:"btn-performance-grid",title:"Ver Desempenho Completo",onClick:a=>{a.preventDefault(),a.stopPropagation(),"active"===e.status||"ended"===e.status?l(`/campaign-performance/${e.id}`):alert("As métricas estarão disponíveis após a ativação do pagamento.")},children:r.jsx("i",{className:"fa-solid "+("pending"!==e.status?"fa-chart-simple":"fa-lock opacity-30")})})]})]}),m&&r.jsxs("button",{className:"top-up-btn",onClick:a=>(async(e,a)=>{e.stopPropagation();const t=await p("Adicionar Saldo","Informe o valor que deseja adicionar à sua campanha (Min R$ 10,00):","Ex: 50,00");if(t){const e=parseFloat(t.replace(/\./g,"").replace(",","."));if(isNaN(e)||e<10)return void alert("Valor inválido. O mínimo é R$ 10,00.");f(e),u(a)}})(a,e),children:[r.jsx("i",{className:"fa-solid fa-circle-plus"})," Adicionar Saldo (Orçamento Esgotado)"]}),"pending"===e.status&&r.jsxs("button",{className:"pay-now-btn",onClick:a=>{a.stopPropagation(),u(e)},children:[r.jsx("i",{className:"fa-solid fa-credit-card"})," Fazer Pagamento"]}),r.jsx("div",{className:"camp-actions-footer",children:"active"===e.status?r.jsxs("button",{className:"action-btn-list btn-stop",onClick:a=>t(e.id,a),children:[r.jsx("i",{className:"fa-solid fa-stop-circle"})," Encerrar Campanha"]}):"ended"===e.status?r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"action-btn-list btn-resume",onClick:a=>n(e.id,a),children:[r.jsx("i",{className:"fa-solid fa-play-circle"})," Retomar"]}),r.jsxs("button",{className:"action-btn-list btn-delete",onClick:t=>a(e.id,t),children:[r.jsx("i",{className:"fa-solid fa-trash-can"})," Excluir"]})]}):r.jsxs("button",{className:"action-btn-list btn-delete w-full",onClick:t=>a(e.id,t),children:[r.jsx("i",{className:"fa-solid fa-trash-can"})," Remover Rascunho"]})})]},e.id);var g}):r.jsxs("div",{className:"empty-state",children:[r.jsx("i",{className:"fa-solid fa-bullhorn"}),r.jsx("p",{children:"Nenhuma campanha configurada."})]}),r.jsxs("button",{className:"add-btn gold",onClick:()=>l("/ad-type-selector"),children:[r.jsx("i",{className:"fa-solid fa-rocket"})," Iniciar Nova Promoção"]}),r.jsx(o.Suspense,{fallback:null,children:m&&r.jsx(b,{isOpen:!!m,onClose:()=>{u(null),f(0)},group:{id:m.id,name:x>0?`Recarga: ${m.name}`:`Anúncio: ${m.name}`,price:(x||m.budget).toString(),currency:"BRL",creatorEmail:m.ownerEmail,isVip:!1},provider:"BR"===(null==j?void 0:j.countryCode)?"syncpay":"stripe",convertedPriceInfo:v,geo:j,onSuccess:async()=>{m&&(x>0?await d.addBudget(m.id,x):await d.updateCampaignStatus(m.id,"active"),u(null),f(0))}})})]})},v=()=>{const a=s(),{showConfirm:t}=i(),[n,c]=o.useState("products"),[l,m]=o.useState(null),[g,u]=o.useState(!0),b=async()=>{const t=e.getCurrentUser();if(t){u(!0);try{const e=await x.getMyBusinessData(t.id);m(e)}catch(n){}finally{u(!1)}}else a("/")};o.useEffect(()=>{b()},[]);return r.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white font-['Inter'] flex flex-col overflow-hidden",children:[r.jsx("style",{children:"\n        header { display:flex; align-items:center; padding:16px; background: #0c0f14; position:fixed; width:100%; top:0; z-index:10; border-bottom:1px solid rgba(255,255,255,0.1); height: 65px; }\n        header .back-btn { background:none; border:none; color:#fff; font-size:22px; cursor:pointer; padding-right: 15px; }\n        header h1 { font-size:20px; font-weight:600; }\n        main { padding-top: 80px; padding-bottom: 40px; width: 100%; max-width: 600px; margin: 0 auto; padding-left: 20px; padding-right: 20px; flex-grow: 1; overflow-y: auto; }\n        \n        /* Tabs Styling */\n        .store-tabs { display: flex; background: rgba(255,255,255,0.05); border-radius: 12px; padding: 4px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }\n        .tab-btn { flex: 1; padding: 12px; border: none; background: transparent; color: #aaa; font-size: 14px; font-weight: 600; cursor: pointer; border-radius: 8px; transition: 0.3s; }\n        .tab-btn.active { background: #00c2ff; color: #000; box-shadow: 0 2px 10px rgba(0,194,255,0.3); }\n\n        /* Generic Add Button */\n        .add-btn { width: 100%; padding: 18px; border-radius: 16px; font-weight: 800; cursor: pointer; border: 1px dashed rgba(255,255,255,0.1); background: rgba(255,255,255,0.02); color: #888; margin-top: 15px; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; text-transform: uppercase; font-size: 13px; letter-spacing: 1px; }\n        .add-btn.gold { border-color: rgba(255,215,0,0.3); color: #FFD700; background: rgba(255,215,0,0.02); }\n        .add-btn:hover { background: rgba(255,255,255,0.05); border-color: #00c2ff; color: #fff; }\n\n        /* Products List Styles */\n        .store-item { \n            display: flex; gap: 15px; background: rgba(255,255,255,0.03); \n            border: 1px solid rgba(255,255,255,0.05); border-radius: 16px; \n            padding: 12px; margin-bottom: 12px; cursor: pointer; transition: 0.2s;\n        }\n        .store-item:hover { border-color: #00c2ff33; background: rgba(255,255,255,0.06); }\n        .item-thumb { width: 64px; height: 64px; border-radius: 10px; object-fit: cover; background: #000; }\n        .item-info { flex: 1; min-width: 0; display: flex; flex-direction: column; justify-content: center; }\n        .item-title { font-weight: 700; font-size: 15px; color: #fff; margin-bottom: 2px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }\n        .item-meta { font-size: 11px; color: #666; display: flex; align-items: center; gap: 10px; }\n        .item-sales { color: #FFD700; font-weight: 700; }\n        .item-price { font-size: 14px; font-weight: 800; color: #00ff82; margin-top: 2px; }\n        .item-actions { display: flex; align-items: center; padding-left: 10px; }\n        .action-icon { width: 36px; height: 36px; display: flex; items-center; justify-content: center; border-radius: 10px; background: rgba(255,255,255,0.05); color: #555; cursor: pointer; transition: 0.2s; }\n        .action-icon.delete:hover { background: rgba(255,77,77,0.1); color: #ff4d4d; }\n\n        /* Campaigns List Styles */\n        .campaign-card { \n            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); \n            border-radius: 20px; padding: 20px; margin-bottom: 16px; \n        }\n        .camp-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }\n        .camp-name { font-weight: 800; font-size: 16px; color: #fff; }\n        .camp-status { font-size: 10px; font-weight: 900; text-transform: uppercase; padding: 3px 8px; border-radius: 6px; background: #00ff82; color: #000; }\n        .camp-desc { font-size: 13px; color: #888; line-height: 1.4; margin-bottom: 15px; }\n        .camp-metrics { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 15px 0; border-top: 1px solid rgba(255,255,255,0.05); }\n        .metric { display: flex; flex-direction: column; gap: 4px; }\n        .metric-label { font-size: 9px; color: #555; text-transform: uppercase; font-weight: 700; }\n        .metric-val { font-size: 14px; font-weight: 800; color: #fff; }\n\n        /* Empty State */\n        .empty-state { text-align: center; padding: 60px 20px; color: #444; display: flex; flex-direction: column; align-items: center; gap: 15px; }\n        .empty-state i { font-size: 48px; opacity: 0.2; }\n        .empty-state p { font-size: 14px; font-weight: 500; }\n      "}),r.jsxs("header",{children:[r.jsx("button",{onClick:()=>{a(-1)},className:"back-btn",children:r.jsx("i",{className:"fa-solid fa-arrow-left"})}),r.jsx("h1",{children:"Meus Negócios"})]}),r.jsx("main",{className:"no-scrollbar",children:g?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50",children:[r.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-2xl text-[#00c2ff] mb-2"}),r.jsx("p",{className:"text-xs uppercase font-bold tracking-widest",children:"Lendo cabo de dados..."})]}):l&&r.jsxs("div",{className:"animate-fade-in",children:[r.jsxs("div",{className:"store-tabs",children:[r.jsxs("button",{className:"tab-btn "+("products"===n?"active":""),onClick:()=>c("products"),children:["Meus Produtos (",l.stats.totalProducts,")"]}),r.jsxs("button",{className:"tab-btn "+("campaigns"===n?"active":""),onClick:()=>c("campaigns"),children:["Minhas Campanhas (",l.stats.activeAds,")"]})]}),"products"===n?r.jsx(f,{products:l.lists.products,onDelete:async(e,a)=>{a.stopPropagation(),await t("Excluir Produto","Tem certeza? A ação não pode ser desfeita.","Excluir","Cancelar")&&(await p.deleteItem(e),b())}}):r.jsx(j,{campaigns:l.lists.campaigns,onEnd:async(e,a)=>{a.stopPropagation(),await t("Encerrar Campanha","Deseja parar a veiculação? Você poderá retomá-la a qualquer momento.","Encerrar","Manter")&&(await d.updateCampaignStatus(e,"ended"),b())},onResume:async(e,a)=>{a.stopPropagation(),await t("Retomar Campanha","Deseja reativar o anúncio agora?","Retomar","Cancelar")&&(await d.updateCampaignStatus(e,"active"),b())},onDelete:async(e,a)=>{a.stopPropagation(),await t("Excluir Campanha","Deseja remover permanentemente este registro? O orçamento restante não será reembolsado.","Excluir","Cancelar")&&(await d.deleteCampaign(e),b())}})]})})]})};export{v as MyStore};

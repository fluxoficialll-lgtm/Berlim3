import{u as e,f as n,r as s,c as a,g as o,j as i}from"./index-CipjSFYz.js";const r=()=>{const r=e(),{id:t}=n(),[l,d]=s.useState(null),[c,p]=s.useState(null),[x,m]=s.useState(0),[b,u]=s.useState(""),[g,h]=s.useState(!1),[f,v]=s.useState(!1),[j,N]=s.useState("30"),[w,y]=s.useState(!1),[k,S]=s.useState(!1),[C,M]=s.useState("60"),[z,A]=s.useState([]),[I,P]=s.useState(""),[L,B]=s.useState(null),[E,T]=s.useState(""),[W,G]=s.useState([]);s.useEffect(()=>{const e=a.getCurrentUserEmail();if(p(e),t){const e=o.getGroupById(t);if(e){d(e),e.settings&&(e.settings.memberLimit&&u(e.settings.memberLimit),e.settings.onlyAdminsPost&&h(e.settings.onlyAdminsPost),e.settings.msgSlowMode&&v(e.settings.msgSlowMode),e.settings.msgSlowModeInterval&&N(e.settings.msgSlowModeInterval.toString()),e.settings.approveMembers&&y(e.settings.approveMembers),e.settings.joinSlowMode&&S(e.settings.joinSlowMode),e.settings.joinSlowModeInterval&&M(e.settings.joinSlowModeInterval.toString()),e.settings.forbiddenWords&&A(e.settings.forbiddenWords));const n=o.getGroupMembers(t);m(n.length);const s=n.map(n=>{var s,a,o;const i=(null==(s=e.adminIds)?void 0:s.includes(n.id))||e.creatorId===n.id;return{id:n.id,name:(null==(a=n.profile)?void 0:a.nickname)||"Usuário",username:(null==(o=n.profile)?void 0:o.name)?`@${n.profile.name}`:"@user",role:n.id===e.creatorId?"Dono":i?"Admin":"Membro"}});G(s)}}},[t]),s.useEffect(()=>{L||T("")},[L]);const _=W.filter(e=>e.name.toLowerCase().includes(E.toLowerCase())||e.username.toLowerCase().includes(E.toLowerCase()));return i.jsxs("div",{className:"h-[100dvh] bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white font-['Inter'] flex flex-col",children:[i.jsx("style",{children:"\n        * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter',sans-serif; }\n        \n        header {\n            display:flex; align-items:center; padding:16px;\n            background: #0c0f14; position:fixed; width:100%; z-index:10;\n            border-bottom:1px solid rgba(255,255,255,0.1); top: 0; height: 65px;\n        }\n        header button {\n            background:none; border:none; color:#fff; font-size:24px; cursor:pointer;\n            transition:0.3s; padding-right: 15px;\n        }\n        header h1 { font-size:20px; font-weight:600; }\n        \n        main {\n            padding-top: 90px; padding-bottom: 40px;\n            width: 100%; max-width: 600px; margin: 0 auto; padding-left: 20px; padding-right: 20px;\n            overflow-y: auto; flex-grow: 1; -webkit-overflow-scrolling: touch;\n        }\n\n        .section-title {\n            font-size: 13px; color: #00c2ff; margin: 25px 0 10px 5px; \n            text-transform: uppercase; font-weight: 700; letter-spacing: 1px; display: flex; align-items: center; gap: 8px;\n        }\n\n        .control-card {\n            background: rgba(255,255,255,0.03); border-radius: 16px; overflow: hidden;\n            border: 1px solid rgba(255,255,255,0.05); margin-bottom: 10px;\n        }\n\n        .control-row {\n            display: flex; align-items: center; justify-content: space-between;\n            padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.05);\n        }\n        .control-row:last-child { border-bottom: none; }\n        \n        .control-col {\n            display: flex; flex-direction: column; width: 100%; padding: 16px;\n            border-bottom: 1px solid rgba(255,255,255,0.05);\n        }\n\n        .label-main { font-size: 16px; font-weight: 500; color: #fff; margin-bottom: 4px; }\n        .label-sub { font-size: 13px; color: #888; line-height: 1.3; }\n\n        /* Inputs inside cards */\n        .card-input {\n            background: #1a1e26; border: 1px solid rgba(255,255,255,0.1);\n            color: #fff; padding: 10px; border-radius: 8px; outline: none;\n            width: 100%; font-size: 14px; margin-top: 10px;\n        }\n        .card-input:focus { border-color: #00c2ff; }\n\n        /* Switch Style */\n        .switch { position: relative; display: inline-block; width: 44px; height: 24px; flex-shrink: 0; }\n        .switch input { opacity: 0; width: 0; height: 0; }\n        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 24px; }\n        .slider:before { position: absolute; content: \"\"; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }\n        input:checked + .slider { background-color: #00c2ff; }\n        input:checked + .slider:before { transform: translateX(20px); }\n\n        /* Actions Grid */\n        .actions-grid {\n            display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; padding: 16px;\n        }\n        .action-btn-card {\n            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);\n            border-radius: 12px; padding: 15px 5px; text-align: center; cursor: pointer;\n            transition: 0.2s; display: flex; flex-direction: column; align-items: center; gap: 8px;\n        }\n        .action-btn-card:hover { background: rgba(255,255,255,0.1); transform: translateY(-2px); }\n        .action-btn-card i { font-size: 20px; }\n        .action-btn-card span { font-size: 12px; font-weight: 600; }\n        \n        .btn-expel { color: #ff9800; border-color: rgba(255, 152, 0, 0.3); }\n        .btn-ban { color: #ff4d4d; border-color: rgba(255, 77, 77, 0.3); }\n        .btn-promote { color: #00c2ff; border-color: rgba(0, 194, 255, 0.3); }\n        .btn-demote { color: #aaa; border-color: #555; }\n\n        /* Tags / Chips */\n        .tags-container {\n            display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px;\n        }\n        .tag {\n            background: rgba(0,194,255,0.15); color: #00c2ff; padding: 5px 10px;\n            border-radius: 4px; font-size: 12px; display: flex; align-items: center; gap: 6px;\n        }\n        .tag i { cursor: pointer; font-size: 10px; opacity: 0.7; }\n        .tag i:hover { opacity: 1; }\n\n        .save-btn {\n            width: 100%; padding: 16px; background: #00c2ff; color: #000; border: none;\n            border-radius: 12px; font-weight: 700; font-size: 16px; cursor: pointer;\n            transition: 0.3s; margin-top: 20px; margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,194,255,0.3);\n        }\n        .save-btn:hover { background: #0099cc; transform: translateY(-1px); }\n\n        /* Simple Modal */\n        .modal-overlay {\n            position: fixed; top: 0; left: 0; width: 100%; height: 100%;\n            background: rgba(0,0,0,0.8); z-index: 50; display: flex; align-items: center; justify-content: center;\n            backdrop-filter: blur(3px);\n        }\n        .modal-box {\n            background: #1a1e26; width: 90%; max-width: 350px; border-radius: 16px;\n            padding: 20px; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 10px 30px rgba(0,0,0,0.5);\n            display: flex; flex-direction: column; max-height: 80vh;\n        }\n        \n        /* Search in Modal */\n        .modal-search-wrapper {\n            position: relative; margin-bottom: 15px;\n        }\n        .modal-search-wrapper i {\n            position: absolute; left: 12px; top: 50%; transform: translateY(-50%);\n            color: #aaa; font-size: 14px;\n        }\n        .modal-search-input {\n            width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2);\n            border-radius: 8px; padding: 10px 10px 10px 35px; color: #fff; outline: none;\n            font-size: 14px; transition: 0.3s;\n        }\n        .modal-search-input:focus { border-color: #00c2ff; background: rgba(255,255,255,0.1); }\n\n        .user-select-item {\n            display: flex; justify-content: space-between; align-items: center;\n            padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); cursor: pointer;\n        }\n        .user-select-item:hover { background: rgba(255,255,255,0.05); }\n        .user-detail { display: flex; flex-direction: column; }\n        .user-handle { font-size: 12px; color: #aaa; }\n        \n        .disabled-text { font-size: 12px; color: #666; padding: 16px; text-align: center; }\n      "}),i.jsxs("header",{children:[i.jsx("button",{onClick:()=>r(-1),"aria-label":"Voltar",children:i.jsx("i",{className:"fa-solid fa-arrow-left"})}),i.jsx("h1",{children:"Limite e Controle"})]}),i.jsxs("main",{children:[i.jsxs("div",{className:"section-title",children:[i.jsx("i",{className:"fa-solid fa-users"})," Capacidade"]}),i.jsxs("div",{className:"control-card",children:[i.jsxs("div",{className:"control-row",children:[i.jsxs("div",{children:[i.jsx("div",{className:"label-main",children:"Contagem Atual"}),i.jsx("div",{className:"label-sub",children:"Membros ativos no grupo"})]}),i.jsx("div",{style:{fontWeight:"bold",color:"#00c2ff",fontSize:"18px"},children:x})]}),i.jsxs("div",{className:"control-col",children:[i.jsx("div",{className:"label-main",children:"Limite de Membros"}),i.jsx("div",{className:"label-sub",children:"Deixe em branco para ilimitado"}),i.jsx("input",{type:"number",className:"card-input",placeholder:"Ex: 5000",value:b,onChange:e=>u(e.target.value?parseInt(e.target.value):"")})]})]}),i.jsxs("div",{className:"section-title",children:[i.jsx("i",{className:"fa-solid fa-gavel"})," Ações Administrativas"]}),i.jsxs("div",{className:"actions-grid",children:[i.jsxs("div",{className:"action-btn-card btn-expel",onClick:()=>B("kick"),children:[i.jsx("i",{className:"fa-solid fa-user-minus"}),i.jsx("span",{children:"Expulsar"})]}),i.jsxs("div",{className:"action-btn-card btn-ban",onClick:()=>B("ban"),children:[i.jsx("i",{className:"fa-solid fa-ban"}),i.jsx("span",{children:"Banir"})]}),i.jsxs("div",{className:"action-btn-card btn-promote",onClick:()=>B("promote"),children:[i.jsx("i",{className:"fa-solid fa-user-shield"}),i.jsx("span",{children:"Promover"})]}),i.jsxs("div",{className:"action-btn-card btn-demote",onClick:()=>B("demote"),children:[i.jsx("i",{className:"fa-solid fa-user"}),i.jsx("span",{children:"Rebaixar"})]})]}),i.jsxs("div",{className:"section-title",children:[i.jsx("i",{className:"fa-solid fa-comments"})," Controle de Mensagens"]}),i.jsxs("div",{className:"control-card",children:[i.jsxs("div",{className:"control-row",children:[i.jsxs("div",{children:[i.jsx("div",{className:"label-main",children:"Apenas Administradores"}),i.jsx("div",{className:"label-sub",children:"Membros não podem enviar mensagens"})]}),i.jsxs("label",{className:"switch",children:[i.jsx("input",{type:"checkbox",checked:g,onChange:()=>h(!g)}),i.jsx("span",{className:"slider"})]})]}),i.jsxs("div",{className:"control-row",children:[i.jsxs("div",{children:[i.jsx("div",{className:"label-main",children:"Modo Lento (Mensagens)"}),i.jsx("div",{className:"label-sub",children:"Intervalo entre mensagens"})]}),i.jsxs("label",{className:"switch",children:[i.jsx("input",{type:"checkbox",checked:f,onChange:()=>v(!f)}),i.jsx("span",{className:"slider"})]})]}),f&&i.jsxs("div",{className:"control-col",style:{paddingTop:0,borderBottom:"none"},children:[i.jsx("div",{className:"label-sub",style:{marginBottom:"5px"},children:"Tempo de espera (segundos)"}),i.jsx("input",{type:"number",className:"card-input",value:j,onChange:e=>N(e.target.value)})]})]}),i.jsxs("div",{className:"section-title",children:[i.jsx("i",{className:"fa-solid fa-door-open"})," Controle de Entrada"]}),i.jsxs("div",{className:"control-card",children:[i.jsxs("div",{className:"control-row",children:[i.jsxs("div",{children:[i.jsx("div",{className:"label-main",children:"Aprovar Novos Membros"}),i.jsx("div",{className:"label-sub",children:"Admins precisam aceitar solicitações"})]}),i.jsxs("label",{className:"switch",children:[i.jsx("input",{type:"checkbox",checked:w,onChange:()=>y(!w)}),i.jsx("span",{className:"slider"})]})]}),i.jsxs("div",{className:"control-row",children:[i.jsxs("div",{children:[i.jsx("div",{className:"label-main",children:"Modo Lento (Entrada)"}),i.jsx("div",{className:"label-sub",children:"Limitar frequência de novos membros"})]}),(null==l?void 0:l.isPrivate)?i.jsx("div",{style:{fontSize:"12px",color:"#555",fontStyle:"italic"},children:"Apenas Grupos Públicos"}):i.jsxs("label",{className:"switch",children:[i.jsx("input",{type:"checkbox",checked:k,onChange:()=>S(!k)}),i.jsx("span",{className:"slider"})]})]}),!(null==l?void 0:l.isPrivate)&&k&&i.jsxs("div",{className:"control-col",style:{paddingTop:0,borderBottom:"none"},children:[i.jsx("div",{className:"label-sub",style:{marginBottom:"5px"},children:"Permitir 1 pessoa a cada (minutos)"}),i.jsx("input",{type:"number",className:"card-input",value:C,onChange:e=>M(e.target.value)})]}),(null==l?void 0:l.isPrivate)&&i.jsx("div",{className:"disabled-text",children:"Modo lento de entrada disponível apenas para grupos públicos."})]}),i.jsxs("div",{className:"section-title",children:[i.jsx("i",{className:"fa-solid fa-filter"})," Palavras Proibidas"]}),i.jsx("div",{className:"control-card",children:i.jsxs("div",{className:"control-col",children:[i.jsx("div",{className:"label-main",children:"Filtro de Conteúdo"}),i.jsx("div",{className:"label-sub",children:"Mensagens com estas palavras serão ocultadas"}),i.jsxs("form",{onSubmit:e=>{e.preventDefault(),I.trim()&&!z.includes(I.trim().toLowerCase())&&(A([...z,I.trim().toLowerCase()]),P(""))},style:{display:"flex",gap:"10px",marginTop:"10px"},children:[i.jsx("input",{type:"text",className:"card-input",style:{marginTop:0},placeholder:"Adicionar palavra...",value:I,onChange:e=>P(e.target.value)}),i.jsx("button",{type:"submit",style:{background:"#00c2ff",border:"none",borderRadius:"8px",padding:"0 15px",color:"#000",fontWeight:"bold"},children:"+"})]}),i.jsxs("div",{className:"tags-container",children:[z.map((e,n)=>i.jsxs("div",{className:"tag",children:[e," ",i.jsx("i",{className:"fa-solid fa-xmark",onClick:()=>{return n=e,void A(z.filter(e=>e!==n));var n}})]},n)),0===z.length&&i.jsx("span",{style:{fontSize:"12px",color:"#555",fontStyle:"italic",marginTop:"5px"},children:"Nenhuma palavra filtrada."})]})]})}),i.jsx("button",{className:"save-btn",onClick:()=>{if(l){const e={...l,settings:{memberLimit:b?Number(b):void 0,onlyAdminsPost:g,msgSlowMode:f,msgSlowModeInterval:Number(j),approveMembers:w,joinSlowMode:!l.isPrivate&&k,joinSlowModeInterval:Number(C),forbiddenWords:z}};o.updateGroup(e),alert("Configurações salvas com sucesso!"),r(-1)}},children:"Salvar Configurações"})]}),L&&i.jsx("div",{className:"modal-overlay",onClick:()=>B(null),children:i.jsxs("div",{className:"modal-box",onClick:e=>e.stopPropagation(),children:[i.jsxs("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#fff",marginBottom:"15px",textAlign:"center"},children:["Selecione para ","kick"===L?"Expulsar":"ban"===L?"Banir":"promote"===L?"Promover":"Rebaixar"]}),i.jsxs("div",{className:"modal-search-wrapper",children:[i.jsx("i",{className:"fa-solid fa-magnifying-glass"}),i.jsx("input",{type:"text",className:"modal-search-input",placeholder:"Pesquisar por @usuário",value:E,onChange:e=>T(e.target.value),autoFocus:!0})]}),i.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:_.length>0?_.map(e=>i.jsxs("div",{className:"user-select-item",onClick:()=>((e,n)=>{if(!L||!l)return;if(e===l.creatorId)return void alert("Não é possível realizar ações contra o Dono do grupo.");const s=a.getCurrentUserId();if(e===s)return void alert("Você não pode realizar esta ação em si mesmo aqui.");"kick"===L?(o.removeMember(l.id,e),G(n=>n.filter(n=>n.id!==e)),m(e=>e-1)):"ban"===L?(o.banMember(l.id,e),G(n=>n.filter(n=>n.id!==e)),m(e=>e-1)):"promote"===L?(o.promoteMember(l.id,e),G(n=>n.map(n=>n.id===e?{...n,role:"Admin"}:n))):"demote"===L&&(o.demoteMember(l.id,e),G(n=>n.map(n=>n.id===e?{...n,role:"Membro"}:n))),alert(`${n} foi ${{kick:"expulso",ban:"banido",promote:"promovido a Admin",demote:"rebaixado para Membro"}[L]} com sucesso.`),B(null)})(e.id,e.name),children:[i.jsxs("div",{className:"user-detail",children:[i.jsx("span",{style:{color:"#fff"},children:e.name}),i.jsx("span",{className:"user-handle",children:e.username})]}),i.jsx("span",{style:{fontSize:"12px",color:"#888"},children:e.role})]},e.id)):i.jsx("div",{style:{textAlign:"center",color:"#777",padding:"10px",fontSize:"13px"},children:"Nenhum usuário encontrado."})}),i.jsx("button",{onClick:()=>B(null),style:{width:"100%",padding:"10px",marginTop:"15px",background:"transparent",border:"1px solid #555",color:"#aaa",borderRadius:"8px",cursor:"pointer"},children:"Cancelar"})]})})]})};export{r as LimitAndControl};

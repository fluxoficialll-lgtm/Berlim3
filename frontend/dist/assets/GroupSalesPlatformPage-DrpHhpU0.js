import{j as e,u as v,f as y,e as k,r as C}from"./index-BC19Iu_T.js";import{u as S}from"./useGroupSettings-CvPAF9AB.js";import{O as N,C as P}from"./ChannelOptionsModal-YmnZmo41.js";const E=({enabled:o,onToggle:c})=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 shadow-xl relative overflow-hidden animate-fade-in",children:[o&&e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00c2ff] to-transparent opacity-50"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center transition-colors ${o?"bg-[#00c2ff1a] text-[#00c2ff]":"bg-white/5 text-gray-600"}`,children:e.jsx("i",{className:"fa-solid fa-cubes-stacked"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-white mb-1",children:"Status do Hub"}),e.jsx("p",{className:`text-[10px] uppercase font-black tracking-widest ${o?"text-[#00ff82]":"text-gray-500"}`,children:o?"Estrutura Ativa":"Modo Desativado"})]})]}),e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:c}),e.jsx("span",{className:"slider-switch"})]})]})]}),M=({sections:o,onSectionsChange:c,onOptions:p})=>{const j=(a,l,s)=>{const t=[...a],i=s==="up"?l-1:l+1;return i<0||i>=t.length||([t[l],t[i]]=[t[i],t[l]]),t},b=(a,l)=>{c(j(o,a,l))},n=()=>{const a={id:`sec_${Date.now()}`,title:"Nova Categoria",folders:[],channels:[]};c([...o,a])},g=(a,l)=>{c(o.map(s=>s.id===a?{...s,title:l}:s))},r=a=>{confirm("Deseja apagar toda esta categoria, suas pastas e canais?")&&c(o.filter(l=>l.id!==a))},f=(a,l,s)=>{c(o.map(t=>t.id===a?{...t,folders:(t.folders||[]).map(i=>i.id===l?{...i,name:s}:i)}:t))},m=(a,l)=>{c(o.map(s=>s.id===a?{...s,folders:(s.folders||[]).filter(t=>t.id!==l)}:s))},h=(a,l)=>{c(o.map(s=>s.id===a?{...s,channels:s.channels?.filter(t=>t.id!==l)}:s))},w=(a,l,s)=>{c(o.map(t=>t.id===a?{...t,channels:t.channels?.map(i=>i.id===l?{...i,name:s}:i)}:t))};return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsx("header",{className:"flex items-center justify-between px-1",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tighter",children:"Estrutura da Vitrine"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Categorias com pastas de conteúdo e canais de chat."})]})}),e.jsxs("div",{className:"space-y-6",children:[o.map((a,l)=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-[32px] p-6 animate-slide-up relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsxs("div",{className:"flex flex-col gap-1 mr-1",children:[e.jsx("button",{onClick:()=>b(l,"up"),disabled:l===0,className:"w-8 h-8 rounded-lg bg-white/5 text-[#00c2ff] disabled:opacity-10",children:e.jsx("i",{className:"fa-solid fa-chevron-up text-[10px]"})}),e.jsx("button",{onClick:()=>b(l,"down"),disabled:l===o.length-1,className:"w-8 h-8 rounded-lg bg-white/5 text-[#00c2ff] disabled:opacity-10",children:e.jsx("i",{className:"fa-solid fa-chevron-down text-[10px]"})})]}),e.jsx("input",{type:"text",className:"flex-1 bg-white/5 border border-white/10 rounded-xl p-3 text-white font-black text-sm uppercase tracking-widest outline-none focus:border-[#00c2ff]",placeholder:"Nome da Categoria",value:a.title,onChange:s=>g(a.id,s.target.value)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>p(a,"section"),className:"text-gray-400 hover:text-[#00c2ff] p-2",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})}),e.jsx("button",{onClick:()=>r(a.id),className:"w-11 h-11 rounded-xl bg-red-500/10 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-colors",title:"Excluir Categoria",children:e.jsx("i",{className:"fa-solid fa-trash-can text-sm"})})]})]}),e.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-white/5 ml-4",children:[a.folders?.map(s=>e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-3 rounded-2xl border border-white/5 group hover:border-white/20 transition-all",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#00c2ff]/10 flex items-center justify-center text-[#00c2ff] text-[10px]",children:e.jsx("i",{className:"fa-solid fa-folder"})}),e.jsx("input",{type:"text",className:"flex-1 bg-transparent border-none text-white font-bold text-sm outline-none",placeholder:"Nome da Pasta",value:s.name,onChange:t=>f(a.id,s.id,t.target.value)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>p(s,"folder"),className:"text-gray-500 hover:text-[#00c2ff] p-2",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical text-xs"})}),e.jsx("button",{onClick:()=>m(a.id,s.id),className:"text-red-400/40 hover:text-red-500 p-2 transition-colors",title:"Excluir Pasta",children:e.jsx("i",{className:"fa-solid fa-trash-can text-xs"})})]})]},s.id)),a.channels?.map(s=>e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-3 rounded-2xl border border-[#00ff821a] group hover:border-[#00ff8233] transition-all",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#00ff82]/10 flex items-center justify-center text-[#00ff82] text-[10px]",children:e.jsx("i",{className:"fa-solid fa-hashtag"})}),e.jsx("input",{type:"text",className:"flex-1 bg-transparent border-none text-white font-bold text-sm outline-none",placeholder:"Nome do Canal",value:s.name,onChange:t=>w(a.id,s.id,t.target.value)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>p(s,"channel"),className:"text-gray-500 hover:text-[#00ff82] p-2",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical text-xs"})}),e.jsx("button",{onClick:()=>h(a.id,s.id),className:"text-red-400/40 hover:text-red-500 p-2 transition-colors",title:"Excluir Canal",children:e.jsx("i",{className:"fa-solid fa-trash-can text-xs"})})]})]},s.id)),(!a.folders||a.folders.length===0)&&(!a.channels||a.channels.length===0)&&e.jsx("div",{className:"py-4 text-center opacity-20",children:e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Seção Vazia - Clique nos 3 pontos para adicionar"})})]})]},a.id)),e.jsxs("button",{onClick:n,className:"w-full py-8 border-2 border-dashed border-white/5 rounded-[40px] flex flex-col items-center justify-center gap-3 text-gray-600 hover:text-[#00c2ff] hover:border-[#00c2ff33] transition-all group mt-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center group-hover:bg-[#00c2ff1a]",children:e.jsx("i",{className:"fa-solid fa-plus text-xl transition-transform group-hover:scale-110"})}),e.jsx("span",{className:"text-[11px] font-black uppercase tracking-[4px]",children:"Adicionar Nova Categoria"})]})]})]})},O=()=>e.jsx("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-2xl",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation text-yellow-500 mt-1"}),e.jsxs("p",{className:"text-[11px] text-gray-400 leading-relaxed",children:["Ao ativar o ",e.jsx("strong",{children:"Modo Hub"}),", este grupo abandona o formato de chat linear e passa a exibir uma interface organizada em categorias, pastas de conteúdo e canais de interação específicos."]})]})}),A=({isOpen:o,onClose:c,title:p,type:j,target:b,onUpdateFolder:n,onAddFolderInside:g,onAddChannelInside:r})=>{if(!o)return null;const f=j==="section",m=b;return e.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-6 backdrop-blur-md bg-black/80 animate-fade-in",onClick:c,children:e.jsxs("div",{className:"bg-[#1a1e26] border border-white/10 rounded-[40px] w-full max-w-sm overflow-hidden shadow-2xl animate-pop-in flex flex-col max-h-[85vh]",onClick:h=>h.stopPropagation(),children:[e.jsxs("header",{className:"p-6 border-b border-white/5 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-[#00c2ff] uppercase tracking-[3px]",children:f?"Gerenciar Categoria":"Configurações da Pasta"}),e.jsx("h3",{className:"text-base font-bold text-white truncate max-w-[200px]",children:p})]}),e.jsx("button",{onClick:c,className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-white hover:bg-white/10 transition-colors active:scale-90",children:e.jsx("i",{className:"fa-solid fa-xmark"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8 no-scrollbar pb-10",children:[f&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px] ml-1 mb-2",children:"Adicionar Conteúdo"}),e.jsxs("button",{onClick:()=>{g?.(),c()},className:"w-full py-5 bg-[#00c2ff1a] border border-[#00c2ff33] text-[#00c2ff] font-black rounded-[24px] uppercase text-[11px] tracking-[2px] hover:bg-[#00c2ff2a] transition-all flex items-center justify-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-folder-plus text-lg"}),"Criar Pastas"]}),e.jsxs("button",{onClick:()=>{r?.(),c()},className:"w-full py-5 bg-white/5 border border-white/10 text-white font-black rounded-[24px] uppercase text-[11px] tracking-[2px] hover:bg-white/10 transition-all flex items-center justify-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-hashtag text-lg"}),"Criar Canais"]})]}),!f&&n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px] ml-1 mb-2",children:"Permissões de Acesso"}),e.jsx(N,{label:"Permitir Download",sublabel:"Membros podem baixar arquivos",icon:"fa-cloud-arrow-down",checked:!!m.allowDownload,onChange:()=>n({allowDownload:!m.allowDownload})}),e.jsx(N,{label:"Upload de Membros",sublabel:"Membros podem enviar arquivos",icon:"fa-upload",checked:!!m.allowMemberUpload,onChange:()=>n({allowMemberUpload:!m.allowMemberUpload})})]}),e.jsx("div",{className:"h-px bg-white/5 mx-2"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[2px] ml-1",children:"Descrição Curta"}),e.jsx("textarea",{value:m.description||"",onChange:h=>n({description:h.target.value}),placeholder:"Ex: Biblioteca de arquivos de apoio...",className:"w-full bg-white/5 border border-white/5 rounded-2xl p-4 text-xs text-white outline-none focus:border-[#00c2ff] resize-none min-h-[80px]"})]})]})]}),e.jsx("div",{className:"p-4 bg-[#0c0f14] border-t border-white/5 shrink-0",children:e.jsx("button",{onClick:c,className:"w-full py-4 bg-white/5 text-gray-400 font-black rounded-2xl uppercase text-[10px] tracking-[2px] hover:text-white transition-all active:scale-95",children:"Concluído"})})]})})},U=()=>{const o=v(),{id:c}=y(),{group:p,loading:j,handleSave:b,form:n}=S(),{showPrompt:g}=k(),[r,f]=C.useState({isOpen:!1,target:null,type:"folder"});if(j||!p)return e.jsx("div",{className:"min-h-screen bg-[#0c0f14] flex items-center justify-center text-white",children:e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin text-2xl text-[#00c2ff]"})});const m=async()=>{n.setIsSalesPlatformEnabled(!n.isSalesPlatformEnabled)},h=(t,i)=>{f({isOpen:!0,target:t,type:i})},w=t=>{if(r.type!=="channel"||!r.target)return;const i=r.target.id,u=n.salesPlatformSections.map(x=>({...x,channels:x.channels?.map(d=>d.id===i?{...d,...t}:d)}));n.setSalesPlatformSections(u),f(x=>({...x,target:{...x.target,...t}}))},a=t=>{if(r.type!=="folder"||!r.target)return;const i=r.target.id,u=n.salesPlatformSections.map(x=>({...x,folders:x.folders.map(d=>d.id===i?{...d,...t}:d)}));n.setSalesPlatformSections(u),f(x=>({...x,target:{...x.target,...t}}))},l=async()=>{if(r.type!=="section"||!r.target)return;const t=r.target.id,i=await g("Nome da Pasta","Ex: Material Complementar");if(!i)return;const u={id:`fold_${Date.now()}`,name:i,itemsCount:0,allowDownload:!0,allowMemberUpload:!1},x=n.salesPlatformSections.map(d=>d.id===t?{...d,folders:[...d.folders,u]}:d);n.setSalesPlatformSections(x)},s=async()=>{if(r.type!=="section"||!r.target)return;const t=r.target.id,i=await g("Nome do Canal de Chat","Ex: Suporte VIP");if(!i)return;const u={id:`ch_plt_${Date.now()}`,name:i,onlyAdminsPost:!1,type:"text"},x=n.salesPlatformSections.map(d=>d.id===t?{...d,channels:[...d.channels||[],u]}:d);n.setSalesPlatformSections(x)};return e.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-white font-['Inter'] flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex items-center p-4 bg-[#0c0f14] border-b border-white/10 h-[65px] sticky top-0 z-50",children:[e.jsx("button",{onClick:()=>o(`/group-settings/${c}`),className:"mr-4 text-white text-xl",children:e.jsx("i",{className:"fa-solid fa-arrow-left"})}),e.jsx("h1",{className:"font-bold",children:"Configuração do Modo Hub"})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-5 max-w-[600px] mx-auto w-full pb-32 no-scrollbar",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(E,{enabled:n.isSalesPlatformEnabled,onToggle:m}),n.isSalesPlatformEnabled&&e.jsx(M,{sections:n.salesPlatformSections,onSectionsChange:n.setSalesPlatformSections,onOptions:h}),e.jsx("div",{className:"mt-2",children:e.jsx(O,{})})]}),e.jsx("button",{className:"btn-save-fixed",onClick:b,children:"Salvar Estrutura do Hub"})]}),r.isOpen&&r.type==="channel"&&e.jsx(P,{isOpen:r.isOpen,onClose:()=>f({...r,isOpen:!1}),title:r.target.name,type:"channel",target:r.target,onUpdateChannel:w}),r.isOpen&&(r.type==="folder"||r.type==="section")&&e.jsx(A,{isOpen:r.isOpen,onClose:()=>f({...r,isOpen:!1}),title:r.target.name||r.target.title,type:r.type,target:r.target,onUpdateFolder:a,onAddFolderInside:l,onAddChannelInside:s}),e.jsx("div",{className:"text-center opacity-10 text-[8px] uppercase font-black tracking-[3px] mb-8",children:"Flux Hub Engine v4.3"})]})};export{U as GroupSalesPlatformPage};

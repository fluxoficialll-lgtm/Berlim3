import{u as e,r as o,j as r,c as t,g as n}from"./index-CipjSFYz.js";import{p as a}from"./postService-0_arHZ6V.js";import{I as i}from"./ImageCropModal-DAIxvQRf.js";import{g as s}from"./idGenerator-C-_CWH9r.js";const l=()=>{const l=e(),[d,c]=o.useState(""),[p,x]=o.useState(""),[f,g]=o.useState(void 0),[u,m]=o.useState(null),[b,h]=o.useState(!1),[v,w]=o.useState(!1),[j,y]=o.useState("");return r.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white font-['Inter'] flex flex-col overflow-x-hidden",children:[r.jsx("style",{children:'\n        * { margin:0; padding:0; box-sizing:border-box; font-family:\'Inter\',sans-serif; }\n        header {\n            display:flex; align-items:center; justify-content:space-between; padding:16px 32px;\n            background: #0c0f14; position:fixed; width:100%; z-index:10; border-bottom:1px solid rgba(255,255,255,0.1);\n            top: 0; height: 80px;\n        }\n        header button {\n            background:none; border:none; color:#00c2ff; font-size:18px; cursor:pointer; transition:0.3s;\n        }\n        header button:hover { color:#fff; }\n        main { \n            flex-grow:1; display:flex; flex-direction:column; align-items:center; \n            justify-content:flex-start; width:100%; padding-top: 100px; \n            padding-bottom: 40px; \n        }\n        #creationContainer {\n            width:100%; max-width:500px; padding: 0 20px;\n            display: flex; flex-direction: column; gap: 20px;\n        }\n        h1 { font-size: 24px; text-align: center; margin-bottom: 20px; color: #ff5722; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 10px; }\n        .cover-upload-container { display: flex; flex-direction: column; align-items: center; margin-bottom: 10px; }\n        .cover-preview {\n            width: 120px; height: 120px; border-radius: 50%;\n            border: 3px solid #ff5722; background: rgba(255,255,255,0.05);\n            display: flex; align-items: center; justify-content: center;\n            overflow: hidden; position: relative; cursor: pointer;\n            transition: all 0.3s ease;\n            box-shadow: 0 0 20px rgba(255,87,34,0.2);\n        }\n        .cover-preview:hover { border-color: #fff; box-shadow: 0 0 25px rgba(255,87,34,0.4); }\n        .cover-preview img { width: 100%; height: 100%; object-fit: cover; }\n        .cover-icon { font-size: 40px; color: rgba(255,255,255,0.3); }\n        .cover-label { margin-top: 10px; font-size: 14px; color: #ff5722; cursor: pointer; font-weight: 600; }\n        .form-group { display: flex; flex-direction: column; }\n        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #ff5722; font-size: 14px; }\n        .form-group input[type="text"], .form-group textarea {\n            width: 100%; padding: 14px; border: 1px solid rgba(255,87,34,0.3); border-radius: 12px;\n            background: rgba(255,255,255,0.05); color: #fff; font-size: 16px;\n            transition: border-color 0.3s, box-shadow 0.3s; resize: vertical;\n        }\n        .form-group input[type="text"]:focus, .form-group textarea:focus { border-color: #ff5722; outline: none; box-shadow: 0 0 10px rgba(255,87,34,0.2); }\n        .form-group textarea { min-height: 120px; }\n        .submit-button {\n            width: 100%; padding: 16px 0; border: none; border-radius: 12px;\n            background-color: #ff5722; color: #fff; font-size: 18px; font-weight: 700;\n            cursor: pointer; transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;\n            box-shadow: 0 4px 15px rgba(255,87,34,0.4); margin-top: 20px;\n            display: flex; align-items: center; justify-content: center; gap: 10px;\n        }\n        .submit-button:hover { background-color: #e64a19; box-shadow: 0 6px 20px rgba(255,87,34,0.6); }\n        .submit-button:disabled { background-color: #333; color: #888; cursor: not-allowed; box-shadow: none; }\n      '}),r.jsxs("header",{children:[r.jsx("button",{onClick:()=>{window.history.state&&window.history.state.idx>0?l(-1):l("/create-group")},children:r.jsx("i",{className:"fa-solid fa-arrow-left"})}),r.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 w-[60px] h-[60px] bg-white/5 rounded-2xl flex justify-center items-center z-20 cursor-pointer shadow-[0_0_20px_rgba(0,194,255,0.3),inset_0_0_20px_rgba(0,194,255,0.08)]",onClick:()=>l("/feed"),children:[r.jsx("div",{className:"absolute w-[40px] h-[22px] rounded-[50%] border-[3px] border-[#00c2ff] rotate-[25deg]"}),r.jsx("div",{className:"absolute w-[40px] h-[22px] rounded-[50%] border-[3px] border-[#00c2ff] -rotate-[25deg]"})]}),r.jsx("button",{style:{marginLeft:"auto"},onClick:()=>l("/messages"),children:r.jsx("i",{className:"fa-solid fa-message"})})]}),r.jsx("main",{id:"mainContent",children:r.jsxs("div",{id:"creationContainer",children:[r.jsxs("h1",{children:[r.jsx("i",{className:"fa-solid fa-lock"})," Novo Grupo Privado"]}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!b){h(!0);try{const e=t.getCurrentUserId(),o=t.getCurrentUserEmail();let r=f;u&&(r=await a.uploadMedia(u,"group_covers"));const i={id:s(),name:d,description:p,coverImage:r,isVip:!1,isPrivate:!0,lastMessage:"Grupo privado criado.",time:"Agora",creatorId:e||"",creatorEmail:o||void 0,memberIds:e?[e]:[],adminIds:e?[e]:[]};await n.createGroup(i),l("/groups")}catch(o){alert("Erro ao criar grupo privado.")}finally{h(!1)}}},children:[r.jsxs("div",{className:"cover-upload-container",children:[r.jsx("label",{htmlFor:"coverImage",className:"cover-preview",children:f?r.jsx("img",{src:f,alt:"Preview"}):r.jsx("i",{className:"fa-solid fa-camera cover-icon"})}),r.jsx("label",{htmlFor:"coverImage",className:"cover-label",children:"Alterar Capa"}),r.jsx("input",{type:"file",id:"coverImage",accept:"image/*",onChange:e=>{var o;const r=null==(o=e.target.files)?void 0:o[0];if(r){const e=new FileReader;e.onload=e=>{var o;y(null==(o=e.target)?void 0:o.result),w(!0)},e.readAsDataURL(r)}},style:{display:"none"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"groupName",children:"Nome do Grupo"}),r.jsx("input",{type:"text",id:"groupName",value:d,onChange:e=>c(e.target.value),placeholder:"Digite o nome do grupo",required:!0,maxLength:50})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"groupDescription",children:"Descrição"}),r.jsx("textarea",{id:"groupDescription",value:p,onChange:e=>x(e.target.value),placeholder:"Sobre o que é este grupo?",maxLength:250})]}),r.jsx("button",{type:"submit",className:"submit-button",disabled:!d||b,children:b?r.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"}):"Criar Grupo"})]})]})}),r.jsx(i,{isOpen:v,imageSrc:j,onClose:()=>w(!1),onSave:e=>{g(e),fetch(e).then(e=>e.blob()).then(e=>{const o=new File([e],"group_cover.jpg",{type:"image/jpeg"});m(o)})}})]})};export{l as CreatePrivateGroup};

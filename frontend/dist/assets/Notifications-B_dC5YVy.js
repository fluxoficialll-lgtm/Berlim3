const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PaymentFlowModal-DDdg7Dq_.js","assets/index-CipjSFYz.js","assets/index-DBFgheNr.css","assets/currencyService-CUGBeSum.js","assets/VipSalesTracker-6iL3DgUP.js","assets/paypalService-CfPjuhjL.js","assets/PurchaseIntention-BPUq0Pu8.js"])))=>i.map(i=>d[i]);
import{j as n,u as i,r as e,c as t,n as o,i as a,g as r,m as s,x as l,_ as c}from"./index-CipjSFYz.js";import{c as p}from"./currencyService-CUGBeSum.js";import{F as d}from"./Footer-CKHcXoCt.js";import{p as f}from"./postService-0_arHZ6V.js";import{M as x}from"./MainHeader-DNJS5o1U.js";const m=({activeFilter:i,onFilterChange:e})=>n.jsxs("div",{id:"filterButtons",children:[n.jsx("style",{children:"\n                #filterButtons { \n                    display: flex; \n                    flex-wrap: nowrap; \n                    gap: 8px; \n                    position: fixed; \n                    top: 80px; \n                    left: 0; \n                    width: 100%; \n                    padding: 10px 16px; \n                    background: #0c0f14; \n                    z-index: 10; \n                    box-shadow: 0 4px 8px rgba(0,0,0,0.3); \n                    overflow-x: auto; \n                    -webkit-overflow-scrolling: touch; \n                    scrollbar-width: none; \n                    border-bottom: 1px solid rgba(255,255,255,0.1); \n                }\n                #filterButtons::-webkit-scrollbar { display: none; }\n                .filter-btn { \n                    background: rgba(0,194,255,0.1); \n                    border: 1px solid #00c2ff; \n                    border-radius: 20px; \n                    color: #00c2ff; \n                    padding: 8px 16px; \n                    cursor: pointer; \n                    font-size: 14px; \n                    font-weight: 600; \n                    transition: 0.3s; \n                    white-space: nowrap; \n                }\n                .filter-btn.active { background: #00c2ff; color: #000; transform: translateY(-1px); }\n                .filter-btn:hover:not(.active) { background: rgba(0,194,255,0.2); }\n            "}),[{id:"all",label:"Todos"},{id:"like",label:"Curtidas"},{id:"comment",label:"Comentários"},{id:"follow",label:"Seguidores"},{id:"mention",label:"Menções"},{id:"sale",label:"Venda Realizada"},{id:"pending",label:"Pendentes"}].map(t=>n.jsx("button",{className:"filter-btn "+(i===t.id?"active":""),onClick:()=>e(t.id),children:t.label},t.id))]}),g=({notif:i,onFollowToggle:e,onPendingAction:t,onNavigate:o})=>n.jsxs("div",{className:`notification-item ${"sale"===i.type?"notification-sale":""} ${"pending"===i.type?"notification-pending":""}`,onClick:()=>"pending"!==i.type&&o(`/user/${i.username.replace("@","")}`),children:[n.jsx("style",{children:"\n                .notification-item { display: flex; align-items: center; padding: 12px 0; margin-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,0.1); transition: background 0.2s; cursor: pointer; border-radius: 8px; }\n                .notification-item:hover { background: rgba(255,255,255,0.05); }\n                .notification-sale { background: rgba(0, 255, 130, 0.05); border-left: 5px solid #00ff82; padding-left: 7px; }\n                .notification-pending { border-left: 5px solid #ffaa00; padding-left: 7px; }\n                .notification-avatar { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; margin-right: 12px; border: 2px solid #00c2ff; }\n                .notification-content { flex-grow: 1; display: flex; flex-direction: column; min-width: 0; }\n                .notification-text { font-size: 15px; line-height: 1.4; color: #eee; }\n                .notification-time { font-size: 12px; color: #aaa; margin-top: 4px; }\n                .notification-action { margin-left: 10px; display: flex; gap: 5px; align-items: center; }\n                .notification-action img { width: 60px; height: 60px; border-radius: 8px; object-fit: cover; border: 1px solid rgba(255,255,255,0.2); }\n                .action-button { background: #00c2ff; color: #000; border: none; padding: 8px 12px; border-radius: 20px; cursor: pointer; font-weight: 600; transition: 0.3s; font-size: 12px; }\n                .action-button.following { background: #1a1a1a; color: #00c2ff; border: 1px solid #00c2ff; }\n                .action-button.primary { background: #00ff82; }\n                .action-button.secondary { background: rgba(255,255,255,0.1); color: #fff; }\n            "}),n.jsx("img",{src:i.avatar,className:"notification-avatar",alt:"Avatar"}),n.jsxs("div",{className:"notification-content",children:[n.jsxs("p",{className:"notification-text",children:["like"===i.type&&n.jsxs(n.Fragment,{children:[n.jsx("b",{className:"font-bold",children:i.displayName})," curtiu sua publicação."]}),"comment"===i.type&&n.jsxs(n.Fragment,{children:[n.jsx("b",{className:"font-bold",children:i.displayName})," ",i.text]}),"follow"===i.type&&n.jsxs(n.Fragment,{children:[n.jsx("b",{className:"font-bold",children:i.displayName})," começou a te seguir: ",i.text||""]}),"mention"===i.type&&n.jsxs(n.Fragment,{children:[n.jsx("b",{className:"font-bold",children:i.displayName})," te mencionou em uma publicação."]}),"sale"===i.type&&n.jsxs(n.Fragment,{children:[n.jsx("b",{className:"font-bold",children:i.displayName}),": ",i.text]}),"pending"===i.type&&n.jsxs(n.Fragment,{children:[n.jsx("b",{className:"font-bold",children:i.displayName})," ",i.text]})]}),n.jsx("span",{className:"notification-time",children:f.formatRelativeTime(i.timestamp)})]}),n.jsxs("div",{className:"notification-action",children:["follow"===i.type&&n.jsx("button",{className:"action-button "+(i.isFollowing?"following":""),onClick:n=>{n.stopPropagation(),e(i.id,i.username)},children:i.isFollowing?"Seguindo":"Seguir"}),"sale"===i.type&&n.jsx("i",{className:"fa-solid fa-money-bill-wave",style:{color:"#00ff82",fontSize:"30px",marginRight:"10px"}}),"pending"===i.type&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"action-button primary",onClick:n=>{n.stopPropagation(),t("accept",i)},children:"group_join"===i.subtype?"Aprovar":"Aceitar"}),n.jsx("button",{className:"action-button secondary",onClick:n=>{n.stopPropagation(),t("reject",i)},children:"group_join"===i.subtype?"Negar":"Recusar"})]}),("like"===i.type||"comment"===i.type)&&i.postImage&&n.jsx("img",{src:i.postImage,alt:"Post"})]})]}),u=({notif:e,onIgnore:t,onPay:o})=>{const a=i();return n.jsxs("div",{className:"notification-item-vip",onClick:()=>{e.groupId&&a(`/vip-group-sales/${e.groupId}`)},children:[n.jsx("style",{children:"\n                .notification-item-vip { \n                    display: flex; \n                    align-items: center; \n                    padding: 12px 10px; \n                    margin-bottom: 8px; \n                    border-bottom: 1px solid rgba(255,255,255,0.1); \n                    transition: background 0.2s; \n                    cursor: pointer; \n                    border-radius: 8px;\n                    background: rgba(255, 215, 0, 0.05);\n                    border-left: 5px solid #FFD700;\n                }\n                .notification-item-vip:hover { background: rgba(255, 215, 0, 0.08); }\n                \n                .notification-avatar-vip { \n                    width: 48px; \n                    height: 48px; \n                    border-radius: 50%; \n                    object-fit: cover; \n                    margin-right: 12px; \n                    border: 2px solid #FFD700; \n                    flex-shrink: 0;\n                }\n\n                .notification-content-vip { \n                    flex-grow: 1; \n                    display: flex; \n                    flex-direction: column; \n                    min-width: 0; \n                }\n                \n                .notification-text-vip { \n                    font-size: 14px; \n                    line-height: 1.4; \n                    color: #eee; \n                }\n\n                .notification-meta-vip {\n                    display: flex;\n                    align-items: center;\n                    gap: 6px;\n                    margin-top: 4px;\n                }\n\n                .notification-time-vip { \n                    font-size: 11px; \n                    color: #FFD700; \n                    font-weight: 700;\n                    text-transform: uppercase;\n                }\n                \n                .notification-relative-vip {\n                    font-size: 11px;\n                    color: #555;\n                    font-weight: 600;\n                }\n\n                .notification-action-vip { \n                    margin-left: 10px; \n                    display: flex; \n                    gap: 6px; \n                    align-items: center; \n                }\n\n                .action-button-vip { \n                    background: #00c2ff; \n                    color: #000; \n                    border: none; \n                    padding: 8px 14px; \n                    border-radius: 20px; \n                    cursor: pointer; \n                    font-weight: 800; \n                    transition: 0.3s; \n                    font-size: 11px; \n                    text-transform: uppercase;\n                }\n                \n                .action-button-vip.primary { \n                    background: #00ff82; \n                }\n                \n                .action-button-vip.secondary { \n                    background: rgba(255,255,255,0.1); \n                    color: #fff; \n                }\n                \n                .action-button-vip:active {\n                    transform: scale(0.95);\n                }\n            "}),n.jsx("img",{src:e.avatar,className:"notification-avatar-vip",alt:"VIP"}),n.jsxs("div",{className:"notification-content-vip",children:[n.jsxs("p",{className:"notification-text-vip",children:["Sua assinatura no grupo ",n.jsxs("b",{className:"font-bold text-white",children:['"',e.text,'"']})," expira em breve."]}),n.jsxs("div",{className:"notification-meta-vip",children:[n.jsx("span",{className:"notification-time-vip",children:e.time}),n.jsx("span",{className:"text-gray-700 text-[10px]",children:"•"}),n.jsx("span",{className:"notification-relative-vip",children:f.formatRelativeTime(e.timestamp)})]})]}),n.jsxs("div",{className:"notification-action-vip",children:[n.jsx("button",{className:"action-button-vip primary",onClick:n=>{n.stopPropagation(),e.groupId&&o(e.groupId)},children:"Pagar"}),n.jsx("button",{className:"action-button-vip secondary",onClick:n=>{n.stopPropagation(),t(e.id)},children:"Ignorar"})]})]})},b=e.lazy(()=>c(()=>import("./PaymentFlowModal-DDdg7Dq_.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(n=>({default:n.PaymentFlowModal}))),h=()=>{const c=i(),[f,h]=e.useState([]),[v,y]=e.useState("all"),[j,w]=e.useState(!1),[N,k]=e.useState(null),[F,P]=e.useState(null),[C,I]=e.useState(null);e.useEffect(()=>{if(!t.getCurrentUserEmail())return void c("/");const n=()=>{const n=o.getNotifications().map(n=>{var i,e,o;const a=t.getUserByHandle(n.username);return a?{...n,displayName:(null==(i=a.profile)?void 0:i.nickname)||(null==(e=a.profile)?void 0:e.name)||n.username,username:n.username,avatar:(null==(o=a.profile)?void 0:o.photoUrl)||n.avatar}:{...n,displayName:n.username}});h(n)};n(),o.markAllAsRead();const i=a.subscribe("notifications",n);return()=>i()},[c]);const _=async(n,i)=>{const e=l.isFollowing(i);"following"===e?await l.unfollowUser(i):await l.followUser(i),h(n=>n.map(n=>n.username===i?{...n,isFollowing:"following"!==e}:n))},S=async(n,i)=>{h(n=>n.filter(n=>n.id!==i.id));try{"friend"===i.subtype&&("accept"===n?await l.acceptFollowRequest(i.username):await l.rejectFollowRequest(i.username)),o.removeNotification(i.id)}catch(e){}},z=n=>{h(i=>i.filter(i=>i.id!==n)),o.removeNotification(n)},R=async n=>{const i=r.getGroupById(n);if(!i)return;k(i);const e=await s.detectCountry();P(e);const t=i.currency||"BRL",o=parseFloat(i.price||"0"),a=e.currency||"BRL",l=await p.convert(o,t,a);I(l),w(!0)},A=f.filter(n=>"all"===v||("pending"===v?"pending"===n.type||"expiring_vip"===n.type:n.type===v));return n.jsxs("div",{className:"h-[100dvh] bg-[radial-gradient(circle_at_top_left,_#0c0f14,_#0a0c10)] text-white font-['Inter'] flex flex-col overflow-hidden",children:[n.jsx(x,{}),n.jsx(m,{activeFilter:v,onFilterChange:y}),n.jsx("main",{className:"flex-grow flex flex-col items-center justify-start w-full mt-5 transition-all overflow-y-auto no-scrollbar",children:n.jsxs("div",{className:"w-full max-w-[600px] px-4 pt-[140px] pb-[120px]",children:[n.jsx("h2",{className:"text-2xl font-700 mb-5 text-[#00c2ff] border-b-2 border-[#00c2ff]/30 pb-2",children:"Notificações"}),0===A.length?n.jsxs("div",{style:{textAlign:"center",color:"#777",marginTop:"50px",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[n.jsx("i",{className:"fa-regular fa-bell-slash text-4xl opacity-50"}),n.jsx("span",{children:"Nenhuma notificação encontrada."})]}):A.map(i=>"expiring_vip"===i.type?n.jsx(u,{notif:i,onIgnore:z,onPay:R},i.id):n.jsx(g,{notif:i,onFollowToggle:_,onPendingAction:S,onNavigate:c},i.id))]})}),n.jsx(d,{}),n.jsx(e.Suspense,{fallback:null,children:j&&N&&n.jsx(b,{isOpen:j,onClose:()=>w(!1),group:N,provider:"BR"===(null==F?void 0:F.countryCode)?"syncpay":"stripe",convertedPriceInfo:C,geo:F})})]})};export{h as Notifications};
